<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>DOMäº‹ä»¶çš„æ€»ç»“ | Bablvsj's Blog</title><meta name=keywords content="JavaScript"><meta name=description content="DOMäº‹ä»¶çš„æ€»ç»“ - Bablvsj's Blog"><meta name=author content><link rel=canonical href=https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/dom%E4%BA%8B%E4%BB%B6%E7%9A%84%E6%80%BB%E7%BB%93/><link crossorigin=anonymous href=/assets/css/stylesheet.241265d51339977eb0f90d05780e286ec2789600ca4137f29552dec9dee06569.css integrity="sha256-JBJl1RM5l36w+Q0FeA4obsJ4lgDKQTfylVLeyd7gZWk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://bablvsj.github.io/img/Q.gif><link rel=apple-touch-icon href=https://bablvsj.github.io/Q.gif><link rel=mask-icon href=https://bablvsj.github.io/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=stylesheet href=/css/syntax.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="DOMäº‹ä»¶çš„æ€»ç»“"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/dom%E4%BA%8B%E4%BB%B6%E7%9A%84%E6%80%BB%E7%BB%93/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-01T17:11:35+08:00"><meta property="article:modified_time" content="2020-01-01T17:11:35+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="DOMäº‹ä»¶çš„æ€»ç»“"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"æ–‡ç« ","item":"https://bablvsj.github.io/posts/"},{"@type":"ListItem","position":3,"name":"DOMäº‹ä»¶çš„æ€»ç»“","item":"https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/dom%E4%BA%8B%E4%BB%B6%E7%9A%84%E6%80%BB%E7%BB%93/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"DOMäº‹ä»¶çš„æ€»ç»“","name":"DOMäº‹ä»¶çš„æ€»ç»“","description":"","keywords":["JavaScript"],"articleBody":"çŸ¥è¯†ç‚¹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\nåŸºæœ¬æ¦‚å¿µï¼šDOMäº‹ä»¶çš„çº§åˆ« é¢è¯•ä¸ä¼šç›´æ¥é—®ä½ ï¼ŒDOMæœ‰å‡ ä¸ªçº§åˆ«ã€‚ä½†ä¼šåœ¨é¢˜ç›®ä¸­ä½“ç°ï¼šâ€œè¯·ç”¨DOM2 â€¦.â€ã€‚\nDOMäº‹ä»¶æ¨¡å‹ã€DOMäº‹ä»¶æµ é¢è¯•å®˜å¦‚æœé—®ä½ â€œDOMäº‹ä»¶æ¨¡å‹â€ï¼Œä½ ä¸ä¸€å®šçŸ¥é“æ€ä¹ˆå›äº‹ã€‚å…¶å®è¯´çš„å°±æ˜¯æ•è·å’Œå†’æ³¡ã€‚\nDOMäº‹ä»¶æµï¼ŒæŒ‡çš„æ˜¯äº‹ä»¶ä¼ é€’çš„ä¸‰ä¸ªé˜¶æ®µã€‚\næè¿°DOMäº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹ è®²çš„æ˜¯äº‹ä»¶çš„ä¼ é€’é¡ºåºã€‚å‚æ•°ä¸ºfalseï¼ˆé»˜è®¤ï¼‰ã€å‚æ•°ä¸ºtrueï¼Œå„è‡ªä»£è¡¨äº‹ä»¶åœ¨ä»€ä¹ˆé˜¶æ®µè§¦å‘ã€‚\nèƒ½å›ç­”å‡ºæ¥çš„äººï¼Œå¯¥å¯¥æ— å‡ ã€‚ä¹Ÿè®¸æœ‰äº›äººå¯ä»¥è¯´å‡ºä¸€å¤§åŠï¼Œä½†æ˜¯ä¸€å­—ä¸è½çš„äººï¼Œæå°‘ã€‚\nEventå¯¹è±¡çš„å¸¸è§åº”ç”¨ï¼ˆEventçš„å¸¸ç”¨apiæ–¹æ³•ï¼‰ DOMäº‹ä»¶çš„çŸ¥è¯†ç‚¹ï¼Œä¸€æ–¹é¢åŒ…æ‹¬äº‹ä»¶çš„æµç¨‹ï¼›å¦ä¸€æ–¹é¢å°±æ˜¯ï¼šæ€ä¹ˆå»æ³¨å†Œäº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯ç›‘å¬ç”¨æˆ·çš„äº¤äº’è¡Œä¸ºã€‚ç¬¬ä¸‰ç‚¹ï¼šåœ¨å“åº”æ—¶ï¼ŒEventå¯¹è±¡æ˜¯éå¸¸é‡è¦çš„ã€‚\nè‡ªå®šä¹‰äº‹ä»¶ï¼ˆéå¸¸é‡è¦ï¼‰\nä¸€èˆ¬äººå¯ä»¥è®²å‡ºäº‹ä»¶å’Œæ³¨å†Œäº‹ä»¶ï¼Œä½†æ˜¯å¦‚æœè®©ä½ è®²è‡ªå®šä¹‰äº‹ä»¶ï¼Œèƒ½çŸ¥é“çš„äººï¼Œå°±æ›´å°‘äº†ã€‚\nDOMäº‹ä»¶çš„çº§åˆ«\nDOMäº‹ä»¶çš„çº§åˆ«ï¼Œå‡†ç¡®æ¥è¯´ï¼Œæ˜¯DOMæ ‡å‡†å®šä¹‰çš„çº§åˆ«ã€‚åŒ…æ‹¬ï¼š\nDOM0çš„å†™æ³•ï¼š\nelement.onclick = function () { } ä¸Šé¢çš„ä»£ç æ˜¯åœ¨ js ä¸­çš„å†™æ³•ï¼›å¦‚æœè¦åœ¨htmlä¸­å†™ï¼Œå†™æ³•æ˜¯ï¼šåœ¨onclickå±æ€§ä¸­ï¼ŒåŠ  js è¯­å¥ã€‚\nDOM2çš„å†™æ³•ï¼š\nelement.addEventListener('click', function () { }, false); ã€é‡è¦ã€‘ä¸Šé¢çš„ç¬¬ä¸‰å‚æ•°ä¸­ï¼Œtrueè¡¨ç¤ºäº‹ä»¶åœ¨æ•è·é˜¶æ®µè§¦å‘ï¼Œfalseè¡¨ç¤ºäº‹ä»¶åœ¨å†’æ³¡é˜¶æ®µè§¦å‘ï¼ˆé»˜è®¤ï¼‰ã€‚å¦‚æœä¸å†™ï¼Œåˆ™é»˜è®¤ä¸ºfalseã€‚\nDOM3çš„å†™æ³•ï¼š\nelement.addEventListener('keyup', function () { }, false); DOM3ä¸­ï¼Œå¢åŠ äº†å¾ˆå¤šäº‹ä»¶ç±»å‹ï¼Œæ¯”å¦‚é¼ æ ‡äº‹ä»¶ã€é”®ç›˜äº‹ä»¶ç­‰ã€‚\nPSï¼šä¸ºä½•äº‹ä»¶æ²¡æœ‰DOM1çš„å†™æ³•å‘¢ï¼Ÿå› ä¸ºï¼ŒDOM1æ ‡å‡†åˆ¶å®šçš„æ—¶å€™ï¼Œæ²¡æœ‰æ¶‰åŠä¸äº‹ä»¶ç›¸å…³çš„å†…å®¹ã€‚\næ€»ç»“ï¼šå…³äºâ€œDOMäº‹ä»¶çš„çº§åˆ«â€ï¼Œèƒ½å›ç­”å‡ºä»¥ä¸Šå†…å®¹å³å¯ï¼Œä¸ä¼šå‡ºé¢˜ç›®è®©ä½ åšã€‚\nDOMäº‹ä»¶æ¨¡å‹\nDOMäº‹ä»¶æ¨¡å‹è®²çš„å°±æ˜¯æ•è·å’Œå†’æ³¡ï¼Œä¸€èˆ¬äººéƒ½èƒ½å›ç­”å‡ºæ¥ã€‚\næ•è·ï¼šä»ä¸Šå¾€ä¸‹ã€‚ å†’æ³¡ï¼šä»ä¸‹ï¼ˆç›®æ ‡å…ƒç´ ï¼‰å¾€ä¸Šã€‚ DOMäº‹ä»¶æµ\nDOMäº‹ä»¶æµè®²çš„å°±æ˜¯ï¼šæµè§ˆå™¨åœ¨äºå½“å‰é¡µé¢åšäº¤äº’æ—¶ï¼Œè¿™ä¸ªäº‹ä»¶æ˜¯æ€ä¹ˆä¼ é€’åˆ°é¡µé¢ä¸Šçš„ã€‚\nå®Œæ•´çš„äº‹ä»¶æµï¼Œåˆ†ä¸‰ä¸ªé˜¶æ®µï¼š\næ•è·ï¼šä» window å¯¹è±¡ä¼ åˆ° ç›®æ ‡å…ƒç´ ã€‚ ç›®æ ‡é˜¶æ®µï¼šäº‹ä»¶é€šè¿‡æ•è·ï¼Œåˆ°è¾¾ç›®æ ‡å…ƒç´ ï¼Œè¿™ä¸ªé˜¶æ®µå°±æ˜¯ç›®æ ‡é˜¶æ®µã€‚ å†’æ³¡ï¼šä»ç›®æ ‡å…ƒç´ ä¼ åˆ° Window å¯¹è±¡ã€‚ æè¿°DOMäº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹\nå¾ˆå°‘æœ‰äººèƒ½è¯´å®Œæ•´ã€‚\næ•è·çš„æµç¨‹\nè¯´æ˜ï¼šæ•è·é˜¶æ®µï¼Œäº‹ä»¶ä¾æ¬¡ä¼ é€’çš„é¡ºåºæ˜¯ï¼šwindow â€“\u003e document â€“\u003e htmlâ€“\u003e body â€“\u003e çˆ¶å…ƒç´ ã€å­å…ƒç´ ã€ç›®æ ‡å…ƒç´ ã€‚\nPS1ï¼šç¬¬ä¸€ä¸ªæ¥æ”¶åˆ°äº‹ä»¶çš„å¯¹è±¡æ˜¯ windowï¼ˆæœ‰äººä¼šè¯´bodyï¼Œæœ‰äººä¼šè¯´htmlï¼Œè¿™éƒ½æ˜¯é”™è¯¯çš„ï¼‰ã€‚ PS2ï¼šJSä¸­æ¶‰åŠåˆ°DOMå¯¹è±¡æ—¶ï¼Œæœ‰ä¸¤ä¸ªå¯¹è±¡æœ€å¸¸ç”¨ï¼šwindowã€doucumentã€‚å®ƒä»¬ä¿©ä¹Ÿæ˜¯æœ€å…ˆè·å–åˆ°äº‹ä»¶çš„ã€‚ ä»£ç å¦‚ä¸‹ï¼š\nwindow.addEventListener(\"click\", function () { alert(\"æ•è· window\"); }, true); document.addEventListener(\"click\", function () { alert(\"æ•è· document\"); }, true); document.documentElement.addEventListener(\"click\", function () { alert(\"æ•è· html\"); }, true); document.body.addEventListener(\"click\", function () { alert(\"æ•è· body\"); }, true); fatherBox.addEventListener(\"click\", function () { alert(\"æ•è· father\"); }, true); childBox.addEventListener(\"click\", function () { alert(\"æ•è· child\"); }, true); è¡¥å……ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š\nåœ¨ jsä¸­ï¼š\nå¦‚æœæƒ³è·å– body èŠ‚ç‚¹ï¼Œæ–¹æ³•æ˜¯ï¼šdocument.bodyï¼› ä½†æ˜¯ï¼Œå¦‚æœæƒ³è·å– htmlèŠ‚ç‚¹ï¼Œæ–¹æ³•æ˜¯document.documentElementã€‚ å†’æ³¡çš„æµç¨‹\nä¸æ•è·çš„æµç¨‹ç›¸å\nEventå¯¹è±¡çš„å¸¸è§ api æ–¹æ³•\nç”¨æˆ·åšçš„æ˜¯ä»€ä¹ˆæ“ä½œï¼ˆæ¯”å¦‚ï¼Œæ˜¯æ•²é”®ç›˜äº†ï¼Œè¿˜æ˜¯ç‚¹å‡»é¼ æ ‡äº†ï¼‰ï¼Œè¿™äº›äº‹ä»¶åŸºæœ¬éƒ½æ˜¯é€šè¿‡Eventå¯¹è±¡æ‹¿åˆ°çš„ã€‚è¿™äº›éƒ½æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬å°±ä¸è®²äº†ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢è¿™å‡ ä¸ªæ–¹æ³•ï¼š\næ–¹æ³•ä¸€\nevent.preventDefault(); è§£é‡Šï¼šé˜»æ­¢é»˜è®¤äº‹ä»¶ã€‚ æ¯”å¦‚ï¼Œå·²çŸ¥æ ‡ç­¾ç»‘å®šäº†clickäº‹ä»¶ï¼Œæ­¤æ—¶ï¼Œå¦‚æœç»™è®¾ç½®äº†è¿™ä¸ªæ–¹æ³•ï¼Œå°±é˜»æ­¢äº†é“¾æ¥çš„é»˜è®¤è·³è½¬ã€‚ æ–¹æ³•äºŒï¼šé˜»æ­¢å†’æ³¡\nè¿™ä¸ªåœ¨ä¸šåŠ¡ä¸­å¾ˆå¸¸è§ã€‚\næœ‰çš„æ—¶å€™ï¼Œä¸šåŠ¡ä¸­ä¸éœ€è¦äº‹ä»¶è¿›è¡Œå†’æ³¡ã€‚æ¯”å¦‚è¯´ï¼Œä¸šåŠ¡è¿™æ ·è¦æ±‚ï¼šå•å‡»å­å…ƒç´ åšäº‹ä»¶Aï¼Œå•å‡»çˆ¶å…ƒç´ åšäº‹ä»¶Bï¼Œå¦‚æœä¸é˜»æ­¢å†’æ³¡çš„è¯ï¼Œå‡ºç°çš„é—®é¢˜æ˜¯ï¼šå•å‡»å­å…ƒç´ æ—¶ï¼Œå­å…ƒç´ å’Œçˆ¶å…ƒç´ éƒ½ä¼šåšäº‹ä»¶Aã€‚è¿™ä¸ªæ—¶å€™ï¼Œå°±è¦ç”¨åˆ°é˜»æ­¢å†’æ³¡äº†ã€‚\nw3cçš„æ–¹æ³•ï¼šï¼ˆç«ç‹ã€è°·æ­Œã€IE11ï¼‰\nevent.stopPropagation(); IE10ä»¥ä¸‹åˆ™æ˜¯ï¼š\nevent.cancelBubble = true; å…¼å®¹ä»£ç å¦‚ä¸‹ï¼š\nbox3.onclick = function (event) { alert(\"child\"); //é˜»æ­¢å†’æ³¡ event = event || window.event; if (event \u0026\u0026 event.stopPropagation) { event.stopPropagation(); } else { event.cancelBubble = true; } } ä¸Šæ–¹ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯¹box3è¿›è¡Œäº†é˜»æ­¢å†’æ³¡ï¼Œäº§ç”Ÿçš„æ•ˆæœæ˜¯ï¼šäº‹ä»¶ä¸ä¼šç»§ç»­ä¼ é€’åˆ° fatherã€grandfatherã€bodyäº†ã€‚\næ–¹æ³•ä¸‰ï¼šè®¾ç½®äº‹ä»¶ä¼˜å…ˆçº§\nevent.stopImmediatePropagation(); è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒé•¿ï¼Œä¸€èˆ¬äººæ²¡å¬è¯´è¿‡ã€‚è§£é‡Šå¦‚ä¸‹ï¼š\næ¯”å¦‚è¯´ï¼Œæˆ‘ç”¨addEventListenerç»™æŸæŒ‰é’®åŒæ—¶æ³¨å†Œäº†äº‹ä»¶Aã€äº‹ä»¶Bã€‚æ­¤æ—¶ï¼Œå¦‚æœæˆ‘å•å‡»æŒ‰é’®ï¼Œå°±ä¼šä¾æ¬¡æ‰§è¡Œäº‹ä»¶Aå’Œäº‹ä»¶Bã€‚ç°åœ¨è¦æ±‚ï¼šå•å‡»æŒ‰é’®æ—¶ï¼Œåªæ‰§è¡Œäº‹ä»¶Aï¼Œä¸æ‰§è¡Œäº‹ä»¶Bã€‚è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿè¿™æ˜¯æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨åˆ°stopImmediatePropagationæ–¹æ³•äº†ã€‚åšæ³•æ˜¯ï¼šåœ¨äº‹ä»¶Açš„å“åº”å‡½æ•°ä¸­åŠ å…¥è¿™å¥è¯ã€‚\nå¤§å®¶è¦è®°ä½ event æœ‰è¿™ä¸ªæ–¹æ³•ã€‚\nå±æ€§4ã€å±æ€§5ï¼ˆäº‹ä»¶å§”æ‰˜ä¸­ç”¨åˆ°ï¼‰\nevent.currentTarget //å½“å‰æ‰€ç»‘å®šçš„äº‹ä»¶å¯¹è±¡ã€‚åœ¨äº‹ä»¶å§”æ‰˜ä¸­ï¼ŒæŒ‡çš„æ˜¯ã€çˆ¶å…ƒç´ ã€‘ã€‚ event.target //å½“å‰è¢«ç‚¹å‡»çš„å…ƒç´ ã€‚åœ¨äº‹ä»¶å§”æ‰˜ä¸­ï¼ŒæŒ‡çš„æ˜¯ã€å­å…ƒç´ ã€‘ã€‚ ä¸Šé¢è¿™ä¸¤ä¸ªå±æ€§ï¼Œåœ¨äº‹ä»¶å§”æ‰˜ä¸­ç»å¸¸ç”¨åˆ°ã€‚\næ€»ç»“ï¼šä¸Šé¢è¿™å‡ é¡¹ï¼Œéå¸¸é‡è¦ï¼Œä½†æ˜¯å®¹æ˜“å¼„æ··æ·†ã€‚\nè‡ªå®šä¹‰äº‹ä»¶\nè‡ªå®šä¹‰äº‹ä»¶çš„ä»£ç å¦‚ä¸‹ï¼š\nvar myEvent = new Event('clickTest'); element.addEventListener('clickTest', function () { console.log('smyhvae'); }); //å…ƒç´ æ³¨å†Œäº‹ä»¶ element.dispatchEvent(myEvent); //æ³¨æ„ï¼Œå‚æ•°æ˜¯å†™äº‹ä»¶å¯¹è±¡ myEventï¼Œä¸æ˜¯å†™ äº‹ä»¶å clickTest ä¸Šé¢è¿™ä¸ªäº‹ä»¶æ˜¯å®šä¹‰å®Œäº†ä¹‹åï¼Œå°±ç›´æ¥è‡ªåŠ¨è§¦å‘äº†ã€‚åœ¨æ­£å¸¸çš„ä¸šåŠ¡ä¸­ï¼Œè¿™ä¸ªäº‹ä»¶ä¸€èˆ¬æ˜¯å’Œåˆ«çš„äº‹ä»¶ç»“åˆç”¨çš„ã€‚æ¯”å¦‚å»¶æ—¶å™¨è®¾ç½®æŒ‰é’®çš„åŠ¨ä½œï¼š\nvar myEvent = new Event('clickTest'); element.addEventListener('clickTest', function () { console.log('smyhvae'); }); setTimeout(function () { element.dispatchEvent(myEvent); //æ³¨æ„ï¼Œå‚æ•°æ˜¯å†™äº‹ä»¶å¯¹è±¡ myEventï¼Œä¸æ˜¯å†™ äº‹ä»¶å clickTest }, 1000); ","wordCount":"2166","inLanguage":"en","datePublished":"2020-01-01T17:11:35+08:00","dateModified":"2020-01-01T17:11:35+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/dom%E4%BA%8B%E4%BB%B6%E7%9A%84%E6%80%BB%E7%BB%93/"},"publisher":{"@type":"Organization","name":"Bablvsj's Blog","logo":{"@type":"ImageObject","url":"https://bablvsj.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bablvsj.github.io accesskey=h title="Bablvsj's Blog (Alt + H)">Bablvsj's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bablvsj.github.io/ title=ä¸»é¡µ><span>ä¸»é¡µ</span></a></li><li><a href=https://bablvsj.github.io/archives/ title=æ—¶é—´è½´><span>æ—¶é—´è½´</span></a></li><li><a href=https://bablvsj.github.io/tags title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://bablvsj.github.io/about title=å…³äº><span>å…³äº</span></a></li><li><a href=https://bablvsj.github.io/search title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>DOMäº‹ä»¶çš„æ€»ç»“</h1><div class=post-meta><div class=post-tags-meta><a href=https://bablvsj.github.io/tags/javascript/>JavaScript</a></div>5 min&nbsp;Â·&nbsp;<span title='2020-01-01 17:11:35 +0800 +0800'>2020/01/01</span></div></header><div class=post-content><p><strong>çŸ¥è¯†ç‚¹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</strong></p><ul><li>åŸºæœ¬æ¦‚å¿µï¼š<code>DOM</code>äº‹ä»¶çš„çº§åˆ«</li></ul><blockquote><p>é¢è¯•ä¸ä¼šç›´æ¥é—®ä½ ï¼ŒDOMæœ‰å‡ ä¸ªçº§åˆ«ã€‚ä½†ä¼šåœ¨é¢˜ç›®ä¸­ä½“ç°ï¼šâ€œè¯·ç”¨<code>DOM2</code> &mldr;.â€ã€‚</p></blockquote><ul><li><code>DOM</code>äº‹ä»¶æ¨¡å‹ã€<code>DOM</code>äº‹ä»¶æµ</li></ul><blockquote><p>é¢è¯•å®˜å¦‚æœé—®ä½ â€œ<strong>DOMäº‹ä»¶æ¨¡å‹</strong>â€ï¼Œä½ ä¸ä¸€å®šçŸ¥é“æ€ä¹ˆå›äº‹ã€‚å…¶å®è¯´çš„å°±æ˜¯<strong>æ•è·å’Œå†’æ³¡</strong>ã€‚</p></blockquote><p><strong>DOMäº‹ä»¶æµ</strong>ï¼ŒæŒ‡çš„æ˜¯äº‹ä»¶ä¼ é€’çš„<strong>ä¸‰ä¸ªé˜¶æ®µ</strong>ã€‚</p><ul><li>æè¿°<code>DOM</code>äº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹</li></ul><blockquote><p>è®²çš„æ˜¯äº‹ä»¶çš„ä¼ é€’é¡ºåºã€‚å‚æ•°ä¸º<code>false</code>ï¼ˆé»˜è®¤ï¼‰ã€å‚æ•°ä¸º<code>true</code>ï¼Œå„è‡ªä»£è¡¨äº‹ä»¶åœ¨ä»€ä¹ˆé˜¶æ®µè§¦å‘ã€‚</p></blockquote><p>èƒ½å›ç­”å‡ºæ¥çš„äººï¼Œå¯¥å¯¥æ— å‡ ã€‚ä¹Ÿè®¸æœ‰äº›äººå¯ä»¥è¯´å‡ºä¸€å¤§åŠï¼Œä½†æ˜¯ä¸€å­—ä¸è½çš„äººï¼Œæå°‘ã€‚</p><ul><li><code>Event</code>å¯¹è±¡çš„å¸¸è§åº”ç”¨ï¼ˆ<code>Event</code>çš„å¸¸ç”¨<code>api</code>æ–¹æ³•ï¼‰</li></ul><blockquote><p><code>DOM</code>äº‹ä»¶çš„çŸ¥è¯†ç‚¹ï¼Œä¸€æ–¹é¢åŒ…æ‹¬äº‹ä»¶çš„æµç¨‹ï¼›å¦ä¸€æ–¹é¢å°±æ˜¯ï¼šæ€ä¹ˆå»æ³¨å†Œäº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯ç›‘å¬ç”¨æˆ·çš„äº¤äº’è¡Œä¸ºã€‚ç¬¬ä¸‰ç‚¹ï¼šåœ¨å“åº”æ—¶ï¼Œ<code>Event</code>å¯¹è±¡æ˜¯éå¸¸é‡è¦çš„ã€‚</p></blockquote><p><strong>è‡ªå®šä¹‰äº‹ä»¶ï¼ˆéå¸¸é‡è¦ï¼‰</strong></p><blockquote><p>ä¸€èˆ¬äººå¯ä»¥è®²å‡ºäº‹ä»¶å’Œæ³¨å†Œäº‹ä»¶ï¼Œä½†æ˜¯å¦‚æœè®©ä½ è®²<strong>è‡ªå®šä¹‰äº‹ä»¶</strong>ï¼Œèƒ½çŸ¥é“çš„äººï¼Œå°±æ›´å°‘äº†ã€‚</p></blockquote><p><strong>DOMäº‹ä»¶çš„çº§åˆ«</strong></p><blockquote><p><code>DOM</code>äº‹ä»¶çš„çº§åˆ«ï¼Œå‡†ç¡®æ¥è¯´ï¼Œæ˜¯<strong>DOMæ ‡å‡†</strong>å®šä¹‰çš„çº§åˆ«ã€‚åŒ…æ‹¬ï¼š</p></blockquote><p><strong>DOM0çš„å†™æ³•ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>  element.onclick <span style=color:#af3a03>=</span> <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><blockquote><p>ä¸Šé¢çš„ä»£ç æ˜¯åœ¨ <code>js</code> ä¸­çš„å†™æ³•ï¼›å¦‚æœè¦åœ¨<code>html</code>ä¸­å†™ï¼Œå†™æ³•æ˜¯ï¼šåœ¨<code>onclick</code>å±æ€§ä¸­ï¼ŒåŠ  <code>js</code> è¯­å¥ã€‚</p></blockquote><p><strong>DOM2çš„å†™æ³•ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>  element.addEventListener(<span style=color:#79740e>&#39;click&#39;</span>, <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  }, <span style=color:#af3a03>false</span>);
</span></span></code></pre></div><blockquote><p>ã€é‡è¦ã€‘ä¸Šé¢çš„ç¬¬ä¸‰å‚æ•°ä¸­ï¼Œ<strong>true</strong>è¡¨ç¤ºäº‹ä»¶åœ¨<strong>æ•è·é˜¶æ®µ</strong>è§¦å‘ï¼Œ<strong>false</strong>è¡¨ç¤ºäº‹ä»¶åœ¨<strong>å†’æ³¡é˜¶æ®µ</strong>è§¦å‘ï¼ˆé»˜è®¤ï¼‰ã€‚å¦‚æœä¸å†™ï¼Œåˆ™é»˜è®¤ä¸ºfalseã€‚</p></blockquote><p><strong>DOM3çš„å†™æ³•ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>    element.addEventListener(<span style=color:#79740e>&#39;keyup&#39;</span>, <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }, <span style=color:#af3a03>false</span>);
</span></span></code></pre></div><blockquote><p><code>DOM3</code>ä¸­ï¼Œå¢åŠ äº†å¾ˆå¤šäº‹ä»¶ç±»å‹ï¼Œæ¯”å¦‚é¼ æ ‡äº‹ä»¶ã€é”®ç›˜äº‹ä»¶ç­‰ã€‚</p></blockquote><blockquote><p>PSï¼šä¸ºä½•äº‹ä»¶æ²¡æœ‰<code>DOM1</code>çš„å†™æ³•å‘¢ï¼Ÿå› ä¸ºï¼Œ<code>DOM1</code>æ ‡å‡†åˆ¶å®šçš„æ—¶å€™ï¼Œæ²¡æœ‰æ¶‰åŠä¸äº‹ä»¶ç›¸å…³çš„å†…å®¹ã€‚</p></blockquote><p><strong>æ€»ç»“</strong>ï¼šå…³äºâ€œDOMäº‹ä»¶çš„çº§åˆ«â€ï¼Œèƒ½å›ç­”å‡ºä»¥ä¸Šå†…å®¹å³å¯ï¼Œä¸ä¼šå‡ºé¢˜ç›®è®©ä½ åšã€‚</p><p><strong>DOMäº‹ä»¶æ¨¡å‹</strong></p><blockquote><p><code>DOM</code>äº‹ä»¶æ¨¡å‹è®²çš„å°±æ˜¯<strong>æ•è·å’Œå†’æ³¡</strong>ï¼Œä¸€èˆ¬äººéƒ½èƒ½å›ç­”å‡ºæ¥ã€‚</p></blockquote><ul><li>æ•è·ï¼šä»ä¸Šå¾€ä¸‹ã€‚</li><li>å†’æ³¡ï¼šä»ä¸‹ï¼ˆç›®æ ‡å…ƒç´ ï¼‰å¾€ä¸Šã€‚</li></ul><p><strong>DOMäº‹ä»¶æµ</strong></p><blockquote><p><code>DOM</code>äº‹ä»¶æµè®²çš„å°±æ˜¯ï¼šæµè§ˆå™¨åœ¨äºå½“å‰é¡µé¢åšäº¤äº’æ—¶ï¼Œè¿™ä¸ªäº‹ä»¶æ˜¯æ€ä¹ˆä¼ é€’åˆ°é¡µé¢ä¸Šçš„ã€‚</p></blockquote><p><strong>å®Œæ•´çš„äº‹ä»¶æµï¼Œåˆ†ä¸‰ä¸ªé˜¶æ®µï¼š</strong></p><ol><li>æ•è·ï¼šä» <code>window</code> å¯¹è±¡ä¼ åˆ° ç›®æ ‡å…ƒç´ ã€‚</li><li>ç›®æ ‡é˜¶æ®µï¼šäº‹ä»¶é€šè¿‡æ•è·ï¼Œåˆ°è¾¾ç›®æ ‡å…ƒç´ ï¼Œè¿™ä¸ªé˜¶æ®µå°±æ˜¯ç›®æ ‡é˜¶æ®µã€‚</li><li>å†’æ³¡ï¼šä»<strong>ç›®æ ‡å…ƒç´ </strong>ä¼ åˆ° <code>Window</code> å¯¹è±¡ã€‚</li></ol><p><img loading=lazy src=http://img.smyhvae.com/20180306_1058.png alt></p><p><img loading=lazy src=http://img.smyhvae.com/20180204_1218.jpg alt></p><p><strong>æè¿°DOMäº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹</strong></p><blockquote><p>å¾ˆå°‘æœ‰äººèƒ½è¯´å®Œæ•´ã€‚</p></blockquote><p><strong>æ•è·çš„æµç¨‹</strong></p><p><img loading=lazy src=http://img.smyhvae.com/20180306_1103.png alt></p><p><strong>è¯´æ˜</strong>ï¼šæ•è·é˜¶æ®µï¼Œäº‹ä»¶ä¾æ¬¡ä¼ é€’çš„é¡ºåºæ˜¯ï¼š<code>window</code> &ndash;> <code>document</code> &ndash;> <code>html</code>&ndash;> <code>body</code> &ndash;> çˆ¶å…ƒç´ ã€å­å…ƒç´ ã€ç›®æ ‡å…ƒç´ ã€‚</p><ul><li>PS1ï¼šç¬¬ä¸€ä¸ªæ¥æ”¶åˆ°äº‹ä»¶çš„å¯¹è±¡æ˜¯ <strong>window</strong>ï¼ˆæœ‰äººä¼šè¯´<code>body</code>ï¼Œæœ‰äººä¼šè¯´<code>html</code>ï¼Œè¿™éƒ½æ˜¯é”™è¯¯çš„ï¼‰ã€‚</li><li>PS2ï¼š<code>JS</code>ä¸­æ¶‰åŠåˆ°<code>DOM</code>å¯¹è±¡æ—¶ï¼Œæœ‰ä¸¤ä¸ªå¯¹è±¡æœ€å¸¸ç”¨ï¼š<code>window</code>ã€<code>doucument</code>ã€‚å®ƒä»¬ä¿©ä¹Ÿæ˜¯æœ€å…ˆè·å–åˆ°äº‹ä»¶çš„ã€‚</li></ul><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>    <span style=color:#b57614>window</span>.addEventListener(<span style=color:#79740e>&#34;click&#34;</span>, <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        alert(<span style=color:#79740e>&#34;æ•è· window&#34;</span>);
</span></span><span style=display:flex><span>    }, <span style=color:#af3a03>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#b57614>document</span>.addEventListener(<span style=color:#79740e>&#34;click&#34;</span>, <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        alert(<span style=color:#79740e>&#34;æ•è· document&#34;</span>);
</span></span><span style=display:flex><span>    }, <span style=color:#af3a03>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#b57614>document</span>.documentElement.addEventListener(<span style=color:#79740e>&#34;click&#34;</span>, <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        alert(<span style=color:#79740e>&#34;æ•è· html&#34;</span>);
</span></span><span style=display:flex><span>    }, <span style=color:#af3a03>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#b57614>document</span>.body.addEventListener(<span style=color:#79740e>&#34;click&#34;</span>, <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        alert(<span style=color:#79740e>&#34;æ•è· body&#34;</span>);
</span></span><span style=display:flex><span>    }, <span style=color:#af3a03>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    fatherBox.addEventListener(<span style=color:#79740e>&#34;click&#34;</span>, <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        alert(<span style=color:#79740e>&#34;æ•è· father&#34;</span>);
</span></span><span style=display:flex><span>    }, <span style=color:#af3a03>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    childBox.addEventListener(<span style=color:#79740e>&#34;click&#34;</span>, <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        alert(<span style=color:#79740e>&#34;æ•è· child&#34;</span>);
</span></span><span style=display:flex><span>    }, <span style=color:#af3a03>true</span>);
</span></span></code></pre></div><p><strong>è¡¥å……ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š</strong></p><blockquote><p>åœ¨ <code>js</code>ä¸­ï¼š</p></blockquote><ul><li>å¦‚æœæƒ³è·å– <code>body</code> èŠ‚ç‚¹ï¼Œæ–¹æ³•æ˜¯ï¼š<code>document.body</code>ï¼›</li><li>ä½†æ˜¯ï¼Œå¦‚æœæƒ³è·å– <code>html</code>èŠ‚ç‚¹ï¼Œæ–¹æ³•æ˜¯<code>document.documentElement</code>ã€‚</li></ul><p><strong>å†’æ³¡çš„æµç¨‹</strong></p><blockquote><p>ä¸æ•è·çš„æµç¨‹ç›¸å</p></blockquote><p><strong>Eventå¯¹è±¡çš„å¸¸è§ api æ–¹æ³•</strong></p><blockquote><p>ç”¨æˆ·åšçš„æ˜¯ä»€ä¹ˆæ“ä½œï¼ˆæ¯”å¦‚ï¼Œæ˜¯æ•²é”®ç›˜äº†ï¼Œè¿˜æ˜¯ç‚¹å‡»é¼ æ ‡äº†ï¼‰ï¼Œè¿™äº›äº‹ä»¶åŸºæœ¬éƒ½æ˜¯é€šè¿‡<code>Event</code>å¯¹è±¡æ‹¿åˆ°çš„ã€‚è¿™äº›éƒ½æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬å°±ä¸è®²äº†ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢è¿™å‡ ä¸ªæ–¹æ³•ï¼š</p></blockquote><p><strong>æ–¹æ³•ä¸€</strong></p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>    event.preventDefault();
</span></span></code></pre></div><ul><li>è§£é‡Šï¼šé˜»æ­¢é»˜è®¤äº‹ä»¶ã€‚</li><li>æ¯”å¦‚ï¼Œå·²çŸ¥<code>&lt;a></code>æ ‡ç­¾ç»‘å®šäº†clickäº‹ä»¶ï¼Œæ­¤æ—¶ï¼Œå¦‚æœç»™<code>&lt;a></code>è®¾ç½®äº†è¿™ä¸ªæ–¹æ³•ï¼Œå°±é˜»æ­¢äº†é“¾æ¥çš„é»˜è®¤è·³è½¬ã€‚</li></ul><p><strong>æ–¹æ³•äºŒï¼šé˜»æ­¢å†’æ³¡</strong></p><blockquote><p>è¿™ä¸ªåœ¨ä¸šåŠ¡ä¸­å¾ˆå¸¸è§ã€‚</p></blockquote><blockquote><p>æœ‰çš„æ—¶å€™ï¼Œä¸šåŠ¡ä¸­ä¸éœ€è¦äº‹ä»¶è¿›è¡Œå†’æ³¡ã€‚æ¯”å¦‚è¯´ï¼Œä¸šåŠ¡è¿™æ ·è¦æ±‚ï¼šå•å‡»å­å…ƒç´ åšäº‹ä»¶<code>A</code>ï¼Œå•å‡»çˆ¶å…ƒç´ åšäº‹ä»¶Bï¼Œå¦‚æœä¸é˜»æ­¢å†’æ³¡çš„è¯ï¼Œå‡ºç°çš„é—®é¢˜æ˜¯ï¼šå•å‡»å­å…ƒç´ æ—¶ï¼Œå­å…ƒç´ å’Œçˆ¶å…ƒç´ éƒ½ä¼šåšäº‹ä»¶<code>A</code>ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå°±è¦ç”¨åˆ°é˜»æ­¢å†’æ³¡äº†ã€‚</p></blockquote><blockquote><p><code>w3c</code>çš„æ–¹æ³•ï¼šï¼ˆç«ç‹ã€è°·æ­Œã€<code>IE11</code>ï¼‰</p></blockquote><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>    event.stopPropagation();
</span></span></code></pre></div><blockquote><p><code>IE10</code>ä»¥ä¸‹åˆ™æ˜¯ï¼š</p></blockquote><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>	event.cancelBubble <span style=color:#af3a03>=</span> <span style=color:#af3a03>true</span>;
</span></span></code></pre></div><blockquote><p>å…¼å®¹ä»£ç å¦‚ä¸‹ï¼š</p></blockquote><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>   box3.onclick <span style=color:#af3a03>=</span> <span style=color:#af3a03>function</span> (event) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        alert(<span style=color:#79740e>&#34;child&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>//é˜»æ­¢å†’æ³¡
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        event <span style=color:#af3a03>=</span> event <span style=color:#af3a03>||</span> <span style=color:#b57614>window</span>.event;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#af3a03>if</span> (event <span style=color:#af3a03>&amp;&amp;</span> event.stopPropagation) {
</span></span><span style=display:flex><span>            event.stopPropagation();
</span></span><span style=display:flex><span>        } <span style=color:#af3a03>else</span> {
</span></span><span style=display:flex><span>            event.cancelBubble <span style=color:#af3a03>=</span> <span style=color:#af3a03>true</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><blockquote><p>ä¸Šæ–¹ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯¹<code>box3</code>è¿›è¡Œäº†é˜»æ­¢å†’æ³¡ï¼Œäº§ç”Ÿçš„æ•ˆæœæ˜¯ï¼šäº‹ä»¶ä¸ä¼šç»§ç»­ä¼ é€’åˆ° <code>father</code>ã€<code>grandfather</code>ã€<code>body</code>äº†ã€‚</p></blockquote><p><strong>æ–¹æ³•ä¸‰ï¼šè®¾ç½®äº‹ä»¶ä¼˜å…ˆçº§</strong></p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>    event.stopImmediatePropagation();
</span></span></code></pre></div><p>è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒé•¿ï¼Œä¸€èˆ¬äººæ²¡å¬è¯´è¿‡ã€‚è§£é‡Šå¦‚ä¸‹ï¼š</p><blockquote><p>æ¯”å¦‚è¯´ï¼Œæˆ‘ç”¨<code>addEventListener</code>ç»™æŸæŒ‰é’®åŒæ—¶æ³¨å†Œäº†äº‹ä»¶<code>A</code>ã€äº‹ä»¶<code>B</code>ã€‚æ­¤æ—¶ï¼Œå¦‚æœæˆ‘å•å‡»æŒ‰é’®ï¼Œå°±ä¼šä¾æ¬¡æ‰§è¡Œäº‹ä»¶Aå’Œäº‹ä»¶<code>B</code>ã€‚ç°åœ¨è¦æ±‚ï¼šå•å‡»æŒ‰é’®æ—¶ï¼Œåªæ‰§è¡Œäº‹ä»¶Aï¼Œä¸æ‰§è¡Œäº‹ä»¶<code>B</code>ã€‚è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿè¿™æ˜¯æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨åˆ°<code>stopImmediatePropagation</code>æ–¹æ³•äº†ã€‚åšæ³•æ˜¯ï¼šåœ¨äº‹ä»¶Açš„å“åº”å‡½æ•°ä¸­åŠ å…¥è¿™å¥è¯ã€‚</p></blockquote><blockquote><p>å¤§å®¶è¦è®°ä½ <code>event</code> æœ‰è¿™ä¸ªæ–¹æ³•ã€‚</p></blockquote><p><strong>å±æ€§4ã€å±æ€§5ï¼ˆäº‹ä»¶å§”æ‰˜ä¸­ç”¨åˆ°ï¼‰</strong></p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>
</span></span><span style=display:flex><span>    event.currentTarget   <span style=color:#928374;font-style:italic>//å½“å‰æ‰€ç»‘å®šçš„äº‹ä»¶å¯¹è±¡ã€‚åœ¨äº‹ä»¶å§”æ‰˜ä¸­ï¼ŒæŒ‡çš„æ˜¯ã€çˆ¶å…ƒç´ ã€‘ã€‚
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>    event.target  <span style=color:#928374;font-style:italic>//å½“å‰è¢«ç‚¹å‡»çš„å…ƒç´ ã€‚åœ¨äº‹ä»¶å§”æ‰˜ä¸­ï¼ŒæŒ‡çš„æ˜¯ã€å­å…ƒç´ ã€‘ã€‚
</span></span></span></code></pre></div><p>ä¸Šé¢è¿™ä¸¤ä¸ªå±æ€§ï¼Œåœ¨äº‹ä»¶å§”æ‰˜ä¸­ç»å¸¸ç”¨åˆ°ã€‚</p><blockquote><p><strong>æ€»ç»“</strong>ï¼šä¸Šé¢è¿™å‡ é¡¹ï¼Œéå¸¸é‡è¦ï¼Œä½†æ˜¯å®¹æ˜“å¼„æ··æ·†ã€‚</p></blockquote><p><strong>è‡ªå®šä¹‰äº‹ä»¶</strong></p><blockquote><p>è‡ªå®šä¹‰äº‹ä»¶çš„ä»£ç å¦‚ä¸‹ï¼š</p></blockquote><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>    <span style=color:#af3a03>var</span> myEvent <span style=color:#af3a03>=</span> <span style=color:#af3a03>new</span> Event(<span style=color:#79740e>&#39;clickTest&#39;</span>);
</span></span><span style=display:flex><span>    element.addEventListener(<span style=color:#79740e>&#39;clickTest&#39;</span>, <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        console.log(<span style=color:#79740e>&#39;smyhvae&#39;</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#928374;font-style:italic>//å…ƒç´ æ³¨å†Œäº‹ä»¶
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    element.dispatchEvent(myEvent); <span style=color:#928374;font-style:italic>//æ³¨æ„ï¼Œå‚æ•°æ˜¯å†™äº‹ä»¶å¯¹è±¡ myEventï¼Œä¸æ˜¯å†™ äº‹ä»¶å clickTest
</span></span></span></code></pre></div><blockquote><p>ä¸Šé¢è¿™ä¸ªäº‹ä»¶æ˜¯å®šä¹‰å®Œäº†ä¹‹åï¼Œå°±ç›´æ¥è‡ªåŠ¨è§¦å‘äº†ã€‚åœ¨æ­£å¸¸çš„ä¸šåŠ¡ä¸­ï¼Œè¿™ä¸ªäº‹ä»¶ä¸€èˆ¬æ˜¯å’Œåˆ«çš„äº‹ä»¶ç»“åˆç”¨çš„ã€‚æ¯”å¦‚å»¶æ—¶å™¨è®¾ç½®æŒ‰é’®çš„åŠ¨ä½œï¼š</p></blockquote><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>    <span style=color:#af3a03>var</span> myEvent <span style=color:#af3a03>=</span> <span style=color:#af3a03>new</span> Event(<span style=color:#79740e>&#39;clickTest&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    element.addEventListener(<span style=color:#79740e>&#39;clickTest&#39;</span>, <span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        console.log(<span style=color:#79740e>&#39;smyhvae&#39;</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    setTimeout(<span style=color:#af3a03>function</span> () {
</span></span><span style=display:flex><span>        element.dispatchEvent(myEvent); <span style=color:#928374;font-style:italic>//æ³¨æ„ï¼Œå‚æ•°æ˜¯å†™äº‹ä»¶å¯¹è±¡ myEventï¼Œä¸æ˜¯å†™ äº‹ä»¶å clickTest
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>    }, <span style=color:#8f3f71>1000</span>);
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://bablvsj.github.io/tags/javascript/>JavaScript</a></li></ul><nav class=paginav><a class=prev href=https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/data-structure/><span class=title>Â« Prev</span><br><span>data-structure</span></a>
<a class=next href=https://bablvsj.github.io/posts/tech/wait/10-node.js%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93/es6/><span class=title>Next Â»</span><br><span>ES6</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bablvsj.github.io>Bablvsj's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div class=flex-c-d><a class=flex-d-c href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank><span>æœ¬ç«™ç”±</span><img width=60 src=/images/upyun.png>æä¾›CDNåŠ é€Ÿ/äº‘å­˜å‚¨æœåŠ¡</a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>