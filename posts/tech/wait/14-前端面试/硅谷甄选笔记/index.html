<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>æµè§ˆå™¨ | Bablvsj&#39;s Blog</title>
<meta name="keywords" content="é¢è¯•é¢˜é›†">
<meta name="description" content="æµè§ˆå™¨ - Bablvsj&#39;s Blog">
<meta name="author" content="">
<link rel="canonical" href="https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E7%A1%85%E8%B0%B7%E7%94%84%E9%80%89%E7%AC%94%E8%AE%B0/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5525cc669fcb4f094a55bfc3ebfc5a6e73445e090010c66ab49c2cad14735f57.css" integrity="sha256-VSXMZp/LTwlKVb/D6/xabnNEXgkAEMZqtJwsrRRzX1c=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://bablvsj.github.io/img/Q.gif">
<link rel="icon" type="image/png" sizes="16x16" href="https://bablvsj.github.io/img/Q.gif">
<link rel="icon" type="image/png" sizes="32x32" href="https://bablvsj.github.io/img/Q.gif">
<link rel="apple-touch-icon" href="https://bablvsj.github.io/Q.gif">
<link rel="mask-icon" href="https://bablvsj.github.io/Q.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="stylesheet" href="/css/syntax.css">


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="æµè§ˆå™¨" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E7%A1%85%E8%B0%B7%E7%94%84%E9%80%89%E7%AC%94%E8%AE%B0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-01-01T17:11:35+08:00" />
<meta property="article:modified_time" content="2020-01-01T17:11:35+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="æµè§ˆå™¨"/>
<meta name="twitter:description" content=""/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "æ–‡ç« ",
      "item": "https://bablvsj.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "æµè§ˆå™¨",
      "item": "https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E7%A1%85%E8%B0%B7%E7%94%84%E9%80%89%E7%AC%94%E8%AE%B0/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "æµè§ˆå™¨",
  "name": "æµè§ˆå™¨",
  "description": "",
  "keywords": [
    "é¢è¯•é¢˜é›†"
  ],
  "articleBody": "ç¡…è°·ç”„é€‰ æŠ€æœ¯æ ˆåŒ…å«: vue3+TypeScript+vue-router+pinia+element-plus+axios+echarts ç­‰æŠ€æœ¯æ ˆã€‚\nä¸€ã€vue3 ç»„ä»¶é€šä¿¡æ–¹å¼ é€šä¿¡ä»“åº“åœ°å€: https://gitee.com/jch1011/vue3_communication.git\nä¸ç®¡æ˜¯ vue2 è¿˜æ˜¯ vue3,ç»„ä»¶é€šä¿¡æ–¹å¼å¾ˆé‡è¦,ä¸ç®¡æ˜¯é¡¹ç›®è¿˜æ˜¯é¢è¯•éƒ½æ˜¯ç»å¸¸ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ã€‚ æ¯”å¦‚:vue2 ç»„ä»¶é€šä¿¡æ–¹å¼\nprops: å¯ä»¥å®ç°çˆ¶å­ç»„ä»¶ã€å­çˆ¶ç»„ä»¶ã€ç”šè‡³å…„å¼Ÿç»„ä»¶é€šä¿¡ è‡ªå®šä¹‰äº‹ä»¶: å¯ä»¥å®ç°å­çˆ¶ç»„ä»¶é€šä¿¡ å…¨å±€äº‹ä»¶æ€»çº¿$bus: å¯ä»¥å®ç°ä»»æ„ç»„ä»¶é€šä¿¡ pubsub: å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°ä»»æ„ç»„ä»¶é€šä¿¡ vuex: é›†ä¸­å¼çŠ¶æ€ç®¡ç†å®¹å™¨ï¼Œå®ç°ä»»æ„ç»„ä»¶é€šä¿¡ ref: çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å®ä¾‹ VC,è·å–å­ç»„ä»¶çš„å“åº”å¼æ•°æ®ä»¥åŠæ–¹æ³• slot: æ’æ§½(é»˜è®¤æ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½)å®ç°çˆ¶å­ç»„ä»¶é€šä¿¡â€¦â€¦.. 1.1 props props å¯ä»¥å®ç°çˆ¶å­ç»„ä»¶é€šä¿¡,åœ¨ vue3 ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ defineProps è·å–çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®ã€‚ä¸”åœ¨ç»„ä»¶å†…éƒ¨ä¸éœ€è¦å¼•å…¥ defineProps æ–¹æ³•å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼\nçˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ®\n\u003cChild info=\"æˆ‘çˆ±ç¥–å›½\" :money=\"money\"\u003e\u003c/Child\u003e å­ç»„ä»¶è·å–çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®:æ–¹å¼ 1\nlet props = defineProps({ info: { type: String, //æ¥å—çš„æ•°æ®ç±»å‹ default: 'é»˜è®¤å‚æ•°', //æ¥å—é»˜è®¤æ•°æ® }, money: { type: Number, default: 0, }, }) å­ç»„ä»¶è·å–çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®:æ–¹å¼ 2\nlet props = defineProps(['info', 'money']) å­ç»„ä»¶è·å–åˆ° props æ•°æ®å°±å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨äº†,ä½†æ˜¯åˆ‡è®° props æ˜¯åªè¯»çš„(åªèƒ½è¯»å–ï¼Œä¸èƒ½ä¿®æ”¹)\n1.2 è‡ªå®šä¹‰äº‹ä»¶ åœ¨ vue æ¡†æ¶ä¸­äº‹ä»¶åˆ†ä¸ºä¸¤ç§:ä¸€ç§æ˜¯åŸç”Ÿçš„ DOM äº‹ä»¶ï¼Œå¦å¤–ä¸€ç§è‡ªå®šä¹‰äº‹ä»¶ã€‚\nåŸç”Ÿ DOM äº‹ä»¶å¯ä»¥è®©ç”¨æˆ·ä¸ç½‘é¡µè¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚ clickã€dbclickã€changeã€mouseenterã€mouseleaveâ€¦.\nè‡ªå®šä¹‰äº‹ä»¶å¯ä»¥å®ç°å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®\n1.2.1 åŸç”Ÿ DOM äº‹ä»¶ ä»£ç å¦‚ä¸‹:\n\u003cpre @click=\"handler\"\u003e æˆ‘æ˜¯ç¥–å›½çš„è€èŠ±éª¨æœµ \u003c/pre \u003e å½“å‰ä»£ç çº§ç»™ pre æ ‡ç­¾ç»‘å®šåŸç”Ÿ DOM äº‹ä»¶ç‚¹å‡»äº‹ä»¶,é»˜è®¤ä¼šç»™äº‹ä»¶å›è°ƒæ³¨å…¥ event äº‹ä»¶å¯¹è±¡ã€‚å½“ç„¶ç‚¹å‡»äº‹ä»¶æƒ³æ³¨å…¥å¤šä¸ªå‚æ•°å¯ä»¥æŒ‰ç…§ä¸‹å›¾æ“ä½œã€‚ä½†æ˜¯åˆ‡è®°æ³¨å…¥çš„äº‹ä»¶å¯¹è±¡åŠ¡å¿…å«åš$event.\n\u003cdiv @click=\"handler1(1,2,3,$event)\"\u003eæˆ‘è¦ä¼ é€’å¤šä¸ªå‚æ•°\u003c/div\u003e åœ¨ vue3 æ¡†æ¶ clickã€dbclickã€change(è¿™ç±»åŸç”Ÿ DOM äº‹ä»¶),ä¸ç®¡æ˜¯åœ¨æ ‡ç­¾ã€è‡ªå®šä¹‰æ ‡ç­¾ä¸Š(ç»„ä»¶æ ‡ç­¾)éƒ½æ˜¯åŸç”Ÿ DOM äº‹ä»¶ã€‚\n1.2.2 è‡ªå®šä¹‰äº‹ä»¶ è‡ªå®šä¹‰äº‹ä»¶å¯ä»¥å®ç°å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®.åœ¨é¡¹ç›®ä¸­æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ã€‚\næ¯”å¦‚åœ¨çˆ¶ç»„ä»¶å†…éƒ¨ç»™å­ç»„ä»¶(Event2)ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶\n\u003cEvent2 @xxx=\"handler3\"\u003e\u003c/Event2\u003e åœ¨ Event2 å­ç»„ä»¶å†…éƒ¨è§¦å‘è¿™ä¸ªè‡ªå®šä¹‰äº‹ä»¶\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003eæˆ‘æ˜¯å­ç»„ä»¶2\u003c/h1\u003e \u003cbutton @click=\"handler\"\u003eç‚¹å‡»æˆ‘è§¦å‘xxxè‡ªå®šä¹‰äº‹ä»¶\u003c/button\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e let $emit = defineEmits(['xxx']) const handler = () =\u003e { $emit('xxx', 'æ³•æ‹‰åˆ©', 'èŒ…å°') } \u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e æˆ‘ä»¬ä¼šå‘ç°åœ¨ script æ ‡ç­¾å†…éƒ¨,ä½¿ç”¨äº† defineEmits æ–¹æ³•ï¼Œæ­¤æ–¹æ³•æ˜¯ vue3 æä¾›çš„æ–¹æ³•,ä¸éœ€è¦å¼•å…¥ç›´æ¥ä½¿ç”¨ã€‚defineEmits æ–¹æ³•æ‰§è¡Œï¼Œä¼ é€’ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å…ƒç´ å³ä¸ºå°†æ¥ç»„ä»¶éœ€è¦è§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶ç±»å‹ï¼Œæ­¤æ–¹æ‰§è¡Œä¼šè¿”å›ä¸€ä¸ª$emit æ–¹æ³•ç”¨äºè§¦å‘è‡ªå®šä¹‰äº‹ä»¶ã€‚\nå½“ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œäº‹ä»¶å›è°ƒå†…éƒ¨è°ƒç”¨$emit æ–¹æ³•å»è§¦å‘è‡ªå®šä¹‰äº‹ä»¶,ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè§¦å‘äº‹ä»¶ç±»å‹ï¼Œç¬¬äºŒä¸ªã€ä¸‰ä¸ªã€N ä¸ªå‚æ•°å³ä¸ºä¼ é€’ç»™çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯:ä»£ç å¦‚ä¸‹\n\u003cEvent2 @xxx=\"handler3\" @click=\"handler\"\u003e\u003c/Event2\u003e æ­£å¸¸è¯´ç»„ä»¶æ ‡ç­¾ä¹¦å†™@click åº”è¯¥ä¸ºåŸç”Ÿ DOM äº‹ä»¶,ä½†æ˜¯å¦‚æœå­ç»„ä»¶å†…éƒ¨é€šè¿‡ defineEmits å®šä¹‰å°±å˜ä¸ºè‡ªå®šä¹‰äº‹ä»¶äº†\nlet $emit = defineEmits(['xxx', 'click']) 1.3 å…¨å±€äº‹ä»¶æ€»çº¿ å…¨å±€äº‹ä»¶æ€»çº¿å¯ä»¥å®ç°ä»»æ„ç»„ä»¶é€šä¿¡ï¼Œåœ¨ vue2 ä¸­å¯ä»¥æ ¹æ® VM ä¸ VC å…³ç³»æ¨å‡ºå…¨å±€äº‹ä»¶æ€»çº¿ã€‚\nä½†æ˜¯åœ¨ vue3 ä¸­æ²¡æœ‰ Vue æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ²¡æœ‰ Vue.prototype.ä»¥åŠç»„åˆå¼ API å†™æ³•æ²¡æœ‰ thisï¼Œ\né‚£ä¹ˆåœ¨ Vue3 æƒ³å®ç°å…¨å±€äº‹ä»¶çš„æ€»çº¿åŠŸèƒ½å°±æœ‰ç‚¹ä¸ç°å®å•¦ï¼Œå¦‚æœæƒ³åœ¨ Vue3 ä¸­ä½¿ç”¨å…¨å±€äº‹ä»¶æ€»çº¿åŠŸèƒ½\nå¯ä»¥ä½¿ç”¨æ’ä»¶ mitt å®ç°ã€‚\nmitt:å®˜ç½‘åœ°å€: https://www.npmjs.com/package/mitt\n1.4 v-model v-model æŒ‡ä»¤å¯æ˜¯æ”¶é›†è¡¨å•æ•°æ®(æ•°æ®åŒå‘ç»‘å®š)ï¼Œé™¤æ­¤ä¹‹å¤–å®ƒä¹Ÿå¯ä»¥å®ç°çˆ¶å­ç»„ä»¶æ•°æ®åŒæ­¥ã€‚\nè€Œ v-model å®æŒ‡åˆ©ç”¨ props[modelValue]ä¸è‡ªå®šä¹‰äº‹ä»¶[update:modelValue]å®ç°çš„ã€‚\nä¸‹æ–¹ä»£ç :ç›¸å½“äºç»™ç»„ä»¶ Child ä¼ é€’ä¸€ä¸ª props(modelValue)ä¸ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ update:modelValue\nå®ç°çˆ¶å­ç»„ä»¶æ•°æ®åŒæ­¥\n\u003cChild v-model=\"msg\"\u003e\u003c/Child\u003e åœ¨ vue3 ä¸­ä¸€ä¸ªç»„ä»¶å¯ä»¥é€šè¿‡ä½¿ç”¨å¤šä¸ª v-model,è®©çˆ¶å­ç»„ä»¶å¤šä¸ªæ•°æ®åŒæ­¥,ä¸‹æ–¹ä»£ç ç›¸å½“äºç»™ç»„ä»¶ Child ä¼ é€’ä¸¤ä¸ª props åˆ†åˆ«æ˜¯ pageNo ä¸ pageSizeï¼Œä»¥åŠç»‘å®šä¸¤ä¸ªè‡ªå®šä¹‰äº‹ä»¶ update:pageNo ä¸ update:pageSize å®ç°çˆ¶å­æ•°æ®åŒæ­¥\n\u003cChild v-model:pageNo=\"msg\" v-model:pageSize=\"msg1\"\u003e\u003c/Child\u003e 1.5 useAttrs åœ¨ Vue3 ä¸­å¯ä»¥åˆ©ç”¨ useAttrs æ–¹æ³•è·å–ç»„ä»¶çš„å±æ€§ä¸äº‹ä»¶(åŒ…å«:åŸç”Ÿ DOM äº‹ä»¶æˆ–è€…è‡ªå®šä¹‰äº‹ä»¶),æ¬¡å‡½æ•°åŠŸèƒ½ç±»ä¼¼äº Vue2 æ¡†æ¶ä¸­$attrså±æ€§ä¸$listeners æ–¹æ³•ã€‚\næ¯”å¦‚:åœ¨çˆ¶ç»„ä»¶å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªå­ç»„ä»¶ my-button\n\u003cmy-button type=\"success\" size=\"small\" title=\"æ ‡é¢˜\" @click=\"handler\" \u003e\u003c/my-button\u003e å­ç»„ä»¶å†…éƒ¨å¯ä»¥é€šè¿‡ useAttrs æ–¹æ³•è·å–ç»„ä»¶å±æ€§ä¸äº‹ä»¶.å› æ­¤ä½ ä¹Ÿå‘ç°äº†ï¼Œå®ƒç±»ä¼¼äº props,å¯ä»¥æ¥å—çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å±æ€§ä¸å±æ€§å€¼ã€‚éœ€è¦æ³¨æ„å¦‚æœ defineProps æ¥å—äº†æŸä¸€ä¸ªå±æ€§ï¼ŒuseAttrs æ–¹æ³•è¿”å›çš„å¯¹è±¡èº«ä¸Šå°±æ²¡æœ‰ç›¸åº”å±æ€§ä¸å±æ€§å€¼ã€‚\n\u003cscript setup lang=\"ts\"\u003e import {useAttrs} from 'vue'; let $attrs = useAttrs(); \u003c/script\u003e 1.6 ref ä¸$parent ref,æåŠåˆ° ref å¯èƒ½ä¼šæƒ³åˆ°å®ƒå¯ä»¥è·å–å…ƒç´ çš„ DOM æˆ–è€…è·å–å­ç»„ä»¶å®ä¾‹çš„ VCã€‚æ—¢ç„¶å¯ä»¥åœ¨çˆ¶ç»„ä»¶å†…éƒ¨é€šè¿‡ ref è·å–å­ç»„ä»¶å®ä¾‹ VCï¼Œé‚£ä¹ˆå­ç»„ä»¶å†…éƒ¨çš„æ–¹æ³•ä¸å“åº”å¼æ•°æ®çˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨çš„ã€‚\næ¯”å¦‚:åœ¨çˆ¶ç»„ä»¶æŒ‚è½½å®Œæ¯•è·å–ç»„ä»¶å®ä¾‹\nçˆ¶ç»„ä»¶å†…éƒ¨ä»£ç :\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003erefä¸$parent\u003c/h1\u003e \u003cSon ref=\"son\"\u003e\u003c/Son\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e import Son from './Son.vue' import { onMounted, ref } from 'vue' const son = ref() onMounted(() =\u003e { console.log(son.value) }) \u003c/script\u003e ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå¦‚æœæƒ³è®©çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶çš„æ•°æ®æˆ–è€…æ–¹æ³•éœ€è¦é€šè¿‡ defineExpose å¯¹å¤–æš´éœ²,å› ä¸º vue3 ä¸­ç»„ä»¶å†…éƒ¨çš„æ•°æ®å¯¹å¤–â€œå…³é—­çš„â€ï¼Œå¤–éƒ¨ä¸èƒ½è®¿é—®\n\u003cscript setup lang=\"ts\"\u003e import { ref } from \"vue\"; //æ•°æ® let money = ref(1000); //æ–¹æ³• const handler = ()=\u003e{ } defineExpose({ money, handler }) \u003c/script\u003e $parent å¯ä»¥è·å–æŸä¸€ä¸ªç»„ä»¶çš„çˆ¶ç»„ä»¶å®ä¾‹ VC,å› æ­¤å¯ä»¥ä½¿ç”¨çˆ¶ç»„ä»¶å†…éƒ¨çš„æ•°æ®ä¸æ–¹æ³•ã€‚å¿…é¡»å­ç»„ä»¶å†…éƒ¨æ‹¥æœ‰ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»æ—¶å€™è·å–çˆ¶ç»„ä»¶å®ä¾‹ï¼Œå½“ç„¶çˆ¶ç»„ä»¶çš„æ•°æ®ä¸æ–¹æ³•éœ€è¦é€šè¿‡ defineExpose æ–¹æ³•å¯¹å¤–æš´éœ²\n\u003cbutton @click=\"handler($parent)\"\u003eç‚¹å‡»æˆ‘è·å–çˆ¶ç»„ä»¶å®ä¾‹\u003c/button\u003e 1.7 provide ä¸ inject provide[æä¾›]\ninject[æ³¨å…¥]\nvue3 æä¾›ä¸¤ä¸ªæ–¹æ³• provide ä¸ inject,å¯ä»¥å®ç°éš”è¾ˆç»„ä»¶ä¼ é€’å‚æ•°\nç»„ä»¶ç»„ä»¶æä¾›æ•°æ®:\nprovide æ–¹æ³•ç”¨äºæä¾›æ•°æ®ï¼Œæ­¤æ–¹æ³•æ‰§éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°,åˆ†åˆ«æä¾›æ•°æ®çš„ key ä¸æä¾›æ•°æ® value\n\u003cscript setup lang=\"ts\"\u003e import {provide} from 'vue' provide('token','admin_token'); \u003c/script\u003e åä»£ç»„ä»¶å¯ä»¥é€šè¿‡ inject æ–¹æ³•è·å–æ•°æ®,é€šè¿‡ key è·å–å­˜å‚¨çš„æ•°å€¼\n\u003cscript setup lang=\"ts\"\u003e import {inject} from 'vue' let token = inject('token'); \u003c/script\u003e 1.8 pinia pinia å®˜ç½‘: https://pinia.web3doc.top/\npinia ä¹Ÿæ˜¯é›†ä¸­å¼ç®¡ç†çŠ¶æ€å®¹å™¨,ç±»ä¼¼äº vuexã€‚ä½†æ˜¯æ ¸å¿ƒæ¦‚å¿µæ²¡æœ‰ mutationã€modules,ä½¿ç”¨æ–¹å¼å‚ç…§å®˜ç½‘\n1.9 slot æ’æ§½ï¼šé»˜è®¤æ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½å¯ä»¥å®ç°çˆ¶å­ç»„ä»¶é€šä¿¡.\né»˜è®¤æ’æ§½:\nåœ¨å­ç»„ä»¶å†…éƒ¨çš„æ¨¡æ¿ä¸­ä¹¦å†™ slot å…¨å±€ç»„ä»¶æ ‡ç­¾\n\u003ctemplate\u003e \u003cdiv\u003e \u003cslot\u003e\u003c/slot\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e\u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e åœ¨çˆ¶ç»„ä»¶å†…éƒ¨æä¾›ç»“æ„ï¼šTodo å³ä¸ºå­ç»„ä»¶,åœ¨çˆ¶ç»„ä»¶å†…éƒ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œåœ¨åŒæ ‡ç­¾å†…éƒ¨ä¹¦å†™ç»“æ„ä¼ é€’ç»™å­ç»„ä»¶\næ³¨æ„å¼€å‘é¡¹ç›®çš„æ—¶å€™é»˜è®¤æ’æ§½ä¸€èˆ¬åªæœ‰ä¸€ä¸ª\n\u003cTodo\u003e \u003ch1\u003eæˆ‘æ˜¯é»˜è®¤æ’æ§½å¡«å……çš„ç»“æ„\u003c/h1\u003e \u003c/Todo\u003e å…·åæ’æ§½ï¼š\né¡¾åæ€ä¹‰ï¼Œæ­¤æ’æ§½å¸¦æœ‰åå­—åœ¨ç»„ä»¶å†…éƒ¨ç•™å¤šä¸ªæŒ‡å®šåå­—çš„æ’æ§½ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªå­ç»„ä»¶å†…éƒ¨,æ¨¡æ¿ä¸­ç•™ä¸¤ä¸ªæ’æ§½\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003etodo\u003c/h1\u003e \u003cslot name=\"a\"\u003e\u003c/slot\u003e \u003cslot name=\"b\"\u003e\u003c/slot\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e\u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e çˆ¶ç»„ä»¶å†…éƒ¨å‘æŒ‡å®šçš„å…·åæ’æ§½ä¼ é€’ç»“æ„ã€‚éœ€è¦æ³¨æ„ v-slotï¼šå¯ä»¥æ›¿æ¢ä¸º#\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003eslot\u003c/h1\u003e \u003cTodo\u003e \u003ctemplate v-slot:a\u003e //å¯ä»¥ç”¨#aæ›¿æ¢ \u003cdiv\u003eå¡«å…¥ç»„ä»¶Aéƒ¨åˆ†çš„ç»“æ„\u003c/div\u003e \u003c/template\u003e \u003ctemplate v-slot:b\u003e //å¯ä»¥ç”¨#bæ›¿æ¢ \u003cdiv\u003eå¡«å…¥ç»„ä»¶Béƒ¨åˆ†çš„ç»“æ„\u003c/div\u003e \u003c/template\u003e \u003c/Todo\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e import Todo from './Todo.vue' \u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e ä½œç”¨åŸŸæ’æ§½\nä½œç”¨åŸŸæ’æ§½ï¼šå¯ä»¥ç†è§£ä¸ºï¼Œå­ç»„ä»¶æ•°æ®ç”±çˆ¶ç»„ä»¶æä¾›ï¼Œä½†æ˜¯å­ç»„ä»¶å†…éƒ¨å†³å®šä¸äº†è‡ªèº«ç»“æ„ä¸å¤–è§‚(æ ·å¼)\nå­ç»„ä»¶ Todo ä»£ç å¦‚ä¸‹:\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003etodo\u003c/h1\u003e \u003cul\u003e \u003cli v-for=\"(item,index) in todos\" :key=\"item.id\"\u003e \u003cslot :$row=\"item\" :$index=\"index\"\u003e\u003c/slot\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e defineProps(['todos']) //æ¥å—çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ® \u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e çˆ¶ç»„ä»¶å†…éƒ¨ä»£ç å¦‚ä¸‹:\n\u003ctemplate\u003e \u003cdiv\u003e \u003ch1\u003eslot\u003c/h1\u003e \u003cTodo :todos=\"todos\"\u003e \u003ctemplate v-slot=\"{$row,$index}\"\u003e \u003cspan :style=\"{color:$row.done?'green':'red'}\"\u003e{{$row.title}}\u003c/span\u003e \u003c/template\u003e \u003c/Todo\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup lang=\"ts\"\u003e import Todo from './Todo.vue' import { ref } from 'vue' //çˆ¶ç»„ä»¶å†…éƒ¨æ•°æ® let todos = ref([ { id: 1, title: 'åƒé¥­', done: true }, { id: 2, title: 'ç¡è§‰', done: false }, { id: 3, title: 'æ‰“è±†è±†', done: true }, ]) \u003c/script\u003e \u003cstyle scoped\u003e\u003c/style\u003e äºŒã€æ­å»ºåå°ç®¡ç†ç³»ç»Ÿæ¨¡æ¿ 2.1 é¡¹ç›®åˆå§‹åŒ– ä»Šå¤©æ¥å¸¦å¤§å®¶ä» 0 å¼€å§‹æ­å»ºä¸€ä¸ª vue3 ç‰ˆæœ¬çš„åå°ç®¡ç†ç³»ç»Ÿã€‚ä¸€ä¸ªé¡¹ç›®è¦æœ‰ç»Ÿä¸€çš„è§„èŒƒï¼Œéœ€è¦ä½¿ç”¨ eslint+stylelint+prettier æ¥å¯¹æˆ‘ä»¬çš„ä»£ç è´¨é‡åšæ£€æµ‹å’Œä¿®å¤ï¼Œéœ€è¦ä½¿ç”¨ husky æ¥åš commit æ‹¦æˆªï¼Œéœ€è¦ä½¿ç”¨ commitlint æ¥ç»Ÿä¸€æäº¤è§„èŒƒï¼Œéœ€è¦ä½¿ç”¨ preinstall æ¥ç»Ÿä¸€åŒ…ç®¡ç†å·¥å…·ã€‚\nä¸‹é¢æˆ‘ä»¬å°±ç”¨è¿™ä¸€å¥—è§„èŒƒæ¥åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®ï¼Œé›†æˆä¸€ä¸ªè§„èŒƒçš„æ¨¡ç‰ˆã€‚\n2.1.1 ç¯å¢ƒå‡†å¤‡ node v16.14.2 pnpm 8.0.0 2.1.2 åˆå§‹åŒ–é¡¹ç›® æœ¬é¡¹ç›®ä½¿ç”¨ vite è¿›è¡Œæ„å»ºï¼Œvite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£å‚è€ƒï¼šcn.vitejs.dev/guide/\npnpm:performant npm ï¼Œæ„å‘³â€œé«˜æ€§èƒ½çš„ npmâ€ã€‚pnpmç”± npm/yarn è¡ç”Ÿè€Œæ¥ï¼Œè§£å†³äº† npm/yarn å†…éƒ¨æ½œåœ¨çš„ bugï¼Œæå¤§çš„ä¼˜åŒ–äº†æ€§èƒ½ï¼Œæ‰©å±•äº†ä½¿ç”¨åœºæ™¯ã€‚è¢«èª‰ä¸ºâ€œæœ€å…ˆè¿›çš„åŒ…ç®¡ç†å·¥å…·â€\npnpm å®‰è£…æŒ‡ä»¤\nnpm i -g pnpm é¡¹ç›®åˆå§‹åŒ–å‘½ä»¤:\npnpm create vite è¿›å…¥åˆ°é¡¹ç›®æ ¹ç›®å½• pnpm install å®‰è£…å…¨éƒ¨ä¾èµ–.å®‰è£…å®Œä¾èµ–è¿è¡Œç¨‹åº:pnpm run dev\nè¿è¡Œå®Œæ¯•é¡¹ç›®è·‘åœ¨http://127.0.0.1:5173/,å¯ä»¥è®¿é—®ä½ å¾—é¡¹ç›®å•¦\n2.2 é¡¹ç›®é…ç½® ä¸€ã€eslint é…ç½® eslint ä¸­æ–‡å®˜ç½‘: http://eslint.cn/\nESLint æœ€åˆæ˜¯ç”±Nicholas C. Zakas äº 2013 å¹´ 6 æœˆåˆ›å»ºçš„å¼€æºé¡¹ç›®ã€‚å®ƒçš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªæ’ä»¶åŒ–çš„javascript ä»£ç æ£€æµ‹å·¥å…·\né¦–å…ˆå®‰è£… eslint\npnpm i eslint -D ç”Ÿæˆé…ç½®æ–‡ä»¶:.eslint.cjs\nnpx eslint --init .eslint.cjs é…ç½®æ–‡ä»¶\nmodule.exports = { //è¿è¡Œç¯å¢ƒ env: { browser: true, //æµè§ˆå™¨ç«¯ es2021: true, //es2021 }, //è§„åˆ™ç»§æ‰¿ extends: [ //å…¨éƒ¨è§„åˆ™é»˜è®¤æ˜¯å…³é—­çš„,è¿™ä¸ªé…ç½®é¡¹å¼€å¯æ¨èè§„åˆ™,æ¨èè§„åˆ™å‚ç…§æ–‡æ¡£ //æ¯”å¦‚:å‡½æ•°ä¸èƒ½é‡åã€å¯¹è±¡ä¸èƒ½å‡ºç°é‡å¤key 'eslint:recommended', //vue3è¯­æ³•è§„åˆ™ 'plugin:vue/vue3-essential', //tsè¯­æ³•è§„åˆ™ 'plugin:@typescript-eslint/recommended', ], //è¦ä¸ºç‰¹å®šç±»å‹çš„æ–‡ä»¶æŒ‡å®šå¤„ç†å™¨ overrides: [], //æŒ‡å®šè§£æå™¨:è§£æå™¨ //Esprima é»˜è®¤è§£æå™¨ //Babel-ESLint babelè§£æå™¨ //@typescript-eslint/parser tsè§£æå™¨ parser: '@typescript-eslint/parser', //æŒ‡å®šè§£æå™¨é€‰é¡¹ parserOptions: { ecmaVersion: 'latest', //æ ¡éªŒECMAæœ€æ–°ç‰ˆæœ¬ sourceType: 'module', //è®¾ç½®ä¸º\"script\"ï¼ˆé»˜è®¤ï¼‰ï¼Œæˆ–è€…\"module\"ä»£ç åœ¨ECMAScriptæ¨¡å—ä¸­ }, //ESLintæ”¯æŒä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚åœ¨ä½¿ç”¨æ’ä»¶ä¹‹å‰ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨npmå®‰è£…å®ƒ //è¯¥eslint-plugin-å‰ç¼€å¯ä»¥ä»æ’ä»¶åç§°è¢«çœç•¥ plugins: ['vue', '@typescript-eslint'], //eslintè§„åˆ™ rules: {}, } 1.1 vue3 ç¯å¢ƒä»£ç æ ¡éªŒæ’ä»¶ # è®©æ‰€æœ‰ä¸prettierè§„åˆ™å­˜åœ¨å†²çªçš„Eslint ruleså¤±æ•ˆï¼Œå¹¶ä½¿ç”¨prettierè¿›è¡Œä»£ç æ£€æŸ¥ \"eslint-config-prettier\": \"^8.6.0\", \"eslint-plugin-import\": \"^2.27.5\", \"eslint-plugin-node\": \"^11.1.0\", # è¿è¡Œæ›´æ¼‚äº®çš„Eslintï¼Œä½¿prettierè§„åˆ™ä¼˜å…ˆçº§æ›´é«˜ï¼ŒEslintä¼˜å…ˆçº§ä½ \"eslint-plugin-prettier\": \"^4.2.1\", # vue.jsçš„Eslintæ’ä»¶ï¼ˆæŸ¥æ‰¾vueè¯­æ³•é”™è¯¯ï¼Œå‘ç°é”™è¯¯æŒ‡ä»¤ï¼ŒæŸ¥æ‰¾è¿è§„é£æ ¼æŒ‡å— \"eslint-plugin-vue\": \"^9.9.0\", # è¯¥è§£æå™¨å…è®¸ä½¿ç”¨Eslintæ ¡éªŒæ‰€æœ‰babel code \"@babel/eslint-parser\": \"^7.19.1\", å®‰è£…æŒ‡ä»¤\npnpm install -D eslint-plugin-import eslint-plugin-vue eslint-plugin-node eslint-plugin-prettier eslint-config-prettier eslint-plugin-node @babel/eslint-parser 1.2 ä¿®æ”¹.eslintrc.cjs é…ç½®æ–‡ä»¶ // @see https://eslint.bootcss.com/docs/rules/ module.exports = { env: { browser: true, es2021: true, node: true, jest: true, }, /* æŒ‡å®šå¦‚ä½•è§£æè¯­æ³• */ parser: 'vue-eslint-parser', /** ä¼˜å…ˆçº§ä½äº parse çš„è¯­æ³•è§£æé…ç½® */ parserOptions: { ecmaVersion: 'latest', sourceType: 'module', parser: '@typescript-eslint/parser', jsxPragma: 'React', ecmaFeatures: { jsx: true, }, }, /* ç»§æ‰¿å·²æœ‰çš„è§„åˆ™ */ extends: [ 'eslint:recommended', 'plugin:vue/vue3-essential', 'plugin:@typescript-eslint/recommended', 'plugin:prettier/recommended', ], plugins: ['vue', '@typescript-eslint'], /* * \"off\" æˆ– 0 ==\u003e å…³é—­è§„åˆ™ * \"warn\" æˆ– 1 ==\u003e æ‰“å¼€çš„è§„åˆ™ä½œä¸ºè­¦å‘Šï¼ˆä¸å½±å“ä»£ç æ‰§è¡Œï¼‰ * \"error\" æˆ– 2 ==\u003e è§„åˆ™ä½œä¸ºä¸€ä¸ªé”™è¯¯ï¼ˆä»£ç ä¸èƒ½æ‰§è¡Œï¼Œç•Œé¢æŠ¥é”™ï¼‰ */ rules: { // eslintï¼ˆhttps://eslint.bootcss.com/docs/rules/ï¼‰ 'no-var': 'error', // è¦æ±‚ä½¿ç”¨ let æˆ– const è€Œä¸æ˜¯ var 'no-multiple-empty-lines': ['warn', { max: 1 }], // ä¸å…è®¸å¤šä¸ªç©ºè¡Œ 'no-console': process.env.NODE_ENV === 'production' ? 'error' : 'off', 'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'off', 'no-unexpected-multiline': 'error', // ç¦æ­¢ç©ºä½™çš„å¤šè¡Œ 'no-useless-escape': 'off', // ç¦æ­¢ä¸å¿…è¦çš„è½¬ä¹‰å­—ç¬¦ // typeScript (https://typescript-eslint.io/rules) '@typescript-eslint/no-unused-vars': 'error', // ç¦æ­¢å®šä¹‰æœªä½¿ç”¨çš„å˜é‡ '@typescript-eslint/prefer-ts-expect-error': 'error', // ç¦æ­¢ä½¿ç”¨ @ts-ignore '@typescript-eslint/no-explicit-any': 'off', // ç¦æ­¢ä½¿ç”¨ any ç±»å‹ '@typescript-eslint/no-non-null-assertion': 'off', '@typescript-eslint/no-namespace': 'off', // ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰ TypeScript æ¨¡å—å’Œå‘½åç©ºé—´ã€‚ '@typescript-eslint/semi': 'off', // eslint-plugin-vue (https://eslint.vuejs.org/rules/) 'vue/multi-word-component-names': 'off', // è¦æ±‚ç»„ä»¶åç§°å§‹ç»ˆä¸º â€œ-â€ é“¾æ¥çš„å•è¯ 'vue/script-setup-uses-vars': 'error', // é˜²æ­¢",
  "wordCount" : "9732",
  "inLanguage": "en",
  "datePublished": "2020-01-01T17:11:35+08:00",
  "dateModified": "2020-01-01T17:11:35+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E7%A1%85%E8%B0%B7%E7%94%84%E9%80%89%E7%AC%94%E8%AE%B0/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Bablvsj's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://bablvsj.github.io/img/Q.gif"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://bablvsj.github.io" accesskey="h" title="Bablvsj&#39;s Blog (Alt + H)">Bablvsj&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://bablvsj.github.io/" title="ä¸»é¡µ">
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/archives/" title="æ—¶é—´è½´">
                    <span>æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/tags" title="æ ‡ç­¾">
                    <span>æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/about" title="å…³äº">
                    <span>å…³äº</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/search" title="ğŸ” (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”</span>
                </a>
            </li>
        </ul>
    </nav>
</header>


<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      æµè§ˆå™¨
    </h1>
    <div class="post-meta">
      
<div class="post-tags-meta">
    <a href="https://bablvsj.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/">é¢è¯•é¢˜é›†</a>
</div>

20 min&nbsp;Â·&nbsp;<span title='2020-01-01 17:11:35 +0800 CST'>2020/01/01</span>


      
    </div>
    
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        
        <div class="inner"><ul>
                <li>
                    <a href="#%e7%a1%85%e8%b0%b7%e7%94%84%e9%80%89" aria-label="ç¡…è°·ç”„é€‰">ç¡…è°·ç”„é€‰</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80vue3-%e7%bb%84%e4%bb%b6%e9%80%9a%e4%bf%a1%e6%96%b9%e5%bc%8f" aria-label="ä¸€ã€vue3 ç»„ä»¶é€šä¿¡æ–¹å¼">ä¸€ã€vue3 ç»„ä»¶é€šä¿¡æ–¹å¼</a><ul>
                        
                <li>
                    <a href="#11-props" aria-label="1.1 props">1.1 props</a></li>
                <li>
                    <a href="#12-%e8%87%aa%e5%ae%9a%e4%b9%89%e4%ba%8b%e4%bb%b6" aria-label="1.2 è‡ªå®šä¹‰äº‹ä»¶">1.2 è‡ªå®šä¹‰äº‹ä»¶</a><ul>
                        
                <li>
                    <a href="#121-%e5%8e%9f%e7%94%9f-dom-%e4%ba%8b%e4%bb%b6" aria-label="1.2.1 åŸç”Ÿ DOM äº‹ä»¶">1.2.1 åŸç”Ÿ DOM äº‹ä»¶</a></li>
                <li>
                    <a href="#122-%e8%87%aa%e5%ae%9a%e4%b9%89%e4%ba%8b%e4%bb%b6" aria-label="1.2.2 è‡ªå®šä¹‰äº‹ä»¶">1.2.2 è‡ªå®šä¹‰äº‹ä»¶</a></li></ul>
                </li>
                <li>
                    <a href="#13-%e5%85%a8%e5%b1%80%e4%ba%8b%e4%bb%b6%e6%80%bb%e7%ba%bf" aria-label="1.3 å…¨å±€äº‹ä»¶æ€»çº¿">1.3 å…¨å±€äº‹ä»¶æ€»çº¿</a></li>
                <li>
                    <a href="#14-v-model" aria-label="1.4 v-model">1.4 v-model</a></li>
                <li>
                    <a href="#15-useattrs" aria-label="1.5 useAttrs">1.5 useAttrs</a></li>
                <li>
                    <a href="#16-ref-%e4%b8%8eparent" aria-label="1.6 ref ä¸$parent">1.6 ref ä¸$parent</a></li>
                <li>
                    <a href="#17-provide-%e4%b8%8e-inject" aria-label="1.7 provide ä¸ inject">1.7 provide ä¸ inject</a></li>
                <li>
                    <a href="#18-pinia" aria-label="1.8 pinia">1.8 pinia</a></li>
                <li>
                    <a href="#19-slot" aria-label="1.9 slot">1.9 slot</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8c%e6%90%ad%e5%bb%ba%e5%90%8e%e5%8f%b0%e7%ae%a1%e7%90%86%e7%b3%bb%e7%bb%9f%e6%a8%a1%e6%9d%bf" aria-label="äºŒã€æ­å»ºåå°ç®¡ç†ç³»ç»Ÿæ¨¡æ¿">äºŒã€æ­å»ºåå°ç®¡ç†ç³»ç»Ÿæ¨¡æ¿</a><ul>
                        
                <li>
                    <a href="#21-%e9%a1%b9%e7%9b%ae%e5%88%9d%e5%a7%8b%e5%8c%96" aria-label="2.1 é¡¹ç›®åˆå§‹åŒ–">2.1 é¡¹ç›®åˆå§‹åŒ–</a><ul>
                        
                <li>
                    <a href="#211-%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87" aria-label="2.1.1 ç¯å¢ƒå‡†å¤‡">2.1.1 ç¯å¢ƒå‡†å¤‡</a></li>
                <li>
                    <a href="#212-%e5%88%9d%e5%a7%8b%e5%8c%96%e9%a1%b9%e7%9b%ae" aria-label="2.1.2 åˆå§‹åŒ–é¡¹ç›®">2.1.2 åˆå§‹åŒ–é¡¹ç›®</a></li></ul>
                </li>
                <li>
                    <a href="#22-%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae" aria-label="2.2 é¡¹ç›®é…ç½®">2.2 é¡¹ç›®é…ç½®</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80eslint-%e9%85%8d%e7%bd%ae" aria-label="ä¸€ã€eslint é…ç½®">ä¸€ã€eslint é…ç½®</a><ul>
                        
                <li>
                    <a href="#11-vue3-%e7%8e%af%e5%a2%83%e4%bb%a3%e7%a0%81%e6%a0%a1%e9%aa%8c%e6%8f%92%e4%bb%b6" aria-label="1.1 vue3 ç¯å¢ƒä»£ç æ ¡éªŒæ’ä»¶">1.1 vue3 ç¯å¢ƒä»£ç æ ¡éªŒæ’ä»¶</a></li>
                <li>
                    <a href="#12-%e4%bf%ae%e6%94%b9eslintrccjs-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="1.2 ä¿®æ”¹.eslintrc.cjs é…ç½®æ–‡ä»¶">1.2 ä¿®æ”¹.eslintrc.cjs é…ç½®æ–‡ä»¶</a></li>
                <li>
                    <a href="#13-eslintignore-%e5%bf%bd%e7%95%a5%e6%96%87%e4%bb%b6" aria-label="1.3 .eslintignore å¿½ç•¥æ–‡ä»¶">1.3 .eslintignore å¿½ç•¥æ–‡ä»¶</a></li>
                <li>
                    <a href="#14-%e8%bf%90%e8%a1%8c%e8%84%9a%e6%9c%ac" aria-label="1.4 è¿è¡Œè„šæœ¬">1.4 è¿è¡Œè„šæœ¬</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8c%e9%85%8d%e7%bd%aeprettier" aria-label="äºŒã€é…ç½®prettier">äºŒã€é…ç½®<strong>prettier</strong></a><ul>
                        
                <li>
                    <a href="#21-%e5%ae%89%e8%a3%85%e4%be%9d%e8%b5%96%e5%8c%85" aria-label="2.1 å®‰è£…ä¾èµ–åŒ…">2.1 å®‰è£…ä¾èµ–åŒ…</a></li>
                <li>
                    <a href="#22-prettierrcjson-%e6%b7%bb%e5%8a%a0%e8%a7%84%e5%88%99" aria-label="2.2 .prettierrc.json æ·»åŠ è§„åˆ™">2.2 .prettierrc.json æ·»åŠ è§„åˆ™</a></li>
                <li>
                    <a href="#23-prettierignore-%e5%bf%bd%e7%95%a5%e6%96%87%e4%bb%b6" aria-label="2.3 .prettierignore å¿½ç•¥æ–‡ä»¶">2.3 .prettierignore å¿½ç•¥æ–‡ä»¶</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%89%e9%85%8d%e7%bd%ae-stylelint" aria-label="ä¸‰ã€é…ç½® stylelint">ä¸‰ã€é…ç½® stylelint</a><ul>
                        
                <li>
                    <a href="#31-stylelintrccjs-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="3.1 .stylelintrc.cjs é…ç½®æ–‡ä»¶">3.1 .stylelintrc.cjs é…ç½®æ–‡ä»¶</a></li>
                <li>
                    <a href="#32-stylelintignore-%e5%bf%bd%e7%95%a5%e6%96%87%e4%bb%b6" aria-label="3.2 .stylelintignore å¿½ç•¥æ–‡ä»¶">3.2 .stylelintignore å¿½ç•¥æ–‡ä»¶</a></li>
                <li>
                    <a href="#33-%e8%bf%90%e8%a1%8c%e8%84%9a%e6%9c%ac" aria-label="3.3 è¿è¡Œè„šæœ¬">3.3 è¿è¡Œè„šæœ¬</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9b%9b%e9%85%8d%e7%bd%ae-husky" aria-label="å››ã€é…ç½® husky">å››ã€é…ç½® husky</a></li>
                <li>
                    <a href="#%e4%ba%94%e9%85%8d%e7%bd%ae-commitlint" aria-label="äº”ã€é…ç½® commitlint">äº”ã€é…ç½® commitlint</a></li>
                <li>
                    <a href="#%e5%85%ad%e5%bc%ba%e5%88%b6%e4%bd%bf%e7%94%a8-pnpm-%e5%8c%85%e7%ae%a1%e7%90%86%e5%99%a8%e5%b7%a5%e5%85%b7" aria-label="å…­ã€å¼ºåˆ¶ä½¿ç”¨ pnpm åŒ…ç®¡ç†å™¨å·¥å…·">å…­ã€å¼ºåˆ¶ä½¿ç”¨ pnpm åŒ…ç®¡ç†å™¨å·¥å…·</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%89%e9%a1%b9%e7%9b%ae%e9%9b%86%e6%88%90" aria-label="ä¸‰ã€é¡¹ç›®é›†æˆ">ä¸‰ã€é¡¹ç›®é›†æˆ</a><ul>
                        
                <li>
                    <a href="#31-%e9%9b%86%e6%88%90-element-plus" aria-label="3.1 é›†æˆ element-plus">3.1 é›†æˆ element-plus</a></li>
                <li>
                    <a href="#32-src-%e5%88%ab%e5%90%8d%e7%9a%84%e9%85%8d%e7%bd%ae" aria-label="3.2 src åˆ«åçš„é…ç½®">3.2 src åˆ«åçš„é…ç½®</a></li>
                <li>
                    <a href="#33-%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e7%9a%84%e9%85%8d%e7%bd%ae" aria-label="3.3 ç¯å¢ƒå˜é‡çš„é…ç½®">3.3 ç¯å¢ƒå˜é‡çš„é…ç½®</a></li>
                <li>
                    <a href="#34-svg-%e5%9b%be%e6%a0%87%e9%85%8d%e7%bd%ae" aria-label="3.4 SVG å›¾æ ‡é…ç½®">3.4 SVG å›¾æ ‡é…ç½®</a><ul>
                        
                <li>
                    <a href="#341-svg-%e5%b0%81%e8%a3%85%e4%b8%ba%e5%85%a8%e5%b1%80%e7%bb%84%e4%bb%b6" aria-label="3.4.1 svg å°è£…ä¸ºå…¨å±€ç»„ä»¶">3.4.1 svg å°è£…ä¸ºå…¨å±€ç»„ä»¶</a></li></ul>
                </li>
                <li>
                    <a href="#35-%e9%9b%86%e6%88%90-sass" aria-label="3.5 é›†æˆ sass">3.5 é›†æˆ sass</a></li>
                <li>
                    <a href="#36-mock-%e6%95%b0%e6%8d%ae" aria-label="3.6 mock æ•°æ®">3.6 mock æ•°æ®</a></li>
                <li>
                    <a href="#37-axios-%e4%ba%8c%e6%ac%a1%e5%b0%81%e8%a3%85" aria-label="3.7 axios äºŒæ¬¡å°è£…">3.7 axios äºŒæ¬¡å°è£…</a></li>
                <li>
                    <a href="#38-api-%e6%8e%a5%e5%8f%a3%e7%bb%9f%e4%b8%80%e7%ae%a1%e7%90%86" aria-label="3.8 API æ¥å£ç»Ÿä¸€ç®¡ç†">3.8 API æ¥å£ç»Ÿä¸€ç®¡ç†</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9b%9b%e9%a1%b9%e7%9b%ae%e7%9a%84%e8%b5%84%e6%ba%90%e5%9c%b0%e5%9d%80" aria-label="å››ã€é¡¹ç›®çš„èµ„æºåœ°å€">å››ã€é¡¹ç›®çš„èµ„æºåœ°å€</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="ç¡…è°·ç”„é€‰">ç¡…è°·ç”„é€‰<a hidden class="anchor" aria-hidden="true" href="#ç¡…è°·ç”„é€‰">#</a></h1>
<p>æŠ€æœ¯æ ˆåŒ…å«: vue3+TypeScript+vue-router+pinia+element-plus+axios+echarts ç­‰æŠ€æœ¯æ ˆã€‚</p>
<h2 id="ä¸€vue3-ç»„ä»¶é€šä¿¡æ–¹å¼">ä¸€ã€vue3 ç»„ä»¶é€šä¿¡æ–¹å¼<a hidden class="anchor" aria-hidden="true" href="#ä¸€vue3-ç»„ä»¶é€šä¿¡æ–¹å¼">#</a></h2>
<p>é€šä¿¡ä»“åº“åœ°å€: <a href="https://gitee.com/jch1011/vue3_communication.git">https://gitee.com/jch1011/vue3_communication.git</a></p>
<p>ä¸ç®¡æ˜¯ vue2 è¿˜æ˜¯ vue3,ç»„ä»¶é€šä¿¡æ–¹å¼å¾ˆé‡è¦,ä¸ç®¡æ˜¯é¡¹ç›®è¿˜æ˜¯é¢è¯•éƒ½æ˜¯ç»å¸¸ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ã€‚
æ¯”å¦‚:vue2 ç»„ä»¶é€šä¿¡æ–¹å¼</p>
<ul>
<li>props: å¯ä»¥å®ç°çˆ¶å­ç»„ä»¶ã€å­çˆ¶ç»„ä»¶ã€ç”šè‡³å…„å¼Ÿç»„ä»¶é€šä¿¡</li>
<li>è‡ªå®šä¹‰äº‹ä»¶: å¯ä»¥å®ç°å­çˆ¶ç»„ä»¶é€šä¿¡</li>
<li>å…¨å±€äº‹ä»¶æ€»çº¿$bus: å¯ä»¥å®ç°ä»»æ„ç»„ä»¶é€šä¿¡</li>
<li>pubsub: å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°ä»»æ„ç»„ä»¶é€šä¿¡</li>
<li>vuex: é›†ä¸­å¼çŠ¶æ€ç®¡ç†å®¹å™¨ï¼Œå®ç°ä»»æ„ç»„ä»¶é€šä¿¡</li>
<li>ref: çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å®ä¾‹ VC,è·å–å­ç»„ä»¶çš„å“åº”å¼æ•°æ®ä»¥åŠæ–¹æ³•</li>
<li>slot: æ’æ§½(é»˜è®¤æ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½)å®ç°çˆ¶å­ç»„ä»¶é€šä¿¡&hellip;&hellip;..</li>
</ul>
<h3 id="11-props">1.1 props<a hidden class="anchor" aria-hidden="true" href="#11-props">#</a></h3>
<p>props å¯ä»¥å®ç°çˆ¶å­ç»„ä»¶é€šä¿¡,åœ¨ vue3 ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ defineProps è·å–çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®ã€‚ä¸”åœ¨ç»„ä»¶å†…éƒ¨ä¸éœ€è¦å¼•å…¥ defineProps æ–¹æ³•å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼</p>
<p><strong>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ®</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Child</span> <span style="color:#79740e;font-weight:bold">info</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;æˆ‘çˆ±ç¥–å›½&#34;</span> <span style="color:#79740e;font-weight:bold">:money</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;money&#34;</span>&gt;&lt;/<span style="color:#9d0006">Child</span>&gt;
</span></span></code></pre></div><p><strong>å­ç»„ä»¶è·å–çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®:æ–¹å¼ 1</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">let</span> props <span style="color:#af3a03">=</span> defineProps({
</span></span><span style="display:flex;"><span>  info<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">type</span><span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>, <span style="color:#928374;font-style:italic">//æ¥å—çš„æ•°æ®ç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;é»˜è®¤å‚æ•°&#39;</span>, <span style="color:#928374;font-style:italic">//æ¥å—é»˜è®¤æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  },
</span></span><span style="display:flex;"><span>  money<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">type</span><span style="color:#af3a03">:</span> <span style="color:#b57614">Number</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#8f3f71">0</span>,
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p><strong>å­ç»„ä»¶è·å–çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®:æ–¹å¼ 2</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">let</span> props <span style="color:#af3a03">=</span> defineProps([<span style="color:#79740e">&#39;info&#39;</span>, <span style="color:#79740e">&#39;money&#39;</span>])
</span></span></code></pre></div><p>å­ç»„ä»¶è·å–åˆ° props æ•°æ®å°±å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨äº†,ä½†æ˜¯åˆ‡è®° props æ˜¯åªè¯»çš„(åªèƒ½è¯»å–ï¼Œä¸èƒ½ä¿®æ”¹)</p>
<h3 id="12-è‡ªå®šä¹‰äº‹ä»¶">1.2 è‡ªå®šä¹‰äº‹ä»¶<a hidden class="anchor" aria-hidden="true" href="#12-è‡ªå®šä¹‰äº‹ä»¶">#</a></h3>
<p>åœ¨ vue æ¡†æ¶ä¸­äº‹ä»¶åˆ†ä¸ºä¸¤ç§:ä¸€ç§æ˜¯åŸç”Ÿçš„ DOM äº‹ä»¶ï¼Œå¦å¤–ä¸€ç§è‡ªå®šä¹‰äº‹ä»¶ã€‚</p>
<p>åŸç”Ÿ DOM äº‹ä»¶å¯ä»¥è®©ç”¨æˆ·ä¸ç½‘é¡µè¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚ clickã€dbclickã€changeã€mouseenterã€mouseleave&hellip;.</p>
<p>è‡ªå®šä¹‰äº‹ä»¶å¯ä»¥å®ç°å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®</p>
<h4 id="121-åŸç”Ÿ-dom-äº‹ä»¶">1.2.1 åŸç”Ÿ DOM äº‹ä»¶<a hidden class="anchor" aria-hidden="true" href="#121-åŸç”Ÿ-dom-äº‹ä»¶">#</a></h4>
<p>ä»£ç å¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">pre</span> @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      æˆ‘æ˜¯ç¥–å›½çš„è€èŠ±éª¨æœµ
</span></span><span style="display:flex;"><span> &lt;/<span style="color:#9d0006">pre</span>
</span></span><span style="display:flex;"><span>&gt;
</span></span></code></pre></div><p>å½“å‰ä»£ç çº§ç»™ pre æ ‡ç­¾ç»‘å®šåŸç”Ÿ DOM äº‹ä»¶ç‚¹å‡»äº‹ä»¶,é»˜è®¤ä¼šç»™äº‹ä»¶å›è°ƒæ³¨å…¥ event äº‹ä»¶å¯¹è±¡ã€‚å½“ç„¶ç‚¹å‡»äº‹ä»¶æƒ³æ³¨å…¥å¤šä¸ªå‚æ•°å¯ä»¥æŒ‰ç…§ä¸‹å›¾æ“ä½œã€‚ä½†æ˜¯åˆ‡è®°æ³¨å…¥çš„äº‹ä»¶å¯¹è±¡åŠ¡å¿…å«åš$event.</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">div</span> @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler1(1,2,3,$event)&#34;</span>&gt;æˆ‘è¦ä¼ é€’å¤šä¸ªå‚æ•°&lt;/<span style="color:#9d0006">div</span>&gt;
</span></span></code></pre></div><p>åœ¨ vue3 æ¡†æ¶ clickã€dbclickã€change(è¿™ç±»åŸç”Ÿ DOM äº‹ä»¶),ä¸ç®¡æ˜¯åœ¨æ ‡ç­¾ã€è‡ªå®šä¹‰æ ‡ç­¾ä¸Š(ç»„ä»¶æ ‡ç­¾)éƒ½æ˜¯åŸç”Ÿ DOM äº‹ä»¶ã€‚</p>
<p><strong><!--vue2ä¸­å´ä¸æ˜¯è¿™æ ·çš„,åœ¨vue2ä¸­ç»„ä»¶æ ‡ç­¾éœ€è¦é€šè¿‡nativeä¿®é¥°ç¬¦æ‰èƒ½å˜ä¸ºåŸç”ŸDOMäº‹ä»¶--></strong></p>
<h4 id="122-è‡ªå®šä¹‰äº‹ä»¶">1.2.2 è‡ªå®šä¹‰äº‹ä»¶<a hidden class="anchor" aria-hidden="true" href="#122-è‡ªå®šä¹‰äº‹ä»¶">#</a></h4>
<p>è‡ªå®šä¹‰äº‹ä»¶å¯ä»¥å®ç°å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®.åœ¨é¡¹ç›®ä¸­æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ã€‚</p>
<p>æ¯”å¦‚åœ¨çˆ¶ç»„ä»¶å†…éƒ¨ç»™å­ç»„ä»¶(Event2)ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Event2</span> @<span style="color:#79740e;font-weight:bold">xxx</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler3&#34;</span>&gt;&lt;/<span style="color:#9d0006">Event2</span>&gt;
</span></span></code></pre></div><p>åœ¨ Event2 å­ç»„ä»¶å†…éƒ¨è§¦å‘è¿™ä¸ªè‡ªå®šä¹‰äº‹ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;æˆ‘æ˜¯å­ç»„ä»¶2&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">button</span> @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler&#34;</span>&gt;ç‚¹å‡»æˆ‘è§¦å‘xxxè‡ªå®šä¹‰äº‹ä»¶&lt;/<span style="color:#9d0006">button</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">let</span> $emit <span style="color:#af3a03">=</span> defineEmits([<span style="color:#79740e">&#39;xxx&#39;</span>])
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">const</span> handler <span style="color:#af3a03">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>    $emit(<span style="color:#79740e">&#39;xxx&#39;</span>, <span style="color:#79740e">&#39;æ³•æ‹‰åˆ©&#39;</span>, <span style="color:#79740e">&#39;èŒ…å°&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>æˆ‘ä»¬ä¼šå‘ç°åœ¨ script æ ‡ç­¾å†…éƒ¨,ä½¿ç”¨äº† defineEmits æ–¹æ³•ï¼Œæ­¤æ–¹æ³•æ˜¯ vue3 æä¾›çš„æ–¹æ³•,ä¸éœ€è¦å¼•å…¥ç›´æ¥ä½¿ç”¨ã€‚defineEmits æ–¹æ³•æ‰§è¡Œï¼Œä¼ é€’ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å…ƒç´ å³ä¸ºå°†æ¥ç»„ä»¶éœ€è¦è§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶ç±»å‹ï¼Œæ­¤æ–¹æ‰§è¡Œä¼šè¿”å›ä¸€ä¸ª$emit æ–¹æ³•ç”¨äºè§¦å‘è‡ªå®šä¹‰äº‹ä»¶ã€‚</p>
<p>å½“ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œäº‹ä»¶å›è°ƒå†…éƒ¨è°ƒç”¨$emit æ–¹æ³•å»è§¦å‘è‡ªå®šä¹‰äº‹ä»¶,ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè§¦å‘äº‹ä»¶ç±»å‹ï¼Œç¬¬äºŒä¸ªã€ä¸‰ä¸ªã€N ä¸ªå‚æ•°å³ä¸ºä¼ é€’ç»™çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯:ä»£ç å¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Event2</span> @<span style="color:#79740e;font-weight:bold">xxx</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler3&#34;</span> @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler&#34;</span>&gt;&lt;/<span style="color:#9d0006">Event2</span>&gt;
</span></span></code></pre></div><p>æ­£å¸¸è¯´ç»„ä»¶æ ‡ç­¾ä¹¦å†™@click åº”è¯¥ä¸ºåŸç”Ÿ DOM äº‹ä»¶,ä½†æ˜¯å¦‚æœå­ç»„ä»¶å†…éƒ¨é€šè¿‡ defineEmits å®šä¹‰å°±å˜ä¸ºè‡ªå®šä¹‰äº‹ä»¶äº†</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">let</span> $emit <span style="color:#af3a03">=</span> defineEmits([<span style="color:#79740e">&#39;xxx&#39;</span>, <span style="color:#79740e">&#39;click&#39;</span>])
</span></span></code></pre></div><h3 id="13-å…¨å±€äº‹ä»¶æ€»çº¿">1.3 å…¨å±€äº‹ä»¶æ€»çº¿<a hidden class="anchor" aria-hidden="true" href="#13-å…¨å±€äº‹ä»¶æ€»çº¿">#</a></h3>
<p>å…¨å±€äº‹ä»¶æ€»çº¿å¯ä»¥å®ç°ä»»æ„ç»„ä»¶é€šä¿¡ï¼Œåœ¨ vue2 ä¸­å¯ä»¥æ ¹æ® VM ä¸ VC å…³ç³»æ¨å‡ºå…¨å±€äº‹ä»¶æ€»çº¿ã€‚</p>
<p>ä½†æ˜¯åœ¨ vue3 ä¸­æ²¡æœ‰ Vue æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ²¡æœ‰ Vue.prototype.ä»¥åŠç»„åˆå¼ API å†™æ³•æ²¡æœ‰ thisï¼Œ</p>
<p>é‚£ä¹ˆåœ¨ Vue3 æƒ³å®ç°å…¨å±€äº‹ä»¶çš„æ€»çº¿åŠŸèƒ½å°±æœ‰ç‚¹ä¸ç°å®å•¦ï¼Œå¦‚æœæƒ³åœ¨ Vue3 ä¸­ä½¿ç”¨å…¨å±€äº‹ä»¶æ€»çº¿åŠŸèƒ½</p>
<p>å¯ä»¥ä½¿ç”¨æ’ä»¶ mitt å®ç°ã€‚</p>
<p>mitt:å®˜ç½‘åœ°å€: <a href="https://www.npmjs.com/package/mitt">https://www.npmjs.com/package/mitt</a></p>
<h3 id="14-v-model">1.4 v-model<a hidden class="anchor" aria-hidden="true" href="#14-v-model">#</a></h3>
<p>v-model æŒ‡ä»¤å¯æ˜¯æ”¶é›†è¡¨å•æ•°æ®(æ•°æ®åŒå‘ç»‘å®š)ï¼Œé™¤æ­¤ä¹‹å¤–å®ƒä¹Ÿå¯ä»¥å®ç°çˆ¶å­ç»„ä»¶æ•°æ®åŒæ­¥ã€‚</p>
<p>è€Œ v-model å®æŒ‡åˆ©ç”¨ props[modelValue]ä¸è‡ªå®šä¹‰äº‹ä»¶[update:modelValue]å®ç°çš„ã€‚</p>
<p>ä¸‹æ–¹ä»£ç :ç›¸å½“äºç»™ç»„ä»¶ Child ä¼ é€’ä¸€ä¸ª props(modelValue)ä¸ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ update:modelValue</p>
<p>å®ç°çˆ¶å­ç»„ä»¶æ•°æ®åŒæ­¥</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Child</span> <span style="color:#79740e;font-weight:bold">v-model</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;msg&#34;</span>&gt;&lt;/<span style="color:#9d0006">Child</span>&gt;
</span></span></code></pre></div><p>åœ¨ vue3 ä¸­ä¸€ä¸ªç»„ä»¶å¯ä»¥é€šè¿‡ä½¿ç”¨å¤šä¸ª v-model,è®©çˆ¶å­ç»„ä»¶å¤šä¸ªæ•°æ®åŒæ­¥,ä¸‹æ–¹ä»£ç ç›¸å½“äºç»™ç»„ä»¶ Child ä¼ é€’ä¸¤ä¸ª props åˆ†åˆ«æ˜¯ pageNo ä¸ pageSizeï¼Œä»¥åŠç»‘å®šä¸¤ä¸ªè‡ªå®šä¹‰äº‹ä»¶ update:pageNo ä¸ update:pageSize å®ç°çˆ¶å­æ•°æ®åŒæ­¥</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Child</span> <span style="color:#79740e;font-weight:bold">v-model:pageNo</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;msg&#34;</span> <span style="color:#79740e;font-weight:bold">v-model:pageSize</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;msg1&#34;</span>&gt;&lt;/<span style="color:#9d0006">Child</span>&gt;
</span></span></code></pre></div><h3 id="15-useattrs">1.5 useAttrs<a hidden class="anchor" aria-hidden="true" href="#15-useattrs">#</a></h3>
<p>åœ¨ Vue3 ä¸­å¯ä»¥åˆ©ç”¨ useAttrs æ–¹æ³•è·å–ç»„ä»¶çš„å±æ€§ä¸äº‹ä»¶(åŒ…å«:åŸç”Ÿ DOM äº‹ä»¶æˆ–è€…è‡ªå®šä¹‰äº‹ä»¶),æ¬¡å‡½æ•°åŠŸèƒ½ç±»ä¼¼äº Vue2 æ¡†æ¶ä¸­$attrså±æ€§ä¸$listeners æ–¹æ³•ã€‚</p>
<p>æ¯”å¦‚:åœ¨çˆ¶ç»„ä»¶å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªå­ç»„ä»¶ my-button</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">my-button</span>
</span></span><span style="display:flex;"><span>  <span style="color:#79740e;font-weight:bold">type</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;success&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#79740e;font-weight:bold">size</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;small&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#79740e;font-weight:bold">title</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;æ ‡é¢˜&#34;</span>
</span></span><span style="display:flex;"><span>  @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler&#34;</span>
</span></span><span style="display:flex;"><span>&gt;&lt;/<span style="color:#9d0006">my-button</span>&gt;
</span></span></code></pre></div><p>å­ç»„ä»¶å†…éƒ¨å¯ä»¥é€šè¿‡ useAttrs æ–¹æ³•è·å–ç»„ä»¶å±æ€§ä¸äº‹ä»¶.å› æ­¤ä½ ä¹Ÿå‘ç°äº†ï¼Œå®ƒç±»ä¼¼äº props,å¯ä»¥æ¥å—çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å±æ€§ä¸å±æ€§å€¼ã€‚éœ€è¦æ³¨æ„å¦‚æœ defineProps æ¥å—äº†æŸä¸€ä¸ªå±æ€§ï¼ŒuseAttrs æ–¹æ³•è¿”å›çš„å¯¹è±¡èº«ä¸Šå°±æ²¡æœ‰ç›¸åº”å±æ€§ä¸å±æ€§å€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> {useAttrs} <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vue&#39;</span>; <span style="color:#af3a03">let</span> $attrs <span style="color:#af3a03">=</span> useAttrs();
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span></code></pre></div><h3 id="16-ref-ä¸parent">1.6 ref ä¸$parent<a hidden class="anchor" aria-hidden="true" href="#16-ref-ä¸parent">#</a></h3>
<p>ref,æåŠåˆ° ref å¯èƒ½ä¼šæƒ³åˆ°å®ƒå¯ä»¥è·å–å…ƒç´ çš„ DOM æˆ–è€…è·å–å­ç»„ä»¶å®ä¾‹çš„ VCã€‚æ—¢ç„¶å¯ä»¥åœ¨çˆ¶ç»„ä»¶å†…éƒ¨é€šè¿‡ ref è·å–å­ç»„ä»¶å®ä¾‹ VCï¼Œé‚£ä¹ˆå­ç»„ä»¶å†…éƒ¨çš„æ–¹æ³•ä¸å“åº”å¼æ•°æ®çˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨çš„ã€‚</p>
<p>æ¯”å¦‚:åœ¨çˆ¶ç»„ä»¶æŒ‚è½½å®Œæ¯•è·å–ç»„ä»¶å®ä¾‹</p>
<p>çˆ¶ç»„ä»¶å†…éƒ¨ä»£ç :</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;refä¸$parent&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">Son</span> <span style="color:#79740e;font-weight:bold">ref</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;son&#34;</span>&gt;&lt;/<span style="color:#9d0006">Son</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> Son from <span style="color:#79740e">&#39;./Son.vue&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> { onMounted, ref } from <span style="color:#79740e">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">const</span> son <span style="color:#af3a03">=</span> ref()
</span></span><span style="display:flex;"><span>  onMounted(() =&gt; {
</span></span><span style="display:flex;"><span>    console.log(son.value)
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span></code></pre></div><p>ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå¦‚æœæƒ³è®©çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶çš„æ•°æ®æˆ–è€…æ–¹æ³•éœ€è¦é€šè¿‡ defineExpose å¯¹å¤–æš´éœ²,å› ä¸º vue3 ä¸­ç»„ä»¶å†…éƒ¨çš„æ•°æ®å¯¹å¤–â€œå…³é—­çš„â€ï¼Œå¤–éƒ¨ä¸èƒ½è®¿é—®</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> { ref } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#34;vue&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">let</span> money <span style="color:#af3a03">=</span> ref(<span style="color:#8f3f71">1000</span>);
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">const</span> handler <span style="color:#af3a03">=</span> ()<span style="color:#af3a03">=&gt;</span>{
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>defineExpose({
</span></span><span style="display:flex;"><span>  money,
</span></span><span style="display:flex;"><span>   handler
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span></code></pre></div><p>$parent å¯ä»¥è·å–æŸä¸€ä¸ªç»„ä»¶çš„çˆ¶ç»„ä»¶å®ä¾‹ VC,å› æ­¤å¯ä»¥ä½¿ç”¨çˆ¶ç»„ä»¶å†…éƒ¨çš„æ•°æ®ä¸æ–¹æ³•ã€‚å¿…é¡»å­ç»„ä»¶å†…éƒ¨æ‹¥æœ‰ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»æ—¶å€™è·å–çˆ¶ç»„ä»¶å®ä¾‹ï¼Œå½“ç„¶çˆ¶ç»„ä»¶çš„æ•°æ®ä¸æ–¹æ³•éœ€è¦é€šè¿‡ defineExpose æ–¹æ³•å¯¹å¤–æš´éœ²</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">button</span> @<span style="color:#79740e;font-weight:bold">click</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;handler($parent)&#34;</span>&gt;ç‚¹å‡»æˆ‘è·å–çˆ¶ç»„ä»¶å®ä¾‹&lt;/<span style="color:#9d0006">button</span>&gt;
</span></span></code></pre></div><h3 id="17-provide-ä¸-inject">1.7 provide ä¸ inject<a hidden class="anchor" aria-hidden="true" href="#17-provide-ä¸-inject">#</a></h3>
<p><strong>provide[æä¾›]</strong></p>
<p><strong>inject[æ³¨å…¥]</strong></p>
<p>vue3 æä¾›ä¸¤ä¸ªæ–¹æ³• provide ä¸ inject,å¯ä»¥å®ç°éš”è¾ˆç»„ä»¶ä¼ é€’å‚æ•°</p>
<p>ç»„ä»¶ç»„ä»¶æä¾›æ•°æ®:</p>
<p>provide æ–¹æ³•ç”¨äºæä¾›æ•°æ®ï¼Œæ­¤æ–¹æ³•æ‰§éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°,åˆ†åˆ«æä¾›æ•°æ®çš„ key ä¸æä¾›æ•°æ® value</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> {provide} <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vue&#39;</span> provide(<span style="color:#79740e">&#39;token&#39;</span>,<span style="color:#79740e">&#39;admin_token&#39;</span>);
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span></code></pre></div><p>åä»£ç»„ä»¶å¯ä»¥é€šè¿‡ inject æ–¹æ³•è·å–æ•°æ®,é€šè¿‡ key è·å–å­˜å‚¨çš„æ•°å€¼</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> {inject} <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vue&#39;</span> <span style="color:#af3a03">let</span> token <span style="color:#af3a03">=</span> inject(<span style="color:#79740e">&#39;token&#39;</span>);
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span></code></pre></div><h3 id="18-pinia">1.8 pinia<a hidden class="anchor" aria-hidden="true" href="#18-pinia">#</a></h3>
<p>pinia å®˜ç½‘: <a href="https://pinia.web3doc.top/">https://pinia.web3doc.top/</a></p>
<p>pinia ä¹Ÿæ˜¯é›†ä¸­å¼ç®¡ç†çŠ¶æ€å®¹å™¨,ç±»ä¼¼äº vuexã€‚ä½†æ˜¯æ ¸å¿ƒæ¦‚å¿µæ²¡æœ‰ mutationã€modules,ä½¿ç”¨æ–¹å¼å‚ç…§å®˜ç½‘</p>
<h3 id="19-slot">1.9 slot<a hidden class="anchor" aria-hidden="true" href="#19-slot">#</a></h3>
<p>æ’æ§½ï¼šé»˜è®¤æ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½å¯ä»¥å®ç°çˆ¶å­ç»„ä»¶é€šä¿¡.</p>
<p><strong>é»˜è®¤æ’æ§½:</strong></p>
<p>åœ¨å­ç»„ä»¶å†…éƒ¨çš„æ¨¡æ¿ä¸­ä¹¦å†™ slot å…¨å±€ç»„ä»¶æ ‡ç­¾</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">slot</span>&gt;&lt;/<span style="color:#9d0006">slot</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>åœ¨çˆ¶ç»„ä»¶å†…éƒ¨æä¾›ç»“æ„ï¼šTodo å³ä¸ºå­ç»„ä»¶,åœ¨çˆ¶ç»„ä»¶å†…éƒ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œåœ¨åŒæ ‡ç­¾å†…éƒ¨ä¹¦å†™ç»“æ„ä¼ é€’ç»™å­ç»„ä»¶</p>
<p>æ³¨æ„å¼€å‘é¡¹ç›®çš„æ—¶å€™é»˜è®¤æ’æ§½ä¸€èˆ¬åªæœ‰ä¸€ä¸ª</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">Todo</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">h1</span>&gt;æˆ‘æ˜¯é»˜è®¤æ’æ§½å¡«å……çš„ç»“æ„&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">Todo</span>&gt;
</span></span></code></pre></div><p><strong>å…·åæ’æ§½ï¼š</strong></p>
<p>é¡¾åæ€ä¹‰ï¼Œæ­¤æ’æ§½å¸¦æœ‰åå­—åœ¨ç»„ä»¶å†…éƒ¨ç•™å¤šä¸ªæŒ‡å®šåå­—çš„æ’æ§½ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå­ç»„ä»¶å†…éƒ¨,æ¨¡æ¿ä¸­ç•™ä¸¤ä¸ªæ’æ§½</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;todo&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">slot</span> <span style="color:#79740e;font-weight:bold">name</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;a&#34;</span>&gt;&lt;/<span style="color:#9d0006">slot</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">slot</span> <span style="color:#79740e;font-weight:bold">name</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;b&#34;</span>&gt;&lt;/<span style="color:#9d0006">slot</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>çˆ¶ç»„ä»¶å†…éƒ¨å‘æŒ‡å®šçš„å…·åæ’æ§½ä¼ é€’ç»“æ„ã€‚éœ€è¦æ³¨æ„ v-slotï¼šå¯ä»¥æ›¿æ¢ä¸º#</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;slot&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">Todo</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#9d0006">template</span> <span style="color:#79740e;font-weight:bold">v-slot:a</span>&gt;
</span></span><span style="display:flex;"><span>        //å¯ä»¥ç”¨#aæ›¿æ¢
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#9d0006">div</span>&gt;å¡«å…¥ç»„ä»¶Aéƒ¨åˆ†çš„ç»“æ„&lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#9d0006">template</span> <span style="color:#79740e;font-weight:bold">v-slot:b</span>&gt;
</span></span><span style="display:flex;"><span>        //å¯ä»¥ç”¨#bæ›¿æ¢
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#9d0006">div</span>&gt;å¡«å…¥ç»„ä»¶Béƒ¨åˆ†çš„ç»“æ„&lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#9d0006">Todo</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> Todo from <span style="color:#79740e">&#39;./Todo.vue&#39;</span>
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p><strong>ä½œç”¨åŸŸæ’æ§½</strong></p>
<p>ä½œç”¨åŸŸæ’æ§½ï¼šå¯ä»¥ç†è§£ä¸ºï¼Œå­ç»„ä»¶æ•°æ®ç”±çˆ¶ç»„ä»¶æä¾›ï¼Œä½†æ˜¯å­ç»„ä»¶å†…éƒ¨å†³å®šä¸äº†è‡ªèº«ç»“æ„ä¸å¤–è§‚(æ ·å¼)</p>
<p>å­ç»„ä»¶ Todo ä»£ç å¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;todo&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">ul</span>&gt;
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">&lt;!--ç»„ä»¶å†…éƒ¨éå†æ•°ç»„--&gt;</span>
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#9d0006">li</span> <span style="color:#79740e;font-weight:bold">v-for</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;(item,index) in todos&#34;</span> <span style="color:#79740e;font-weight:bold">:key</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;item.id&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#928374;font-style:italic">&lt;!--ä½œç”¨åŸŸæ’æ§½å°†æ•°æ®å›ä¼ ç»™çˆ¶ç»„ä»¶--&gt;</span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#9d0006">slot</span> <span style="color:#79740e;font-weight:bold">:</span>$<span style="color:#79740e;font-weight:bold">row</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;item&#34;</span> <span style="color:#79740e;font-weight:bold">:</span>$<span style="color:#79740e;font-weight:bold">index</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;index&#34;</span>&gt;&lt;/<span style="color:#9d0006">slot</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#9d0006">li</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#9d0006">ul</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  defineProps([<span style="color:#79740e">&#39;todos&#39;</span>]) <span style="color:#928374;font-style:italic">//æ¥å—çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>çˆ¶ç»„ä»¶å†…éƒ¨ä»£ç å¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">h1</span>&gt;slot&lt;/<span style="color:#9d0006">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">Todo</span> <span style="color:#79740e;font-weight:bold">:todos</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;todos&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#9d0006">template</span> <span style="color:#79740e;font-weight:bold">v-slot</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;{$row,$index}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#928374;font-style:italic">&lt;!--çˆ¶ç»„ä»¶å†³å®šå­ç»„ä»¶çš„ç»“æ„ä¸å¤–è§‚--&gt;</span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#9d0006">span</span> <span style="color:#79740e;font-weight:bold">:style</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;{color:$row.done?&#39;green&#39;:&#39;red&#39;}&#34;</span>&gt;{{$row.title}}&lt;/<span style="color:#9d0006">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#9d0006">Todo</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> Todo from <span style="color:#79740e">&#39;./Todo.vue&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">import</span> { ref } from <span style="color:#79740e">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//çˆ¶ç»„ä»¶å†…éƒ¨æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">let</span> todos <span style="color:#af3a03">=</span> ref([
</span></span><span style="display:flex;"><span>    { id<span style="color:#af3a03">:</span> <span style="color:#8f3f71">1</span>, title<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;åƒé¥­&#39;</span>, done<span style="color:#af3a03">:</span> <span style="color:#af3a03">true</span> },
</span></span><span style="display:flex;"><span>    { id<span style="color:#af3a03">:</span> <span style="color:#8f3f71">2</span>, title<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;ç¡è§‰&#39;</span>, done<span style="color:#af3a03">:</span> <span style="color:#af3a03">false</span> },
</span></span><span style="display:flex;"><span>    { id<span style="color:#af3a03">:</span> <span style="color:#8f3f71">3</span>, title<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;æ‰“è±†è±†&#39;</span>, done<span style="color:#af3a03">:</span> <span style="color:#af3a03">true</span> },
</span></span><span style="display:flex;"><span>  ])
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><h2 id="äºŒæ­å»ºåå°ç®¡ç†ç³»ç»Ÿæ¨¡æ¿">äºŒã€æ­å»ºåå°ç®¡ç†ç³»ç»Ÿæ¨¡æ¿<a hidden class="anchor" aria-hidden="true" href="#äºŒæ­å»ºåå°ç®¡ç†ç³»ç»Ÿæ¨¡æ¿">#</a></h2>
<h3 id="21-é¡¹ç›®åˆå§‹åŒ–">2.1 é¡¹ç›®åˆå§‹åŒ–<a hidden class="anchor" aria-hidden="true" href="#21-é¡¹ç›®åˆå§‹åŒ–">#</a></h3>
<p>ä»Šå¤©æ¥å¸¦å¤§å®¶ä» 0 å¼€å§‹æ­å»ºä¸€ä¸ª vue3 ç‰ˆæœ¬çš„åå°ç®¡ç†ç³»ç»Ÿã€‚ä¸€ä¸ªé¡¹ç›®è¦æœ‰ç»Ÿä¸€çš„è§„èŒƒï¼Œéœ€è¦ä½¿ç”¨ eslint+stylelint+prettier æ¥å¯¹æˆ‘ä»¬çš„ä»£ç è´¨é‡åšæ£€æµ‹å’Œä¿®å¤ï¼Œéœ€è¦ä½¿ç”¨ husky æ¥åš commit æ‹¦æˆªï¼Œéœ€è¦ä½¿ç”¨ commitlint æ¥ç»Ÿä¸€æäº¤è§„èŒƒï¼Œéœ€è¦ä½¿ç”¨ preinstall æ¥ç»Ÿä¸€åŒ…ç®¡ç†å·¥å…·ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°±ç”¨è¿™ä¸€å¥—è§„èŒƒæ¥åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®ï¼Œé›†æˆä¸€ä¸ªè§„èŒƒçš„æ¨¡ç‰ˆã€‚</p>
<h4 id="211-ç¯å¢ƒå‡†å¤‡">2.1.1 ç¯å¢ƒå‡†å¤‡<a hidden class="anchor" aria-hidden="true" href="#211-ç¯å¢ƒå‡†å¤‡">#</a></h4>
<ul>
<li>node v16.14.2</li>
<li>pnpm 8.0.0</li>
</ul>
<h4 id="212-åˆå§‹åŒ–é¡¹ç›®">2.1.2 åˆå§‹åŒ–é¡¹ç›®<a hidden class="anchor" aria-hidden="true" href="#212-åˆå§‹åŒ–é¡¹ç›®">#</a></h4>
<p>æœ¬é¡¹ç›®ä½¿ç”¨ vite è¿›è¡Œæ„å»ºï¼Œvite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£å‚è€ƒï¼š<a href="https://cn.vitejs.dev/guide/">cn.vitejs.dev/guide/</a></p>
<p><code>pnpm:performant npm</code> ï¼Œæ„å‘³â€œé«˜æ€§èƒ½çš„ npmâ€ã€‚<a href="https://so.csdn.net/so/search?q=pnpm&amp;spm=1001.2101.3001.7020">pnpm</a>ç”± npm/yarn è¡ç”Ÿè€Œæ¥ï¼Œè§£å†³äº† npm/yarn å†…éƒ¨æ½œåœ¨çš„ bugï¼Œæå¤§çš„ä¼˜åŒ–äº†æ€§èƒ½ï¼Œæ‰©å±•äº†ä½¿ç”¨åœºæ™¯ã€‚è¢«èª‰ä¸ºâ€œæœ€å…ˆè¿›çš„åŒ…ç®¡ç†å·¥å…·â€</p>
<p>pnpm å®‰è£…æŒ‡ä»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>npm i -g pnpm
</span></span></code></pre></div><p>é¡¹ç›®åˆå§‹åŒ–å‘½ä»¤:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pnpm create vite
</span></span></code></pre></div><p>è¿›å…¥åˆ°é¡¹ç›®æ ¹ç›®å½• pnpm install å®‰è£…å…¨éƒ¨ä¾èµ–.å®‰è£…å®Œä¾èµ–è¿è¡Œç¨‹åº:pnpm run dev</p>
<p>è¿è¡Œå®Œæ¯•é¡¹ç›®è·‘åœ¨http://127.0.0.1:5173/,å¯ä»¥è®¿é—®ä½ å¾—é¡¹ç›®å•¦</p>
<h3 id="22-é¡¹ç›®é…ç½®">2.2 é¡¹ç›®é…ç½®<a hidden class="anchor" aria-hidden="true" href="#22-é¡¹ç›®é…ç½®">#</a></h3>
<h4 id="ä¸€eslint-é…ç½®">ä¸€ã€eslint é…ç½®<a hidden class="anchor" aria-hidden="true" href="#ä¸€eslint-é…ç½®">#</a></h4>
<p>eslint ä¸­æ–‡å®˜ç½‘: <a href="http://eslint.cn/">http://eslint.cn/</a></p>
<p>ESLint æœ€åˆæ˜¯ç”±<a href="http://nczonline.net/">Nicholas C. Zakas</a> äº 2013 å¹´ 6 æœˆåˆ›å»ºçš„å¼€æºé¡¹ç›®ã€‚å®ƒçš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªæ’ä»¶åŒ–çš„<strong>javascript ä»£ç æ£€æµ‹å·¥å…·</strong></p>
<p>é¦–å…ˆå®‰è£… eslint</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pnpm i eslint -D
</span></span></code></pre></div><p>ç”Ÿæˆé…ç½®æ–‡ä»¶:.eslint.cjs</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>npx eslint --init
</span></span></code></pre></div><p><strong>.eslint.cjs é…ç½®æ–‡ä»¶</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">module</span>.exports <span style="color:#af3a03">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//è¿è¡Œç¯å¢ƒ
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  env<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    browser: <span style="color:#b57614">true</span>, <span style="color:#928374;font-style:italic">//æµè§ˆå™¨ç«¯
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    es2021: <span style="color:#b57614">true</span>, <span style="color:#928374;font-style:italic">//es2021
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//è§„åˆ™ç»§æ‰¿
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#af3a03">extends</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//å…¨éƒ¨è§„åˆ™é»˜è®¤æ˜¯å…³é—­çš„,è¿™ä¸ªé…ç½®é¡¹å¼€å¯æ¨èè§„åˆ™,æ¨èè§„åˆ™å‚ç…§æ–‡æ¡£
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#928374;font-style:italic">//æ¯”å¦‚:å‡½æ•°ä¸èƒ½é‡åã€å¯¹è±¡ä¸èƒ½å‡ºç°é‡å¤key
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;eslint:recommended&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//vue3è¯­æ³•è§„åˆ™
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;plugin:vue/vue3-essential&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//tsè¯­æ³•è§„åˆ™
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;plugin:@typescript-eslint/recommended&#39;</span>,
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//è¦ä¸ºç‰¹å®šç±»å‹çš„æ–‡ä»¶æŒ‡å®šå¤„ç†å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  overrides<span style="color:#af3a03">:</span> [],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//æŒ‡å®šè§£æå™¨:è§£æå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">//Esprima é»˜è®¤è§£æå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">//Babel-ESLint babelè§£æå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">//@typescript-eslint/parser tsè§£æå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  parser<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;@typescript-eslint/parser&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//æŒ‡å®šè§£æå™¨é€‰é¡¹
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  parserOptions<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    ecmaVersion<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;latest&#39;</span>, <span style="color:#928374;font-style:italic">//æ ¡éªŒECMAæœ€æ–°ç‰ˆæœ¬
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    sourceType<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;module&#39;</span>, <span style="color:#928374;font-style:italic">//è®¾ç½®ä¸º&#34;script&#34;ï¼ˆé»˜è®¤ï¼‰ï¼Œæˆ–è€…&#34;module&#34;ä»£ç åœ¨ECMAScriptæ¨¡å—ä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//ESLintæ”¯æŒä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚åœ¨ä½¿ç”¨æ’ä»¶ä¹‹å‰ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨npmå®‰è£…å®ƒ
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#928374;font-style:italic">//è¯¥eslint-plugin-å‰ç¼€å¯ä»¥ä»æ’ä»¶åç§°è¢«çœç•¥
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  plugins<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;vue&#39;</span>, <span style="color:#79740e">&#39;@typescript-eslint&#39;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">//eslintè§„åˆ™
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  rules<span style="color:#af3a03">:</span> {},
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="11-vue3-ç¯å¢ƒä»£ç æ ¡éªŒæ’ä»¶">1.1 vue3 ç¯å¢ƒä»£ç æ ¡éªŒæ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#11-vue3-ç¯å¢ƒä»£ç æ ¡éªŒæ’ä»¶">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># è®©æ‰€æœ‰ä¸prettierè§„åˆ™å­˜åœ¨å†²çªçš„Eslint ruleså¤±æ•ˆï¼Œå¹¶ä½¿ç”¨prettierè¿›è¡Œä»£ç æ£€æŸ¥</span>
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;eslint-config-prettier&#34;</span>: <span style="color:#79740e">&#34;^8.6.0&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;eslint-plugin-import&#34;</span>: <span style="color:#79740e">&#34;^2.27.5&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;eslint-plugin-node&#34;</span>: <span style="color:#79740e">&#34;^11.1.0&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># è¿è¡Œæ›´æ¼‚äº®çš„Eslintï¼Œä½¿prettierè§„åˆ™ä¼˜å…ˆçº§æ›´é«˜ï¼ŒEslintä¼˜å…ˆçº§ä½</span>
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;eslint-plugin-prettier&#34;</span>: <span style="color:#79740e">&#34;^4.2.1&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># vue.jsçš„Eslintæ’ä»¶ï¼ˆæŸ¥æ‰¾vueè¯­æ³•é”™è¯¯ï¼Œå‘ç°é”™è¯¯æŒ‡ä»¤ï¼ŒæŸ¥æ‰¾è¿è§„é£æ ¼æŒ‡å—</span>
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;eslint-plugin-vue&#34;</span>: <span style="color:#79740e">&#34;^9.9.0&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># è¯¥è§£æå™¨å…è®¸ä½¿ç”¨Eslintæ ¡éªŒæ‰€æœ‰babel code</span>
</span></span><span style="display:flex;"><span><span style="color:#79740e">&#34;@babel/eslint-parser&#34;</span>: <span style="color:#79740e">&#34;^7.19.1&#34;</span>,
</span></span></code></pre></div><p>å®‰è£…æŒ‡ä»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pnpm install -D eslint-plugin-import eslint-plugin-vue eslint-plugin-node eslint-plugin-prettier eslint-config-prettier eslint-plugin-node @babel/eslint-parser
</span></span></code></pre></div><h5 id="12-ä¿®æ”¹eslintrccjs-é…ç½®æ–‡ä»¶">1.2 ä¿®æ”¹.eslintrc.cjs é…ç½®æ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#12-ä¿®æ”¹eslintrccjs-é…ç½®æ–‡ä»¶">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// @see https://eslint.bootcss.com/docs/rules/
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">module</span>.exports <span style="color:#af3a03">=</span> {
</span></span><span style="display:flex;"><span>  env<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    browser: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>    es2021: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>    node: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>    jest: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">/* æŒ‡å®šå¦‚ä½•è§£æè¯­æ³• */</span>
</span></span><span style="display:flex;"><span>  parser<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;vue-eslint-parser&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">/** ä¼˜å…ˆçº§ä½äº parse çš„è¯­æ³•è§£æé…ç½® */</span>
</span></span><span style="display:flex;"><span>  parserOptions<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    ecmaVersion<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;latest&#39;</span>,
</span></span><span style="display:flex;"><span>    sourceType<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;module&#39;</span>,
</span></span><span style="display:flex;"><span>    parser<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;@typescript-eslint/parser&#39;</span>,
</span></span><span style="display:flex;"><span>    jsxPragma<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;React&#39;</span>,
</span></span><span style="display:flex;"><span>    ecmaFeatures<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      jsx: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">/* ç»§æ‰¿å·²æœ‰çš„è§„åˆ™ */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">extends</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;eslint:recommended&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;plugin:vue/vue3-essential&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;plugin:@typescript-eslint/recommended&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;plugin:prettier/recommended&#39;</span>,
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  plugins<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;vue&#39;</span>, <span style="color:#79740e">&#39;@typescript-eslint&#39;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   * &#34;off&#34; æˆ– 0    ==&gt;  å…³é—­è§„åˆ™
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   * &#34;warn&#34; æˆ– 1   ==&gt;  æ‰“å¼€çš„è§„åˆ™ä½œä¸ºè­¦å‘Šï¼ˆä¸å½±å“ä»£ç æ‰§è¡Œï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   * &#34;error&#34; æˆ– 2  ==&gt;  è§„åˆ™ä½œä¸ºä¸€ä¸ªé”™è¯¯ï¼ˆä»£ç ä¸èƒ½æ‰§è¡Œï¼Œç•Œé¢æŠ¥é”™ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   */</span>
</span></span><span style="display:flex;"><span>  rules<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// eslintï¼ˆhttps://eslint.bootcss.com/docs/rules/ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-var&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>, <span style="color:#928374;font-style:italic">// è¦æ±‚ä½¿ç”¨ let æˆ– const è€Œä¸æ˜¯ var
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-multiple-empty-lines&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;warn&#39;</span>, { max: <span style="color:#b57614">1</span> }], <span style="color:#928374;font-style:italic">// ä¸å…è®¸å¤šä¸ªç©ºè¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-console&#39;</span><span style="color:#af3a03">:</span> process.env.NODE_ENV <span style="color:#af3a03">===</span> <span style="color:#79740e">&#39;production&#39;</span> <span style="color:#af3a03">?</span> <span style="color:#79740e">&#39;error&#39;</span> <span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;no-debugger&#39;</span><span style="color:#af3a03">:</span> process.env.NODE_ENV <span style="color:#af3a03">===</span> <span style="color:#79740e">&#39;production&#39;</span> <span style="color:#af3a03">?</span> <span style="color:#79740e">&#39;error&#39;</span> <span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;no-unexpected-multiline&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>, <span style="color:#928374;font-style:italic">// ç¦æ­¢ç©ºä½™çš„å¤šè¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-useless-escape&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// ç¦æ­¢ä¸å¿…è¦çš„è½¬ä¹‰å­—ç¬¦
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// typeScript (https://typescript-eslint.io/rules)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;@typescript-eslint/no-unused-vars&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>, <span style="color:#928374;font-style:italic">// ç¦æ­¢å®šä¹‰æœªä½¿ç”¨çš„å˜é‡
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;@typescript-eslint/prefer-ts-expect-error&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>, <span style="color:#928374;font-style:italic">// ç¦æ­¢ä½¿ç”¨ @ts-ignore
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;@typescript-eslint/no-explicit-any&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// ç¦æ­¢ä½¿ç”¨ any ç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;@typescript-eslint/no-non-null-assertion&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;@typescript-eslint/no-namespace&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// ç¦æ­¢ä½¿ç”¨è‡ªå®šä¹‰ TypeScript æ¨¡å—å’Œå‘½åç©ºé—´ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;@typescript-eslint/semi&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// eslint-plugin-vue (https://eslint.vuejs.org/rules/)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;vue/multi-word-component-names&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// è¦æ±‚ç»„ä»¶åç§°å§‹ç»ˆä¸º â€œ-â€ é“¾æ¥çš„å•è¯
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;vue/script-setup-uses-vars&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>, <span style="color:#928374;font-style:italic">// é˜²æ­¢&lt;script setup&gt;ä½¿ç”¨çš„å˜é‡&lt;template&gt;è¢«æ ‡è®°ä¸ºæœªä½¿ç”¨
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;vue/no-mutating-props&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// ä¸å…è®¸ç»„ä»¶ propçš„æ”¹å˜
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;vue/attribute-hyphenation&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;off&#39;</span>, <span style="color:#928374;font-style:italic">// å¯¹æ¨¡æ¿ä¸­çš„è‡ªå®šä¹‰ç»„ä»¶å¼ºåˆ¶æ‰§è¡Œå±æ€§å‘½åæ ·å¼
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  },
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="13-eslintignore-å¿½ç•¥æ–‡ä»¶">1.3 .eslintignore å¿½ç•¥æ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#13-eslintignore-å¿½ç•¥æ–‡ä»¶">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>dist
</span></span><span style="display:flex;"><span>node_modules
</span></span></code></pre></div><h5 id="14-è¿è¡Œè„šæœ¬">1.4 è¿è¡Œè„šæœ¬<a hidden class="anchor" aria-hidden="true" href="#14-è¿è¡Œè„šæœ¬">#</a></h5>
<p>package.json æ–°å¢ä¸¤ä¸ªè¿è¡Œè„šæœ¬</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#79740e">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;lint&#34;</span>: <span style="color:#79740e">&#34;eslint src&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;fix&#34;</span>: <span style="color:#79740e">&#34;eslint src --fix&#34;</span>,
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="äºŒé…ç½®prettier">äºŒã€é…ç½®<strong>prettier</strong><a hidden class="anchor" aria-hidden="true" href="#äºŒé…ç½®prettier">#</a></h4>
<p>æœ‰äº† eslintï¼Œä¸ºä»€ä¹ˆè¿˜è¦æœ‰ prettierï¼Ÿeslint é’ˆå¯¹çš„æ˜¯ javascriptï¼Œä»–æ˜¯ä¸€ä¸ªæ£€æµ‹å·¥å…·ï¼ŒåŒ…å« js è¯­æ³•ä»¥åŠå°‘éƒ¨åˆ†æ ¼å¼é—®é¢˜ï¼Œåœ¨ eslint çœ‹æ¥ï¼Œè¯­æ³•å¯¹äº†å°±èƒ½ä¿è¯ä»£ç æ­£å¸¸è¿è¡Œï¼Œæ ¼å¼é—®é¢˜å±äºå…¶æ¬¡ï¼›</p>
<p>è€Œ prettier å±äºæ ¼å¼åŒ–å·¥å…·ï¼Œå®ƒçœ‹ä¸æƒ¯æ ¼å¼ä¸ç»Ÿä¸€ï¼Œæ‰€ä»¥å®ƒå°±æŠŠ eslint æ²¡å¹²å¥½çš„äº‹æ¥ç€å¹²ï¼Œå¦å¤–ï¼Œprettier æ”¯æŒ</p>
<p>åŒ…å« js åœ¨å†…çš„å¤šç§è¯­è¨€ã€‚</p>
<p>æ€»ç»“èµ·æ¥ï¼Œ<strong>eslint å’Œ prettier è¿™ä¿©å…„å¼Ÿä¸€ä¸ªä¿è¯ js ä»£ç è´¨é‡ï¼Œä¸€ä¸ªä¿è¯ä»£ç ç¾è§‚ã€‚</strong></p>
<h5 id="21-å®‰è£…ä¾èµ–åŒ…">2.1 å®‰è£…ä¾èµ–åŒ…<a hidden class="anchor" aria-hidden="true" href="#21-å®‰è£…ä¾èµ–åŒ…">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pnpm install -D eslint-plugin-prettier prettier eslint-config-prettier
</span></span></code></pre></div><h5 id="22-prettierrcjson-æ·»åŠ è§„åˆ™">2.2 .prettierrc.json æ·»åŠ è§„åˆ™<a hidden class="anchor" aria-hidden="true" href="#22-prettierrcjson-æ·»åŠ è§„åˆ™">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;singleQuote&#34;</span>: <span style="color:#af3a03">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;semi&#34;</span>: <span style="color:#af3a03">false</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;bracketSpacing&#34;</span>: <span style="color:#af3a03">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;htmlWhitespaceSensitivity&#34;</span>: <span style="color:#79740e">&#34;ignore&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;endOfLine&#34;</span>: <span style="color:#79740e">&#34;auto&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;trailingComma&#34;</span>: <span style="color:#79740e">&#34;all&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;tabWidth&#34;</span>: <span style="color:#8f3f71">2</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="23-prettierignore-å¿½ç•¥æ–‡ä»¶">2.3 .prettierignore å¿½ç•¥æ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#23-prettierignore-å¿½ç•¥æ–‡ä»¶">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/dist/*
</span></span><span style="display:flex;"><span>/html/*
</span></span><span style="display:flex;"><span>.local
</span></span><span style="display:flex;"><span>/node_modules/**
</span></span><span style="display:flex;"><span>**/*.svg
</span></span><span style="display:flex;"><span>**/*.sh
</span></span><span style="display:flex;"><span>/public/*
</span></span></code></pre></div><p><strong>é€šè¿‡ pnpm run lint å»æ£€æµ‹è¯­æ³•ï¼Œå¦‚æœå‡ºç°ä¸è§„èŒƒæ ¼å¼,é€šè¿‡ pnpm run fix ä¿®æ”¹</strong></p>
<h4 id="ä¸‰é…ç½®-stylelint">ä¸‰ã€é…ç½® stylelint<a hidden class="anchor" aria-hidden="true" href="#ä¸‰é…ç½®-stylelint">#</a></h4>
<p><a href="https://stylelint.io/">stylelint</a>ä¸º css çš„ lint å·¥å…·ã€‚å¯æ ¼å¼åŒ– css ä»£ç ï¼Œæ£€æŸ¥ css è¯­æ³•é”™è¯¯ä¸ä¸åˆç†çš„å†™æ³•ï¼ŒæŒ‡å®š css ä¹¦å†™é¡ºåºç­‰ã€‚</p>
<p>æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä½¿ç”¨ scss ä½œä¸ºé¢„å¤„ç†å™¨ï¼Œå®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pnpm add sass sass-loader stylelint postcss postcss-scss postcss-html stylelint-config-prettier stylelint-config-recess-order stylelint-config-recommended-scss stylelint-config-standard stylelint-config-standard-vue stylelint-scss stylelint-order stylelint-config-standard-scss -D
</span></span></code></pre></div><h5 id="31-stylelintrccjs-é…ç½®æ–‡ä»¶">3.1 .stylelintrc.cjs é…ç½®æ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#31-stylelintrccjs-é…ç½®æ–‡ä»¶">#</a></h5>
<p><strong>å®˜ç½‘:https://stylelint.bootcss.com/</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// @see https://stylelint.bootcss.com/
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">module</span>.exports <span style="color:#af3a03">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">extends</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;stylelint-config-standard&#39;</span>, <span style="color:#928374;font-style:italic">// é…ç½®stylelintæ‹“å±•æ’ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;stylelint-config-html/vue&#39;</span>, <span style="color:#928374;font-style:italic">// é…ç½® vue ä¸­ template æ ·å¼æ ¼å¼åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;stylelint-config-standard-scss&#39;</span>, <span style="color:#928374;font-style:italic">// é…ç½®stylelint scssæ’ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;stylelint-config-recommended-vue/scss&#39;</span>, <span style="color:#928374;font-style:italic">// é…ç½® vue ä¸­ scss æ ·å¼æ ¼å¼åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;stylelint-config-recess-order&#39;</span>, <span style="color:#928374;font-style:italic">// é…ç½®stylelint csså±æ€§ä¹¦å†™é¡ºåºæ’ä»¶,
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;stylelint-config-prettier&#39;</span>, <span style="color:#928374;font-style:italic">// é…ç½®stylelintå’Œprettierå…¼å®¹
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  ],
</span></span><span style="display:flex;"><span>  overrides<span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      files<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;**/*.(scss|css|vue|html)&#39;</span>],
</span></span><span style="display:flex;"><span>      customSyntax<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;postcss-scss&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      files<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;**/*.(html|vue)&#39;</span>],
</span></span><span style="display:flex;"><span>      customSyntax<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;postcss-html&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  ignoreFiles<span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.js&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.jsx&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.tsx&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.ts&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.json&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.md&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;**/*.yaml&#39;</span>,
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   * null  =&gt; å…³é—­è¯¥è§„åˆ™
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   * always =&gt; å¿…é¡»
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">   */</span>
</span></span><span style="display:flex;"><span>  rules<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;value-keyword-case&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// åœ¨ css ä¸­ä½¿ç”¨ v-bindï¼Œä¸æŠ¥é”™
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-descending-specificity&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// ç¦æ­¢åœ¨å…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§çš„é€‰æ‹©å™¨åå‡ºç°è¢«å…¶è¦†ç›–çš„è¾ƒä½ä¼˜å…ˆçº§çš„é€‰æ‹©å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;function-url-quotes&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;always&#39;</span>, <span style="color:#928374;font-style:italic">// è¦æ±‚æˆ–ç¦æ­¢ URL çš„å¼•å· &#34;always(å¿…é¡»åŠ ä¸Šå¼•å·)&#34;|&#34;never(æ²¡æœ‰å¼•å·)&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;no-empty-source&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// å…³é—­ç¦æ­¢ç©ºæºç 
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;selector-class-pattern&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// å…³é—­å¼ºåˆ¶é€‰æ‹©å™¨ç±»åçš„æ ¼å¼
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;property-no-unknown&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// ç¦æ­¢æœªçŸ¥çš„å±æ€§(true ä¸ºä¸å…è®¸)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;block-opening-brace-space-before&#39;</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;always&#39;</span>, <span style="color:#928374;font-style:italic">//å¤§æ‹¬å·ä¹‹å‰å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼æˆ–ä¸èƒ½æœ‰ç©ºç™½ç¬¦
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;value-no-vendor-prefix&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// å…³é—­ å±æ€§å€¼å‰ç¼€ --webkit-box
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;property-no-vendor-prefix&#39;</span><span style="color:#af3a03">:</span> <span style="color:#af3a03">null</span>, <span style="color:#928374;font-style:italic">// å…³é—­ å±æ€§å‰ç¼€ -webkit-mask
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#79740e">&#39;selector-pseudo-class-no-unknown&#39;</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">// ä¸å…è®¸æœªçŸ¥çš„é€‰æ‹©å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">true</span>,
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        ignorePseudoClasses<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;global&#39;</span>, <span style="color:#79740e">&#39;v-deep&#39;</span>, <span style="color:#79740e">&#39;deep&#39;</span>], <span style="color:#928374;font-style:italic">// å¿½ç•¥å±æ€§ï¼Œä¿®æ”¹elementé»˜è®¤æ ·å¼çš„æ—¶å€™èƒ½ä½¿ç”¨åˆ°
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      },
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="32-stylelintignore-å¿½ç•¥æ–‡ä»¶">3.2 .stylelintignore å¿½ç•¥æ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#32-stylelintignore-å¿½ç•¥æ–‡ä»¶">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>/node_modules/*
</span></span><span style="display:flex;"><span>/dist/*
</span></span><span style="display:flex;"><span>/html/*
</span></span><span style="display:flex;"><span>/public/*
</span></span></code></pre></div><h5 id="33-è¿è¡Œè„šæœ¬">3.3 è¿è¡Œè„šæœ¬<a hidden class="anchor" aria-hidden="true" href="#33-è¿è¡Œè„šæœ¬">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#79740e">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>	<span style="color:#9d0006">&#34;lint:style&#34;</span>: <span style="color:#79740e">&#34;stylelint src/**/*.{css,scss,vue} --cache --fix&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æœ€åé…ç½®ç»Ÿä¸€çš„ prettier æ¥æ ¼å¼åŒ–æˆ‘ä»¬çš„ js å’Œ cssï¼Œhtml ä»£ç </p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span> <span style="color:#79740e">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;dev&#34;</span>: <span style="color:#79740e">&#34;vite --open&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;build&#34;</span>: <span style="color:#79740e">&#34;vue-tsc &amp;&amp; vite build&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;preview&#34;</span>: <span style="color:#79740e">&#34;vite preview&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;lint&#34;</span>: <span style="color:#79740e">&#34;eslint src&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;fix&#34;</span>: <span style="color:#79740e">&#34;eslint src --fix&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;format&#34;</span>: <span style="color:#79740e">&#34;prettier --write \&#34;./**/*.{html,vue,ts,js,json,md}\&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;lint:eslint&#34;</span>: <span style="color:#79740e">&#34;eslint src/**/*.{ts,vue} --cache --fix&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;lint:style&#34;</span>: <span style="color:#79740e">&#34;stylelint src/**/*.{css,scss,vue} --cache --fix&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span></code></pre></div><p><strong>å½“æˆ‘ä»¬è¿è¡Œ<code>pnpm run format</code>çš„æ—¶å€™ï¼Œä¼šæŠŠä»£ç ç›´æ¥æ ¼å¼åŒ–</strong></p>
<h4 id="å››é…ç½®-husky">å››ã€é…ç½® husky<a hidden class="anchor" aria-hidden="true" href="#å››é…ç½®-husky">#</a></h4>
<p>åœ¨ä¸Šé¢æˆ‘ä»¬å·²ç»é›†æˆå¥½äº†æˆ‘ä»¬ä»£ç æ ¡éªŒå·¥å…·ï¼Œä½†æ˜¯éœ€è¦æ¯æ¬¡æ‰‹åŠ¨çš„å»æ‰§è¡Œå‘½ä»¤æ‰ä¼šæ ¼å¼åŒ–æˆ‘ä»¬çš„ä»£ç ã€‚å¦‚æœæœ‰äººæ²¡æœ‰æ ¼å¼åŒ–å°±æäº¤äº†è¿œç¨‹ä»“åº“ä¸­ï¼Œé‚£è¿™ä¸ªè§„èŒƒå°±æ²¡ä»€ä¹ˆç”¨ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¼ºåˆ¶è®©å¼€å‘äººå‘˜æŒ‰ç…§ä»£ç è§„èŒƒæ¥æäº¤ã€‚</p>
<p>è¦åšåˆ°è¿™ä»¶äº‹æƒ…ï¼Œå°±éœ€è¦åˆ©ç”¨ husky åœ¨ä»£ç æäº¤ä¹‹å‰è§¦å‘ git hook(git åœ¨å®¢æˆ·ç«¯çš„é’©å­)ï¼Œç„¶åæ‰§è¡Œ<code>pnpm run format</code>æ¥è‡ªåŠ¨çš„æ ¼å¼åŒ–æˆ‘ä»¬çš„ä»£ç ã€‚</p>
<p>å®‰è£…<code>husky</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm install -D husky
</span></span></code></pre></div><p>æ‰§è¡Œ</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>npx husky-init
</span></span></code></pre></div><p>ä¼šåœ¨æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸ªä¸€ä¸ª.husky ç›®å½•ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸‹é¢ä¼šæœ‰ä¸€ä¸ª pre-commit æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œé¢çš„å‘½ä»¤åœ¨æˆ‘ä»¬æ‰§è¡Œ commit çš„æ—¶å€™å°±ä¼šæ‰§è¡Œ</p>
<p>åœ¨<code>.husky/pre-commit</code>æ–‡ä»¶æ·»åŠ å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#427b58">#!/usr/bin/env sh
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>. <span style="color:#79740e">&#34;</span><span style="color:#af3a03">$(</span>dirname -- <span style="color:#79740e">&#34;</span>$0<span style="color:#79740e">&#34;</span><span style="color:#af3a03">)</span><span style="color:#79740e">/_/husky.sh&#34;</span>
</span></span><span style="display:flex;"><span>pnpm run format
</span></span></code></pre></div><p>å½“æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œ commit æ“ä½œçš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œå‘½ä»¤ï¼Œå¯¹ä»£ç è¿›è¡Œæ ¼å¼åŒ–ï¼Œç„¶åå†æäº¤ã€‚</p>
<h4 id="äº”é…ç½®-commitlint">äº”ã€é…ç½® commitlint<a hidden class="anchor" aria-hidden="true" href="#äº”é…ç½®-commitlint">#</a></h4>
<p>å¯¹äºæˆ‘ä»¬çš„ commit ä¿¡æ¯ï¼Œä¹Ÿæ˜¯æœ‰ç»Ÿä¸€è§„èŒƒçš„ï¼Œä¸èƒ½éšä¾¿å†™,è¦è®©æ¯ä¸ªäººéƒ½æŒ‰ç…§ç»Ÿä¸€çš„æ ‡å‡†æ¥æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨<strong>commitlint</strong>æ¥å®ç°ã€‚</p>
<p>å®‰è£…åŒ…</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm add @commitlint/config-conventional @commitlint/cli -D
</span></span></code></pre></div><p>æ·»åŠ é…ç½®æ–‡ä»¶ï¼Œæ–°å»º<code>commitlint.config.cjs</code>(æ³¨æ„æ˜¯ cjs)ï¼Œç„¶åæ·»åŠ ä¸‹é¢çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">module</span>.exports <span style="color:#af3a03">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">extends</span><span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;@commitlint/config-conventional&#39;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// æ ¡éªŒè§„åˆ™
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  rules<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;type-enum&#39;</span><span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>      <span style="color:#8f3f71">2</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#39;always&#39;</span>,
</span></span><span style="display:flex;"><span>      [
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;feat&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;fix&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;docs&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;style&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;refactor&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;perf&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;test&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;chore&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;revert&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;build&#39;</span>,
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;type-case&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;type-empty&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;scope-empty&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;scope-case&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;subject-full-stop&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>, <span style="color:#79740e">&#39;never&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;subject-case&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>, <span style="color:#79740e">&#39;never&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">&#39;header-max-length&#39;</span><span style="color:#af3a03">:</span> [<span style="color:#8f3f71">0</span>, <span style="color:#79740e">&#39;always&#39;</span>, <span style="color:#8f3f71">72</span>],
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>åœ¨<code>package.json</code>ä¸­é…ç½® scripts å‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// åœ¨scripsä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;commitlint&#34;</span>: <span style="color:#79740e">&#34;commitlint --config commitlint.config.cjs -e -V&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>é…ç½®ç»“æŸï¼Œç°åœ¨å½“æˆ‘ä»¬å¡«å†™<code>commit</code>ä¿¡æ¯çš„æ—¶å€™ï¼Œå‰é¢å°±éœ€è¦å¸¦ç€ä¸‹é¢çš„<code>subject</code></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&#39;feat&#39;,//æ–°ç‰¹æ€§ã€æ–°åŠŸèƒ½
</span></span><span style="display:flex;"><span>&#39;fix&#39;,//ä¿®æ”¹bug
</span></span><span style="display:flex;"><span>&#39;docs&#39;,//æ–‡æ¡£ä¿®æ”¹
</span></span><span style="display:flex;"><span>&#39;style&#39;,//ä»£ç æ ¼å¼ä¿®æ”¹, æ³¨æ„ä¸æ˜¯ css ä¿®æ”¹
</span></span><span style="display:flex;"><span>&#39;refactor&#39;,//ä»£ç é‡æ„
</span></span><span style="display:flex;"><span>&#39;perf&#39;,//ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ
</span></span><span style="display:flex;"><span>&#39;test&#39;,//æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹
</span></span><span style="display:flex;"><span>&#39;chore&#39;,//å…¶ä»–ä¿®æ”¹, æ¯”å¦‚æ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰
</span></span><span style="display:flex;"><span>&#39;revert&#39;,//å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
</span></span><span style="display:flex;"><span>&#39;build&#39;,//ç¼–è¯‘ç›¸å…³çš„ä¿®æ”¹ï¼Œä¾‹å¦‚å‘å¸ƒç‰ˆæœ¬ã€å¯¹é¡¹ç›®æ„å»ºæˆ–è€…ä¾èµ–çš„æ”¹åŠ¨
</span></span></code></pre></div><p>é…ç½® husky</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>npx husky add .husky/commit-msg
</span></span></code></pre></div><p>åœ¨ç”Ÿæˆçš„ commit-msg æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢çš„å‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#427b58">#!/usr/bin/env sh
</span></span></span><span style="display:flex;"><span><span style="color:#427b58"></span>. <span style="color:#79740e">&#34;</span><span style="color:#af3a03">$(</span>dirname -- <span style="color:#79740e">&#34;</span>$0<span style="color:#79740e">&#34;</span><span style="color:#af3a03">)</span><span style="color:#79740e">/_/husky.sh&#34;</span>
</span></span><span style="display:flex;"><span>pnpm commitlint
</span></span></code></pre></div><p>å½“æˆ‘ä»¬ commit æäº¤ä¿¡æ¯æ—¶ï¼Œå°±ä¸èƒ½å†éšæ„å†™äº†ï¼Œå¿…é¡»æ˜¯ git commit -m &lsquo;fix: xxx&rsquo; ç¬¦åˆç±»å‹çš„æ‰å¯ä»¥ï¼Œ<strong>éœ€è¦æ³¨æ„çš„æ˜¯ç±»å‹çš„åé¢éœ€è¦ç”¨è‹±æ–‡çš„ :ï¼Œå¹¶ä¸”å†’å·åé¢æ˜¯éœ€è¦ç©ºä¸€æ ¼çš„ï¼Œè¿™ä¸ªæ˜¯ä¸èƒ½çœç•¥çš„</strong></p>
<h4 id="å…­å¼ºåˆ¶ä½¿ç”¨-pnpm-åŒ…ç®¡ç†å™¨å·¥å…·">å…­ã€å¼ºåˆ¶ä½¿ç”¨ pnpm åŒ…ç®¡ç†å™¨å·¥å…·<a hidden class="anchor" aria-hidden="true" href="#å…­å¼ºåˆ¶ä½¿ç”¨-pnpm-åŒ…ç®¡ç†å™¨å·¥å…·">#</a></h4>
<p>å›¢é˜Ÿå¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œéœ€è¦ç»Ÿä¸€åŒ…ç®¡ç†å™¨å·¥å…·,å› ä¸ºä¸åŒåŒ…ç®¡ç†å™¨å·¥å…·ä¸‹è½½åŒä¸€ä¸ªä¾èµ–,å¯èƒ½ç‰ˆæœ¬ä¸ä¸€æ ·,</p>
<p>å¯¼è‡´é¡¹ç›®å‡ºç° bug é—®é¢˜,å› æ­¤åŒ…ç®¡ç†å™¨å·¥å…·éœ€è¦ç»Ÿä¸€ç®¡ç†ï¼ï¼ï¼</p>
<p>åœ¨æ ¹ç›®å½•åˆ›å»º<code>scritps/preinstall.js</code>æ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢çš„å†…å®¹</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">if</span> (<span style="color:#af3a03">!</span><span style="color:#79740e">/pnpm/</span>.test(process.env.npm_execpath <span style="color:#af3a03">||</span> <span style="color:#79740e">&#39;&#39;</span>)) {
</span></span><span style="display:flex;"><span>  console.warn(
</span></span><span style="display:flex;"><span>    <span style="color:#79740e">`</span>\<span style="color:#79740e">u001b[33mThis repository must using pnpm as the package manager `</span> <span style="color:#af3a03">+</span>
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">` for scripts to work properly.</span>\<span style="color:#79740e">u001b[39m</span>\<span style="color:#79740e">n`</span>,
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>  process.exit(<span style="color:#8f3f71">1</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>é…ç½®å‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#79740e">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>	<span style="color:#9d0006">&#34;preinstall&#34;</span>: <span style="color:#79740e">&#34;node ./scripts/preinstall.js&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>å½“æˆ‘ä»¬ä½¿ç”¨ npm æˆ–è€… yarn æ¥å®‰è£…åŒ…çš„æ—¶å€™ï¼Œå°±ä¼šæŠ¥é”™äº†ã€‚åŸç†å°±æ˜¯åœ¨ install çš„æ—¶å€™ä¼šè§¦å‘ preinstallï¼ˆnpm æä¾›çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼‰è¿™ä¸ªæ–‡ä»¶é‡Œé¢çš„ä»£ç ã€‚</strong></p>
<h2 id="ä¸‰é¡¹ç›®é›†æˆ">ä¸‰ã€é¡¹ç›®é›†æˆ<a hidden class="anchor" aria-hidden="true" href="#ä¸‰é¡¹ç›®é›†æˆ">#</a></h2>
<h3 id="31-é›†æˆ-element-plus">3.1 é›†æˆ element-plus<a hidden class="anchor" aria-hidden="true" href="#31-é›†æˆ-element-plus">#</a></h3>
<p>ç¡…è°·ç”„é€‰è¿è¥å¹³å°,UI ç»„ä»¶åº“é‡‡ç”¨çš„ element-plusï¼Œå› æ­¤éœ€è¦é›†æˆ element-plus æ’ä»¶ï¼ï¼ï¼</p>
<p>å®˜ç½‘åœ°å€:https://element-plus.gitee.io/zh-CN/</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm install element-plus @element-plus/icons-vue
</span></span></code></pre></div><p><strong>å…¥å£æ–‡ä»¶ main.ts å…¨å±€å®‰è£… element-plus,element-plus é»˜è®¤æ”¯æŒè¯­è¨€è‹±è¯­è®¾ç½®ä¸ºä¸­æ–‡</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> ElementPlus <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;element-plus&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> <span style="color:#79740e">&#39;element-plus/dist/index.css&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//@ts-ignoreå¿½ç•¥å½“å‰æ–‡ä»¶tsç±»å‹çš„æ£€æµ‹å¦åˆ™æœ‰çº¢è‰²æç¤º(æ‰“åŒ…ä¼šå¤±è´¥)
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">import</span> zhCn <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;element-plus/dist/locale/zh-cn.mjs&#39;</span>
</span></span><span style="display:flex;"><span>app.use(ElementPlus, {
</span></span><span style="display:flex;"><span>  locale: <span style="color:#b57614">zhCn</span>,
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p><strong>Element Plus å…¨å±€ç»„ä»¶ç±»å‹å£°æ˜</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// tsconfig.json
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;compilerOptions&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#9d0006">&#34;types&#34;</span>: [<span style="color:#79740e">&#34;element-plus/global&#34;</span>]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>é…ç½®å®Œæ¯•å¯ä»¥æµ‹è¯• element-plus ç»„ä»¶ä¸å›¾æ ‡çš„ä½¿ç”¨.</p>
<h3 id="32-src-åˆ«åçš„é…ç½®">3.2 src åˆ«åçš„é…ç½®<a hidden class="anchor" aria-hidden="true" href="#32-src-åˆ«åçš„é…ç½®">#</a></h3>
<p>åœ¨å¼€å‘é¡¹ç›®çš„æ—¶å€™æ–‡ä»¶ä¸æ–‡ä»¶å…³ç³»å¯èƒ½å¾ˆå¤æ‚ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç»™ src æ–‡ä»¶å¤¹é…ç½®ä¸€ä¸ªåˆ«åï¼ï¼ï¼</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// vite.config.ts
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">import</span> { defineConfig } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vite&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> vue <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;@vitejs/plugin-vue&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> path <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;path&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> defineConfig({
</span></span><span style="display:flex;"><span>  plugins<span style="color:#af3a03">:</span> [vue()],
</span></span><span style="display:flex;"><span>  resolve<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>    alias<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#79740e">&#39;@&#39;</span><span style="color:#af3a03">:</span> path.resolve(<span style="color:#79740e">&#39;./src&#39;</span>), <span style="color:#928374;font-style:italic">// ç›¸å¯¹è·¯å¾„åˆ«åé…ç½®ï¼Œä½¿ç”¨ @ ä»£æ›¿ src
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    },
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p><strong>TypeScript ç¼–è¯‘é…ç½®</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">// tsconfig.json
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#9d0006">&#34;compilerOptions&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;baseUrl&#34;</span>: <span style="color:#79740e">&#34;./&#34;</span>, <span style="color:#928374;font-style:italic">// è§£æéç›¸å¯¹æ¨¡å—çš„åŸºåœ°å€ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½•
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#9d0006">&#34;paths&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//è·¯å¾„æ˜ å°„ï¼Œç›¸å¯¹äºbaseUrl
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#9d0006">&#34;@/*&#34;</span>: [<span style="color:#79740e">&#34;src/*&#34;</span>]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="33-ç¯å¢ƒå˜é‡çš„é…ç½®">3.3 ç¯å¢ƒå˜é‡çš„é…ç½®<a hidden class="anchor" aria-hidden="true" href="#33-ç¯å¢ƒå˜é‡çš„é…ç½®">#</a></h3>
<p><strong>é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè‡³å°‘ä¼šç»å†å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒ(å³æ­£å¼ç¯å¢ƒ)ä¸‰ä¸ªé˜¶æ®µã€‚ä¸åŒé˜¶æ®µè¯·æ±‚çš„çŠ¶æ€(å¦‚æ¥å£åœ°å€ç­‰)ä¸å°½ç›¸åŒï¼Œè‹¥æ‰‹åŠ¨åˆ‡æ¢æ¥å£åœ°å€æ˜¯ç›¸å½“ç¹çä¸”æ˜“å‡ºé”™çš„ã€‚äºæ˜¯ç¯å¢ƒå˜é‡é…ç½®çš„éœ€æ±‚å°±åº”è¿è€Œç”Ÿï¼Œæˆ‘ä»¬åªéœ€åšç®€å•çš„é…ç½®ï¼ŒæŠŠç¯å¢ƒçŠ¶æ€åˆ‡æ¢çš„å·¥ä½œäº¤ç»™ä»£ç ã€‚</strong></p>
<p>å¼€å‘ç¯å¢ƒï¼ˆdevelopmentï¼‰
é¡¾åæ€ä¹‰ï¼Œå¼€å‘ä½¿ç”¨çš„ç¯å¢ƒï¼Œæ¯ä½å¼€å‘äººå‘˜åœ¨è‡ªå·±çš„ dev åˆ†æ”¯ä¸Šå¹²æ´»ï¼Œå¼€å‘åˆ°ä¸€å®šç¨‹åº¦ï¼ŒåŒäº‹ä¼šåˆå¹¶ä»£ç ï¼Œè¿›è¡Œè”è°ƒã€‚</p>
<p>æµ‹è¯•ç¯å¢ƒï¼ˆtestingï¼‰
æµ‹è¯•åŒäº‹å¹²æ´»çš„ç¯å¢ƒå•¦ï¼Œä¸€èˆ¬ä¼šç”±æµ‹è¯•åŒäº‹è‡ªå·±æ¥éƒ¨ç½²ï¼Œç„¶ååœ¨æ­¤ç¯å¢ƒè¿›è¡Œæµ‹è¯•</p>
<p>ç”Ÿäº§ç¯å¢ƒï¼ˆproductionï¼‰
ç”Ÿäº§ç¯å¢ƒæ˜¯æŒ‡æ­£å¼æä¾›å¯¹å¤–æœåŠ¡çš„ï¼Œä¸€èˆ¬ä¼šå…³æ‰é”™è¯¯æŠ¥å‘Šï¼Œæ‰“å¼€é”™è¯¯æ—¥å¿—ã€‚(æ­£å¼æä¾›ç»™å®¢æˆ·ä½¿ç”¨çš„ç¯å¢ƒã€‚)</p>
<p>æ³¨æ„:ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç¯å¢ƒå¯¹åº”ä¸€å°æœåŠ¡å™¨,ä¹Ÿæœ‰çš„å…¬å¸å¼€å‘ä¸æµ‹è¯•ç¯å¢ƒæ˜¯ä¸€å°æœåŠ¡å™¨ï¼ï¼ï¼</p>
<p>é¡¹ç›®æ ¹ç›®å½•åˆ†åˆ«æ·»åŠ  å¼€å‘ã€ç”Ÿäº§å’Œæµ‹è¯•ç¯å¢ƒçš„æ–‡ä»¶!</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>.env.development
</span></span><span style="display:flex;"><span>.env.production
</span></span><span style="display:flex;"><span>.env.test
</span></span></code></pre></div><p>æ–‡ä»¶å†…å®¹</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># å˜é‡å¿…é¡»ä»¥ VITE_ ä¸ºå‰ç¼€æ‰èƒ½æš´éœ²ç»™å¤–éƒ¨è¯»å–</span>
</span></span><span style="display:flex;"><span>NODE_ENV <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;development&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_TITLE <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;ç¡…è°·ç”„é€‰è¿è¥å¹³å°&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_BASE_API <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/dev-api&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>NODE_ENV <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;production&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_TITLE <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;ç¡…è°·ç”„é€‰è¿è¥å¹³å°&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_BASE_API <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/prod-api&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># å˜é‡å¿…é¡»ä»¥ VITE_ ä¸ºå‰ç¼€æ‰èƒ½æš´éœ²ç»™å¤–éƒ¨è¯»å–</span>
</span></span><span style="display:flex;"><span>NODE_ENV <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;test&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_TITLE <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;ç¡…è°·ç”„é€‰è¿è¥å¹³å°&#39;</span>
</span></span><span style="display:flex;"><span>VITE_APP_BASE_API <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/test-api&#39;</span>
</span></span></code></pre></div><p>é…ç½®è¿è¡Œå‘½ä»¤ï¼špackage.json</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span> <span style="color:#79740e">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;dev&#34;</span>: <span style="color:#79740e">&#34;vite --open&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;build:test&#34;</span>: <span style="color:#79740e">&#34;vue-tsc &amp;&amp; vite build --mode test&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;build:pro&#34;</span>: <span style="color:#79740e">&#34;vue-tsc &amp;&amp; vite build --mode production&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#9d0006">&#34;preview&#34;</span>: <span style="color:#79740e">&#34;vite preview&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span></code></pre></div><p>é€šè¿‡ import.meta.env è·å–ç¯å¢ƒå˜é‡</p>
<h3 id="34-svg-å›¾æ ‡é…ç½®">3.4 SVG å›¾æ ‡é…ç½®<a hidden class="anchor" aria-hidden="true" href="#34-svg-å›¾æ ‡é…ç½®">#</a></h3>
<p>åœ¨å¼€å‘é¡¹ç›®çš„æ—¶å€™ç»å¸¸ä¼šç”¨åˆ° svg çŸ¢é‡å›¾,è€Œä¸”æˆ‘ä»¬ä½¿ç”¨ SVG ä»¥åï¼Œé¡µé¢ä¸ŠåŠ è½½çš„ä¸å†æ˜¯å›¾ç‰‡èµ„æº,</p>
<p>è¿™å¯¹é¡µé¢æ€§èƒ½æ¥è¯´æ˜¯ä¸ªå¾ˆå¤§çš„æå‡ï¼Œè€Œä¸”æˆ‘ä»¬ SVG æ–‡ä»¶æ¯” img è¦å°çš„å¾ˆå¤šï¼Œæ”¾åœ¨é¡¹ç›®ä¸­å‡ ä¹ä¸å ç”¨èµ„æºã€‚</p>
<p><strong>å®‰è£… SVG ä¾èµ–æ’ä»¶</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm install vite-plugin-svg-icons -D
</span></span></code></pre></div><p><strong>åœ¨<code>vite.config.ts</code>ä¸­é…ç½®æ’ä»¶</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> { createSvgIconsPlugin } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vite-plugin-svg-icons&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> path <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;path&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> () <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> {
</span></span><span style="display:flex;"><span>    plugins<span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>      createSvgIconsPlugin({
</span></span><span style="display:flex;"><span>        <span style="color:#928374;font-style:italic">// Specify the icon folder to be cached
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        iconDirs<span style="color:#af3a03">:</span> [path.resolve(process.cwd(), <span style="color:#79740e">&#39;src/assets/icons&#39;</span>)],
</span></span><span style="display:flex;"><span>        <span style="color:#928374;font-style:italic">// Specify symbolId format
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        symbolId<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;icon-[dir]-[name]&#39;</span>,
</span></span><span style="display:flex;"><span>      }),
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>å…¥å£æ–‡ä»¶å¯¼å…¥</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> <span style="color:#79740e">&#39;virtual:svg-icons-register&#39;</span>
</span></span></code></pre></div><h4 id="341-svg-å°è£…ä¸ºå…¨å±€ç»„ä»¶">3.4.1 svg å°è£…ä¸ºå…¨å±€ç»„ä»¶<a hidden class="anchor" aria-hidden="true" href="#341-svg-å°è£…ä¸ºå…¨å±€ç»„ä»¶">#</a></h4>
<p>å› ä¸ºé¡¹ç›®å¾ˆå¤šæ¨¡å—éœ€è¦ä½¿ç”¨å›¾æ ‡,å› æ­¤æŠŠå®ƒå°è£…ä¸ºå…¨å±€ç»„ä»¶ï¼ï¼ï¼</p>
<p><strong>åœ¨ src/components ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª SvgIcon ç»„ä»¶:ä»£è¡¨å¦‚ä¸‹</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#9d0006">svg</span> <span style="color:#79740e;font-weight:bold">:style</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;{ width: width, height: height }&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#9d0006">use</span> <span style="color:#79740e;font-weight:bold">:xlink:href</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;prefix + name&#34;</span> <span style="color:#79740e;font-weight:bold">:fill</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;color&#34;</span>&gt;&lt;/<span style="color:#9d0006">use</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#9d0006">svg</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#9d0006">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">script</span> <span style="color:#79740e;font-weight:bold">setup</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;ts&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  defineProps({
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//xlink:hrefå±æ€§å€¼çš„å‰ç¼€
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    prefix<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      type<span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;#icon-&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//svgçŸ¢é‡å›¾çš„åå­—
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    name<span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//svgå›¾æ ‡çš„é¢œè‰²
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    color<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      type<span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//svgå®½åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    width<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      type<span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;16px&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//svgé«˜åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    height<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      type<span style="color:#af3a03">:</span> <span style="color:#b57614">String</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;16px&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#9d0006">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>åœ¨ src æ–‡ä»¶å¤¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª index.ts æ–‡ä»¶ï¼šç”¨äºæ³¨å†Œ components æ–‡ä»¶å¤¹å†…éƒ¨å…¨éƒ¨å…¨å±€ç»„ä»¶ï¼ï¼ï¼</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> SvgIcon <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;./SvgIcon/index.vue&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> <span style="color:#af3a03">type</span> { App, Component } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vue&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">const</span> components<span style="color:#af3a03">:</span> { [name: <span style="color:#b57614">string</span>]<span style="color:#af3a03">:</span> Component } <span style="color:#af3a03">=</span> { SvgIcon }
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> {
</span></span><span style="display:flex;"><span>  install(app: <span style="color:#b57614">App</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#b57614">Object</span>.keys(components).forEach((key: <span style="color:#b57614">string</span>) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>      app.component(key, components[key])
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>åœ¨å…¥å£æ–‡ä»¶å¼•å…¥ src/index.ts æ–‡ä»¶,é€šè¿‡ app.use æ–¹æ³•å®‰è£…è‡ªå®šä¹‰æ’ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> gloablComponent <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;./components/index&#39;</span>
</span></span><span style="display:flex;"><span>app.use(gloablComponent)
</span></span></code></pre></div><h3 id="35-é›†æˆ-sass">3.5 é›†æˆ sass<a hidden class="anchor" aria-hidden="true" href="#35-é›†æˆ-sass">#</a></h3>
<p>æˆ‘ä»¬ç›®å‰åœ¨ç»„ä»¶å†…éƒ¨å·²ç»å¯ä»¥ä½¿ç”¨ scss æ ·å¼,å› ä¸ºåœ¨é…ç½® styleLint å·¥å…·çš„æ—¶å€™ï¼Œé¡¹ç›®å½“ä¸­å·²ç»å®‰è£…è¿‡ sass sass-loader,å› æ­¤æˆ‘ä»¬å†ç»„ä»¶å†…å¯ä»¥ä½¿ç”¨ scss è¯­æ³•ï¼ï¼ï¼éœ€è¦åŠ ä¸Š lang=&ldquo;scss&rdquo;</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span>&lt;<span style="color:#9d0006">style</span> <span style="color:#79740e;font-weight:bold">scoped</span> <span style="color:#79740e;font-weight:bold">lang</span><span style="color:#af3a03">=</span><span style="color:#79740e">&#34;scss&#34;</span>&gt;&lt;/<span style="color:#9d0006">style</span>&gt;
</span></span></code></pre></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸ºé¡¹ç›®æ·»åŠ ä¸€äº›å…¨å±€çš„æ ·å¼</p>
<p>åœ¨ src/styles ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª index.scss æ–‡ä»¶ï¼Œå½“ç„¶é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°æ¸…é™¤é»˜è®¤æ ·å¼ï¼Œå› æ­¤åœ¨ index.scss å¼•å…¥ reset.scss</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">@import</span> reset.scss
</span></span></code></pre></div><p>åœ¨å…¥å£æ–‡ä»¶å¼•å…¥</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>import &#39;@/styles&#39;
</span></span></code></pre></div><p>ä½†æ˜¯ä½ ä¼šå‘ç°åœ¨ src/styles/index.scss å…¨å±€æ ·å¼æ–‡ä»¶ä¸­æ²¡æœ‰åŠæ³•ä½¿ç”¨$å˜é‡.å› æ­¤éœ€è¦ç»™é¡¹ç›®ä¸­å¼•å…¥å…¨å±€å˜é‡$.</p>
<p>åœ¨ style/variable.scss åˆ›å»ºä¸€ä¸ª variable.scss æ–‡ä»¶ï¼</p>
<p>åœ¨ vite.config.ts æ–‡ä»¶é…ç½®å¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> defineConfig((config) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>	css<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>      preprocessorOptions<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>        scss<span style="color:#af3a03">:</span> {
</span></span><span style="display:flex;"><span>          javascriptEnabled: <span style="color:#b57614">true</span>,
</span></span><span style="display:flex;"><span>          additionalData<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;@import &#34;./src/styles/variable.scss&#34;;&#39;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong><code>@import &quot;./src/styles/variable.less&quot;;</code>åé¢çš„<code>;</code>ä¸è¦å¿˜è®°ï¼Œä¸ç„¶ä¼šæŠ¥é”™</strong>!</p>
<p>é…ç½®å®Œæ¯•ä½ ä¼šå‘ç° scss æä¾›è¿™äº›å…¨å±€å˜é‡å¯ä»¥åœ¨ç»„ä»¶æ ·å¼ä¸­ä½¿ç”¨äº†ï¼ï¼ï¼</p>
<h3 id="36-mock-æ•°æ®">3.6 mock æ•°æ®<a hidden class="anchor" aria-hidden="true" href="#36-mock-æ•°æ®">#</a></h3>
<p>å®‰è£…ä¾èµ–:https://www.npmjs.com/package/vite-plugin-mock</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm install -D vite-plugin-mock mockjs
</span></span></code></pre></div><p>åœ¨ vite.config.js é…ç½®æ–‡ä»¶å¯ç”¨æ’ä»¶ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> { UserConfigExport, ConfigEnv } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vite&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> { viteMockServe } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;vite-plugin-mock&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> vue <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;@vitejs/plugin-vue&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> ({ command }) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> {
</span></span><span style="display:flex;"><span>    plugins<span style="color:#af3a03">:</span> [
</span></span><span style="display:flex;"><span>      vue(),
</span></span><span style="display:flex;"><span>      viteMockServe({
</span></span><span style="display:flex;"><span>        localEnabled: <span style="color:#b57614">command</span> <span style="color:#af3a03">===</span> <span style="color:#79740e">&#39;serve&#39;</span>,
</span></span><span style="display:flex;"><span>      }),
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>åœ¨æ ¹ç›®å½•åˆ›å»º mock æ–‡ä»¶å¤¹:å»åˆ›å»ºæˆ‘ä»¬éœ€è¦ mock æ•°æ®ä¸æ¥å£ï¼ï¼ï¼</p>
<p>åœ¨ mock æ–‡ä»¶å¤¹å†…éƒ¨åˆ›å»ºä¸€ä¸ª user.ts æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//ç”¨æˆ·ä¿¡æ¯æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">function</span> createUserList() {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      userId: <span style="color:#b57614">1</span>,
</span></span><span style="display:flex;"><span>      avatar<span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif&#39;</span>,
</span></span><span style="display:flex;"><span>      username<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;admin&#39;</span>,
</span></span><span style="display:flex;"><span>      password<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;111111&#39;</span>,
</span></span><span style="display:flex;"><span>      desc<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;å¹³å°ç®¡ç†å‘˜&#39;</span>,
</span></span><span style="display:flex;"><span>      roles<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;å¹³å°ç®¡ç†å‘˜&#39;</span>],
</span></span><span style="display:flex;"><span>      buttons<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;cuser.detail&#39;</span>],
</span></span><span style="display:flex;"><span>      routes<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;home&#39;</span>],
</span></span><span style="display:flex;"><span>      token<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;Admin Token&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      userId: <span style="color:#b57614">2</span>,
</span></span><span style="display:flex;"><span>      avatar<span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#79740e">&#39;https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif&#39;</span>,
</span></span><span style="display:flex;"><span>      username<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;system&#39;</span>,
</span></span><span style="display:flex;"><span>      password<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;111111&#39;</span>,
</span></span><span style="display:flex;"><span>      desc<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;ç³»ç»Ÿç®¡ç†å‘˜&#39;</span>,
</span></span><span style="display:flex;"><span>      roles<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;ç³»ç»Ÿç®¡ç†å‘˜&#39;</span>],
</span></span><span style="display:flex;"><span>      buttons<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;cuser.detail&#39;</span>, <span style="color:#79740e">&#39;cuser.user&#39;</span>],
</span></span><span style="display:flex;"><span>      routes<span style="color:#af3a03">:</span> [<span style="color:#79740e">&#39;home&#39;</span>],
</span></span><span style="display:flex;"><span>      token<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;System Token&#39;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> [
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// ç”¨æˆ·ç™»å½•æ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    url<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;/api/user/login&#39;</span>, <span style="color:#928374;font-style:italic">//è¯·æ±‚åœ°å€
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    method<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;post&#39;</span>, <span style="color:#928374;font-style:italic">//è¯·æ±‚æ–¹å¼
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    response<span style="color:#af3a03">:</span> ({ body }) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//è·å–è¯·æ±‚ä½“æºå¸¦è¿‡æ¥çš„ç”¨æˆ·åä¸å¯†ç 
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">const</span> { username, password } <span style="color:#af3a03">=</span> body
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//è°ƒç”¨è·å–ç”¨æˆ·ä¿¡æ¯å‡½æ•°,ç”¨äºåˆ¤æ–­æ˜¯å¦æœ‰æ­¤ç”¨æˆ·
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">const</span> checkUser <span style="color:#af3a03">=</span> createUserList().find(
</span></span><span style="display:flex;"><span>        (item) <span style="color:#af3a03">=&gt;</span> item.username <span style="color:#af3a03">===</span> username <span style="color:#af3a03">&amp;&amp;</span> item.password <span style="color:#af3a03">===</span> password,
</span></span><span style="display:flex;"><span>      )
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//æ²¡æœ‰ç”¨æˆ·è¿”å›å¤±è´¥ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">if</span> (<span style="color:#af3a03">!</span>checkUser) {
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">return</span> { code: <span style="color:#b57614">201</span>, data<span style="color:#af3a03">:</span> { message<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;è´¦å·æˆ–è€…å¯†ç ä¸æ­£ç¡®&#39;</span> } }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//å¦‚æœæœ‰è¿”å›æˆåŠŸä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">const</span> { token } <span style="color:#af3a03">=</span> checkUser
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">return</span> { code: <span style="color:#b57614">200</span>, data<span style="color:#af3a03">:</span> { token } }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#928374;font-style:italic">// è·å–ç”¨æˆ·ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  {
</span></span><span style="display:flex;"><span>    url<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;/api/user/info&#39;</span>,
</span></span><span style="display:flex;"><span>    method<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;get&#39;</span>,
</span></span><span style="display:flex;"><span>    response<span style="color:#af3a03">:</span> (request) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//è·å–è¯·æ±‚å¤´æºå¸¦token
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">const</span> token <span style="color:#af3a03">=</span> request.headers.token
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯æ˜¯å¦åŒ…å«æœ‰æ¬¡tokenç”¨æˆ·
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">const</span> checkUser <span style="color:#af3a03">=</span> createUserList().find((item) <span style="color:#af3a03">=&gt;</span> item.token <span style="color:#af3a03">===</span> token)
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//æ²¡æœ‰è¿”å›å¤±è´¥çš„ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">if</span> (<span style="color:#af3a03">!</span>checkUser) {
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">return</span> { code: <span style="color:#b57614">201</span>, data<span style="color:#af3a03">:</span> { message<span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥&#39;</span> } }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#928374;font-style:italic">//å¦‚æœæœ‰è¿”å›æˆåŠŸä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>      <span style="color:#af3a03">return</span> { code: <span style="color:#b57614">200</span>, data<span style="color:#af3a03">:</span> { checkUser } }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p><strong>å®‰è£… axios</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pnpm install axios
</span></span></code></pre></div><p>æœ€åé€šè¿‡ axios æµ‹è¯•æ¥å£ï¼ï¼ï¼</p>
<h3 id="37-axios-äºŒæ¬¡å°è£…">3.7 axios äºŒæ¬¡å°è£…<a hidden class="anchor" aria-hidden="true" href="#37-axios-äºŒæ¬¡å°è£…">#</a></h3>
<p>åœ¨å¼€å‘é¡¹ç›®çš„æ—¶å€™é¿å…ä¸äº†ä¸åç«¯è¿›è¡Œäº¤äº’,å› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ axios æ’ä»¶å®ç°å‘é€ç½‘ç»œè¯·æ±‚ã€‚åœ¨å¼€å‘é¡¹ç›®çš„æ—¶å€™</p>
<p>æˆ‘ä»¬ç»å¸¸ä¼šæŠŠ axios è¿›è¡ŒäºŒæ¬¡å°è£…ã€‚</p>
<p>ç›®çš„:</p>
<p>1:ä½¿ç”¨è¯·æ±‚æ‹¦æˆªå™¨ï¼Œå¯ä»¥åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­å¤„ç†ä¸€äº›ä¸šåŠ¡(å¼€å§‹è¿›åº¦æ¡ã€è¯·æ±‚å¤´æºå¸¦å…¬å…±å‚æ•°)</p>
<p>2:ä½¿ç”¨å“åº”æ‹¦æˆªå™¨ï¼Œå¯ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­å¤„ç†ä¸€äº›ä¸šåŠ¡(è¿›åº¦æ¡ç»“æŸã€ç®€åŒ–æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€å¤„ç† http ç½‘ç»œé”™è¯¯)</p>
<p>åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º utils/request.ts</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#af3a03">import</span> axios <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;axios&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> { ElMessage } <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;element-plus&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//åˆ›å»ºaxioså®ä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">let</span> request <span style="color:#af3a03">=</span> axios.create({
</span></span><span style="display:flex;"><span>  baseURL: <span style="color:#b57614">import.meta.env.VITE_APP_BASE_API</span>,
</span></span><span style="display:flex;"><span>  timeout: <span style="color:#b57614">5000</span>,
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//è¯·æ±‚æ‹¦æˆªå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>request.interceptors.request.use((config) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#af3a03">return</span> config
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//å“åº”æ‹¦æˆªå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>request.interceptors.response.use(
</span></span><span style="display:flex;"><span>  (response) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> response.data
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  (error) <span style="color:#af3a03">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">//å¤„ç†ç½‘ç»œé”™è¯¯
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>    <span style="color:#af3a03">let</span> msg <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">let</span> status <span style="color:#af3a03">=</span> error.response.status
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">switch</span> (status) {
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">case</span> 401:
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">msg</span> <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;tokenè¿‡æœŸ&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">break</span>
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">case</span> 403:
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">msg</span> <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;æ— æƒè®¿é—®&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">break</span>
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">case</span> 404:
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">msg</span> <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;è¯·æ±‚åœ°å€é”™è¯¯&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">break</span>
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">case</span> 500:
</span></span><span style="display:flex;"><span>        <span style="color:#b57614">msg</span> <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;æœåŠ¡å™¨å‡ºç°é—®é¢˜&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#af3a03">break</span>
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">default</span><span style="color:#af3a03">:</span>
</span></span><span style="display:flex;"><span>        msg <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;æ— ç½‘ç»œ&#39;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ElMessage({
</span></span><span style="display:flex;"><span>      <span style="color:#af3a03">type</span><span style="color:#af3a03">:</span> <span style="color:#79740e">&#39;error&#39;</span>,
</span></span><span style="display:flex;"><span>      message: <span style="color:#b57614">msg</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    <span style="color:#af3a03">return</span> Promise.reject(error)
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">default</span> request
</span></span></code></pre></div><h3 id="38-api-æ¥å£ç»Ÿä¸€ç®¡ç†">3.8 API æ¥å£ç»Ÿä¸€ç®¡ç†<a hidden class="anchor" aria-hidden="true" href="#38-api-æ¥å£ç»Ÿä¸€ç®¡ç†">#</a></h3>
<p>åœ¨å¼€å‘é¡¹ç›®çš„æ—¶å€™,æ¥å£å¯èƒ½å¾ˆå¤šéœ€è¦ç»Ÿä¸€ç®¡ç†ã€‚åœ¨ src ç›®å½•ä¸‹å»åˆ›å»º api æ–‡ä»¶å¤¹å»ç»Ÿä¸€ç®¡ç†é¡¹ç›®çš„æ¥å£ï¼›</p>
<p>æ¯”å¦‚:ä¸‹é¢æ–¹å¼</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//ç»Ÿä¸€ç®¡ç†å’±ä»¬é¡¹ç›®ç”¨æˆ·ç›¸å…³çš„æ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> request <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;@/utils/request&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">import</span> <span style="color:#af3a03">type</span> {
</span></span><span style="display:flex;"><span>  loginFormData,
</span></span><span style="display:flex;"><span>  loginResponseData,
</span></span><span style="display:flex;"><span>  userInfoReponseData,
</span></span><span style="display:flex;"><span>} <span style="color:#af3a03">from</span> <span style="color:#79740e">&#39;./type&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//é¡¹ç›®ç”¨æˆ·ç›¸å…³çš„è¯·æ±‚åœ°å€
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">enum</span> API {
</span></span><span style="display:flex;"><span>  LOGIN_URL <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/admin/acl/index/login&#39;</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  USERINFO_URL <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/admin/acl/index/info&#39;</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  LOGOUT_URL <span style="color:#af3a03">=</span> <span style="color:#79740e">&#39;/admin/acl/index/logout&#39;</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//ç™»å½•æ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span><span style="color:#af3a03">export</span> <span style="color:#af3a03">const</span> reqLogin <span style="color:#af3a03">=</span> (data: <span style="color:#b57614">loginFormData</span>) <span style="color:#af3a03">=&gt;</span>
</span></span><span style="display:flex;"><span>  request.post&lt;<span style="color:#9d0006">any</span>, <span style="color:#79740e;font-weight:bold">loginResponseData</span>&gt;(API.LOGIN_URL, data)
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//è·å–ç”¨æˆ·ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">const</span> reqUserInfo <span style="color:#af3a03">=</span> () <span style="color:#af3a03">=&gt;</span>
</span></span><span style="display:flex;"><span>  request.<span style="color:#af3a03">get</span>&lt;<span style="color:#9d0006">any</span>, <span style="color:#79740e;font-weight:bold">userInfoReponseData</span>&gt;(API.USERINFO_URL)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic">//é€€å‡ºç™»å½•
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#af3a03">export</span> <span style="color:#af3a03">const</span> reqLogout <span style="color:#af3a03">=</span> () <span style="color:#af3a03">=&gt;</span> request.post&lt;<span style="color:#9d0006">any</span>, <span style="color:#79740e;font-weight:bold">any</span>&gt;(API.LOGOUT_URL)
</span></span></code></pre></div><h2 id="å››é¡¹ç›®çš„èµ„æºåœ°å€">å››ã€é¡¹ç›®çš„èµ„æºåœ°å€<a hidden class="anchor" aria-hidden="true" href="#å››é¡¹ç›®çš„èµ„æºåœ°å€">#</a></h2>
<p>è´¾æˆè±ªè€å¸ˆä»£ç ä»“åº“åœ°å€:https://gitee.com/jch1011/vue3_admin_template-bj1.git</p>
<p>é¡¹ç›®åœ¨çº¿æ–‡æ¡£:</p>
<p>æœåŠ¡å™¨åŸŸå:http://sph-api.atguigu.cn</p>
<p>swagger æ–‡æ¡£:</p>
<p>http://139.198.104.58:8209/swagger-ui.html</p>
<p>http://139.198.104.58:8212/swagger-ui.html#/</p>
<p>echarts:å›½å†…é•œåƒç½‘ç«™</p>
<p><a href="https://www.isqqw.com/echarts-doc/zh/option.html#title">https://www.isqqw.com/echarts-doc/zh/option.html#title</a></p>
<p><a href="http://datav.aliyun.com/portal/school/atlas/area_selector">http://datav.aliyun.com/portal/school/atlas/area_selector</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://bablvsj.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/">é¢è¯•é¢˜é›†</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://bablvsj.github.io/posts/tech/wait/14-%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/%E6%B5%8F%E8%A7%88%E5%99%A8/">
    <span class="title">Â« Prev</span>
    <br>
    <span>æµè§ˆå™¨</span>
  </a>
  <a class="next" href="https://bablvsj.github.io/posts/tech/frontend/00-%E5%89%8D%E7%AB%AF%E5%B7%A5%E5%85%B7/%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85%E5%92%8C%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7whistle/">
    <span class="title">Next Â»</span>
    <br>
    <span>ç½‘ç»œæŠ“åŒ…å’Œä»£ç†å·¥å…·ï¼šWhistle</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://bablvsj.github.io">Bablvsj&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
    <div class="flex-c-d">
        <a class="flex-d-c" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"
            target="_blank"> <span>æœ¬ç«™ç”±</span><img width="60" src="/images/upyun.png">æä¾›CDNåŠ é€Ÿ/äº‘å­˜å‚¨æœåŠ¡</a>
    </div>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script></body>

</html>
