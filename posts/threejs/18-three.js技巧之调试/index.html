<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>18 Three.jsæŠ€å·§ä¹‹è°ƒè¯• | Bablvsj's Blog</title><meta name=keywords content="Three.js"><meta name=description content="18 Three.jsæŠ€å·§ä¹‹è°ƒè¯• - Bablvsj's Blog"><meta name=author content><link rel=canonical href=https://bablvsj.github.io/posts/threejs/18-three.js%E6%8A%80%E5%B7%A7%E4%B9%8B%E8%B0%83%E8%AF%95/><link crossorigin=anonymous href=/assets/css/stylesheet.241265d51339977eb0f90d05780e286ec2789600ca4137f29552dec9dee06569.css integrity="sha256-JBJl1RM5l36w+Q0FeA4obsJ4lgDKQTfylVLeyd7gZWk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://bablvsj.github.io/img/Q.gif><link rel=apple-touch-icon href=https://bablvsj.github.io/Q.gif><link rel=mask-icon href=https://bablvsj.github.io/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=stylesheet href=/css/syntax.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="18 Three.jsæŠ€å·§ä¹‹è°ƒè¯•"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://bablvsj.github.io/posts/threejs/18-three.js%E6%8A%80%E5%B7%A7%E4%B9%8B%E8%B0%83%E8%AF%95/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-19T17:11:35+08:00"><meta property="article:modified_time" content="2023-12-19T17:11:35+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="18 Three.jsæŠ€å·§ä¹‹è°ƒè¯•"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"æ–‡ç« ","item":"https://bablvsj.github.io/posts/"},{"@type":"ListItem","position":3,"name":"18 Three.jsæŠ€å·§ä¹‹è°ƒè¯•","item":"https://bablvsj.github.io/posts/threejs/18-three.js%E6%8A%80%E5%B7%A7%E4%B9%8B%E8%B0%83%E8%AF%95/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"18 Three.jsæŠ€å·§ä¹‹è°ƒè¯•","name":"18 Three.jsæŠ€å·§ä¹‹è°ƒè¯•","description":"","keywords":["Three.js"],"articleBody":"æœ¬æ–‡è®²è§£ä¸€äº› Three.js çš„è°ƒè¯•æŠ€å·§ï¼Œæ˜¯å…¶ä»–ç¨‹åºå‘˜åœ¨å¼€å‘ Three.js è¿‡ç¨‹ä¸­ç§¯ç´¯çš„ä¸€äº›æ‰¾é”™ã€è°ƒè¯•ç»éªŒã€‚\nå…¶ä¸­ä¸€äº›è°ƒè¯•ç»éªŒé€‚ç”¨äºæ‰€æœ‰çš„å‰ç«¯é¡¹ç›®\nè°ƒè¯•çš„å‡ ç‚¹ç»éªŒ 1ã€ä½¿ç”¨æµè§ˆå™¨è°ƒè¯• ä¸ªäººæ¨èä½¿ç”¨ è°·æ­Œæµè§ˆå™¨ æˆ– æœ€æ–°ç‰ˆçš„å¾®è½¯ Edge æµè§ˆå™¨ è°ƒè¯•å·¥å…·ã€‚\nä»¥è°·æ­Œæµè§ˆå™¨ Chrome ä¸ºä¾‹ï¼Œæ‰“å¼€è°ƒè¯•çš„å¿«æ·é”®ä¸ºï¼šCtrl + Shift + I\nä¸ªåˆ«æµ‹è¯•æ—¶å€™ï¼Œé¼ æ ‡æ”¾åœ¨ç”»å¸ƒä¸Šç‚¹å‡»å³é”®ä¸æ˜¾ç¤ºèœå•ï¼Œæˆ–è€…ä¸æ˜¾ç¤º â€œæ£€æŸ¥â€ï¼Œæ­¤æ—¶ä½¿ç”¨å¿«æ·é”®è°ƒå‡ºè°ƒè¯•å·¥å…·æœ€ä¸ºåˆé€‚ã€‚\n2ã€å…³é—­ç¼“å­˜ å¯¹äºå¼€å‘é˜¶æ®µï¼Œä¸ºäº†ç¡®ä¿æ‰€åŠ è½½çš„å„ç§èµ„æºæ˜¯æœ€æ–°çš„ï¼Œè€Œä¸æ˜¯ç¼“å­˜çš„ï¼Œæ‰€ä»¥æ¨èå…³é—­ç¼“å­˜ã€‚\nå…³é—­ç¼“å­˜çš„æ–¹æ³•ï¼šæ‰“å¼€è°ƒè¯•é¢æ¿(Toggle Tools) \u003e ç½‘ç»œé¢æ¿(Network) \u003e å‹¾é€‰ ç¦ç”¨ç¼“å­˜(Disable cache)\n3ã€å–„ç”¨ä¿¡æ¯æ‰“å° Console å¯ä»¥é€šè¿‡åœ¨ä»£ç ä¸­æ·»åŠ  console.log(xxx)ï¼Œæˆ–è€…ç›´æ¥åœ¨ Console é¢æ¿ä¸­ æ·»åŠ æ‰“å°ä»£ç ï¼ŒæŸ¥çœ‹å½“å‰ JS ç¯å¢ƒä¸­çš„ä¿¡æ¯å˜é‡ã€‚\n4ã€æ·»åŠ debugger æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­ï¼Œæ·»åŠ  debugger ï¼Œç»™ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­æ·»åŠ æ–­ç‚¹ï¼Œå¥½ä¸€æ­¥æ­¥ç¡®è®¤æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ã€‚\nç›´æ¥é€šè¿‡ VSCoder åœ¨æŸè¡Œä»£ç å·¦ä¾§ï¼Œæ·»åŠ æ–­ç‚¹(å°çº¢ç‚¹) åœ¨ä»£ç ä¸­æ·»åŠ  debuggerï¼Œå½“ä»£ç æ‰§è¡Œåˆ°æ­¤å¤„æ—¶å³è¿›å…¥è°ƒè¯•çŠ¶æ€ ä¸ªäººæ¨èä½¿ç”¨ç¬¬ 1 ç§å½¢å¼æ·»åŠ æ–­ç‚¹\n5ã€é€šè¿‡URLæ¥è·å–å‚æ•° å‡å¦‚è¯´æˆ‘ä»¬ç°åœ¨éœ€è¦åœ¨åœºæ™¯ä¸Šåˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“ï¼ŒURL å‚æ•°ä¸­åŒ…å«ç«‹æ–¹ä½“å¯¹åº”çš„å°ºå¯¸ã€‚\nå‡è®¾ URL å‚æ•°ä¸ºï¼š\nhttps://xxx.com/threejs/xxx.index?width=3\u0026height=2\u0026depth=1 width=3\u0026height=2\u0026depth=1 å³æˆ‘ä»¬éœ€è¦è·å–å¹¶é…ç½®ç»™ç«‹æ–¹ä½“çš„å‚æ•°ã€‚\nä¸ºäº†é¿å…å‚æ•°ç¼ºå¤±æˆ–é”™è¯¯è€Œå¯¼è‡´ç«‹æ–¹ä½“åˆ›å»ºå¤±è´¥ï¼Œæˆ‘ä»¬ç»™ç«‹æ–¹ä½“çš„ å®½ã€é«˜ã€åš è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ 1\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ–°å¢çš„ URLSearchParams æ¥è§£æ URL å‚æ•°ï¼š\ninterface URLParams { width: number, height: number, depth: number } const getURLParams = (): URLParams =\u003e { const params = new URLSearchParams(window.location.search.substring(1)) const widthStr = params.get('width') const heightStr = params.get('height') const depthStr = params.get('depth') let [width, height, depth] = [0, 0, 0] if (widthStr) { width = parseInt(widthStr, 10) || 1 } if (heightStr) { height = parseInt(heightStr, 10) || 1 } if (depthStr) { depth = parseInt(depthStr, 10) || 1 } return { width, height, depth } } const TestDebugging = () =\u003e { const urlParams = getURLParams() //è·å– URL å‚æ•° ... const geometry = new Three.BoxBufferGeometry(urlParams.width, urlParams.height, urlParams.depth) ... } 6ã€æŠŠä¸€äº›å‚æ•°æ˜¾ç¤ºåœ¨å±å¹•ä¸Š æˆ‘ä»¬è¿˜ä»¥ åˆšæ‰çš„ä»£ç ä¸ºä¾‹ï¼Œåœ¨ä¹‹å‰çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ˜¯å°†ç»„ä»¶ç›´æ¥ return ä¸€ä¸ª å¯¹è±¡ï¼Œ\nreturn ( ) æˆ‘ä»¬å¯ä»¥æ”¹é€ ä¸€ä¸‹ï¼š\nreturn ( width:{urlParams.width} height:{urlParams.height} depth:{urlParams.depth} ï¼‰ å¯¹åº”çš„æ ·å¼ï¼š\n.full-screen, canvas { display: block; height: inherit; width: inherit; } .debug { position: fixed; top: 20px; left: 20px; width: 80px; padding: 20px; background-color: rgba($color: #FFFFFF, $alpha: 0.7); } .debug span { display: block; } è¿™æ ·å½“æˆ‘ä»¬è°ƒè¯•ç½‘é¡µçš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨å·¦ä¸Šè§’ï¼Œçœ‹åˆ° ç«‹æ–¹ä½“çš„å°ºå¯¸å…·ä½“çš„å€¼ã€‚\næœ¬ç¤ºä¾‹æ¼”ç¤ºçš„ç«‹æ–¹ä½“å°ºå¯¸æ˜¯å›ºå®šçš„ï¼Œè‹¥é€šè¿‡ useState æ¥å®šä¹‰å°ºå¯¸ï¼Œä¸”å°ºå¯¸ä¼šå‘ç”Ÿä¿®æ”¹ï¼Œé‚£ä¹ˆå·¦ä¸Šè§’çš„å±•ç¤ºçš„å‚æ•°ä¹Ÿå¯ä»¥å¯¹åº”ä¿®æ”¹æˆåŠ¨æ€å¯å˜åŠ¨çš„ã€‚\nä¾æ¬¡ç±»æ¨ï¼Œå¯ä»¥å»¶å±•æˆå…¶ä»–å‚æ•°å±•ç¤º\n7ã€æŠŠ window.requestAnimationFrame æ·»åŠ åœ¨é åä½ç½® åœ¨ä¹‹å‰çš„ä¸€äº›ç¤ºä¾‹ä¸­ï¼Œæ¸²æŸ“åœºæ™¯çš„å‡½æ•°ï¼Œå¯èƒ½å¦‚ä¸‹ï¼š\nconst render = () =\u003e { renderer.render(scene, camera) window.requestAnimationFrame(render) } window.requestAnimationFrame(render) ä½ æ˜¯å¦è€ƒè™‘è¿‡ï¼Œå‡è®¾æˆ‘ä»¬ä¿®æ”¹æˆè¿™æ ·ï¼š\nconst render = () =\u003e { window.requestAnimationFrame(render) //ä»£ç é¡ºåºæ”¹å˜ renderer.render(scene, camera) } window.requestAnimationFrame(render) ä»£ç é¡ºåºè°ƒæ•´åï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ\nç­”ï¼šè¿™é‡Œå¯èƒ½ä¼šäº§ç”Ÿä¸€ä¸ªéšæ‚£â€”â€”ç”±äº window.requestAnimationFrame ä»£ç åœ¨å‰ï¼Œrenderer.render(scene, camera) ä»£ç åœ¨åï¼Œé‚£ä¹ˆæ„å‘³ç€ å³ä½¿ renderer.render() æ‰§è¡Œå‘ç”Ÿé”™è¯¯ï¼Œé‚£ä¹ˆä»£ç ä¾ç„¶åœ¨ä¸‹ä¸€å¸§ä¸­ç»§ç»­æ‰§è¡Œã€‚\nè€Œæˆ‘ä»¬ä¹‹å‰çš„é¡ºåºæ˜¯ renderer.render() åœ¨å‰ï¼Œwindow.requestAnimationFrame åœ¨åï¼Œé‚£ä¹ˆä¸‡ä¸€ renderer.render() æ‰§è¡Œæ—¶å‘ç”Ÿé”™è¯¯ï¼Œæ­¤æ—¶ æµè§ˆå™¨å³æŠ¥é”™ï¼ŒJS åœæ­¢è¿è¡Œï¼Œé‚£ä¹ˆåé¢çš„ window.requestAnimationFrame å°±ä¸ä¼šå†æ‰§è¡Œäº†ã€‚\nç»“è®ºï¼šåº”è¯¥å°½é‡æŠŠ window.requestAnimationFrame æ·»åŠ åˆ°é åä½ç½®ã€‚\n8ã€æ£€æŸ¥ Three.js ä¸­çš„å•ä½ åœ¨ Three.js ä¸­ï¼Œå•ä½å¹¶æ²¡æœ‰ç»Ÿä¸€ï¼Œå…·ä½“è¡¨ç°åœ¨ï¼š\né•œå¤´çš„è§’åº¦ä½¿ç”¨çš„æ˜¯åº¦æ•°ã€è€Œå…¶ä»–åœ°æ–¹æ¶‰åŠè§’åº¦æ—¶å•ä½ä½¿ç”¨çš„æ˜¯ å¼§åº¦ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹äºè·ç¦»ã€å°ºå¯¸çš„æ•°å€¼ 1 è¡¨ç¤º 1 ç±³ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®è®©æ•°å€¼ 1 è¡¨ç¤ºä¸º 1 å˜ç±³ã€‚ å› æ­¤ï¼Œåœ¨ä½¿ç”¨ Three.js æ—¶ï¼Œå…³äºæ•°å€¼å•ä½è¯·æ ¼å¤–ç•™æ„ã€‚\n9ã€æ·»åŠ è¾…åŠ©å¯¹è±¡ã€æ·»åŠ é•œå¤´è½¨é“æ§åˆ¶å™¨ åœ¨å¼€å‘é˜¶æ®µï¼Œå¯ä»¥å¤šæ·»åŠ ä¸€äº›è¾…åŠ©å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šåæ ‡è¾…åŠ©å¯¹è±¡ã€ç¯å…‰è¾…åŠ©å¯¹è±¡ã€é•œå¤´è¾…åŠ©å¯¹è±¡ã€‚\nè¾…åŠ©å¯¹è±¡å¯ä»¥æ¯”è¾ƒç›´è§‚å¾—å¸®åŠ©æˆ‘ä»¬å»è§‚å¯Ÿï¼Œå»è°ƒè¯•ã€‚\nåŒæ—¶ä¹Ÿè¦æ·»åŠ é•œå¤´è½¨é“æ§åˆ¶å™¨ï¼Œä¾‹å¦‚ OrbitControlsï¼Œå¯ä»¥è®©æˆ‘ä»¬æ¯”è¾ƒæ–¹ä¾¿æ“æ§ã€æŸ¥çœ‹åœºæ™¯ã€‚\n10ã€å¿…è¦æ—¶å¯ä»¥å°†ç‰©ä½“æè´¨è®¾ç½®ä¸º MeshBasicMaterial å‡è®¾ä½ è®¾ç½®çš„ç‰©ä½“æè´¨æ˜¯å¯åå…‰ææ–™ï¼Œä½†æ˜¯æ¸²æŸ“æ—¶å‘ç°å¹¶æ²¡æœ‰æ¸²æŸ“å‡ºè¯¥ç‰©ä½“ã€‚\nè¿™ä¸ªæ—¶å€™ï¼Œä½ å¯ä»¥å…ˆå°†ç‰©ä½“æè´¨ä¿®æ”¹ä¸ºä¸åå…‰çš„ MeshBasicMaterialï¼Œè¿™æ ·å¯ä»¥å¿«é€Ÿæ’é™¤ä¸€äº›é—®é¢˜ã€‚\nå‡è®¾ç‰©ä½“æè´¨ä¸åå…‰ï¼Œæ­¤æ—¶è‹¥ä¾ç„¶æ¸²æŸ“ä¸å‡ºç‰©ä½“ï¼Œé‚£ä¹ˆå°±å¯ä»¥è‚¯å®šé—®é¢˜æ²¡æœ‰å‡ºåœ¨ç¯å…‰ä¸Šã€‚\nåä¹‹ï¼Œåˆ™åº”è¯¥å»æ£€æŸ¥ç¯å…‰çš„é—®é¢˜ã€‚\n11ã€æ£€æŸ¥é•œå¤´çš„ near å’Œ far é…ç½® æœ‰äº›æ—¶å€™åœºæ™¯æ²¡æœ‰æ¸²æŸ“å‡ºç‰©ä½“ï¼Œé‚£ä¹ˆä½ ä¹Ÿè¦å»æ£€æŸ¥ä¸€ä¸‹é•œå¤´çš„ near å’Œ far çš„å€¼ã€‚\næ¯”å¦‚æˆ‘ä»¬å¯ä»¥æš‚æ—¶æ€§çš„å°†é•œå¤´çš„ far è®¾ç½®ä¸º 10000ï¼Œæˆ–è€…å°† near è®¾ç½®ä¸º 0.001ï¼Œåœ¨è¿™ç§æç«¯é…ç½®ä¸‹ï¼Œå†å»çœ‹åœºæ™¯æ˜¯å¦æ¸²æŸ“å‡ºç‰©ä½“ã€‚\nè°ƒè¯•ç»“æŸåï¼Œè®°å¾—å°† near å’Œ far è°ƒæ•´ä¼šåˆç†çš„ç²¾åº¦èŒƒå›´ã€‚\n12ã€é‡åˆ°ç–‘æƒ‘çš„åœ°æ–¹ï¼ŒæŸ¥æ–‡æ¡£ï¼ŒæŸ¥æºç  é‡åˆ°æŸäº› Three.js ç–‘æƒ‘çš„åœ°æ–¹ï¼Œä¾‹å¦‚æŸå±æ€§ï¼ŒæŸæ–¹æ³•ï¼Œè¯·è®°å¾—ä¸€å®šå…ˆå»æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼Œå¦‚æœæ²¡æœ‰è§£å†³å°±ç›´æ¥å»çœ‹ Three.js çš„æºç ã€‚\nThree.js çš„æºç å¹¶ä¸æ˜¯ç‰¹åˆ«å¤æ‚ï¼Œè¦æ•¢äºæŸ¥çœ‹æºç æ¥è§£å†³ç–‘æƒ‘ã€‚\nä½¿ç”¨GUIè°ƒè¯•åœºæ™¯ä¸­çš„å‚æ•° å›¾å½¢ç”¨æˆ·ç•Œé¢( Graphical User Interface ) ç®€ç§° GUIã€‚\nä¸»è¦ç›®çš„æ˜¯ç”¨æ¥å¸®æˆ‘ä»¬å¿«é€Ÿæ­å»ºå¯è§†åŒ–è°ƒè¯•å‚æ•°é¢æ¿ã€‚\né’ˆå¯¹ JS çš„ GUI â€”â€”dat.gui\nå®˜ç½‘åœ°å€ï¼šhttps://github.com/dataarts/dat.gui\né’ˆå¯¹ React çš„ GUIâ€”â€”react-dat-gui\nå®˜ç½‘åœ°å€ï¼šhttps://github.com/claus/react-dat-gui\nreact-dat-gui çš„å…·ä½“ç”¨æ³•ï¼Œè¯·æŸ¥çœ‹æˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼šReactä¸­ä½¿ç”¨GUI.md\næœ¬æ•™ç¨‹æ‰€æœ‰ç¤ºä¾‹éƒ½æ˜¯åŸºäº react + typescript çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ react-dat-gui\nåœ¨æˆ‘ä»¬åç»­çš„ç¤ºä¾‹ä¸­ï¼Œå°±ä¼šä½¿ç”¨åˆ° react-dat-guiã€‚\nè°ƒè¯•GLSL å›¾å½¢åº“ç€è‰²è¯­è¨€( Graphic Library Shader Language ) ç®€ç§° GLSLã€‚\nå­¦ä¸åŠ¨äº†ï¼Œå­¦ä¸åŠ¨äº†ï¼\nGLSL çš„ç›¸å…³ä»‹ç»ï¼Œå¯æŸ¥é˜…ï¼š\nWebGLä¸GLSLï¼šhttps://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shaders-and-glsl.html\nWebGL2ä¸GLSLï¼šhttps://webgl2fundamentals.org/webgl/lessons/zh_cn/webgl-shaders-and-glsl.html\nç”±äºæˆ‘ä¸ªäººæ²¡æœ‰å­¦ä¹ è¿‡ WebGLå’Œ GLSLï¼Œæ‰€ä»¥æš‚æ—¶å…ˆä¸è®¨è®ºå¦‚ä½•è°ƒè¯• GLSLã€‚\nè°·æ­Œæµè§ˆå™¨è¿˜æœ‰ä¸€ä¸ªä¸“é—¨ç”¨æ¥è°ƒè¯•ç€è‰²å™¨çš„æ’ä»¶ï¼šShader Editor\nhttps://chrome.google.com/webstore/detail/shader-editor/ggeaidddejpbakgafapihjbgdlbbbpob?hl=en\nå…³äº Three.js çš„è°ƒè¯•æŠ€å·§ï¼Œå°±è®²åˆ°è¿™é‡Œã€‚\næ¥ä¸‹æ¥è®²è§£ Canvas çš„ä¸€äº›å¸¸ç”¨å°æŠ€å·§ã€‚\n","wordCount":"2438","inLanguage":"en","datePublished":"2023-12-19T17:11:35+08:00","dateModified":"2023-12-19T17:11:35+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://bablvsj.github.io/posts/threejs/18-three.js%E6%8A%80%E5%B7%A7%E4%B9%8B%E8%B0%83%E8%AF%95/"},"publisher":{"@type":"Organization","name":"Bablvsj's Blog","logo":{"@type":"ImageObject","url":"https://bablvsj.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bablvsj.github.io accesskey=h title="Bablvsj's Blog (Alt + H)">Bablvsj's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bablvsj.github.io/ title=ä¸»é¡µ><span>ä¸»é¡µ</span></a></li><li><a href=https://bablvsj.github.io/archives/ title=æ—¶é—´è½´><span>æ—¶é—´è½´</span></a></li><li><a href=https://bablvsj.github.io/tags title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://bablvsj.github.io/about title=å…³äº><span>å…³äº</span></a></li><li><a href=https://bablvsj.github.io/search title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>18 Three.jsæŠ€å·§ä¹‹è°ƒè¯•</h1><div class=post-meta><div class=post-tags-meta><a href=https://bablvsj.github.io/tags/three.js/>Three.js</a></div>5 min&nbsp;Â·&nbsp;<span title='2023-12-19 17:11:35 +0800 +0800'>2023/12/19</span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><div class=inner><ul><li><a href=#%e8%b0%83%e8%af%95%e7%9a%84%e5%87%a0%e7%82%b9%e7%bb%8f%e9%aa%8c aria-label=è°ƒè¯•çš„å‡ ç‚¹ç»éªŒ>è°ƒè¯•çš„å‡ ç‚¹ç»éªŒ</a><ul><ul><li><a href=#1%e4%bd%bf%e7%94%a8%e6%b5%8f%e8%a7%88%e5%99%a8%e8%b0%83%e8%af%95 aria-label=1ã€ä½¿ç”¨æµè§ˆå™¨è°ƒè¯•>1ã€ä½¿ç”¨æµè§ˆå™¨è°ƒè¯•</a></li><li><a href=#2%e5%85%b3%e9%97%ad%e7%bc%93%e5%ad%98 aria-label=2ã€å…³é—­ç¼“å­˜>2ã€å…³é—­ç¼“å­˜</a></li><li><a href=#3%e5%96%84%e7%94%a8%e4%bf%a1%e6%81%af%e6%89%93%e5%8d%b0-console aria-label="3ã€å–„ç”¨ä¿¡æ¯æ‰“å° Console">3ã€å–„ç”¨ä¿¡æ¯æ‰“å° Console</a></li><li><a href=#4%e6%b7%bb%e5%8a%a0debugger aria-label=4ã€æ·»åŠ debugger>4ã€æ·»åŠ debugger</a></li><li><a href=#5%e9%80%9a%e8%bf%87url%e6%9d%a5%e8%8e%b7%e5%8f%96%e5%8f%82%e6%95%b0 aria-label=5ã€é€šè¿‡URLæ¥è·å–å‚æ•°>5ã€é€šè¿‡URLæ¥è·å–å‚æ•°</a></li><li><a href=#6%e6%8a%8a%e4%b8%80%e4%ba%9b%e5%8f%82%e6%95%b0%e6%98%be%e7%a4%ba%e5%9c%a8%e5%b1%8f%e5%b9%95%e4%b8%8a aria-label=6ã€æŠŠä¸€äº›å‚æ•°æ˜¾ç¤ºåœ¨å±å¹•ä¸Š>6ã€æŠŠä¸€äº›å‚æ•°æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</a></li><li><a href=#7%e6%8a%8a-windowrequestanimationframe-%e6%b7%bb%e5%8a%a0%e5%9c%a8%e9%9d%a0%e5%90%8e%e4%bd%8d%e7%bd%ae aria-label="7ã€æŠŠ window.requestAnimationFrame æ·»åŠ åœ¨é åä½ç½®">7ã€æŠŠ window.requestAnimationFrame æ·»åŠ åœ¨é åä½ç½®</a></li><li><a href=#8%e6%a3%80%e6%9f%a5-threejs-%e4%b8%ad%e7%9a%84%e5%8d%95%e4%bd%8d aria-label="8ã€æ£€æŸ¥ Three.js ä¸­çš„å•ä½">8ã€æ£€æŸ¥ Three.js ä¸­çš„å•ä½</a></li><li><a href=#9%e6%b7%bb%e5%8a%a0%e8%be%85%e5%8a%a9%e5%af%b9%e8%b1%a1%e6%b7%bb%e5%8a%a0%e9%95%9c%e5%a4%b4%e8%bd%a8%e9%81%93%e6%8e%a7%e5%88%b6%e5%99%a8 aria-label=9ã€æ·»åŠ è¾…åŠ©å¯¹è±¡ã€æ·»åŠ é•œå¤´è½¨é“æ§åˆ¶å™¨>9ã€æ·»åŠ è¾…åŠ©å¯¹è±¡ã€æ·»åŠ é•œå¤´è½¨é“æ§åˆ¶å™¨</a></li><li><a href=#10%e5%bf%85%e8%a6%81%e6%97%b6%e5%8f%af%e4%bb%a5%e5%b0%86%e7%89%a9%e4%bd%93%e6%9d%90%e8%b4%a8%e8%ae%be%e7%bd%ae%e4%b8%ba-meshbasicmaterial aria-label="10ã€å¿…è¦æ—¶å¯ä»¥å°†ç‰©ä½“æè´¨è®¾ç½®ä¸º MeshBasicMaterial">10ã€å¿…è¦æ—¶å¯ä»¥å°†ç‰©ä½“æè´¨è®¾ç½®ä¸º MeshBasicMaterial</a></li><li><a href=#11%e6%a3%80%e6%9f%a5%e9%95%9c%e5%a4%b4%e7%9a%84-near-%e5%92%8c-far-%e9%85%8d%e7%bd%ae aria-label="11ã€æ£€æŸ¥é•œå¤´çš„ near å’Œ far é…ç½®">11ã€æ£€æŸ¥é•œå¤´çš„ near å’Œ far é…ç½®</a></li><li><a href=#12%e9%81%87%e5%88%b0%e7%96%91%e6%83%91%e7%9a%84%e5%9c%b0%e6%96%b9%e6%9f%a5%e6%96%87%e6%a1%a3%e6%9f%a5%e6%ba%90%e7%a0%81 aria-label=12ã€é‡åˆ°ç–‘æƒ‘çš„åœ°æ–¹ï¼ŒæŸ¥æ–‡æ¡£ï¼ŒæŸ¥æºç >12ã€é‡åˆ°ç–‘æƒ‘çš„åœ°æ–¹ï¼ŒæŸ¥æ–‡æ¡£ï¼ŒæŸ¥æºç </a></li></ul></ul></li><li><a href=#%e4%bd%bf%e7%94%a8gui%e8%b0%83%e8%af%95%e5%9c%ba%e6%99%af%e4%b8%ad%e7%9a%84%e5%8f%82%e6%95%b0 aria-label=ä½¿ç”¨GUIè°ƒè¯•åœºæ™¯ä¸­çš„å‚æ•°>ä½¿ç”¨GUIè°ƒè¯•åœºæ™¯ä¸­çš„å‚æ•°</a></li><li><a href=#%e8%b0%83%e8%af%95glsl aria-label=è°ƒè¯•GLSL>è°ƒè¯•GLSL</a></li></ul></div></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>æœ¬æ–‡è®²è§£ä¸€äº› Three.js çš„è°ƒè¯•æŠ€å·§ï¼Œæ˜¯å…¶ä»–ç¨‹åºå‘˜åœ¨å¼€å‘ Three.js è¿‡ç¨‹ä¸­ç§¯ç´¯çš„ä¸€äº›æ‰¾é”™ã€è°ƒè¯•ç»éªŒã€‚</p><blockquote><p>å…¶ä¸­ä¸€äº›è°ƒè¯•ç»éªŒé€‚ç”¨äºæ‰€æœ‰çš„å‰ç«¯é¡¹ç›®</p></blockquote><h2 id=è°ƒè¯•çš„å‡ ç‚¹ç»éªŒ>è°ƒè¯•çš„å‡ ç‚¹ç»éªŒ<a hidden class=anchor aria-hidden=true href=#è°ƒè¯•çš„å‡ ç‚¹ç»éªŒ>#</a></h2><h4 id=1ä½¿ç”¨æµè§ˆå™¨è°ƒè¯•>1ã€ä½¿ç”¨æµè§ˆå™¨è°ƒè¯•<a hidden class=anchor aria-hidden=true href=#1ä½¿ç”¨æµè§ˆå™¨è°ƒè¯•>#</a></h4><p>ä¸ªäººæ¨èä½¿ç”¨ è°·æ­Œæµè§ˆå™¨ æˆ– æœ€æ–°ç‰ˆçš„å¾®è½¯ Edge æµè§ˆå™¨ è°ƒè¯•å·¥å…·ã€‚</p><p>ä»¥è°·æ­Œæµè§ˆå™¨ Chrome ä¸ºä¾‹ï¼Œæ‰“å¼€è°ƒè¯•çš„å¿«æ·é”®ä¸ºï¼šCtrl + Shift + I</p><blockquote><p>ä¸ªåˆ«æµ‹è¯•æ—¶å€™ï¼Œé¼ æ ‡æ”¾åœ¨ç”»å¸ƒä¸Šç‚¹å‡»å³é”®ä¸æ˜¾ç¤ºèœå•ï¼Œæˆ–è€…ä¸æ˜¾ç¤º â€œæ£€æŸ¥â€ï¼Œæ­¤æ—¶ä½¿ç”¨å¿«æ·é”®è°ƒå‡ºè°ƒè¯•å·¥å…·æœ€ä¸ºåˆé€‚ã€‚</p></blockquote><h4 id=2å…³é—­ç¼“å­˜>2ã€å…³é—­ç¼“å­˜<a hidden class=anchor aria-hidden=true href=#2å…³é—­ç¼“å­˜>#</a></h4><p>å¯¹äºå¼€å‘é˜¶æ®µï¼Œä¸ºäº†ç¡®ä¿æ‰€åŠ è½½çš„å„ç§èµ„æºæ˜¯æœ€æ–°çš„ï¼Œè€Œä¸æ˜¯ç¼“å­˜çš„ï¼Œæ‰€ä»¥æ¨èå…³é—­ç¼“å­˜ã€‚</p><p>å…³é—­ç¼“å­˜çš„æ–¹æ³•ï¼šæ‰“å¼€è°ƒè¯•é¢æ¿(Toggle Tools) > ç½‘ç»œé¢æ¿(Network) > å‹¾é€‰ ç¦ç”¨ç¼“å­˜(Disable cache)</p><h4 id=3å–„ç”¨ä¿¡æ¯æ‰“å°-console>3ã€å–„ç”¨ä¿¡æ¯æ‰“å° Console<a hidden class=anchor aria-hidden=true href=#3å–„ç”¨ä¿¡æ¯æ‰“å°-console>#</a></h4><p>å¯ä»¥é€šè¿‡åœ¨ä»£ç ä¸­æ·»åŠ  console.log(xxx)ï¼Œæˆ–è€…ç›´æ¥åœ¨ Console é¢æ¿ä¸­ æ·»åŠ æ‰“å°ä»£ç ï¼ŒæŸ¥çœ‹å½“å‰ JS ç¯å¢ƒä¸­çš„ä¿¡æ¯å˜é‡ã€‚</p><h4 id=4æ·»åŠ debugger>4ã€æ·»åŠ debugger<a hidden class=anchor aria-hidden=true href=#4æ·»åŠ debugger>#</a></h4><p>æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­ï¼Œæ·»åŠ  debugger ï¼Œç»™ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­æ·»åŠ æ–­ç‚¹ï¼Œå¥½ä¸€æ­¥æ­¥ç¡®è®¤æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ã€‚</p><ol><li>ç›´æ¥é€šè¿‡ VSCoder åœ¨æŸè¡Œä»£ç å·¦ä¾§ï¼Œæ·»åŠ æ–­ç‚¹(å°çº¢ç‚¹)</li><li>åœ¨ä»£ç ä¸­æ·»åŠ  <code>debugger</code>ï¼Œå½“ä»£ç æ‰§è¡Œåˆ°æ­¤å¤„æ—¶å³è¿›å…¥è°ƒè¯•çŠ¶æ€</li></ol><blockquote><p>ä¸ªäººæ¨èä½¿ç”¨ç¬¬ 1 ç§å½¢å¼æ·»åŠ æ–­ç‚¹</p></blockquote><h4 id=5é€šè¿‡urlæ¥è·å–å‚æ•°>5ã€é€šè¿‡URLæ¥è·å–å‚æ•°<a hidden class=anchor aria-hidden=true href=#5é€šè¿‡urlæ¥è·å–å‚æ•°>#</a></h4><p>å‡å¦‚è¯´æˆ‘ä»¬ç°åœ¨éœ€è¦åœ¨åœºæ™¯ä¸Šåˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“ï¼ŒURL å‚æ•°ä¸­åŒ…å«ç«‹æ–¹ä½“å¯¹åº”çš„å°ºå¯¸ã€‚</p><p>å‡è®¾ URL å‚æ•°ä¸ºï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>https://xxx.com/threejs/xxx.index?width=3&amp;height=2&amp;depth=1
</span></span></code></pre></div><p><code>width=3&height=2&depth=1</code> å³æˆ‘ä»¬éœ€è¦è·å–å¹¶é…ç½®ç»™ç«‹æ–¹ä½“çš„å‚æ•°ã€‚</p><blockquote><p>ä¸ºäº†é¿å…å‚æ•°ç¼ºå¤±æˆ–é”™è¯¯è€Œå¯¼è‡´ç«‹æ–¹ä½“åˆ›å»ºå¤±è´¥ï¼Œæˆ‘ä»¬ç»™ç«‹æ–¹ä½“çš„ å®½ã€é«˜ã€åš è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ 1</p></blockquote><p><strong>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ–°å¢çš„ URLSearchParams æ¥è§£æ URL å‚æ•°ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface URLParams {
</span></span><span style=display:flex><span>    width: number,
</span></span><span style=display:flex><span>    height: number,
</span></span><span style=display:flex><span>    depth: number
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const getURLParams = (): URLParams =&gt; {
</span></span><span style=display:flex><span>    const params = new URLSearchParams(window.location.search.substring(1))
</span></span><span style=display:flex><span>    const widthStr = params.get(&#39;width&#39;)
</span></span><span style=display:flex><span>    const heightStr = params.get(&#39;height&#39;)
</span></span><span style=display:flex><span>    const depthStr = params.get(&#39;depth&#39;)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    let [width, height, depth] = [0, 0, 0]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    if (widthStr) { width = parseInt(widthStr, 10) || 1 }
</span></span><span style=display:flex><span>    if (heightStr) { height = parseInt(heightStr, 10) || 1 }
</span></span><span style=display:flex><span>    if (depthStr) { depth = parseInt(depthStr, 10) || 1 }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    return { width, height, depth }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const TestDebugging = () =&gt; {
</span></span><span style=display:flex><span>    const urlParams = getURLParams() //è·å– URL å‚æ•°
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    const geometry = new Three.BoxBufferGeometry(urlParams.width, urlParams.height, urlParams.depth)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=6æŠŠä¸€äº›å‚æ•°æ˜¾ç¤ºåœ¨å±å¹•ä¸Š>6ã€æŠŠä¸€äº›å‚æ•°æ˜¾ç¤ºåœ¨å±å¹•ä¸Š<a hidden class=anchor aria-hidden=true href=#6æŠŠä¸€äº›å‚æ•°æ˜¾ç¤ºåœ¨å±å¹•ä¸Š>#</a></h4><p>æˆ‘ä»¬è¿˜ä»¥ åˆšæ‰çš„ä»£ç ä¸ºä¾‹ï¼Œåœ¨ä¹‹å‰çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ˜¯å°†ç»„ä»¶ç›´æ¥ return ä¸€ä¸ª &lt;canvas /> å¯¹è±¡ï¼Œ</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>return (
</span></span><span style=display:flex><span>    &lt;canvas ref={canvasRef} className=&#39;full-screen&#39; /&gt;
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥æ”¹é€ ä¸€ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>return (
</span></span><span style=display:flex><span>    &lt;div className=&#39;full-screen&#39;&gt;
</span></span><span style=display:flex><span>        &lt;canvas ref={canvasRef} className=&#39;full-screen&#39; /&gt;
</span></span><span style=display:flex><span>        &lt;div className=&#39;debug&#39;&gt;
</span></span><span style=display:flex><span>            &lt;span&gt;width:{urlParams.width}&lt;/span&gt;
</span></span><span style=display:flex><span>            &lt;span&gt;height:{urlParams.height}&lt;/span&gt;
</span></span><span style=display:flex><span>            &lt;span&gt;depth:{urlParams.depth}&lt;/span&gt;
</span></span><span style=display:flex><span>        &lt;/div&gt;
</span></span><span style=display:flex><span>    &lt;/div&gt;
</span></span><span style=display:flex><span>ï¼‰
</span></span></code></pre></div><p>å¯¹åº”çš„æ ·å¼ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>.full-screen, canvas {
</span></span><span style=display:flex><span>    display: block;
</span></span><span style=display:flex><span>    height: inherit;
</span></span><span style=display:flex><span>    width: inherit;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.debug {
</span></span><span style=display:flex><span>    position: fixed;
</span></span><span style=display:flex><span>    top: 20px;
</span></span><span style=display:flex><span>    left: 20px;
</span></span><span style=display:flex><span>    width: 80px;
</span></span><span style=display:flex><span>    padding: 20px;
</span></span><span style=display:flex><span>    background-color: rgba($color: #FFFFFF, $alpha: 0.7);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.debug span {
</span></span><span style=display:flex><span>    display: block;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¿™æ ·å½“æˆ‘ä»¬è°ƒè¯•ç½‘é¡µçš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨å·¦ä¸Šè§’ï¼Œçœ‹åˆ° ç«‹æ–¹ä½“çš„å°ºå¯¸å…·ä½“çš„å€¼ã€‚</p><blockquote><p>æœ¬ç¤ºä¾‹æ¼”ç¤ºçš„ç«‹æ–¹ä½“å°ºå¯¸æ˜¯å›ºå®šçš„ï¼Œè‹¥é€šè¿‡ useState æ¥å®šä¹‰å°ºå¯¸ï¼Œä¸”å°ºå¯¸ä¼šå‘ç”Ÿä¿®æ”¹ï¼Œé‚£ä¹ˆå·¦ä¸Šè§’çš„å±•ç¤ºçš„å‚æ•°ä¹Ÿå¯ä»¥å¯¹åº”ä¿®æ”¹æˆåŠ¨æ€å¯å˜åŠ¨çš„ã€‚</p></blockquote><blockquote><p>ä¾æ¬¡ç±»æ¨ï¼Œå¯ä»¥å»¶å±•æˆå…¶ä»–å‚æ•°å±•ç¤º</p></blockquote><h4 id=7æŠŠ-windowrequestanimationframe-æ·»åŠ åœ¨é åä½ç½®>7ã€æŠŠ window.requestAnimationFrame æ·»åŠ åœ¨é åä½ç½®<a hidden class=anchor aria-hidden=true href=#7æŠŠ-windowrequestanimationframe-æ·»åŠ åœ¨é åä½ç½®>#</a></h4><p>åœ¨ä¹‹å‰çš„ä¸€äº›ç¤ºä¾‹ä¸­ï¼Œæ¸²æŸ“åœºæ™¯çš„å‡½æ•°ï¼Œå¯èƒ½å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const render = () =&gt; {
</span></span><span style=display:flex><span>    renderer.render(scene, camera)
</span></span><span style=display:flex><span>    window.requestAnimationFrame(render)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>window.requestAnimationFrame(render)
</span></span></code></pre></div><p>ä½ æ˜¯å¦è€ƒè™‘è¿‡ï¼Œå‡è®¾æˆ‘ä»¬ä¿®æ”¹æˆè¿™æ ·ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const render = () =&gt; {
</span></span><span style=display:flex><span>    window.requestAnimationFrame(render) //ä»£ç é¡ºåºæ”¹å˜
</span></span><span style=display:flex><span>    renderer.render(scene, camera)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>window.requestAnimationFrame(render)
</span></span></code></pre></div><p>ä»£ç é¡ºåºè°ƒæ•´åï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p><p>ç­”ï¼šè¿™é‡Œå¯èƒ½ä¼šäº§ç”Ÿä¸€ä¸ªéšæ‚£â€”â€”ç”±äº window.requestAnimationFrame ä»£ç åœ¨å‰ï¼Œrenderer.render(scene, camera) ä»£ç åœ¨åï¼Œé‚£ä¹ˆæ„å‘³ç€ å³ä½¿ renderer.render() æ‰§è¡Œå‘ç”Ÿé”™è¯¯ï¼Œé‚£ä¹ˆä»£ç ä¾ç„¶åœ¨ä¸‹ä¸€å¸§ä¸­ç»§ç»­æ‰§è¡Œã€‚</p><p>è€Œæˆ‘ä»¬ä¹‹å‰çš„é¡ºåºæ˜¯ renderer.render() åœ¨å‰ï¼Œwindow.requestAnimationFrame åœ¨åï¼Œé‚£ä¹ˆä¸‡ä¸€ renderer.render() æ‰§è¡Œæ—¶å‘ç”Ÿé”™è¯¯ï¼Œæ­¤æ—¶ æµè§ˆå™¨å³æŠ¥é”™ï¼ŒJS åœæ­¢è¿è¡Œï¼Œé‚£ä¹ˆåé¢çš„ window.requestAnimationFrame å°±ä¸ä¼šå†æ‰§è¡Œäº†ã€‚</p><p>ç»“è®ºï¼šåº”è¯¥å°½é‡æŠŠ window.requestAnimationFrame æ·»åŠ åˆ°é åä½ç½®ã€‚</p><h4 id=8æ£€æŸ¥-threejs-ä¸­çš„å•ä½>8ã€æ£€æŸ¥ Three.js ä¸­çš„å•ä½<a hidden class=anchor aria-hidden=true href=#8æ£€æŸ¥-threejs-ä¸­çš„å•ä½>#</a></h4><p>åœ¨ Three.js ä¸­ï¼Œå•ä½å¹¶æ²¡æœ‰ç»Ÿä¸€ï¼Œå…·ä½“è¡¨ç°åœ¨ï¼š</p><ol><li>é•œå¤´çš„è§’åº¦ä½¿ç”¨çš„æ˜¯åº¦æ•°ã€è€Œå…¶ä»–åœ°æ–¹æ¶‰åŠè§’åº¦æ—¶å•ä½ä½¿ç”¨çš„æ˜¯ å¼§åº¦ã€‚</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹äºè·ç¦»ã€å°ºå¯¸çš„æ•°å€¼ 1 è¡¨ç¤º 1 ç±³ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®è®©æ•°å€¼ 1 è¡¨ç¤ºä¸º 1 å˜ç±³ã€‚</li></ol><p>å› æ­¤ï¼Œåœ¨ä½¿ç”¨ Three.js æ—¶ï¼Œå…³äºæ•°å€¼å•ä½è¯·æ ¼å¤–ç•™æ„ã€‚</p><h4 id=9æ·»åŠ è¾…åŠ©å¯¹è±¡æ·»åŠ é•œå¤´è½¨é“æ§åˆ¶å™¨>9ã€æ·»åŠ è¾…åŠ©å¯¹è±¡ã€æ·»åŠ é•œå¤´è½¨é“æ§åˆ¶å™¨<a hidden class=anchor aria-hidden=true href=#9æ·»åŠ è¾…åŠ©å¯¹è±¡æ·»åŠ é•œå¤´è½¨é“æ§åˆ¶å™¨>#</a></h4><p>åœ¨å¼€å‘é˜¶æ®µï¼Œå¯ä»¥å¤šæ·»åŠ ä¸€äº›è¾…åŠ©å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šåæ ‡è¾…åŠ©å¯¹è±¡ã€ç¯å…‰è¾…åŠ©å¯¹è±¡ã€é•œå¤´è¾…åŠ©å¯¹è±¡ã€‚</p><p>è¾…åŠ©å¯¹è±¡å¯ä»¥æ¯”è¾ƒç›´è§‚å¾—å¸®åŠ©æˆ‘ä»¬å»è§‚å¯Ÿï¼Œå»è°ƒè¯•ã€‚</p><p>åŒæ—¶ä¹Ÿè¦æ·»åŠ é•œå¤´è½¨é“æ§åˆ¶å™¨ï¼Œä¾‹å¦‚ OrbitControlsï¼Œå¯ä»¥è®©æˆ‘ä»¬æ¯”è¾ƒæ–¹ä¾¿æ“æ§ã€æŸ¥çœ‹åœºæ™¯ã€‚</p><h4 id=10å¿…è¦æ—¶å¯ä»¥å°†ç‰©ä½“æè´¨è®¾ç½®ä¸º-meshbasicmaterial>10ã€å¿…è¦æ—¶å¯ä»¥å°†ç‰©ä½“æè´¨è®¾ç½®ä¸º MeshBasicMaterial<a hidden class=anchor aria-hidden=true href=#10å¿…è¦æ—¶å¯ä»¥å°†ç‰©ä½“æè´¨è®¾ç½®ä¸º-meshbasicmaterial>#</a></h4><p>å‡è®¾ä½ è®¾ç½®çš„ç‰©ä½“æè´¨æ˜¯å¯åå…‰ææ–™ï¼Œä½†æ˜¯æ¸²æŸ“æ—¶å‘ç°å¹¶æ²¡æœ‰æ¸²æŸ“å‡ºè¯¥ç‰©ä½“ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œä½ å¯ä»¥å…ˆå°†ç‰©ä½“æè´¨ä¿®æ”¹ä¸ºä¸åå…‰çš„ MeshBasicMaterialï¼Œè¿™æ ·å¯ä»¥å¿«é€Ÿæ’é™¤ä¸€äº›é—®é¢˜ã€‚</p><p>å‡è®¾ç‰©ä½“æè´¨ä¸åå…‰ï¼Œæ­¤æ—¶è‹¥ä¾ç„¶æ¸²æŸ“ä¸å‡ºç‰©ä½“ï¼Œé‚£ä¹ˆå°±å¯ä»¥è‚¯å®šé—®é¢˜æ²¡æœ‰å‡ºåœ¨ç¯å…‰ä¸Šã€‚</p><p>åä¹‹ï¼Œåˆ™åº”è¯¥å»æ£€æŸ¥ç¯å…‰çš„é—®é¢˜ã€‚</p><h4 id=11æ£€æŸ¥é•œå¤´çš„-near-å’Œ-far-é…ç½®>11ã€æ£€æŸ¥é•œå¤´çš„ near å’Œ far é…ç½®<a hidden class=anchor aria-hidden=true href=#11æ£€æŸ¥é•œå¤´çš„-near-å’Œ-far-é…ç½®>#</a></h4><p>æœ‰äº›æ—¶å€™åœºæ™¯æ²¡æœ‰æ¸²æŸ“å‡ºç‰©ä½“ï¼Œé‚£ä¹ˆä½ ä¹Ÿè¦å»æ£€æŸ¥ä¸€ä¸‹é•œå¤´çš„ near å’Œ far çš„å€¼ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥æš‚æ—¶æ€§çš„å°†é•œå¤´çš„ far è®¾ç½®ä¸º 10000ï¼Œæˆ–è€…å°† near è®¾ç½®ä¸º 0.001ï¼Œåœ¨è¿™ç§æç«¯é…ç½®ä¸‹ï¼Œå†å»çœ‹åœºæ™¯æ˜¯å¦æ¸²æŸ“å‡ºç‰©ä½“ã€‚</p><p>è°ƒè¯•ç»“æŸåï¼Œè®°å¾—å°† near å’Œ far è°ƒæ•´ä¼šåˆç†çš„ç²¾åº¦èŒƒå›´ã€‚</p><h4 id=12é‡åˆ°ç–‘æƒ‘çš„åœ°æ–¹æŸ¥æ–‡æ¡£æŸ¥æºç >12ã€é‡åˆ°ç–‘æƒ‘çš„åœ°æ–¹ï¼ŒæŸ¥æ–‡æ¡£ï¼ŒæŸ¥æºç <a hidden class=anchor aria-hidden=true href=#12é‡åˆ°ç–‘æƒ‘çš„åœ°æ–¹æŸ¥æ–‡æ¡£æŸ¥æºç >#</a></h4><p>é‡åˆ°æŸäº› Three.js ç–‘æƒ‘çš„åœ°æ–¹ï¼Œä¾‹å¦‚æŸå±æ€§ï¼ŒæŸæ–¹æ³•ï¼Œè¯·è®°å¾—ä¸€å®šå…ˆå»æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼Œå¦‚æœæ²¡æœ‰è§£å†³å°±ç›´æ¥å»çœ‹ Three.js çš„æºç ã€‚</p><p>Three.js çš„æºç å¹¶ä¸æ˜¯ç‰¹åˆ«å¤æ‚ï¼Œè¦æ•¢äºæŸ¥çœ‹æºç æ¥è§£å†³ç–‘æƒ‘ã€‚</p><h2 id=ä½¿ç”¨guiè°ƒè¯•åœºæ™¯ä¸­çš„å‚æ•°>ä½¿ç”¨GUIè°ƒè¯•åœºæ™¯ä¸­çš„å‚æ•°<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨guiè°ƒè¯•åœºæ™¯ä¸­çš„å‚æ•°>#</a></h2><p><strong>å›¾å½¢ç”¨æˆ·ç•Œé¢( Graphical User Interface ) ç®€ç§° GUIã€‚</strong></p><blockquote><p>ä¸»è¦ç›®çš„æ˜¯ç”¨æ¥å¸®æˆ‘ä»¬å¿«é€Ÿæ­å»ºå¯è§†åŒ–è°ƒè¯•å‚æ•°é¢æ¿ã€‚</p></blockquote><p><strong>é’ˆå¯¹ JS çš„ GUI â€”â€”dat.gui</strong></p><p>å®˜ç½‘åœ°å€ï¼š<a href=https://github.com/dataarts/dat.gui>https://github.com/dataarts/dat.gui</a></p><p><strong>é’ˆå¯¹ React çš„ GUIâ€”â€”react-dat-gui</strong></p><p>å®˜ç½‘åœ°å€ï¼š<a href=https://github.com/claus/react-dat-gui>https://github.com/claus/react-dat-gui</a></p><p><strong>react-dat-gui çš„å…·ä½“ç”¨æ³•ï¼Œè¯·æŸ¥çœ‹æˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼š<a href=https://github.com/puxiao/notes/blob/master/React%E4%B8%AD%E4%BD%BF%E7%94%A8GUI.md>Reactä¸­ä½¿ç”¨GUI.md</a></strong></p><p>æœ¬æ•™ç¨‹æ‰€æœ‰ç¤ºä¾‹éƒ½æ˜¯åŸºäº react + typescript çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ react-dat-gui</p><p>åœ¨æˆ‘ä»¬åç»­çš„ç¤ºä¾‹ä¸­ï¼Œå°±ä¼šä½¿ç”¨åˆ° react-dat-guiã€‚</p><h2 id=è°ƒè¯•glsl>è°ƒè¯•GLSL<a hidden class=anchor aria-hidden=true href=#è°ƒè¯•glsl>#</a></h2><p><strong>å›¾å½¢åº“ç€è‰²è¯­è¨€( Graphic Library Shader Language ) ç®€ç§° GLSLã€‚</strong></p><blockquote><p>å­¦ä¸åŠ¨äº†ï¼Œå­¦ä¸åŠ¨äº†ï¼</p></blockquote><p>GLSL çš„ç›¸å…³ä»‹ç»ï¼Œå¯æŸ¥é˜…ï¼š</p><p>WebGLä¸GLSLï¼š<a href=https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shaders-and-glsl.html>https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shaders-and-glsl.html</a></p><p>WebGL2ä¸GLSLï¼š<a href=https://webgl2fundamentals.org/webgl/lessons/zh_cn/webgl-shaders-and-glsl.html>https://webgl2fundamentals.org/webgl/lessons/zh_cn/webgl-shaders-and-glsl.html</a></p><p>ç”±äºæˆ‘ä¸ªäººæ²¡æœ‰å­¦ä¹ è¿‡ WebGLå’Œ GLSLï¼Œæ‰€ä»¥æš‚æ—¶å…ˆä¸è®¨è®ºå¦‚ä½•è°ƒè¯• GLSLã€‚</p><blockquote><p>è°·æ­Œæµè§ˆå™¨è¿˜æœ‰ä¸€ä¸ªä¸“é—¨ç”¨æ¥è°ƒè¯•ç€è‰²å™¨çš„æ’ä»¶ï¼šShader Editor</p><p><a href="https://chrome.google.com/webstore/detail/shader-editor/ggeaidddejpbakgafapihjbgdlbbbpob?hl=en">https://chrome.google.com/webstore/detail/shader-editor/ggeaidddejpbakgafapihjbgdlbbbpob?hl=en</a></p></blockquote><p>å…³äº Three.js çš„è°ƒè¯•æŠ€å·§ï¼Œå°±è®²åˆ°è¿™é‡Œã€‚</p><p>æ¥ä¸‹æ¥è®²è§£ Canvas çš„ä¸€äº›å¸¸ç”¨å°æŠ€å·§ã€‚</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://bablvsj.github.io/tags/three.js/>Three.js</a></li></ul><nav class=paginav><a class=prev href=https://bablvsj.github.io/posts/threejs/17-three.js%E6%8A%80%E5%B7%A7%E4%B9%8B%E6%8C%89%E9%9C%80%E6%B8%B2%E6%9F%93/><span class=title>Â« Prev</span><br><span>17 Three.jsæŠ€å·§ä¹‹æŒ‰éœ€æ¸²æŸ“</span></a>
<a class=next href=https://bablvsj.github.io/posts/threejs/19-three.js%E6%8A%80%E5%B7%A7%E4%B9%8B%E7%94%BB%E5%B8%83/><span class=title>Next Â»</span><br><span>19 Three.jsæŠ€å·§ä¹‹ç”»å¸ƒ</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bablvsj.github.io>Bablvsj's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div class=flex-c-d><a class=flex-d-c href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank><span>æœ¬ç«™ç”±</span><img width=60 src=/images/upyun.png>æä¾›CDNåŠ é€Ÿ/äº‘å­˜å‚¨æœåŠ¡</a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>