<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>11 Three.jsåŸºç¡€ä¹‹ç¯å…‰ | Bablvsj's Blog</title><meta name=keywords content="Three.js"><meta name=description content="11 Three.jsåŸºç¡€ä¹‹ç¯å…‰ - Bablvsj's Blog"><meta name=author content><link rel=canonical href=https://bablvsj.github.io/posts/threejs/11-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%81%AF%E5%85%89/><link crossorigin=anonymous href=/assets/css/stylesheet.b33b75c69bb2ec0d4accfeaad1d3ba05b272f180583f687c640a522d6492076f.css integrity="sha256-szt1xpuy7A1KzP6q0dO6BbJy8YBYP2h8ZApSLWSSB28=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://bablvsj.github.io/img/Q.gif><link rel=apple-touch-icon href=https://bablvsj.github.io/Q.gif><link rel=mask-icon href=https://bablvsj.github.io/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=stylesheet href=/css/syntax.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="11 Three.jsåŸºç¡€ä¹‹ç¯å…‰"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://bablvsj.github.io/posts/threejs/11-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%81%AF%E5%85%89/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-19T17:11:35+08:00"><meta property="article:modified_time" content="2023-12-19T17:11:35+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="11 Three.jsåŸºç¡€ä¹‹ç¯å…‰"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"æ–‡ç« ","item":"https://bablvsj.github.io/posts/"},{"@type":"ListItem","position":3,"name":"11 Three.jsåŸºç¡€ä¹‹ç¯å…‰","item":"https://bablvsj.github.io/posts/threejs/11-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%81%AF%E5%85%89/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"11 Three.jsåŸºç¡€ä¹‹ç¯å…‰","name":"11 Three.jsåŸºç¡€ä¹‹ç¯å…‰","description":"","keywords":["Three.js"],"articleBody":"ç¯å…‰çš„ç§ç±» åœ¨åœºæ™¯ä¸­æ·»åŠ ç¯å…‰åï¼Œç¯å…‰ç…§å°„åœ¨ç‰©ä½“ä¸Šäº§ç”Ÿæ˜æš—ã€å…‰äº®å’Œé˜´å½±ï¼Œä»è€Œè®©ç‰©ä½“æ˜¾å¾—æ›´åŠ ç«‹ä½“æœ‰å…‰æ³½ã€‚\nåœ¨æœ‰äº›æ–‡æ¡£æˆ–æ•™ç¨‹ä¸­ï¼Œä¼šæŠŠ ç¯å…‰ ç§°å‘¼ä¸º å…‰æºï¼Œè¿™åªæ˜¯å¯¹ light è¿™ä¸ªå•è¯çš„ä¸åŒç¿»è¯‘è€Œå·²\nå¦‚æœæˆ‘åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ï¼Œæœ‰æ—¶å€™ä½¿ç”¨ â€œç¯å…‰â€ï¼Œæœ‰æ—¶å€™ä½¿ç”¨ â€œå…‰æºâ€ï¼Œè¯·å‹¿è§æ€ªã€‚\nå‘åœºæ™¯ä¸­æ·»åŠ ç¯å…‰ è¿™ä¸ªè¡Œä¸ºï¼Œåœ¨ä¼ ç»Ÿ 3D è½¯ä»¶åˆ¶ä½œä¸­é€šå¸¸è¢«ç§°ä¸º â€œæ‰“ç¯â€\nè‹¥åœºæ™¯ä¸­çš„ç‰©ä½“ç”±éåå…‰æè´¨æ„æˆï¼Œå³ä½¿åœºæ™¯ä¸­æ²¡æœ‰ä»»ä½•å…‰æºï¼Œæ¸²æŸ“åä¾ç„¶å¯ä»¥çœ‹è§è¯¥ç‰©ä½“ã€‚\néåå…‰æè´¨ä¸º MeshBasicMaterial\nè‹¥åœºæ™¯ä¸­çš„ç‰©ä½“ç”±åå…‰æè´¨æ„æˆï¼Œå‡è®¾åœºæ™¯ä¸­æ²¡æœ‰ä»»ä½•å…‰æºï¼Œæ¸²æŸ“å‡ºçš„ç»“æœå°†æ˜¯ä¸€ç‰‡æ¼†é»‘ï¼Œä»€ä¹ˆç‰©ä½“éƒ½çœ‹ä¸è§ã€‚\nåå…‰æè´¨ä¸º MeshPhongMaterial ç­‰\nç¯å…‰çš„ç§ç±» åœ¨ Three.js ä¸­ï¼Œæœ‰ 6 ç§åŸºç¡€ç±»å‹çš„ç¯å…‰ï¼Œä»–ä»¬éƒ½ç»§æ‰¿äº Three.Light ã€‚\nç¯å…‰ç±»å‹(éƒ½ç»§æ‰¿äºLight) ç¯å…‰åç§° æ˜¯å¦æ”¯æŒé˜´å½± æ˜¯å¦ä½œç”¨äºå…¨å±€(æ— å¤„ä¸åœ¨) æ˜¯å¦æœ‰ç…§å°„ç›®æ ‡ AmbientLight ç¯å¢ƒå…‰ã€æ°›å›´å…‰ å¦ æ˜¯ æ—  DirectionalLight å¹³è¡Œå…‰ æ˜¯ å¦ æœ‰ HemisphereLight åŠçƒå…‰æºã€æˆ·å¤–å…‰æº å¦ æ˜¯ æ—  PointLight ç‚¹å…‰æº æ˜¯ å¦ æœ‰ RectAreaLight çŸ©å½¢é¢å…‰æº å¦ å¦ æ—  SpotLight èšå…‰ç¯å…‰æº æ˜¯ å¦ æœ‰ è¡¥å……è¯´æ˜1ï¼šç¯å¢ƒå…‰\næœ‰ä¸ªåˆ«æ–‡æ¡£æˆ–æ•™ç¨‹ä¸­ï¼Œä¼šæŠŠ HemisphereLight ä¹Ÿç§°å‘¼ä¸º â€œç¯å¢ƒå…‰â€ã€‚\näº‹å®ä¸Š AmbientLight å’Œ HemisphereLight çš„ä½œç”¨éƒ½æ˜¯æä¾›ç¯å¢ƒå…‰ï¼Œåªæ˜¯ HemisphereLight çš„ç¯å¢ƒå…‰æ›´åŠ çœŸå®ï¼Œå½“ç„¶æ¸²æŸ“æ‰€éœ€æ€§èƒ½ä¹Ÿæ›´å¤šã€‚\nè¡¥å……è¯´æ˜2ï¼šæ˜¯å¦æ”¯æŒé˜´å½±\n**æ‰€æœ‰çš„å…‰ç…§å°„åˆ°ç‰©ä½“ä¸Šåï¼Œéƒ½ä¼šäº§ç”Ÿé˜´å½±ã€‚**ä½† è¿™é‡Œè¯´çš„ä¸æ˜¯ æ˜¯å¦ä¼šäº§ç”Ÿé˜´å½±ï¼Œè€Œæ˜¯è¯´ â€œæ˜¯å¦æ”¯æŒé˜´å½±â€ã€‚\nä¸€å…±æœ‰ 3 ç§å…‰ä¸æ”¯æŒé˜´å½±ï¼šAmbientLightã€HemisphereLightã€RectAreaLight\nå…¶ä»–ç§ç±»çš„å…‰ï¼Œéƒ½æ”¯æŒé˜´å½±ï¼šDirectionalLightã€PointLightã€SpotLight\nå…³äº Three.js ä¸­çš„ é˜´å½± (LightShadownã€DirectionalLightShadownã€PointLightShadownã€SpotLightShadown)ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢å•ç‹¬å¼€è¾Ÿä¸€èŠ‚æ¥è®²è§£ã€‚\nå…³äºâ€œé˜´å½±â€çš„è¿›ä¸€æ­¥è¡¥å……ï¼š\nåœ¨ä¹‹å‰æ‰€æœ‰çš„ç¤ºä¾‹ä¸­ï¼Œå½“åœºæ™¯ä¸Šæœ‰åå…‰ç‰©ä½“ä¸”æœ‰ç¯å…‰æ—¶ï¼Œç‰©ä½“ä¼šäº§ç”Ÿæ˜æš—ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼š\nè¿™ä¸ªâ€œç‰©ä½“æ˜¾ç¤ºå‡ºçš„æ˜æš—â€å¹¶ä¸æ˜¯çœŸæ­£çš„â€œé˜´å½±â€ã€‚\nåœ¨ Three.js ä¸­ æœ‰çœŸæ­£çš„é˜´å½±å¯¹è±¡ï¼Œè¿™ä¸ªä¼šåœ¨åé¢çš„ â€œThree.jsåŸºç¡€ä¹‹é˜´å½±â€ ä¸€æ–‡ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚\nè¿™ä¸ªâ€œç‰©ä½“æ˜¾ç¤ºå‡ºçš„æ˜æš—â€å¹¶ä¸æ˜¯å®Œå…¨ç¬¦åˆæˆ‘ä»¬æ—¥å¸¸çš„â€œå…‰å½±æ˜æš—â€ã€‚\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç›®å‰æ‰€æœ‰ç¤ºä¾‹éƒ½ä½¿ç”¨çš„æ˜¯â€œç®€å•å…‰ç…§æ¨¡å‹â€ï¼Œä¹Ÿå°±æ˜¯è¯´å…‰ç…§å°„åœ¨ç‰©ä½“ä¸Šåå¹¶ä¸è¿›è¡Œæ¼«åå°„ï¼Œæ‰€ä»¥æ¸²æŸ“å‡ºçš„â€œæ˜æš—â€å¹¶ä¸å®Œå…¨è‡ªç„¶åˆç†ã€‚\né»˜è®¤æ¸²æŸ“å™¨å¹¶ä¸ä¼šæ¸²æŸ“é˜´å½±ã€é»˜è®¤æ”¯æŒé˜´å½±çš„ç¯å…‰ä¹Ÿä¸ä¼šæŠ•å°„é˜´å½±ï¼Œè‹¥æƒ³äº§ç”ŸçœŸæ­£çš„é˜´å½±ï¼Œè¿˜éœ€å¼€å¯é˜´å½±æ¸²æŸ“å’ŒæŠ•å°„ã€‚\nå…·ä½“å¦‚ä½•å¼€å¯ï¼Œä¹Ÿä¼šåœ¨åé¢çš„ â€œThree.jsåŸºç¡€ä¹‹é˜´å½±â€ ä¸€æ–‡ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚\nè¡¥å……è¯´æ˜3ï¼šæ˜¯å¦ä½œç”¨åŸŸå…¨å±€\nåªæœ‰ç¯å¢ƒå…‰(AmbientLightã€HemisphereLight)ä½œç”¨äºå…¨å±€ï¼Œå…¶ä»–å…‰åˆ™ç…§è€€èŒƒå›´éƒ½æ˜¯æœ‰é™çš„ã€‚\nè¡¥å……è¯´æ˜4ï¼šä»€ä¹ˆå« â€œæ˜¯å¦æœ‰ç…§å°„ç›®æ ‡ï¼Ÿâ€\nç­”ï¼šå°±æ˜¯è¿™ä¸ªå…‰é™¤äº†å…‰æºæœ¬èº«ä¹‹å¤–ï¼Œè¿˜åŒ…å«ä¸€ä¸ª target å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡è®¾ç½® target.position çš„ä½ç½®ã€‚å¯¹äºæœ‰ç…§å°„ç›®æ ‡çš„ç¯å…‰ï¼Œåœ¨åœºæ™¯ä¸­ä¸å…‰è¦æ·»åŠ ç¯å…‰æœ¬èº«ï¼Œè¿˜å¯ä»¥æ·»åŠ  ç¯å…‰ç…§å°„ç›®æ ‡ã€‚\næ³¨æ„æ˜¯ â€œå¯ä»¥æ·»åŠ â€ ç¯å…‰ç›®æ ‡ï¼Œè€Œä¸æ˜¯è¯´ â€œå¿…é¡»ä¹Ÿè¦æ·»åŠ â€ ç¯å…‰ç›®æ ‡ã€‚\nè¯·æ³¨æ„ä¸Šé¢è¡¨æ ¼ä¸­ï¼Œå…³äº â€œæ˜¯å¦äº§ç”Ÿé˜´å½±â€ å’Œ â€œæ˜¯å¦æœ‰ç…§å°„ç›®æ ‡â€ï¼Œè¿™ 2 é¡¹ æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŒ…å«ç…§å°„ç›®æ ‡çš„å…‰ï¼Œæ‰ä¼šäº§ç”Ÿé˜´å½±ã€‚\nåœ¨ Three.js ä¸­ï¼Œæœ‰ 3 ç§ å…‰æ¢é’ˆ ç±»å‹çš„ç¯å¢ƒå…‰ã€‚\nç¯å…‰ç±»å‹ ç¯å…‰åç§° LightProbe å…‰æ¢é’ˆ AmbientLightProbe(ç»§æ‰¿äºLightProbe) ç¯å¢ƒå…‰æ¢é’ˆ HemisphereLightProbe(ç»§æ‰¿äºLightProbe) åŠçƒå…‰æ¢é’ˆ å…³äº å…‰æ¢é’ˆï¼Œæ˜¯å¦å¤–ä¸€å¥—æ¯”è¾ƒå¤æ‚çš„å…‰çš„ç®—æ³•æ–¹å¼ã€‚\næ ¹æ®æˆ‘ç½‘ä¸Šæœç´¢åˆ°çš„ä¸€äº›ä¿¡æ¯ï¼Œå¤§æ¦‚å¯ä»¥æè¿°ä¸ºï¼š\nä¼ ç»Ÿçš„ ç¯å¢ƒå…‰(AmbientLightã€HemisphereLight) æ¸²æŸ“æ—¶éœ€è¦çš„è®¡ç®—é‡æ¯”è¾ƒå¤§ï¼Œå¯¹äºæ¸²æŸ“é™æ­¢ç‰©ä½“æ¥è¯´è¿˜å¯ä»¥ï¼Œä½†æ˜¯æ¸²æŸ“ è¿åŠ¨ç±»å‹ çš„ç‰©ä½“æ—¶æ‰€æ¶ˆè€—çš„æ€§èƒ½è¿‡é«˜ï¼Œè€Œ å…‰æ¢é’ˆç±»å‹çš„ç¯å¢ƒå…‰(AmbientLightProbeã€HemisphereLightProbe) åˆ™æ›´åŠ é€‚åˆ è¿åŠ¨ç±»å‹ çš„ç‰©ä½“ã€‚\nå…‰çš„è¾…åŠ©å¯¹è±¡ åœºæ™¯ä¸­çš„å…‰æœ¬èº«æ˜¯ä¸å¯è§çš„ï¼Œä¸ºäº†è®©æˆ‘ä»¬æ–¹ä¾¿è§‚æµ‹å…‰æºï¼ŒThree.js æä¾›äº† å…‰çš„è¾…åŠ©å¯¹è±¡ï¼šDirectionalLightHelperã€HemisphereLightHelperã€PointLightHelperã€RectAreaLightHelperã€SpotLightHelper\næ‰€è°“å…‰çš„è¾…åŠ©å¯¹è±¡ï¼Œå°±æ˜¯åœ¨æ¸²æŸ“åå‡ºç°çš„ä¸€äº›ç™½è‰²ç»†çº¿ï¼Œè¿™äº›ç™½è‰²ç»†çº¿æŒ‡ç¤ºå‡ºå…‰æºçš„ä½ç½®ã€å¤§å°ã€ä»¥åŠå…‰å‘å°„çš„æ–¹å‘ã€‚\nå…‰çš„è¾…åŠ©å¯¹è±¡ç”¨æ³•éå¸¸ç®€å•ï¼Œ3 æ­¥éª¤ï¼š\nå…ˆåˆ›å»º å…‰ çš„å®ä¾‹ å°†åˆ›å»ºå¥½çš„å…‰å®ä¾‹ä½œä¸º è¾…åŠ©å¯¹è±¡æ„é€ å‡½æ•°çš„å‚æ•° åœºæ™¯ä¸­æ·»åŠ  è¾…åŠ©å¯¹è±¡å³å¯ ä¾‹å¦‚ï¼š\n//åˆ›å»ºå¹¶è®¾ç½®å¹³è¡Œå…‰ const directionalLight = new Three.DirectionalLight(0xFFFFFF, 1) directionalLight.position.set(0, 10, 0); directionalLight.target.position.set(-5, 0, 0) //å°†å¹³è¡Œå…‰æ·»åŠ åˆ°åœºæ™¯ä¸­ scene.add(directionalLight) scene.add(directionalLight.target) //æ ¹æ®å¹³è¡Œå…‰å®ä¾‹ï¼Œåˆ›å»ºå¯¹åº”çš„è¾…åŠ©å¯¹è±¡ï¼Œå¹¶å°†è¾…åŠ©å¯¹è±¡æ·»åŠ åˆ°åœºæ™¯ä¸­ const directionalLightHelper = new Three.DirectionalLightHelper(directionalLight) scene.add(directionalLightHelper) ç¯å…‰ä½œç”¨ä¸ç‰¹ç‚¹ AmbientLight(ç¯å¢ƒå…‰ã€æ°›å›´å…‰)ï¼š\né€šå¸¸ä»…ä½œä¸ºåŸºç¡€å…‰çº¿ï¼Œä¸€èˆ¬éœ€è¦ä¸å…¶ä»–ç¯å…‰é…åˆä½¿ç”¨ã€‚ä¸èƒ½äº§ç”Ÿé˜´å½±ã€ä¹Ÿæ— éœ€æŒ‡å®šåæ ‡ä½ç½®ï¼Œä»…éœ€è®¾ç½®é¢œè‰²å’Œå¼ºåº¦ã€‚\næ³¨æ„ï¼šä¸æ”¯æŒé˜´å½±\nDirectionalLight(å¹³è¡Œå…‰)ï¼š\næœ€ä¸ºç»å¸¸ä½¿ç”¨çš„å…‰æºï¼Œå…‰çº¤(å…‰èŠ’)éƒ½æ˜¯å¹³è¡Œå‘ç€ä¸€ä¸ªæ–¹å‘å‘å°„ã€‚\nç»å¸¸ä½¿ç”¨ DirectionalLight æ¥æ¨¡æ‹Ÿå¤ªé˜³å…‰ç…§å°„åˆ°æŸä¸ªç‰©ä½“ä¸Šçš„å…‰ç…§æ•ˆæœã€‚\nHemisphereLight(åŠçƒå…‰æº)ï¼š\nç›¸å¯¹ ambientLightï¼ŒhemisphereLight æ›´åŠ çœŸå®çš„æ¨¡æ‹Ÿè‡ªç„¶å…‰æºï¼Œæä¾› å¤©ç©º å’Œ åœ°é¢ æ¼«åå°„å…‰çº¿ã€‚\nä¸€å…±æ¥æ”¶ 3 ä¸ªå‚æ•°ï¼š\nç¬¬ 1 ä¸ªå‚æ•°ï¼šå¤©ç©ºå…‰çº¿é¢œè‰² ç¬¬ 2 ä¸ªå‚æ•°ï¼šåœ°é¢åå°„å…‰é¢œè‰² ç¬¬ 3 ä¸ªå‚æ•°ï¼šå…‰çš„åå°„å¼ºåº¦ æ³¨æ„ï¼šä¸æ”¯æŒé˜´å½±\nPointLight(ç‚¹å…‰æº)ï¼š\nç±»ä¼¼ç”Ÿæ´»ä¸­çš„ç¯æ³¡ï¼Œå…‰çº¤(å…‰èŠ’)æ²¡æœ‰å›ºå®šæ–¹å‘ï¼Œæœç€å››å‘¨æ•£å°„ã€‚\næ³¨æ„ï¼šç‚¹å…‰æºå¯¹åº”çš„è¾…åŠ©å¯¹è±¡ PointLightHelper åªæœ‰ä¸€ä¸ª è±å½¢çš„å…‰æºå½¢çŠ¶ï¼Œå¹¶æ²¡æœ‰ å…‰ çš„å‘å°„çº¿æ¡ã€‚\nRectAreaLight(çŸ©å½¢é¢å…‰æº)ï¼š\nä¸ DirectionalLight æ¨¡æ‹Ÿå¤ªé˜³å…‰ä¸åŒï¼ŒRectAreaLight å…‰æºå½¢çŠ¶ä¸ºä¸€ä¸ªçŸ©å½¢ï¼Œå¯ä»¥æ¨¡æ‹Ÿå‡ºæ˜äº®çš„çª—å£æˆ–çŸ©å½¢ç…§æ˜å…‰æºã€‚\næ³¨æ„ï¼š\nä¸æ”¯æŒé˜´å½±\nåªæœ‰ MeshStandardMaterial å’Œ MeshPhysicalMaterial ææ–™æ‰æ”¯æŒ RectAreaLight å…‰æº\næŒ‰ç…§å®˜æ–¹æ–‡æ¡£æè¿°ï¼Œåœºæ™¯ä¸­å¿…é¡»åŠ å…¥ RectAreaLightUniformsLib.init()\nç›®å‰æˆ‘æ¯”è¾ƒç–‘æƒ‘çš„æ˜¯ï¼Œç»è¿‡è¯•éªŒå‘ç°ï¼Œå³ä½¿ä¸æ·»åŠ  RectAreaLightUniformsLib.init()ï¼Œåœºæ™¯ä¾ç„¶æ­£å¸¸æ¸²æŸ“ï¼Œä¼¼ä¹çœ‹ä¸å‡ºæœ‰ä»»ä½•å·®åˆ«\nç‰¹åˆ«è¯´æ˜ï¼š\nRectAreaLight å¯¹åº”çš„ è¾…åŠ©å¯¹è±¡ RectAreaLightArea å¼•å…¥æ–¹å¼å’Œå…¶ä»– å…‰è¾…åŠ©å¯¹è±¡ å¼•å…¥æ–¹å¼ä¸åŒã€‚\nå…¶ä»–å…‰è¾…åŠ©å¯¹è±¡éƒ½æ˜¯å†…ç½®åœ¨ three ä¸­çš„ï¼Œä½¿ç”¨ä¹‹å‰æ— éœ€å¼•å…¥ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š\nconst directionalLightHelper = new Three.DirectionalLightHelper(directionalLight) ä½†æ˜¯ RectAreaLightHelper åœ¨ä½¿ç”¨å‰éœ€è¦å¼•å…¥æ‰å¯ä»¥ï¼Œå¼•å…¥ä»£ç ï¼š\nimport { RectAreaLightHelper } from 'three/examples/jsm/helpers/RectAreaLightHelper' SpotLight(èšå…‰ç¯)ï¼š\nç±»ä¼¼ç”Ÿæ´»ä¸­çš„èšå…‰ç¯æ•ˆæœã€‚\nå…³äºæ¯ä¸ªç¯å…‰çš„å…·ä½“å‚æ•°è¯¦æƒ…ã€å±æ€§ç”¨æ³•ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://threejs.org/docs/index.html#api/zh/lights/Light\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡åˆ›å»ºä¸€ä¸ª HelloLight çš„ä¾‹å­ï¼Œç›´è§‚çš„è§‚å¯Ÿä¸åŒç±»å‹ç¯å…‰çš„æ•ˆæœã€‚\nè¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¼šç”¨åˆ°æˆ‘ä»¬ä¸ŠèŠ‚å­¦ä¹ çš„ çº¹ç† ç›¸å…³çŸ¥è¯†ã€‚\nå‰æœŸå‡†å¤‡ï¼šOrbitControlsè®²è§£ã€åˆ¶ä½œçº¹ç†å›¾ç‰‡ OrbitControls çš„ç®€ä»‹å’Œç”¨æ³• æœ¬ç¤ºä¾‹ä¸­éœ€è¦ç”¨åˆ°ä¸€ä¸ªä¹‹å‰ä»æœªä½¿ç”¨è¿‡çš„ç±»ï¼šOrbitControlsï¼Œå…ˆç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸ªç±»ã€‚\norbit å•è¯çš„ç¿»è¯‘ä¸ºï¼šè½¨é“ controls å•è¯çš„ç¿»è¯‘ä¸ºï¼šæ§åˆ¶æƒ OrbitControls æ˜¯é¼ æ ‡é•œå¤´è½¨é“æ§ä»¶ï¼Œå¯ä»¥é€šè¿‡é¼ æ ‡æ¥é…ç½®é•œå¤´çš„è¿åŠ¨è½¨é“ï¼Œä¾‹å¦‚ ç¼©æ”¾ã€å¹³ç§»ã€æ—‹è½¬ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸ä¿®æ”¹åœºæ™¯çš„å‰æä¸‹ï¼Œå¯ä»¥é€šè¿‡é¼ æ ‡æ¥æ”¹å˜é•œå¤´ï¼Œä»¥ä¾¿æŸ¥çœ‹ä¸åŒè§’åº¦ä¸‹çš„åœºæ™¯ã€‚\nåœ¨æ‰‹æœºç«¯ï¼Œä¸æ˜¯é¼ æ ‡ï¼Œè€Œæ˜¯æ‰‹æŒ‡æ»‘åŠ¨\nOrbitControlsçš„ç”¨æ³• const controls = new OrbitControls(camera, canvas) //åˆ›å»ºä¸€ä¸ªå®ä¾‹ controls.target.set(0, 5, 0) //controls.target ä¸ºé•œå¤´çš„åæ ‡ç³»ç»Ÿ //controls.target.set(0, 5, 0) çš„æ„æ€æ˜¯ï¼šè®¾ç½®åŸç‚¹ Y è½´çš„åæ ‡(ä»¥é«˜å‡º5ç±³çš„è½¨é“è¿è¡Œ) controls.update() //ä½¿æ§ä»¶ä½¿ç”¨æ–°ç›®æ ‡ è¯·æ³¨æ„ï¼Œåœ¨ä¸Šé¢ä»£ç ä¸­ï¼ŒOrbitControls çš„æ„é€ å‡½æ•°ä¸­ç¬¬ 2 ä¸ªå‚æ•°ä¸ºDOM ä¸­çš„ canvas èŠ‚ç‚¹ï¼Œå®é™…ä¸Šå½“æ·»åŠ è¿‡ OrbitControls ä¹‹åï¼Œé¼ æ ‡åœ¨ canvas ä¸Šçš„ æ‹–æ‹½ã€é¼ æ ‡æ»šè½´æ»šåŠ¨ ç­‰æ“ä½œéƒ½ä¼šè¢«æ•æ‰åˆ°ï¼Œå¹¶ä¸”åšå‡ºç›¸å¯¹åº”çš„é•œå¤´ç”»é¢åˆ‡æ¢ã€‚\nè¯´ç›´ç™½ç‚¹ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥é€šè¿‡é¼ æ ‡å¯¹ 3D åœºæ™¯è¿›è¡Œä¸åŒè§’åº¦ï¼Œè·ç¦»çš„åˆ‡æ¢æ“ä½œäº†ã€‚\nOrbitControlsçš„changeäº‹ä»¶ï¼š\næ— è®ºæ˜¯é€šè¿‡ é¼ æ ‡æˆ–é”®ç›˜ æ¥ä¿®æ”¹é•œå¤´è½¨é“ éƒ½ä¼šè§¦å‘ OrbitControls çš„ change äº‹ä»¶ã€‚\næˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ  äº‹ä»¶ç›‘å¬ æ¥æ•è·è¯¥äº‹ä»¶ï¼š\nconst handleChange = () =\u003e { ... } const controls = new OrbitControls(camera, canvasRef.current) controls.addEventListener('change',handleChange) å¯¹äºç›®å‰çš„æˆ‘ä»¬æ¥è¯´ï¼Œæ˜¯æ²¡æœ‰å¿…è¦ä½¿ç”¨è¯¥äº‹ä»¶çš„ï¼Œåœ¨åç»­çš„ Three.js æŠ€å·§ç¯‡ ä¸­ï¼Œæˆ‘ä»¬æ‰ä¼šè¿ç”¨åˆ° change äº‹ä»¶ã€‚\né™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½® ç¦æ­¢ç¼©æ”¾ã€ç¦æ­¢æ—‹è½¬ã€ç¦æ­¢å³é”®æ‹–æ‹½ã€è®¾ç½®å¯æ—‹è½¬è§’åº¦èŒƒå›´ç­‰ç­‰ä¸€ç³»åˆ—é…ç½®ï¼Œå…·ä½“çš„å¯æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼šhttps://threejs.org/docs/#examples/zh/controls/OrbitControls\nç‰¹åˆ«æ³¨æ„ï¼š\nOrbitControls å¹¶ä¸æ˜¯åŒ…å«åœ¨ three æ ¹ç›®å½•ä¸‹ï¼Œè€Œæ˜¯ä½äº three/examples/jsm/controls/OrbitControls ä¸­ï¼Œå› æ­¤å¼•å…¥ä»£ç ä¸ºï¼š\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls' æé†’ï¼šåœ¨ OrbitControls.js ä¸­ï¼Œåˆ†åˆ«å¯¼å‡ºæœ‰ OrbitControls å’Œ MapControlsï¼Œæ‰€ä»¥å¼•å…¥ OribitControls æ˜¯éœ€è¦åŠ  å¤§æ‹¬å· { }ã€‚\nè¡¥å……è¯´æ˜ï¼š\nä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼ŒOrbitControls å¹¶ä¸æ˜¯ Three.js æ ¸å¿ƒåŒ…å«çš„ä»£ç å†…å®¹ï¼ŒOrbitControls æ˜¯å°†æœ€å¸¸è§çš„é¼ æ ‡ä¸ Three.js åœºæ™¯äº¤äº’å†…å®¹çš„ä¸€ä¸ªé¢å¤–å°è£…ã€‚\nç”±äº OrbitControls å®åœ¨æ˜¯è¿‡äºé¢‘ç¹ä½¿ç”¨ï¼Œæœ€ç»ˆ Three.js å°† OrbitControls ä¹ŸåŒ…å«åˆ°äº† Three.js ä»£ç åŒ…ä¸­ï¼Œåªä¸è¿‡ä¸åœ¨é»˜è®¤çš„ç›®å½•ä¸­ï¼Œè€Œæ˜¯åœ¨ Three.js ç¤ºä¾‹ç›®å½•ä¸­ã€‚\nåœ¨ Three.js æ—©æœŸçš„ç‰ˆæœ¬ä¸­ï¼Œä»£ç åŒ…ä¸­å¹¶æœªåŒ…å« OrbitControlsï¼Œè‹¥æƒ³ä½¿ç”¨è¿˜éœ€è¦ yarn å®‰è£… three-orbitcontrols è¿™ä¸ªåŒ…ã€‚åªä¸è¿‡å½“åæ¥ Three.js åŒ…å«äº† OrbitControls ä¹‹åï¼Œæ‰å†ä¹Ÿæ— éœ€é¢å¤–å®‰è£…äº†ã€‚\nè¡¥å……è¯´æ˜2ï¼š\nåŸæœ¬ OrbitControl é™¤äº†é¼ æ ‡æ‹–æ‹½å¯ä»¥æ”¹å˜åœºæ™¯è§†è§’ï¼Œè¿˜æ”¯æŒé”®ç›˜ä¸Šçš„ 4 ä¸ªæ–¹å‘é”®æ¥æ”¹å˜åœºæ™¯è§†è§’ã€‚\nåªä¸è¿‡ React å¯¹äºåŸç”Ÿ DOM äº‹ä»¶æ”¯æŒåº¦å¹¶ä¸é«˜ï¼ŒReact æ›´å€¾å‘äºç»™ç»„ä»¶æ·»åŠ  onKeydown å±æ€§å¤„ç†å‡½æ•°ã€‚\næœ¬è´¨ä¸Š ç»„ä»¶çš„ onKeydown ç›¸å½“äº React çš„åˆæˆäº‹ä»¶ã€‚\nThree.js çš„å®˜æ–¹ç¤ºä¾‹ä½¿ç”¨çš„æ˜¯åŸç”Ÿ html + jsï¼Œæ˜¯å®Œå…¨æ”¯æŒåŸç”Ÿé”®ç›˜äº‹ä»¶çš„ã€‚æ‰€ä»¥ å®˜ç½‘çš„ç¤ºä¾‹ ä½¿ç”¨é”®ç›˜æ–¹å‘é”®æ§åˆ¶åœºæ™¯æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨ React é¡¹ç›®ä¸­å´ä¸å¤ªå®¹æ˜“å®ç°ã€‚\nåœ¨ React ä¸­å¦‚æœæƒ³è®© canvas æ‹¥æœ‰é”®ç›˜äº‹ä»¶ç›‘å¬ï¼Œéœ€è¦åšä»¥ä¸‹ 2 å¤„è®¾ç½®ï¼š\nåœ¨ useEffect ä¸­ï¼Œå½“ç¬¬ä¸€æ¬¡æŒ‚è½½å®Œæˆï¼Œæ·»åŠ  canvasRef.current.fouce()ï¼Œè®© canvas è‡ªåŠ¨è·å¾—ç„¦ç‚¹ åœ¨ ä¸­æ·»åŠ  tabindex å±æ€§ï¼Œå±æ€§å€¼ä¸º -1ã€0ã€1 éƒ½æ— æ‰€è°“ï¼Œä¾‹å¦‚ï¼š åªæœ‰æ»¡è¶³ä»¥ä¸Š 2 ä¸ªæ¡ä»¶åï¼Œcanvas æ‰ä¼šç›‘å¬åˆ°é”®ç›˜äº‹ä»¶ï¼Œä½†æ˜¯ä¸€æ—¦ canvas å¤±å»ç„¦ç‚¹ï¼Œé‚£ä¹ˆå°±åˆç›‘å¬ä¸åˆ°äº†ã€‚\nè¿˜æ˜¯ç»§ç»­ä½¿ç”¨ é¼ æ ‡æ‹–æ‹½ æ¥ä¿®æ”¹æŸ¥çœ‹åœºæ™¯è§†è§’å§\nè¡¥å……è¯´æ˜3ï¼š\näº‹å®ä¸Šå¦‚æœä½ çœŸçš„éœ€è¦ç›‘å¬ é¼ æ ‡é”®ç›˜æ–¹å‘é”® ï¼Œå…¶å®æœ€ç®€å•çš„åŠæ³•å°±æ˜¯æŠŠ OrbitControls ç›‘å¬å¯¹è±¡ä¿®æ”¹ä¸º document.body ä¸Šã€‚\n- const controls = new OrbitControls(camera, canvasRef.current) + const controls = new OrbitControls(camera, document.body) çº¹ç†å›¾ç‰‡å‡†å¤‡ï¼šåˆ¶ä½œçº¹ç†å›¾ç‰‡ checker.png æœ¬ç¤ºä¾‹ä¸­éœ€è¦ç”¨åˆ°ä¸€ä¸ªç±»ä¼¼ 3D åœºæ™¯åœ°é¢é»‘ç™½ç½‘æ ¼çš„çº¹ç†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æå‰å‡†å¤‡å¥½è¿™ä¸ªçº¹ç†å›¾ç‰‡ã€‚\nåœ¨ PhotoShop ä¸­æ–°å»ºä¸€ä¸ª å®½é«˜éƒ½ä¸º 2 åƒç´ çš„ç”»å¸ƒï¼Œç„¶åï¼š\nå·¦ä¸Šè§’å’Œå³ä¸‹è§’ çš„é‚£ 1 åƒç´ ä¸­å¡«å……ä¸€ä¸ªè¾ƒé»‘çš„é¢œè‰² å³ä¸Šè§’å’Œå·¦ä¸‹è§’ çš„é‚£ 1 åƒç´ ä¸­å¡«å……ä¸€ä¸ªè¾ƒç™½çš„é¢œè‰² å°†å›¾ç‰‡å¯¼å‡ºä¸º checker.pngï¼Œå¹¶ä¿å­˜åˆ° src/assets/imgs/ ç›®å½•ä¸­ è¡¥å……è¯´æ˜ï¼š\nè™½ç„¶åˆ¶ä½œçš„çº¹ç†å›¾ç‰‡éå¸¸å°ï¼Œåªæœ‰ 2åƒç´  * 2åƒç´ ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®çº¹ç†çš„é‡å¤ï¼Œæ¥å®ç°æ¸²æŸ“å‡ºæ¯”è¾ƒå¤§çš„ é»‘ç™½ç½‘æ ¼åº•ç›˜ã€‚\nè®¾ç½®çº¹ç† magFilter çš„å±æ€§å€¼ä¸º Three.NearestFilter è®¾ç½®çº¹ç† wrapSã€wrapT å±æ€§å€¼ä¸º Three.RepeatWrapping æ ¹æ® é»‘ç™½ç½‘æ ¼çš„å°ºå¯¸ï¼Œè®¡ç®—å¹¶è®¾ç½®çº¹ç† repeat é‡å¤æ¬¡æ•° ä»¥ä¸Š 3 ç‚¹åˆšå¥½éƒ½æ˜¯ä¸Šä¸€èŠ‚æˆ‘ä»¬è®²è§£ çº¹ç† æ—¶å­¦ä¹ åˆ°çš„çŸ¥è¯†ç‚¹ã€‚\nç¯å…‰ç¤ºä¾‹ï¼šHelloLight å…ˆå›é¡¾ä¸€ä¸‹ Three.js ä¸­ 10 ä¸ª å…‰ çš„ç±»å‹ï¼š\nå…‰çš„åŸå‹(Light) + 6ç§åŸºç¡€å…‰(AmbientLightâ€¦) + å…‰æ¢é’ˆåŸå‹(LightProbe) + 2ç§ç¯å¢ƒå…‰æ¢é’ˆ(AmbientLightProbeã€HemisphereLightProbe) = 1 + 6 + 1 + 2 = 10\nç¤ºä¾‹ç›®æ ‡ ä½¿ç”¨å¹¶ä½“éªŒ Three.js ä¸­é™¤ Light å’Œ LightProbe ä¹‹å¤–çš„å…¶ä»– 8 ç§å…‰ç±»å‹ ä½¿ç”¨å¹¶ä½“éªŒ å…‰çš„è¾…åŠ©å¯¹è±¡( XxxLightHelper) è¡¥å……è¯´æ˜ï¼š\nç¯å¢ƒå…‰ AmbientLight æ˜¯æ²¡æœ‰ è¾…åŠ©å¯¹è±¡çš„ã€å…¶ä»–å…‰éƒ½æœ‰è¾…åŠ©å¯¹è±¡ çŸ©å½¢å…‰ RectAreaLight çš„è¾…åŠ©å¯¹è±¡ RectAreaLightHelper å’Œå…¶ä»–å…‰çš„è¾…åŠ©å¯¹è±¡ å¼•å…¥æ–¹å¼ä¸åŒ ä»£ç æ‹†åˆ†ä¸æ¢³ç† 1ã€create-scene.tsï¼šåˆ›å»ºåŸºç¡€åœºæ™¯ åˆ›å»º src/components/hello-light/create-scene.ts ï¼Œå¯¼å‡ºä¸€ä¸ªåä¸º createScene çš„å‡½æ•°ï¼Œç”¨æ¥ä¸“é—¨è´Ÿè´£åˆ›å»ºåŸºç¡€çš„åœºæ™¯ã€‚\nå…·ä½“ä»£ç æ¢³ç†ï¼š\nè¯¥åœºæ™¯ä¸­åŒ…å« 1ä¸ªé»‘ç™½ç½‘æ ¼çš„åœ°é¢ã€1ä¸ªç«‹æ–¹ä½“ã€1ä¸ªçƒä½“ï¼Œä½†æ˜¯è¯¥åœºæ™¯ä¸åŒ…å«ä»»ä½•å…‰ã€‚\ncreateScene åˆ›å»ºåŸºç¡€åœºæ™¯æ—¶æ¥æ”¶ä¸€ä¸ªå‚æ•° typeï¼Œtype åªèƒ½ä¸ºä»¥ä¸‹ 2 ä¸ªå€¼ä¸­çš„å…¶ä¸­ 1 ç§ï¼šMESH_PHONE_MATERIAL æˆ– MESH_STANDARD_MATERIAL\ntype é»˜è®¤å€¼ä¸º MESH_PHONE_MATERIAL\nè¿›ä¸€æ­¥è§£é‡Šï¼š\nç”±äº RectAreaLight åªä½œç”¨åœ¨ MeshStandardMaterial å’Œ MeshPhysicalMaterial ææ–™ç‰©ä½“ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰è®¾ç½® type è¿™ä¸ªå‚æ•°ã€‚\nå½“ä½¿ç”¨ RectAreaLight æ—¶ï¼Œæˆ‘ä»¬å‘ŠçŸ¥ createSceneï¼Œä½¿ç”¨ MeshStandardMaterial æè´¨åˆ›å»º åœ°é¢ã€ç«‹æ–¹ä½“ã€çƒä½“ å½“ä½¿ç”¨ å…¶ä»– å…‰æ—¶ï¼Œæˆ‘ä»¬å‘ŠçŸ¥ createSceneï¼Œä½¿ç”¨ MeshPhongMaterial æè´¨åˆ›å»º åœ°é¢ã€ç«‹æ–¹ä½“ã€çƒä½“ 2ã€index.tsxï¼šåˆ›å»ºæ¸²æŸ“å™¨ã€é•œå¤´ã€ä»¥åŠä¸åŒç§ç±»çš„å…‰ å…·ä½“ä»£ç æ¢³ç†ï¼š\nå½“ canvas DOM åˆå§‹åŒ–åï¼Œåˆ›å»º æ¸²æŸ“å™¨ã€é•œå¤´ã€é•œå¤´äº¤äº’(OrbitControls) åˆ›å»º 8 ä¸ªæŒ‰é’®ï¼Œæ¯ä¸ªæŒ‰é’®å¯¹åº”ä¸€ç§å…‰ ä½¿ç”¨ useState åˆ›å»ºä¸€ä¸ªå˜é‡ typeï¼Œç”¨æ¥è®°å½•å½“å‰æ¼”ç¤º å…‰çš„ç±»å‹ ç‚¹å‡»ä¸åŒæŒ‰é’®åï¼Œä¿®æ”¹ å½“å‰å…‰çš„ç±»å‹ type çš„å€¼ï¼Œä»è€Œå¼•å‘ react é‡æ–°æ¸²æŸ“ åœ¨æ–°ä¸€è½®çš„æ¸²æŸ“ä¸­ï¼Œé€šè¿‡åˆ¤æ–­ type ç±»å‹ï¼Œä½¿ç”¨ createScene åˆ›å»ºä¸€ä¸ªæ–°çš„åœºæ™¯ å’Œ å¯¹åº”çš„ å…‰ 3ã€index.scssï¼šè®¾ç½®ç›¸å…³æ ·å¼ å…·ä½“æ ·å¼æ¢³ç†ï¼š\nè®¾ç½® canvas å¯¹åº”çš„æ ·å¼ è®¾ç½® 8 ä¸ªæŒ‰é’®å¯¹åº”çš„æ ·å¼ å…·ä½“çš„ä»£ç  create-scene.ts import * as Three from 'three' export enum MaterialType { MESH_PHONE_MATERIAL = 'MESH_PHONE_MATERIAL', MESH_STANDARD_MATERIAL = 'MESH_STANDARD_MATERIAL' } const createScene: (type?: keyof typeof MaterialType) =\u003e Three.Scene = (type = MaterialType.MESH_PHONE_MATERIAL) =\u003e { const scene = new Three.Scene() const planeSize = 40 const loader = new Three.TextureLoader() const texture = loader.load(require('@/assets/imgs/checker.png').default) texture.wrapS = Three.RepeatWrapping texture.wrapT = Three.RepeatWrapping texture.magFilter = Three.NearestFilter texture.repeat.set(planeSize / 2, planeSize / 2) let planeMat: Three.Material let cubeMat: Three.Material let sphereMat: Three.Material switch (type) { case MaterialType.MESH_STANDARD_MATERIAL: planeMat = new Three.MeshStandardMaterial({ map: texture, side: Three.DoubleSide }) cubeMat = new Three.MeshStandardMaterial({ color: '#8AC' }) sphereMat = new Three.MeshStandardMaterial({ color: '#CA8' }) break default: planeMat = new Three.MeshPhongMaterial({ map: texture, side: Three.DoubleSide }) cubeMat = new Three.MeshPhongMaterial({ color: '#8AC' }) sphereMat = new Three.MeshPhongMaterial({ color: '#8AC' }) } const planeGeo = new Three.PlaneBufferGeometry(planeSize, planeSize) const mesh = new Three.Mesh(planeGeo, planeMat) mesh.rotation.x = Math.PI * -0.5 scene.add(mesh) const cubeGeo = new Three.BoxBufferGeometry(4, 4, 4) const cubeMesh = new Three.Mesh(cubeGeo, cubeMat) cubeMesh.position.set(5, 2.5, 0) scene.add(cubeMesh) const sphereGeo = new Three.SphereBufferGeometry(3, 32, 16) const sphereMesh = new Three.Mesh(sphereGeo, sphereMat) sphereMesh.position.set(-4, 5, 0) scene.add(sphereMesh) return scene } export default createScene index.tsx import { useEffect, useRef, useState } from 'react' import * as Three from 'three' import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls' //import { RectAreaLightUniformsLib } from 'three/examples/jsm/lights/RectAreaLightUniformsLib' import { RectAreaLightHelper } from 'three/examples/jsm/helpers/RectAreaLightHelper' import createScene, { MaterialType } from './create-scene' import './index.scss' enum LightType { AmbientLight = 'AmbientLight', AmbientLightProbe = 'AmbientLightProbe', DirectionalLight = 'DirectionalLight', HemisphereLight = 'HemisphereLight', HemisphereLightProbe = 'HemisphereLightProbe', PointLight = 'PointLight', RectAreaLight = 'RectAreaLight', SpotLight = 'SpotLight' } const buttonLables = [LightType.AmbientLight, LightType.AmbientLightProbe, LightType.DirectionalLight, LightType.HemisphereLight, LightType.HemisphereLightProbe, LightType.PointLight, LightType.RectAreaLight, LightType.SpotLight] const HelloLight = () =\u003e { const canvasRef = useRef(null) const sceneRef = useRef(null) const [type, setType] = useState(LightType.AmbientLight) useEffect(() =\u003e { if (canvasRef.current === null) { return } const renderer = new Three.WebGLRenderer({ canvas: canvasRef.current as HTMLCanvasElement }) const camera = new Three.PerspectiveCamera(45, 2, 0.1, 1000) camera.position.set(0, 10, 20) const controls = new OrbitControls(camera, canvasRef.current) controls.target.set(0, 5, 0) controls.update() const scene = createScene() sceneRef.current = scene const render = () =\u003e { if (sceneRef.current) { renderer.render(sceneRef.current, camera) } window.requestAnimationFrame(render) } window.requestAnimationFrame(render) const handleResize = () =\u003e { const canvas = canvasRef.current if (canvas === null) { return } camera.aspect = canvas.clientWidth / canvas.clientHeight camera.updateProjectionMatrix() renderer.setSize(canvas.clientWidth, canvas.clientHeight, false) } handleResize() window.addEventListener('resize', handleResize) return () =\u003e { window.removeEventListener('resize', handleResize) } }, [canvasRef]) useEffect(() =\u003e { if (sceneRef.current === null) { return } sceneRef.current = null let newScene: Three.Scene if (type === LightType.RectAreaLight) { newScene = createScene(MaterialType.MESH_STANDARD_MATERIAL) } else { newScene = createScene() } sceneRef.current = newScene switch (type) { case LightType.AmbientLight: const ambientLight = new Three.AmbientLight(0xFFFFFF, 1) newScene.add(ambientLight) break case LightType.AmbientLightProbe: const ambientLightProbe = new Three.AmbientLightProbe(0xFFFFFF, 1) newScene.add(ambientLightProbe) break case LightType.DirectionalLight: const directionalLight = new Three.DirectionalLight(0xFFFFFF, 1) directionalLight.position.set(0, 10, 0); directionalLight.target.position.set(-5, 0, 0) newScene.add(directionalLight) newScene.add(directionalLight.target) const directionalLightHelper = new Three.DirectionalLightHelper(directionalLight) newScene.add(directionalLightHelper) break case LightType.HemisphereLight: const hemisphereLight = new Three.HemisphereLight(0xB1E1FF, 0xB97A20, 1) newScene.add(hemisphereLight) const hemisphereLightHelper = new Three.HemisphereLightHelper(hemisphereLight,5) newScene.add(hemisphereLightHelper) break case LightType.HemisphereLightProbe: const hemisphereLightProbe = new Three.HemisphereLightProbe(0xB1E1FF, 0xB97A20, 1) newScene.add(hemisphereLightProbe) break case LightType.PointLight: const pointLight = new Three.PointLight(0xFFFFFF, 1) pointLight.position.set(0, 10, 0) newScene.add(pointLight) const pointLightHelper = new Three.PointLightHelper(pointLight) newScene.add(pointLightHelper) break; case LightType.RectAreaLight: //RectAreaLightUniformsLib.init() //å®é™…æµ‹è¯•æ—¶å‘ç°å³ä½¿ä¸æ·»åŠ è¿™è¡Œä»£ç ï¼Œåœºæ™¯ä¼¼ä¹ä¹Ÿä¾ç„¶æ­£å¸¸æ¸²æŸ“ï¼Œæ²¡æœ‰çœ‹å‡ºå·®å¼‚ const rectAreaLight = new Three.RectAreaLight(0xFFFFFF, 5, 12, 4) rectAreaLight.position.set(0, 10, 0) rectAreaLight.rotation.x = Three.MathUtils.degToRad(-90) newScene.add(rectAreaLight) const rectAreaLightHelper = new RectAreaLightHelper(rectAreaLight) newScene.add(rectAreaLightHelper) break case LightType.SpotLight: const spotLight = new Three.SpotLight(0xFFFFFF, 1) spotLight.position.set(0, 10, 0); spotLight.target.position.set(-5, 0, 0) newScene.add(spotLight) newScene.add(spotLight.target) const spotLightHelper = new Three.SpotLightHelper(spotLight) newScene.add(spotLightHelper) break default: console.log('???') break } }, [type]) return ( { buttonLables.map((label, index) =\u003e { return ","wordCount":"7080","inLanguage":"en","datePublished":"2023-12-19T17:11:35+08:00","dateModified":"2023-12-19T17:11:35+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://bablvsj.github.io/posts/threejs/11-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%81%AF%E5%85%89/"},"publisher":{"@type":"Organization","name":"Bablvsj's Blog","logo":{"@type":"ImageObject","url":"https://bablvsj.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bablvsj.github.io accesskey=h title="Bablvsj's Blog (Alt + H)">Bablvsj's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bablvsj.github.io/ title=ä¸»é¡µ><span>ä¸»é¡µ</span></a></li><li><a href=https://bablvsj.github.io/archives/ title=æ—¶é—´è½´><span>æ—¶é—´è½´</span></a></li><li><a href=https://bablvsj.github.io/tags title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://bablvsj.github.io/about title=å…³äº><span>å…³äº</span></a></li><li><a href=https://bablvsj.github.io/search title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>11 Three.jsåŸºç¡€ä¹‹ç¯å…‰</h1><div class=post-meta><div class=post-tags-meta><a href=https://bablvsj.github.io/tags/three.js/>Three.js</a></div>15 min&nbsp;Â·&nbsp;<span title='2023-12-19 17:11:35 +0800 +0800'>2023/12/19</span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><div class=inner><ul><li><a href=#%e7%81%af%e5%85%89%e7%9a%84%e7%a7%8d%e7%b1%bb aria-label=ç¯å…‰çš„ç§ç±»>ç¯å…‰çš„ç§ç±»</a><ul><li><a href=#%e7%81%af%e5%85%89%e7%9a%84%e7%a7%8d%e7%b1%bb-1 aria-label=ç¯å…‰çš„ç§ç±»>ç¯å…‰çš„ç§ç±»</a></li><li><a href=#%e5%85%89%e7%9a%84%e8%be%85%e5%8a%a9%e5%af%b9%e8%b1%a1 aria-label=å…‰çš„è¾…åŠ©å¯¹è±¡>å…‰çš„è¾…åŠ©å¯¹è±¡</a></li><li><a href=#%e7%81%af%e5%85%89%e4%bd%9c%e7%94%a8%e4%b8%8e%e7%89%b9%e7%82%b9 aria-label=ç¯å…‰ä½œç”¨ä¸ç‰¹ç‚¹>ç¯å…‰ä½œç”¨ä¸ç‰¹ç‚¹</a></li></ul></li><li><a href=#%e5%89%8d%e6%9c%9f%e5%87%86%e5%a4%87orbitcontrols%e8%ae%b2%e8%a7%a3%e5%88%b6%e4%bd%9c%e7%ba%b9%e7%90%86%e5%9b%be%e7%89%87 aria-label=å‰æœŸå‡†å¤‡ï¼šOrbitControlsè®²è§£ã€åˆ¶ä½œçº¹ç†å›¾ç‰‡>å‰æœŸå‡†å¤‡ï¼šOrbitControlsè®²è§£ã€åˆ¶ä½œçº¹ç†å›¾ç‰‡</a><ul><li><a href=#orbitcontrols-%e7%9a%84%e7%ae%80%e4%bb%8b%e5%92%8c%e7%94%a8%e6%b3%95 aria-label="OrbitControls çš„ç®€ä»‹å’Œç”¨æ³•">OrbitControls çš„ç®€ä»‹å’Œç”¨æ³•</a><ul><li><a href=#orbitcontrols%e7%9a%84%e7%94%a8%e6%b3%95 aria-label=OrbitControlsçš„ç”¨æ³•>OrbitControlsçš„ç”¨æ³•</a></li><li><a href=#%e7%ba%b9%e7%90%86%e5%9b%be%e7%89%87%e5%87%86%e5%a4%87%e5%88%b6%e4%bd%9c%e7%ba%b9%e7%90%86%e5%9b%be%e7%89%87-checkerpng aria-label="çº¹ç†å›¾ç‰‡å‡†å¤‡ï¼šåˆ¶ä½œçº¹ç†å›¾ç‰‡ checker.png">çº¹ç†å›¾ç‰‡å‡†å¤‡ï¼šåˆ¶ä½œçº¹ç†å›¾ç‰‡ checker.png</a></li></ul></li></ul></li><li><a href=#%e7%81%af%e5%85%89%e7%a4%ba%e4%be%8bhellolight aria-label=ç¯å…‰ç¤ºä¾‹ï¼šHelloLight>ç¯å…‰ç¤ºä¾‹ï¼šHelloLight</a><ul><li><a href=#%e7%a4%ba%e4%be%8b%e7%9b%ae%e6%a0%87 aria-label=ç¤ºä¾‹ç›®æ ‡>ç¤ºä¾‹ç›®æ ‡</a></li><li><a href=#%e4%bb%a3%e7%a0%81%e6%8b%86%e5%88%86%e4%b8%8e%e6%a2%b3%e7%90%86 aria-label=ä»£ç æ‹†åˆ†ä¸æ¢³ç†>ä»£ç æ‹†åˆ†ä¸æ¢³ç†</a><ul><li><a href=#1create-scenets%e5%88%9b%e5%bb%ba%e5%9f%ba%e7%a1%80%e5%9c%ba%e6%99%af aria-label=1ã€create-scene.tsï¼šåˆ›å»ºåŸºç¡€åœºæ™¯>1ã€create-scene.tsï¼šåˆ›å»ºåŸºç¡€åœºæ™¯</a></li><li><a href=#2indextsx%e5%88%9b%e5%bb%ba%e6%b8%b2%e6%9f%93%e5%99%a8%e9%95%9c%e5%a4%b4%e4%bb%a5%e5%8f%8a%e4%b8%8d%e5%90%8c%e7%a7%8d%e7%b1%bb%e7%9a%84%e5%85%89 aria-label=2ã€index.tsxï¼šåˆ›å»ºæ¸²æŸ“å™¨ã€é•œå¤´ã€ä»¥åŠä¸åŒç§ç±»çš„å…‰>2ã€index.tsxï¼šåˆ›å»ºæ¸²æŸ“å™¨ã€é•œå¤´ã€ä»¥åŠä¸åŒç§ç±»çš„å…‰</a></li><li><a href=#3indexscss%e8%ae%be%e7%bd%ae%e7%9b%b8%e5%85%b3%e6%a0%b7%e5%bc%8f aria-label=3ã€index.scssï¼šè®¾ç½®ç›¸å…³æ ·å¼>3ã€index.scssï¼šè®¾ç½®ç›¸å…³æ ·å¼</a></li></ul></li><li><a href=#%e5%85%b7%e4%bd%93%e7%9a%84%e4%bb%a3%e7%a0%81 aria-label=å…·ä½“çš„ä»£ç >å…·ä½“çš„ä»£ç </a><ul><li><a href=#create-scenets aria-label=create-scene.ts>create-scene.ts</a></li><li><a href=#indextsx aria-label=index.tsx>index.tsx</a></li><li><a href=#indexscss aria-label=index.scss>index.scss</a></li></ul></li><li><a href=#%e9%81%97%e7%95%99%e7%9a%84%e7%96%91%e6%83%91 aria-label=é—ç•™çš„ç–‘æƒ‘>é—ç•™çš„ç–‘æƒ‘</a><ul><li><a href=#%e7%ac%ac1%e4%b8%aa%e7%96%91%e6%83%91rectarealightuniformslib aria-label=ç¬¬1ä¸ªç–‘æƒ‘ï¼šRectAreaLightUniformsLib>ç¬¬1ä¸ªç–‘æƒ‘ï¼šRectAreaLightUniformsLib</a></li><li><a href=#%e7%ac%ac2%e4%b8%aa%e7%96%91%e6%83%91rectarealighthelper aria-label=ç¬¬2ä¸ªç–‘æƒ‘ï¼šRectAreaLightHelper>ç¬¬2ä¸ªç–‘æƒ‘ï¼šRectAreaLightHelper</a></li></ul></li></ul></li><li><a href=#%e9%a2%9d%e5%a4%96%e7%9a%84%e4%b8%80%e4%ba%9b%e5%94%a0%e5%8f%a8%e8%af%9d aria-label=é¢å¤–çš„ä¸€äº›å” å¨è¯>é¢å¤–çš„ä¸€äº›å” å¨è¯</a></li></ul></div></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=ç¯å…‰çš„ç§ç±»>ç¯å…‰çš„ç§ç±»<a hidden class=anchor aria-hidden=true href=#ç¯å…‰çš„ç§ç±»>#</a></h2><p>åœ¨åœºæ™¯ä¸­æ·»åŠ ç¯å…‰åï¼Œç¯å…‰ç…§å°„åœ¨ç‰©ä½“ä¸Šäº§ç”Ÿæ˜æš—ã€å…‰äº®å’Œé˜´å½±ï¼Œä»è€Œè®©ç‰©ä½“æ˜¾å¾—æ›´åŠ ç«‹ä½“æœ‰å…‰æ³½ã€‚</p><blockquote><p>åœ¨æœ‰äº›æ–‡æ¡£æˆ–æ•™ç¨‹ä¸­ï¼Œä¼šæŠŠ ç¯å…‰ ç§°å‘¼ä¸º å…‰æºï¼Œè¿™åªæ˜¯å¯¹ light è¿™ä¸ªå•è¯çš„ä¸åŒç¿»è¯‘è€Œå·²<br>å¦‚æœæˆ‘åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ï¼Œæœ‰æ—¶å€™ä½¿ç”¨ â€œç¯å…‰â€ï¼Œæœ‰æ—¶å€™ä½¿ç”¨ â€œå…‰æºâ€ï¼Œè¯·å‹¿è§æ€ªã€‚</p></blockquote><blockquote><p>å‘åœºæ™¯ä¸­æ·»åŠ ç¯å…‰ è¿™ä¸ªè¡Œä¸ºï¼Œåœ¨ä¼ ç»Ÿ 3D è½¯ä»¶åˆ¶ä½œä¸­é€šå¸¸è¢«ç§°ä¸º â€œæ‰“ç¯â€</p></blockquote><p><strong>è‹¥åœºæ™¯ä¸­çš„ç‰©ä½“ç”±éåå…‰æè´¨æ„æˆï¼Œå³ä½¿åœºæ™¯ä¸­æ²¡æœ‰ä»»ä½•å…‰æºï¼Œæ¸²æŸ“åä¾ç„¶å¯ä»¥çœ‹è§è¯¥ç‰©ä½“ã€‚</strong></p><blockquote><p>éåå…‰æè´¨ä¸º MeshBasicMaterial</p></blockquote><p><strong>è‹¥åœºæ™¯ä¸­çš„ç‰©ä½“ç”±åå…‰æè´¨æ„æˆï¼Œå‡è®¾åœºæ™¯ä¸­æ²¡æœ‰ä»»ä½•å…‰æºï¼Œæ¸²æŸ“å‡ºçš„ç»“æœå°†æ˜¯ä¸€ç‰‡æ¼†é»‘ï¼Œä»€ä¹ˆç‰©ä½“éƒ½çœ‹ä¸è§ã€‚</strong></p><blockquote><p>åå…‰æè´¨ä¸º MeshPhongMaterial ç­‰</p></blockquote><h3 id=ç¯å…‰çš„ç§ç±»-1>ç¯å…‰çš„ç§ç±»<a hidden class=anchor aria-hidden=true href=#ç¯å…‰çš„ç§ç±»-1>#</a></h3><p><strong>åœ¨ Three.js ä¸­ï¼Œæœ‰ 6 ç§åŸºç¡€ç±»å‹çš„ç¯å…‰ï¼Œä»–ä»¬éƒ½ç»§æ‰¿äº Three.Light ã€‚</strong></p><table><thead><tr><th>ç¯å…‰ç±»å‹(éƒ½ç»§æ‰¿äºLight)</th><th>ç¯å…‰åç§°</th><th>æ˜¯å¦æ”¯æŒé˜´å½±</th><th>æ˜¯å¦ä½œç”¨äºå…¨å±€(æ— å¤„ä¸åœ¨)</th><th>æ˜¯å¦æœ‰ç…§å°„ç›®æ ‡</th></tr></thead><tbody><tr><td>AmbientLight</td><td>ç¯å¢ƒå…‰ã€æ°›å›´å…‰</td><td>å¦</td><td>æ˜¯</td><td>æ— </td></tr><tr><td>DirectionalLight</td><td>å¹³è¡Œå…‰</td><td>æ˜¯</td><td>å¦</td><td>æœ‰</td></tr><tr><td>HemisphereLight</td><td>åŠçƒå…‰æºã€æˆ·å¤–å…‰æº</td><td>å¦</td><td>æ˜¯</td><td>æ— </td></tr><tr><td>PointLight</td><td>ç‚¹å…‰æº</td><td>æ˜¯</td><td>å¦</td><td>æœ‰</td></tr><tr><td>RectAreaLight</td><td>çŸ©å½¢é¢å…‰æº</td><td>å¦</td><td>å¦</td><td>æ— </td></tr><tr><td>SpotLight</td><td>èšå…‰ç¯å…‰æº</td><td>æ˜¯</td><td>å¦</td><td>æœ‰</td></tr></tbody></table><p><strong>è¡¥å……è¯´æ˜1ï¼šç¯å¢ƒå…‰</strong></p><p>æœ‰ä¸ªåˆ«æ–‡æ¡£æˆ–æ•™ç¨‹ä¸­ï¼Œä¼šæŠŠ HemisphereLight ä¹Ÿç§°å‘¼ä¸º â€œç¯å¢ƒå…‰â€ã€‚<br>äº‹å®ä¸Š AmbientLight å’Œ HemisphereLight çš„ä½œç”¨éƒ½æ˜¯æä¾›ç¯å¢ƒå…‰ï¼Œåªæ˜¯ HemisphereLight çš„ç¯å¢ƒå…‰æ›´åŠ çœŸå®ï¼Œå½“ç„¶æ¸²æŸ“æ‰€éœ€æ€§èƒ½ä¹Ÿæ›´å¤šã€‚</p><p><strong>è¡¥å……è¯´æ˜2ï¼šæ˜¯å¦æ”¯æŒé˜´å½±</strong></p><p>**æ‰€æœ‰çš„å…‰ç…§å°„åˆ°ç‰©ä½“ä¸Šåï¼Œéƒ½ä¼šäº§ç”Ÿé˜´å½±ã€‚**ä½† è¿™é‡Œè¯´çš„ä¸æ˜¯ <strong>æ˜¯å¦ä¼šäº§ç”Ÿé˜´å½±</strong>ï¼Œè€Œæ˜¯è¯´ <strong>â€œæ˜¯å¦æ”¯æŒé˜´å½±â€</strong>ã€‚</p><p>ä¸€å…±æœ‰ 3 ç§å…‰ä¸æ”¯æŒé˜´å½±ï¼šAmbientLightã€HemisphereLightã€RectAreaLight</p><p>å…¶ä»–ç§ç±»çš„å…‰ï¼Œéƒ½æ”¯æŒé˜´å½±ï¼šDirectionalLightã€PointLightã€SpotLight</p><p>å…³äº Three.js ä¸­çš„ é˜´å½± (LightShadownã€DirectionalLightShadownã€PointLightShadownã€SpotLightShadown)ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢å•ç‹¬å¼€è¾Ÿä¸€èŠ‚æ¥è®²è§£ã€‚</p><p><strong>å…³äºâ€œé˜´å½±â€çš„è¿›ä¸€æ­¥è¡¥å……ï¼š</strong></p><p>åœ¨ä¹‹å‰æ‰€æœ‰çš„ç¤ºä¾‹ä¸­ï¼Œå½“åœºæ™¯ä¸Šæœ‰åå…‰ç‰©ä½“ä¸”æœ‰ç¯å…‰æ—¶ï¼Œç‰©ä½“ä¼šäº§ç”Ÿæ˜æš—ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼š</p><ol><li><p>è¿™ä¸ªâ€œç‰©ä½“æ˜¾ç¤ºå‡ºçš„æ˜æš—â€å¹¶ä¸æ˜¯çœŸæ­£çš„â€œé˜´å½±â€ã€‚</p><blockquote><p>åœ¨ Three.js ä¸­ æœ‰çœŸæ­£çš„é˜´å½±å¯¹è±¡ï¼Œè¿™ä¸ªä¼šåœ¨åé¢çš„ â€œThree.jsåŸºç¡€ä¹‹é˜´å½±â€ ä¸€æ–‡ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚</p></blockquote></li><li><p>è¿™ä¸ªâ€œç‰©ä½“æ˜¾ç¤ºå‡ºçš„æ˜æš—â€å¹¶ä¸æ˜¯å®Œå…¨ç¬¦åˆæˆ‘ä»¬æ—¥å¸¸çš„â€œå…‰å½±æ˜æš—â€ã€‚</p><blockquote><p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç›®å‰æ‰€æœ‰ç¤ºä¾‹éƒ½ä½¿ç”¨çš„æ˜¯â€œç®€å•å…‰ç…§æ¨¡å‹â€ï¼Œä¹Ÿå°±æ˜¯è¯´å…‰ç…§å°„åœ¨ç‰©ä½“ä¸Šåå¹¶ä¸è¿›è¡Œæ¼«åå°„ï¼Œæ‰€ä»¥æ¸²æŸ“å‡ºçš„â€œæ˜æš—â€å¹¶ä¸å®Œå…¨è‡ªç„¶åˆç†ã€‚</p></blockquote></li><li><p>é»˜è®¤æ¸²æŸ“å™¨å¹¶ä¸ä¼šæ¸²æŸ“é˜´å½±ã€é»˜è®¤æ”¯æŒé˜´å½±çš„ç¯å…‰ä¹Ÿä¸ä¼šæŠ•å°„é˜´å½±ï¼Œè‹¥æƒ³äº§ç”ŸçœŸæ­£çš„é˜´å½±ï¼Œè¿˜éœ€å¼€å¯é˜´å½±æ¸²æŸ“å’ŒæŠ•å°„ã€‚</p><blockquote><p>å…·ä½“å¦‚ä½•å¼€å¯ï¼Œä¹Ÿä¼šåœ¨åé¢çš„ â€œThree.jsåŸºç¡€ä¹‹é˜´å½±â€ ä¸€æ–‡ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚</p></blockquote></li></ol><p><strong>è¡¥å……è¯´æ˜3ï¼šæ˜¯å¦ä½œç”¨åŸŸå…¨å±€</strong></p><p>åªæœ‰ç¯å¢ƒå…‰(AmbientLightã€HemisphereLight)ä½œç”¨äºå…¨å±€ï¼Œå…¶ä»–å…‰åˆ™ç…§è€€èŒƒå›´éƒ½æ˜¯æœ‰é™çš„ã€‚</p><p><strong>è¡¥å……è¯´æ˜4ï¼šä»€ä¹ˆå« â€œæ˜¯å¦æœ‰ç…§å°„ç›®æ ‡ï¼Ÿâ€</strong></p><p>ç­”ï¼šå°±æ˜¯è¿™ä¸ªå…‰é™¤äº†å…‰æºæœ¬èº«ä¹‹å¤–ï¼Œè¿˜åŒ…å«ä¸€ä¸ª target å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡è®¾ç½® target.position çš„ä½ç½®ã€‚å¯¹äºæœ‰ç…§å°„ç›®æ ‡çš„ç¯å…‰ï¼Œåœ¨åœºæ™¯ä¸­ä¸å…‰è¦æ·»åŠ ç¯å…‰æœ¬èº«ï¼Œè¿˜å¯ä»¥æ·»åŠ  ç¯å…‰ç…§å°„ç›®æ ‡ã€‚</p><blockquote><p>æ³¨æ„æ˜¯ â€œå¯ä»¥æ·»åŠ â€ ç¯å…‰ç›®æ ‡ï¼Œè€Œä¸æ˜¯è¯´ â€œå¿…é¡»ä¹Ÿè¦æ·»åŠ â€ ç¯å…‰ç›®æ ‡ã€‚</p></blockquote><p>è¯·æ³¨æ„ä¸Šé¢è¡¨æ ¼ä¸­ï¼Œå…³äº â€œæ˜¯å¦äº§ç”Ÿé˜´å½±â€ å’Œ â€œæ˜¯å¦æœ‰ç…§å°„ç›®æ ‡â€ï¼Œè¿™ 2 é¡¹ æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŒ…å«ç…§å°„ç›®æ ‡çš„å…‰ï¼Œæ‰ä¼šäº§ç”Ÿé˜´å½±ã€‚</p><p><strong>åœ¨ Three.js ä¸­ï¼Œæœ‰ 3 ç§ å…‰æ¢é’ˆ ç±»å‹çš„ç¯å¢ƒå…‰ã€‚</strong></p><table><thead><tr><th>ç¯å…‰ç±»å‹</th><th>ç¯å…‰åç§°</th></tr></thead><tbody><tr><td>LightProbe</td><td>å…‰æ¢é’ˆ</td></tr><tr><td>AmbientLightProbe(ç»§æ‰¿äºLightProbe)</td><td>ç¯å¢ƒå…‰æ¢é’ˆ</td></tr><tr><td>HemisphereLightProbe(ç»§æ‰¿äºLightProbe)</td><td>åŠçƒå…‰æ¢é’ˆ</td></tr></tbody></table><p>å…³äº å…‰æ¢é’ˆï¼Œæ˜¯å¦å¤–ä¸€å¥—æ¯”è¾ƒå¤æ‚çš„å…‰çš„ç®—æ³•æ–¹å¼ã€‚</p><p>æ ¹æ®æˆ‘ç½‘ä¸Šæœç´¢åˆ°çš„ä¸€äº›ä¿¡æ¯ï¼Œå¤§æ¦‚å¯ä»¥æè¿°ä¸ºï¼š</p><p><strong>ä¼ ç»Ÿçš„ ç¯å¢ƒå…‰(AmbientLightã€HemisphereLight) æ¸²æŸ“æ—¶éœ€è¦çš„è®¡ç®—é‡æ¯”è¾ƒå¤§ï¼Œå¯¹äºæ¸²æŸ“é™æ­¢ç‰©ä½“æ¥è¯´è¿˜å¯ä»¥ï¼Œä½†æ˜¯æ¸²æŸ“ è¿åŠ¨ç±»å‹ çš„ç‰©ä½“æ—¶æ‰€æ¶ˆè€—çš„æ€§èƒ½è¿‡é«˜ï¼Œè€Œ å…‰æ¢é’ˆç±»å‹çš„ç¯å¢ƒå…‰(AmbientLightProbeã€HemisphereLightProbe) åˆ™æ›´åŠ é€‚åˆ è¿åŠ¨ç±»å‹ çš„ç‰©ä½“ã€‚</strong></p><h3 id=å…‰çš„è¾…åŠ©å¯¹è±¡>å…‰çš„è¾…åŠ©å¯¹è±¡<a hidden class=anchor aria-hidden=true href=#å…‰çš„è¾…åŠ©å¯¹è±¡>#</a></h3><p>åœºæ™¯ä¸­çš„å…‰æœ¬èº«æ˜¯ä¸å¯è§çš„ï¼Œä¸ºäº†è®©æˆ‘ä»¬æ–¹ä¾¿è§‚æµ‹å…‰æºï¼ŒThree.js æä¾›äº† å…‰çš„è¾…åŠ©å¯¹è±¡ï¼šDirectionalLightHelperã€HemisphereLightHelperã€PointLightHelperã€RectAreaLightHelperã€SpotLightHelper</p><p><strong>æ‰€è°“å…‰çš„è¾…åŠ©å¯¹è±¡ï¼Œå°±æ˜¯åœ¨æ¸²æŸ“åå‡ºç°çš„ä¸€äº›ç™½è‰²ç»†çº¿ï¼Œè¿™äº›ç™½è‰²ç»†çº¿æŒ‡ç¤ºå‡ºå…‰æºçš„ä½ç½®ã€å¤§å°ã€ä»¥åŠå…‰å‘å°„çš„æ–¹å‘ã€‚</strong></p><p>å…‰çš„è¾…åŠ©å¯¹è±¡ç”¨æ³•éå¸¸ç®€å•ï¼Œ3 æ­¥éª¤ï¼š</p><ol><li>å…ˆåˆ›å»º å…‰ çš„å®ä¾‹</li><li>å°†åˆ›å»ºå¥½çš„å…‰å®ä¾‹ä½œä¸º è¾…åŠ©å¯¹è±¡æ„é€ å‡½æ•°çš„å‚æ•°</li><li>åœºæ™¯ä¸­æ·»åŠ  è¾…åŠ©å¯¹è±¡å³å¯</li></ol><p>ä¾‹å¦‚ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>//åˆ›å»ºå¹¶è®¾ç½®å¹³è¡Œå…‰
</span></span><span style=display:flex><span>const directionalLight = new Three.DirectionalLight(0xFFFFFF, 1)
</span></span><span style=display:flex><span>directionalLight.position.set(0, 10, 0);
</span></span><span style=display:flex><span>directionalLight.target.position.set(-5, 0, 0)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>//å°†å¹³è¡Œå…‰æ·»åŠ åˆ°åœºæ™¯ä¸­
</span></span><span style=display:flex><span>scene.add(directionalLight)
</span></span><span style=display:flex><span>scene.add(directionalLight.target)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>//æ ¹æ®å¹³è¡Œå…‰å®ä¾‹ï¼Œåˆ›å»ºå¯¹åº”çš„è¾…åŠ©å¯¹è±¡ï¼Œå¹¶å°†è¾…åŠ©å¯¹è±¡æ·»åŠ åˆ°åœºæ™¯ä¸­
</span></span><span style=display:flex><span>const directionalLightHelper = new Three.DirectionalLightHelper(directionalLight)
</span></span><span style=display:flex><span>scene.add(directionalLightHelper)
</span></span></code></pre></div><h3 id=ç¯å…‰ä½œç”¨ä¸ç‰¹ç‚¹>ç¯å…‰ä½œç”¨ä¸ç‰¹ç‚¹<a hidden class=anchor aria-hidden=true href=#ç¯å…‰ä½œç”¨ä¸ç‰¹ç‚¹>#</a></h3><p><strong>AmbientLight(ç¯å¢ƒå…‰ã€æ°›å›´å…‰)ï¼š</strong></p><p>é€šå¸¸ä»…ä½œä¸ºåŸºç¡€å…‰çº¿ï¼Œä¸€èˆ¬éœ€è¦ä¸å…¶ä»–ç¯å…‰é…åˆä½¿ç”¨ã€‚ä¸èƒ½äº§ç”Ÿé˜´å½±ã€ä¹Ÿæ— éœ€æŒ‡å®šåæ ‡ä½ç½®ï¼Œä»…éœ€è®¾ç½®é¢œè‰²å’Œå¼ºåº¦ã€‚</p><p>æ³¨æ„ï¼šä¸æ”¯æŒé˜´å½±</p><p><strong>DirectionalLight(å¹³è¡Œå…‰)ï¼š</strong></p><p>æœ€ä¸ºç»å¸¸ä½¿ç”¨çš„å…‰æºï¼Œå…‰çº¤(å…‰èŠ’)éƒ½æ˜¯å¹³è¡Œå‘ç€ä¸€ä¸ªæ–¹å‘å‘å°„ã€‚</p><p>ç»å¸¸ä½¿ç”¨ DirectionalLight æ¥æ¨¡æ‹Ÿå¤ªé˜³å…‰ç…§å°„åˆ°æŸä¸ªç‰©ä½“ä¸Šçš„å…‰ç…§æ•ˆæœã€‚</p><p><strong>HemisphereLight(åŠçƒå…‰æº)ï¼š</strong></p><p>ç›¸å¯¹ ambientLightï¼ŒhemisphereLight æ›´åŠ çœŸå®çš„æ¨¡æ‹Ÿè‡ªç„¶å…‰æºï¼Œæä¾› å¤©ç©º å’Œ åœ°é¢ æ¼«åå°„å…‰çº¿ã€‚</p><p>ä¸€å…±æ¥æ”¶ 3 ä¸ªå‚æ•°ï¼š</p><ul><li>ç¬¬ 1 ä¸ªå‚æ•°ï¼šå¤©ç©ºå…‰çº¿é¢œè‰²</li><li>ç¬¬ 2 ä¸ªå‚æ•°ï¼šåœ°é¢åå°„å…‰é¢œè‰²</li><li>ç¬¬ 3 ä¸ªå‚æ•°ï¼šå…‰çš„åå°„å¼ºåº¦</li></ul><p>æ³¨æ„ï¼šä¸æ”¯æŒé˜´å½±</p><p><strong>PointLight(ç‚¹å…‰æº)ï¼š</strong></p><p>ç±»ä¼¼ç”Ÿæ´»ä¸­çš„ç¯æ³¡ï¼Œå…‰çº¤(å…‰èŠ’)æ²¡æœ‰å›ºå®šæ–¹å‘ï¼Œæœç€å››å‘¨æ•£å°„ã€‚</p><p>æ³¨æ„ï¼šç‚¹å…‰æºå¯¹åº”çš„è¾…åŠ©å¯¹è±¡ PointLightHelper åªæœ‰ä¸€ä¸ª è±å½¢çš„å…‰æºå½¢çŠ¶ï¼Œå¹¶æ²¡æœ‰ å…‰ çš„å‘å°„çº¿æ¡ã€‚</p><p><strong>RectAreaLight(çŸ©å½¢é¢å…‰æº)ï¼š</strong></p><p>ä¸ DirectionalLight æ¨¡æ‹Ÿå¤ªé˜³å…‰ä¸åŒï¼ŒRectAreaLight å…‰æºå½¢çŠ¶ä¸ºä¸€ä¸ªçŸ©å½¢ï¼Œå¯ä»¥æ¨¡æ‹Ÿå‡ºæ˜äº®çš„çª—å£æˆ–çŸ©å½¢ç…§æ˜å…‰æºã€‚</p><p>æ³¨æ„ï¼š</p><ol><li><p>ä¸æ”¯æŒé˜´å½±</p></li><li><p>åªæœ‰ MeshStandardMaterial å’Œ MeshPhysicalMaterial ææ–™æ‰æ”¯æŒ RectAreaLight å…‰æº</p></li><li><p>æŒ‰ç…§å®˜æ–¹æ–‡æ¡£æè¿°ï¼Œåœºæ™¯ä¸­å¿…é¡»åŠ å…¥ RectAreaLightUniformsLib.init()</p><blockquote><p>ç›®å‰æˆ‘æ¯”è¾ƒç–‘æƒ‘çš„æ˜¯ï¼Œç»è¿‡è¯•éªŒå‘ç°ï¼Œå³ä½¿ä¸æ·»åŠ  RectAreaLightUniformsLib.init()ï¼Œåœºæ™¯ä¾ç„¶æ­£å¸¸æ¸²æŸ“ï¼Œä¼¼ä¹çœ‹ä¸å‡ºæœ‰ä»»ä½•å·®åˆ«</p></blockquote></li></ol><p><strong>ç‰¹åˆ«è¯´æ˜ï¼š</strong></p><p>RectAreaLight å¯¹åº”çš„ è¾…åŠ©å¯¹è±¡ RectAreaLightArea å¼•å…¥æ–¹å¼å’Œå…¶ä»– å…‰è¾…åŠ©å¯¹è±¡ å¼•å…¥æ–¹å¼ä¸åŒã€‚</p><p>å…¶ä»–å…‰è¾…åŠ©å¯¹è±¡éƒ½æ˜¯å†…ç½®åœ¨ three ä¸­çš„ï¼Œä½¿ç”¨ä¹‹å‰æ— éœ€å¼•å…¥ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const directionalLightHelper = new Three.DirectionalLightHelper(directionalLight)
</span></span></code></pre></div><p>ä½†æ˜¯ RectAreaLightHelper åœ¨ä½¿ç”¨å‰éœ€è¦å¼•å…¥æ‰å¯ä»¥ï¼Œå¼•å…¥ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>import { RectAreaLightHelper } from &#39;three/examples/jsm/helpers/RectAreaLightHelper&#39;
</span></span></code></pre></div><p><strong>SpotLight(èšå…‰ç¯)ï¼š</strong></p><p>ç±»ä¼¼ç”Ÿæ´»ä¸­çš„èšå…‰ç¯æ•ˆæœã€‚</p><p>å…³äºæ¯ä¸ªç¯å…‰çš„å…·ä½“å‚æ•°è¯¦æƒ…ã€å±æ€§ç”¨æ³•ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href=https://threejs.org/docs/index.html#api/zh/lights/Light>https://threejs.org/docs/index.html#api/zh/lights/Light</a></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡åˆ›å»ºä¸€ä¸ª HelloLight çš„ä¾‹å­ï¼Œç›´è§‚çš„è§‚å¯Ÿä¸åŒç±»å‹ç¯å…‰çš„æ•ˆæœã€‚</p><blockquote><p>è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¼šç”¨åˆ°æˆ‘ä»¬ä¸ŠèŠ‚å­¦ä¹ çš„ çº¹ç† ç›¸å…³çŸ¥è¯†ã€‚</p></blockquote><h2 id=å‰æœŸå‡†å¤‡orbitcontrolsè®²è§£åˆ¶ä½œçº¹ç†å›¾ç‰‡>å‰æœŸå‡†å¤‡ï¼šOrbitControlsè®²è§£ã€åˆ¶ä½œçº¹ç†å›¾ç‰‡<a hidden class=anchor aria-hidden=true href=#å‰æœŸå‡†å¤‡orbitcontrolsè®²è§£åˆ¶ä½œçº¹ç†å›¾ç‰‡>#</a></h2><h3 id=orbitcontrols-çš„ç®€ä»‹å’Œç”¨æ³•>OrbitControls çš„ç®€ä»‹å’Œç”¨æ³•<a hidden class=anchor aria-hidden=true href=#orbitcontrols-çš„ç®€ä»‹å’Œç”¨æ³•>#</a></h3><p>æœ¬ç¤ºä¾‹ä¸­éœ€è¦ç”¨åˆ°ä¸€ä¸ªä¹‹å‰ä»æœªä½¿ç”¨è¿‡çš„ç±»ï¼šOrbitControlsï¼Œå…ˆç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸ªç±»ã€‚</p><ol><li>orbit å•è¯çš„ç¿»è¯‘ä¸ºï¼šè½¨é“</li><li>controls å•è¯çš„ç¿»è¯‘ä¸ºï¼šæ§åˆ¶æƒ</li></ol><p>OrbitControls æ˜¯é¼ æ ‡é•œå¤´è½¨é“æ§ä»¶ï¼Œå¯ä»¥é€šè¿‡é¼ æ ‡æ¥é…ç½®é•œå¤´çš„è¿åŠ¨è½¨é“ï¼Œä¾‹å¦‚ ç¼©æ”¾ã€å¹³ç§»ã€æ—‹è½¬ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸ä¿®æ”¹åœºæ™¯çš„å‰æä¸‹ï¼Œå¯ä»¥é€šè¿‡é¼ æ ‡æ¥æ”¹å˜é•œå¤´ï¼Œä»¥ä¾¿æŸ¥çœ‹ä¸åŒè§’åº¦ä¸‹çš„åœºæ™¯ã€‚</p><blockquote><p>åœ¨æ‰‹æœºç«¯ï¼Œä¸æ˜¯é¼ æ ‡ï¼Œè€Œæ˜¯æ‰‹æŒ‡æ»‘åŠ¨</p></blockquote><h4 id=orbitcontrolsçš„ç”¨æ³•>OrbitControlsçš„ç”¨æ³•<a hidden class=anchor aria-hidden=true href=#orbitcontrolsçš„ç”¨æ³•>#</a></h4><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const controls = new OrbitControls(camera, canvas) //åˆ›å»ºä¸€ä¸ªå®ä¾‹
</span></span><span style=display:flex><span>controls.target.set(0, 5, 0) //controls.target ä¸ºé•œå¤´çš„åæ ‡ç³»ç»Ÿ
</span></span><span style=display:flex><span>//controls.target.set(0, 5, 0) çš„æ„æ€æ˜¯ï¼šè®¾ç½®åŸç‚¹ Y è½´çš„åæ ‡(ä»¥é«˜å‡º5ç±³çš„è½¨é“è¿è¡Œ)
</span></span><span style=display:flex><span>controls.update() //ä½¿æ§ä»¶ä½¿ç”¨æ–°ç›®æ ‡
</span></span></code></pre></div><p>è¯·æ³¨æ„ï¼Œåœ¨ä¸Šé¢ä»£ç ä¸­ï¼ŒOrbitControls çš„æ„é€ å‡½æ•°ä¸­ç¬¬ 2 ä¸ªå‚æ•°ä¸ºDOM ä¸­çš„ canvas èŠ‚ç‚¹ï¼Œå®é™…ä¸Šå½“æ·»åŠ è¿‡ OrbitControls ä¹‹åï¼Œé¼ æ ‡åœ¨ canvas ä¸Šçš„ æ‹–æ‹½ã€é¼ æ ‡æ»šè½´æ»šåŠ¨ ç­‰æ“ä½œéƒ½ä¼šè¢«æ•æ‰åˆ°ï¼Œå¹¶ä¸”åšå‡ºç›¸å¯¹åº”çš„é•œå¤´ç”»é¢åˆ‡æ¢ã€‚</p><p>è¯´ç›´ç™½ç‚¹ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥é€šè¿‡é¼ æ ‡å¯¹ 3D åœºæ™¯è¿›è¡Œä¸åŒè§’åº¦ï¼Œè·ç¦»çš„åˆ‡æ¢æ“ä½œäº†ã€‚</p><p><strong>OrbitControlsçš„changeäº‹ä»¶ï¼š</strong></p><p>æ— è®ºæ˜¯é€šè¿‡ é¼ æ ‡æˆ–é”®ç›˜ æ¥ä¿®æ”¹é•œå¤´è½¨é“ éƒ½ä¼šè§¦å‘ OrbitControls çš„ change äº‹ä»¶ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ  äº‹ä»¶ç›‘å¬ æ¥æ•è·è¯¥äº‹ä»¶ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const handleChange = () =&gt; { ... }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const controls = new OrbitControls(camera, canvasRef.current)
</span></span><span style=display:flex><span>controls.addEventListener(&#39;change&#39;,handleChange)
</span></span></code></pre></div><p>å¯¹äºç›®å‰çš„æˆ‘ä»¬æ¥è¯´ï¼Œæ˜¯æ²¡æœ‰å¿…è¦ä½¿ç”¨è¯¥äº‹ä»¶çš„ï¼Œåœ¨åç»­çš„ Three.js æŠ€å·§ç¯‡ ä¸­ï¼Œæˆ‘ä»¬æ‰ä¼šè¿ç”¨åˆ° change äº‹ä»¶ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½® ç¦æ­¢ç¼©æ”¾ã€ç¦æ­¢æ—‹è½¬ã€ç¦æ­¢å³é”®æ‹–æ‹½ã€è®¾ç½®å¯æ—‹è½¬è§’åº¦èŒƒå›´ç­‰ç­‰ä¸€ç³»åˆ—é…ç½®ï¼Œå…·ä½“çš„å¯æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼š<a href=https://threejs.org/docs/#examples/zh/controls/OrbitControls>https://threejs.org/docs/#examples/zh/controls/OrbitControls</a></p><p><strong>ç‰¹åˆ«æ³¨æ„ï¼š</strong></p><p>OrbitControls å¹¶ä¸æ˜¯åŒ…å«åœ¨ three æ ¹ç›®å½•ä¸‹ï¼Œè€Œæ˜¯ä½äº three/examples/jsm/controls/OrbitControls ä¸­ï¼Œå› æ­¤å¼•å…¥ä»£ç ä¸ºï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>import { OrbitControls } from &#39;three/examples/jsm/controls/OrbitControls&#39;
</span></span></code></pre></div><blockquote><p>æé†’ï¼šåœ¨ OrbitControls.js ä¸­ï¼Œåˆ†åˆ«å¯¼å‡ºæœ‰ OrbitControls å’Œ MapControlsï¼Œæ‰€ä»¥å¼•å…¥ OribitControls æ˜¯éœ€è¦åŠ  å¤§æ‹¬å· { }ã€‚</p></blockquote><p><strong>è¡¥å……è¯´æ˜ï¼š</strong></p><p>ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼ŒOrbitControls å¹¶ä¸æ˜¯ Three.js æ ¸å¿ƒåŒ…å«çš„ä»£ç å†…å®¹ï¼ŒOrbitControls æ˜¯å°†æœ€å¸¸è§çš„é¼ æ ‡ä¸ Three.js åœºæ™¯äº¤äº’å†…å®¹çš„ä¸€ä¸ªé¢å¤–å°è£…ã€‚</p><p>ç”±äº OrbitControls å®åœ¨æ˜¯è¿‡äºé¢‘ç¹ä½¿ç”¨ï¼Œæœ€ç»ˆ Three.js å°† OrbitControls ä¹ŸåŒ…å«åˆ°äº† Three.js ä»£ç åŒ…ä¸­ï¼Œåªä¸è¿‡ä¸åœ¨é»˜è®¤çš„ç›®å½•ä¸­ï¼Œè€Œæ˜¯åœ¨ Three.js ç¤ºä¾‹ç›®å½•ä¸­ã€‚</p><blockquote><p>åœ¨ Three.js æ—©æœŸçš„ç‰ˆæœ¬ä¸­ï¼Œä»£ç åŒ…ä¸­å¹¶æœªåŒ…å« OrbitControlsï¼Œè‹¥æƒ³ä½¿ç”¨è¿˜éœ€è¦ yarn å®‰è£… three-orbitcontrols è¿™ä¸ªåŒ…ã€‚åªä¸è¿‡å½“åæ¥ Three.js åŒ…å«äº† OrbitControls ä¹‹åï¼Œæ‰å†ä¹Ÿæ— éœ€é¢å¤–å®‰è£…äº†ã€‚</p></blockquote><p><strong>è¡¥å……è¯´æ˜2ï¼š</strong></p><p>åŸæœ¬ OrbitControl é™¤äº†é¼ æ ‡æ‹–æ‹½å¯ä»¥æ”¹å˜åœºæ™¯è§†è§’ï¼Œè¿˜æ”¯æŒé”®ç›˜ä¸Šçš„ 4 ä¸ªæ–¹å‘é”®æ¥æ”¹å˜åœºæ™¯è§†è§’ã€‚</p><p>åªä¸è¿‡ React å¯¹äºåŸç”Ÿ DOM äº‹ä»¶æ”¯æŒåº¦å¹¶ä¸é«˜ï¼ŒReact æ›´å€¾å‘äºç»™ç»„ä»¶æ·»åŠ  onKeydown å±æ€§å¤„ç†å‡½æ•°ã€‚</p><blockquote><p>æœ¬è´¨ä¸Š ç»„ä»¶çš„ onKeydown ç›¸å½“äº React çš„åˆæˆäº‹ä»¶ã€‚</p></blockquote><p>Three.js çš„å®˜æ–¹ç¤ºä¾‹ä½¿ç”¨çš„æ˜¯åŸç”Ÿ html + jsï¼Œæ˜¯å®Œå…¨æ”¯æŒåŸç”Ÿé”®ç›˜äº‹ä»¶çš„ã€‚æ‰€ä»¥ å®˜ç½‘çš„ç¤ºä¾‹ ä½¿ç”¨é”®ç›˜æ–¹å‘é”®æ§åˆ¶åœºæ™¯æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨ React é¡¹ç›®ä¸­å´ä¸å¤ªå®¹æ˜“å®ç°ã€‚</p><p>åœ¨ React ä¸­å¦‚æœæƒ³è®© canvas æ‹¥æœ‰é”®ç›˜äº‹ä»¶ç›‘å¬ï¼Œéœ€è¦åšä»¥ä¸‹ 2 å¤„è®¾ç½®ï¼š</p><ol><li>åœ¨ useEffect ä¸­ï¼Œå½“ç¬¬ä¸€æ¬¡æŒ‚è½½å®Œæˆï¼Œæ·»åŠ  canvasRef.current.fouce()ï¼Œè®© canvas è‡ªåŠ¨è·å¾—ç„¦ç‚¹</li><li>åœ¨ &lt;canvas /> ä¸­æ·»åŠ  tabindex å±æ€§ï¼Œå±æ€§å€¼ä¸º -1ã€0ã€1 éƒ½æ— æ‰€è°“ï¼Œä¾‹å¦‚ï¼š&lt;canvas tabindex={0} /></li></ol><p>åªæœ‰æ»¡è¶³ä»¥ä¸Š 2 ä¸ªæ¡ä»¶åï¼Œcanvas æ‰ä¼šç›‘å¬åˆ°é”®ç›˜äº‹ä»¶ï¼Œä½†æ˜¯ä¸€æ—¦ canvas å¤±å»ç„¦ç‚¹ï¼Œé‚£ä¹ˆå°±åˆç›‘å¬ä¸åˆ°äº†ã€‚</p><blockquote><p>è¿˜æ˜¯ç»§ç»­ä½¿ç”¨ é¼ æ ‡æ‹–æ‹½ æ¥ä¿®æ”¹æŸ¥çœ‹åœºæ™¯è§†è§’å§</p></blockquote><p><strong>è¡¥å……è¯´æ˜3ï¼š</strong></p><p>äº‹å®ä¸Šå¦‚æœä½ çœŸçš„éœ€è¦ç›‘å¬ é¼ æ ‡é”®ç›˜æ–¹å‘é”® ï¼Œå…¶å®æœ€ç®€å•çš„åŠæ³•å°±æ˜¯æŠŠ OrbitControls ç›‘å¬å¯¹è±¡ä¿®æ”¹ä¸º document.body ä¸Šã€‚</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#282828;background-color:#9d0006>- const controls = new OrbitControls(camera, canvasRef.current)
</span></span></span><span style=display:flex><span><span style=color:#282828;background-color:#9d0006></span><span style=color:#282828;background-color:#79740e>+ const controls = new OrbitControls(camera, document.body)
</span></span></span></code></pre></div><h4 id=çº¹ç†å›¾ç‰‡å‡†å¤‡åˆ¶ä½œçº¹ç†å›¾ç‰‡-checkerpng>çº¹ç†å›¾ç‰‡å‡†å¤‡ï¼šåˆ¶ä½œçº¹ç†å›¾ç‰‡ checker.png<a hidden class=anchor aria-hidden=true href=#çº¹ç†å›¾ç‰‡å‡†å¤‡åˆ¶ä½œçº¹ç†å›¾ç‰‡-checkerpng>#</a></h4><p>æœ¬ç¤ºä¾‹ä¸­éœ€è¦ç”¨åˆ°ä¸€ä¸ªç±»ä¼¼ 3D åœºæ™¯åœ°é¢é»‘ç™½ç½‘æ ¼çš„çº¹ç†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æå‰å‡†å¤‡å¥½è¿™ä¸ªçº¹ç†å›¾ç‰‡ã€‚</p><p>åœ¨ PhotoShop ä¸­æ–°å»ºä¸€ä¸ª å®½é«˜éƒ½ä¸º 2 åƒç´ çš„ç”»å¸ƒï¼Œç„¶åï¼š</p><ol><li>å·¦ä¸Šè§’å’Œå³ä¸‹è§’ çš„é‚£ 1 åƒç´ ä¸­å¡«å……ä¸€ä¸ªè¾ƒé»‘çš„é¢œè‰²</li><li>å³ä¸Šè§’å’Œå·¦ä¸‹è§’ çš„é‚£ 1 åƒç´ ä¸­å¡«å……ä¸€ä¸ªè¾ƒç™½çš„é¢œè‰²</li><li>å°†å›¾ç‰‡å¯¼å‡ºä¸º checker.pngï¼Œå¹¶ä¿å­˜åˆ° src/assets/imgs/ ç›®å½•ä¸­</li></ol><p><strong>è¡¥å……è¯´æ˜ï¼š</strong></p><p>è™½ç„¶åˆ¶ä½œçš„çº¹ç†å›¾ç‰‡éå¸¸å°ï¼Œåªæœ‰ 2åƒç´  * 2åƒç´ ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®çº¹ç†çš„é‡å¤ï¼Œæ¥å®ç°æ¸²æŸ“å‡ºæ¯”è¾ƒå¤§çš„ é»‘ç™½ç½‘æ ¼åº•ç›˜ã€‚</p><ol><li>è®¾ç½®çº¹ç† magFilter çš„å±æ€§å€¼ä¸º Three.NearestFilter</li><li>è®¾ç½®çº¹ç† wrapSã€wrapT å±æ€§å€¼ä¸º Three.RepeatWrapping</li><li>æ ¹æ® é»‘ç™½ç½‘æ ¼çš„å°ºå¯¸ï¼Œè®¡ç®—å¹¶è®¾ç½®çº¹ç† repeat é‡å¤æ¬¡æ•°</li></ol><p>ä»¥ä¸Š 3 ç‚¹åˆšå¥½éƒ½æ˜¯ä¸Šä¸€èŠ‚æˆ‘ä»¬è®²è§£ çº¹ç† æ—¶å­¦ä¹ åˆ°çš„çŸ¥è¯†ç‚¹ã€‚</p><h2 id=ç¯å…‰ç¤ºä¾‹hellolight>ç¯å…‰ç¤ºä¾‹ï¼šHelloLight<a hidden class=anchor aria-hidden=true href=#ç¯å…‰ç¤ºä¾‹hellolight>#</a></h2><p>å…ˆå›é¡¾ä¸€ä¸‹ Three.js ä¸­ 10 ä¸ª å…‰ çš„ç±»å‹ï¼š</p><p>å…‰çš„åŸå‹(Light) + 6ç§åŸºç¡€å…‰(AmbientLight&mldr;) + å…‰æ¢é’ˆåŸå‹(LightProbe) + 2ç§ç¯å¢ƒå…‰æ¢é’ˆ(AmbientLightProbeã€HemisphereLightProbe) = 1 + 6 + 1 + 2 = 10</p><h3 id=ç¤ºä¾‹ç›®æ ‡>ç¤ºä¾‹ç›®æ ‡<a hidden class=anchor aria-hidden=true href=#ç¤ºä¾‹ç›®æ ‡>#</a></h3><ol><li>ä½¿ç”¨å¹¶ä½“éªŒ Three.js ä¸­é™¤ Light å’Œ LightProbe ä¹‹å¤–çš„å…¶ä»– 8 ç§å…‰ç±»å‹</li><li>ä½¿ç”¨å¹¶ä½“éªŒ å…‰çš„è¾…åŠ©å¯¹è±¡( XxxLightHelper)</li></ol><p><strong>è¡¥å……è¯´æ˜ï¼š</strong></p><ol><li>ç¯å¢ƒå…‰ AmbientLight æ˜¯æ²¡æœ‰ è¾…åŠ©å¯¹è±¡çš„ã€å…¶ä»–å…‰éƒ½æœ‰è¾…åŠ©å¯¹è±¡</li><li>çŸ©å½¢å…‰ RectAreaLight çš„è¾…åŠ©å¯¹è±¡ RectAreaLightHelper å’Œå…¶ä»–å…‰çš„è¾…åŠ©å¯¹è±¡ å¼•å…¥æ–¹å¼ä¸åŒ</li></ol><h3 id=ä»£ç æ‹†åˆ†ä¸æ¢³ç†>ä»£ç æ‹†åˆ†ä¸æ¢³ç†<a hidden class=anchor aria-hidden=true href=#ä»£ç æ‹†åˆ†ä¸æ¢³ç†>#</a></h3><h4 id=1create-scenetsåˆ›å»ºåŸºç¡€åœºæ™¯>1ã€create-scene.tsï¼šåˆ›å»ºåŸºç¡€åœºæ™¯<a hidden class=anchor aria-hidden=true href=#1create-scenetsåˆ›å»ºåŸºç¡€åœºæ™¯>#</a></h4><p>åˆ›å»º src/components/hello-light/create-scene.ts ï¼Œå¯¼å‡ºä¸€ä¸ªåä¸º createScene çš„å‡½æ•°ï¼Œç”¨æ¥ä¸“é—¨è´Ÿè´£åˆ›å»ºåŸºç¡€çš„åœºæ™¯ã€‚</p><p><strong>å…·ä½“ä»£ç æ¢³ç†ï¼š</strong></p><ol><li><p>è¯¥åœºæ™¯ä¸­åŒ…å« 1ä¸ªé»‘ç™½ç½‘æ ¼çš„åœ°é¢ã€1ä¸ªç«‹æ–¹ä½“ã€1ä¸ªçƒä½“ï¼Œä½†æ˜¯è¯¥åœºæ™¯ä¸åŒ…å«ä»»ä½•å…‰ã€‚</p></li><li><p>createScene åˆ›å»ºåŸºç¡€åœºæ™¯æ—¶æ¥æ”¶ä¸€ä¸ªå‚æ•° typeï¼Œtype åªèƒ½ä¸ºä»¥ä¸‹ 2 ä¸ªå€¼ä¸­çš„å…¶ä¸­ 1 ç§ï¼šMESH_PHONE_MATERIAL æˆ– MESH_STANDARD_MATERIAL</p></li><li><p>type é»˜è®¤å€¼ä¸º MESH_PHONE_MATERIAL</p></li></ol><p><strong>è¿›ä¸€æ­¥è§£é‡Šï¼š</strong></p><p>ç”±äº RectAreaLight åªä½œç”¨åœ¨ MeshStandardMaterial å’Œ MeshPhysicalMaterial ææ–™ç‰©ä½“ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰è®¾ç½® type è¿™ä¸ªå‚æ•°ã€‚</p><ol><li>å½“ä½¿ç”¨ RectAreaLight æ—¶ï¼Œæˆ‘ä»¬å‘ŠçŸ¥ createSceneï¼Œä½¿ç”¨ MeshStandardMaterial æè´¨åˆ›å»º åœ°é¢ã€ç«‹æ–¹ä½“ã€çƒä½“</li><li>å½“ä½¿ç”¨ å…¶ä»– å…‰æ—¶ï¼Œæˆ‘ä»¬å‘ŠçŸ¥ createSceneï¼Œä½¿ç”¨ MeshPhongMaterial æè´¨åˆ›å»º åœ°é¢ã€ç«‹æ–¹ä½“ã€çƒä½“</li></ol><h4 id=2indextsxåˆ›å»ºæ¸²æŸ“å™¨é•œå¤´ä»¥åŠä¸åŒç§ç±»çš„å…‰>2ã€index.tsxï¼šåˆ›å»ºæ¸²æŸ“å™¨ã€é•œå¤´ã€ä»¥åŠä¸åŒç§ç±»çš„å…‰<a hidden class=anchor aria-hidden=true href=#2indextsxåˆ›å»ºæ¸²æŸ“å™¨é•œå¤´ä»¥åŠä¸åŒç§ç±»çš„å…‰>#</a></h4><p><strong>å…·ä½“ä»£ç æ¢³ç†ï¼š</strong></p><ol><li>å½“ canvas DOM åˆå§‹åŒ–åï¼Œåˆ›å»º æ¸²æŸ“å™¨ã€é•œå¤´ã€é•œå¤´äº¤äº’(OrbitControls)</li><li>åˆ›å»º 8 ä¸ªæŒ‰é’®ï¼Œæ¯ä¸ªæŒ‰é’®å¯¹åº”ä¸€ç§å…‰</li><li>ä½¿ç”¨ useState åˆ›å»ºä¸€ä¸ªå˜é‡ typeï¼Œç”¨æ¥è®°å½•å½“å‰æ¼”ç¤º å…‰çš„ç±»å‹</li><li>ç‚¹å‡»ä¸åŒæŒ‰é’®åï¼Œä¿®æ”¹ å½“å‰å…‰çš„ç±»å‹ type çš„å€¼ï¼Œä»è€Œå¼•å‘ react é‡æ–°æ¸²æŸ“</li><li>åœ¨æ–°ä¸€è½®çš„æ¸²æŸ“ä¸­ï¼Œé€šè¿‡åˆ¤æ–­ type ç±»å‹ï¼Œä½¿ç”¨ createScene åˆ›å»ºä¸€ä¸ªæ–°çš„åœºæ™¯ å’Œ å¯¹åº”çš„ å…‰</li></ol><h4 id=3indexscssè®¾ç½®ç›¸å…³æ ·å¼>3ã€index.scssï¼šè®¾ç½®ç›¸å…³æ ·å¼<a hidden class=anchor aria-hidden=true href=#3indexscssè®¾ç½®ç›¸å…³æ ·å¼>#</a></h4><p><strong>å…·ä½“æ ·å¼æ¢³ç†ï¼š</strong></p><ol><li>è®¾ç½® canvas å¯¹åº”çš„æ ·å¼</li><li>è®¾ç½® 8 ä¸ªæŒ‰é’®å¯¹åº”çš„æ ·å¼</li></ol><h3 id=å…·ä½“çš„ä»£ç >å…·ä½“çš„ä»£ç <a hidden class=anchor aria-hidden=true href=#å…·ä½“çš„ä»£ç >#</a></h3><h4 id=create-scenets>create-scene.ts<a hidden class=anchor aria-hidden=true href=#create-scenets>#</a></h4><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>import * as Three from &#39;three&#39;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>export enum MaterialType {
</span></span><span style=display:flex><span>    MESH_PHONE_MATERIAL = &#39;MESH_PHONE_MATERIAL&#39;,
</span></span><span style=display:flex><span>    MESH_STANDARD_MATERIAL = &#39;MESH_STANDARD_MATERIAL&#39;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const createScene: (type?: keyof typeof MaterialType) =&gt; Three.Scene = (type = MaterialType.MESH_PHONE_MATERIAL) =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    const scene = new Three.Scene()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    const planeSize = 40
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    const loader = new Three.TextureLoader()
</span></span><span style=display:flex><span>    const texture = loader.load(require(&#39;@/assets/imgs/checker.png&#39;).default)
</span></span><span style=display:flex><span>    texture.wrapS = Three.RepeatWrapping
</span></span><span style=display:flex><span>    texture.wrapT = Three.RepeatWrapping
</span></span><span style=display:flex><span>    texture.magFilter = Three.NearestFilter
</span></span><span style=display:flex><span>    texture.repeat.set(planeSize / 2, planeSize / 2)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    let planeMat: Three.Material
</span></span><span style=display:flex><span>    let cubeMat: Three.Material
</span></span><span style=display:flex><span>    let sphereMat: Three.Material
</span></span><span style=display:flex><span>    switch (type) {
</span></span><span style=display:flex><span>        case MaterialType.MESH_STANDARD_MATERIAL:
</span></span><span style=display:flex><span>            planeMat = new Three.MeshStandardMaterial({
</span></span><span style=display:flex><span>                map: texture,
</span></span><span style=display:flex><span>                side: Three.DoubleSide
</span></span><span style=display:flex><span>            })
</span></span><span style=display:flex><span>            cubeMat = new Three.MeshStandardMaterial({ color: &#39;#8AC&#39; })
</span></span><span style=display:flex><span>            sphereMat = new Three.MeshStandardMaterial({ color: &#39;#CA8&#39; })
</span></span><span style=display:flex><span>            break
</span></span><span style=display:flex><span>        default:
</span></span><span style=display:flex><span>            planeMat = new Three.MeshPhongMaterial({
</span></span><span style=display:flex><span>                map: texture,
</span></span><span style=display:flex><span>                side: Three.DoubleSide
</span></span><span style=display:flex><span>            })
</span></span><span style=display:flex><span>            cubeMat = new Three.MeshPhongMaterial({ color: &#39;#8AC&#39; })
</span></span><span style=display:flex><span>            sphereMat = new Three.MeshPhongMaterial({ color: &#39;#8AC&#39; })
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    const planeGeo = new Three.PlaneBufferGeometry(planeSize, planeSize)
</span></span><span style=display:flex><span>    const mesh = new Three.Mesh(planeGeo, planeMat)
</span></span><span style=display:flex><span>    mesh.rotation.x = Math.PI * -0.5
</span></span><span style=display:flex><span>    scene.add(mesh)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    const cubeGeo = new Three.BoxBufferGeometry(4, 4, 4)
</span></span><span style=display:flex><span>    const cubeMesh = new Three.Mesh(cubeGeo, cubeMat)
</span></span><span style=display:flex><span>    cubeMesh.position.set(5, 2.5, 0)
</span></span><span style=display:flex><span>    scene.add(cubeMesh)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    const sphereGeo = new Three.SphereBufferGeometry(3, 32, 16)
</span></span><span style=display:flex><span>    const sphereMesh = new Three.Mesh(sphereGeo, sphereMat)
</span></span><span style=display:flex><span>    sphereMesh.position.set(-4, 5, 0)
</span></span><span style=display:flex><span>    scene.add(sphereMesh)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    return scene
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>export default createScene
</span></span></code></pre></div><h4 id=indextsx>index.tsx<a hidden class=anchor aria-hidden=true href=#indextsx>#</a></h4><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>import { useEffect, useRef, useState } from &#39;react&#39;
</span></span><span style=display:flex><span>import * as Three from &#39;three&#39;
</span></span><span style=display:flex><span>import { OrbitControls } from &#39;three/examples/jsm/controls/OrbitControls&#39;
</span></span><span style=display:flex><span>//import { RectAreaLightUniformsLib } from &#39;three/examples/jsm/lights/RectAreaLightUniformsLib&#39;
</span></span><span style=display:flex><span>import { RectAreaLightHelper } from &#39;three/examples/jsm/helpers/RectAreaLightHelper&#39;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>import createScene, { MaterialType } from &#39;./create-scene&#39;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>import &#39;./index.scss&#39;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>enum LightType {
</span></span><span style=display:flex><span>    AmbientLight = &#39;AmbientLight&#39;,
</span></span><span style=display:flex><span>    AmbientLightProbe = &#39;AmbientLightProbe&#39;,
</span></span><span style=display:flex><span>    DirectionalLight = &#39;DirectionalLight&#39;,
</span></span><span style=display:flex><span>    HemisphereLight = &#39;HemisphereLight&#39;,
</span></span><span style=display:flex><span>    HemisphereLightProbe = &#39;HemisphereLightProbe&#39;,
</span></span><span style=display:flex><span>    PointLight = &#39;PointLight&#39;,
</span></span><span style=display:flex><span>    RectAreaLight = &#39;RectAreaLight&#39;,
</span></span><span style=display:flex><span>    SpotLight = &#39;SpotLight&#39;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const buttonLables = [LightType.AmbientLight, LightType.AmbientLightProbe, LightType.DirectionalLight,
</span></span><span style=display:flex><span>LightType.HemisphereLight, LightType.HemisphereLightProbe, LightType.PointLight,
</span></span><span style=display:flex><span>LightType.RectAreaLight, LightType.SpotLight]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const HelloLight = () =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    const canvasRef = useRef&lt;HTMLCanvasElement&gt;(null)
</span></span><span style=display:flex><span>    const sceneRef = useRef&lt;Three.Scene | null&gt;(null)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    const [type, setType] = useState&lt;LightType&gt;(LightType.AmbientLight)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    useEffect(() =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        if (canvasRef.current === null) {
</span></span><span style=display:flex><span>            return
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const renderer = new Three.WebGLRenderer({ canvas: canvasRef.current as HTMLCanvasElement })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const camera = new Three.PerspectiveCamera(45, 2, 0.1, 1000)
</span></span><span style=display:flex><span>        camera.position.set(0, 10, 20)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const controls = new OrbitControls(camera, canvasRef.current)
</span></span><span style=display:flex><span>        controls.target.set(0, 5, 0)
</span></span><span style=display:flex><span>        controls.update()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const scene = createScene()
</span></span><span style=display:flex><span>        sceneRef.current = scene
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const render = () =&gt; {
</span></span><span style=display:flex><span>            if (sceneRef.current) {
</span></span><span style=display:flex><span>                renderer.render(sceneRef.current, camera)
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            window.requestAnimationFrame(render)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        window.requestAnimationFrame(render)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const handleResize = () =&gt; {
</span></span><span style=display:flex><span>            const canvas = canvasRef.current
</span></span><span style=display:flex><span>            if (canvas === null) {
</span></span><span style=display:flex><span>                return
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            camera.aspect = canvas.clientWidth / canvas.clientHeight
</span></span><span style=display:flex><span>            camera.updateProjectionMatrix()
</span></span><span style=display:flex><span>            renderer.setSize(canvas.clientWidth, canvas.clientHeight, false)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        handleResize()
</span></span><span style=display:flex><span>        window.addEventListener(&#39;resize&#39;, handleResize)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        return () =&gt; {
</span></span><span style=display:flex><span>            window.removeEventListener(&#39;resize&#39;, handleResize)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }, [canvasRef])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    useEffect(() =&gt; {
</span></span><span style=display:flex><span>        if (sceneRef.current === null) {
</span></span><span style=display:flex><span>            return
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        sceneRef.current = null
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        let newScene: Three.Scene
</span></span><span style=display:flex><span>        if (type === LightType.RectAreaLight) {
</span></span><span style=display:flex><span>            newScene = createScene(MaterialType.MESH_STANDARD_MATERIAL)
</span></span><span style=display:flex><span>        } else {
</span></span><span style=display:flex><span>            newScene = createScene()
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        sceneRef.current = newScene
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        switch (type) {
</span></span><span style=display:flex><span>            case LightType.AmbientLight:
</span></span><span style=display:flex><span>                const ambientLight = new Three.AmbientLight(0xFFFFFF, 1)
</span></span><span style=display:flex><span>                newScene.add(ambientLight)
</span></span><span style=display:flex><span>                break
</span></span><span style=display:flex><span>            case LightType.AmbientLightProbe:
</span></span><span style=display:flex><span>                const ambientLightProbe = new Three.AmbientLightProbe(0xFFFFFF, 1)
</span></span><span style=display:flex><span>                newScene.add(ambientLightProbe)
</span></span><span style=display:flex><span>                break
</span></span><span style=display:flex><span>            case LightType.DirectionalLight:
</span></span><span style=display:flex><span>                const directionalLight = new Three.DirectionalLight(0xFFFFFF, 1)
</span></span><span style=display:flex><span>                directionalLight.position.set(0, 10, 0);
</span></span><span style=display:flex><span>                directionalLight.target.position.set(-5, 0, 0)
</span></span><span style=display:flex><span>                newScene.add(directionalLight)
</span></span><span style=display:flex><span>                newScene.add(directionalLight.target)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                const directionalLightHelper = new Three.DirectionalLightHelper(directionalLight)
</span></span><span style=display:flex><span>                newScene.add(directionalLightHelper)
</span></span><span style=display:flex><span>                break
</span></span><span style=display:flex><span>            case LightType.HemisphereLight:
</span></span><span style=display:flex><span>                const hemisphereLight = new Three.HemisphereLight(0xB1E1FF, 0xB97A20, 1)
</span></span><span style=display:flex><span>                newScene.add(hemisphereLight)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                const hemisphereLightHelper = new Three.HemisphereLightHelper(hemisphereLight,5)
</span></span><span style=display:flex><span>                newScene.add(hemisphereLightHelper)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                break
</span></span><span style=display:flex><span>            case LightType.HemisphereLightProbe:
</span></span><span style=display:flex><span>                const hemisphereLightProbe = new Three.HemisphereLightProbe(0xB1E1FF, 0xB97A20, 1)
</span></span><span style=display:flex><span>                newScene.add(hemisphereLightProbe)
</span></span><span style=display:flex><span>                break
</span></span><span style=display:flex><span>            case LightType.PointLight:
</span></span><span style=display:flex><span>                const pointLight = new Three.PointLight(0xFFFFFF, 1)
</span></span><span style=display:flex><span>                pointLight.position.set(0, 10, 0)
</span></span><span style=display:flex><span>                newScene.add(pointLight)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                const pointLightHelper = new Three.PointLightHelper(pointLight)
</span></span><span style=display:flex><span>                newScene.add(pointLightHelper)
</span></span><span style=display:flex><span>                break;
</span></span><span style=display:flex><span>            case LightType.RectAreaLight:
</span></span><span style=display:flex><span>                //RectAreaLightUniformsLib.init() //å®é™…æµ‹è¯•æ—¶å‘ç°å³ä½¿ä¸æ·»åŠ è¿™è¡Œä»£ç ï¼Œåœºæ™¯ä¼¼ä¹ä¹Ÿä¾ç„¶æ­£å¸¸æ¸²æŸ“ï¼Œæ²¡æœ‰çœ‹å‡ºå·®å¼‚
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                const rectAreaLight = new Three.RectAreaLight(0xFFFFFF, 5, 12, 4)
</span></span><span style=display:flex><span>                rectAreaLight.position.set(0, 10, 0)
</span></span><span style=display:flex><span>                rectAreaLight.rotation.x = Three.MathUtils.degToRad(-90)
</span></span><span style=display:flex><span>                newScene.add(rectAreaLight)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                const rectAreaLightHelper = new RectAreaLightHelper(rectAreaLight)
</span></span><span style=display:flex><span>                newScene.add(rectAreaLightHelper)
</span></span><span style=display:flex><span>                break
</span></span><span style=display:flex><span>            case LightType.SpotLight:
</span></span><span style=display:flex><span>                const spotLight = new Three.SpotLight(0xFFFFFF, 1)
</span></span><span style=display:flex><span>                spotLight.position.set(0, 10, 0);
</span></span><span style=display:flex><span>                spotLight.target.position.set(-5, 0, 0)
</span></span><span style=display:flex><span>                newScene.add(spotLight)
</span></span><span style=display:flex><span>                newScene.add(spotLight.target)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                const spotLightHelper = new Three.SpotLightHelper(spotLight)
</span></span><span style=display:flex><span>                newScene.add(spotLightHelper)
</span></span><span style=display:flex><span>                break
</span></span><span style=display:flex><span>            default:
</span></span><span style=display:flex><span>                console.log(&#39;???&#39;)
</span></span><span style=display:flex><span>                break
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }, [type])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    return (
</span></span><span style=display:flex><span>        &lt;div className=&#39;full-screen&#39;&gt;
</span></span><span style=display:flex><span>            &lt;div className=&#39;buttons&#39;&gt;
</span></span><span style=display:flex><span>                {
</span></span><span style=display:flex><span>                    buttonLables.map((label, index) =&gt; {
</span></span><span style=display:flex><span>                        return &lt;button
</span></span><span style=display:flex><span>                            className={label === type ? &#39;button-selected&#39; : &#39;&#39;}
</span></span><span style=display:flex><span>                            onClick={() =&gt; { setType(label) }}
</span></span><span style=display:flex><span>                            key={`button${index}`}
</span></span><span style=display:flex><span>                        &gt;{label}&lt;/button&gt;
</span></span><span style=display:flex><span>                    })
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            &lt;/div&gt;
</span></span><span style=display:flex><span>            &lt;canvas ref={canvasRef} /&gt;
</span></span><span style=display:flex><span>        &lt;/div&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>export default HelloLight
</span></span></code></pre></div><blockquote><p>create-scene.ts å’Œ index.tsx çš„ä»£ç éå¸¸å¤šï¼Œå¹¶ä¸”æˆ‘ä¹Ÿæ²¡æœ‰å†™æ³¨é‡Šã€‚<br>ä½†æ˜¯å¦‚æœä¹‹å‰ç« èŠ‚ä¸­çš„ç¤ºä¾‹ä½ ä¹Ÿéƒ½è·Ÿç€ æ•²ä¸€éï¼Œåº”è¯¥å¾ˆå®¹æ˜“çœ‹æ‡‚ è¿™ä¸¤ä¸ªæ–‡ä»¶é‡Œçš„ä»£ç ã€‚</p></blockquote><h4 id=indexscss>index.scss<a hidden class=anchor aria-hidden=true href=#indexscss>#</a></h4><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>.full-screen, canvas {
</span></span><span style=display:flex><span>    display: block;
</span></span><span style=display:flex><span>    height: inherit;
</span></span><span style=display:flex><span>    width: inherit;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.buttons {
</span></span><span style=display:flex><span>    display: flex;
</span></span><span style=display:flex><span>    justify-content: center;
</span></span><span style=display:flex><span>    width: 100%;
</span></span><span style=display:flex><span>    position: fixed;
</span></span><span style=display:flex><span>    top: 30px;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.buttons button {
</span></span><span style=display:flex><span>    width: 200px;
</span></span><span style=display:flex><span>    height: 30px;
</span></span><span style=display:flex><span>    margin-left: 20px;
</span></span><span style=display:flex><span>    font-size: 18px;
</span></span><span style=display:flex><span>    cursor: pointer;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.buttons button:first-child {
</span></span><span style=display:flex><span>    margin-left: 0;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.button-selected{
</span></span><span style=display:flex><span>    background-color:green;
</span></span><span style=display:flex><span>    color: white;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è‹¥ä¸€åˆ‡æ­£å¸¸ï¼Œå®é™…è¿è¡Œåï¼š</p><ol><li>ç‚¹å‡»ç½‘é¡µä¸­ä¸åŒé¡¶éƒ¨çš„æŒ‰é’®ï¼Œå¯ä»¥åˆ‡æ¢ä¸åŒå…‰å¯¹åº”çš„åœºæ™¯æ•ˆæœ</li><li>ç‚¹å‡»å¹¶æ‹–åŠ¨é¼ æ ‡ æˆ– æ»šåŠ¨é¼ æ ‡æ»šè½´ï¼Œå¯ä»¥åˆ‡æ¢åœºæ™¯è§†è§’</li></ol><h3 id=é—ç•™çš„ç–‘æƒ‘>é—ç•™çš„ç–‘æƒ‘<a hidden class=anchor aria-hidden=true href=#é—ç•™çš„ç–‘æƒ‘>#</a></h3><h4 id=ç¬¬1ä¸ªç–‘æƒ‘rectarealightuniformslib>ç¬¬1ä¸ªç–‘æƒ‘ï¼šRectAreaLightUniformsLib<a hidden class=anchor aria-hidden=true href=#ç¬¬1ä¸ªç–‘æƒ‘rectarealightuniformslib>#</a></h4><p>æŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„è¯´æ³•ï¼Œåœ¨ä½¿ç”¨ RectAreaLight æ—¶ï¼Œå¿…é¡»è¦æ‰§è¡Œ RectAreaLightUniformsLib.init() çš„ï¼Œä½†å®é™…è¯•éªŒå‘ç°ä¸æ‰§è¡Œè¿™è¡Œä»£ç ä¹Ÿæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</p><p><strong>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</strong></p><h4 id=ç¬¬2ä¸ªç–‘æƒ‘rectarealighthelper>ç¬¬2ä¸ªç–‘æƒ‘ï¼šRectAreaLightHelper<a hidden class=anchor aria-hidden=true href=#ç¬¬2ä¸ªç–‘æƒ‘rectarealighthelper>#</a></h4><p>å®é™…è¿è¡Œå‘ç°ï¼ŒRectAreaLightHelper æ‰€å±•ç¤ºçš„å…‰æºçš„ä½ç½®å’Œæ–¹å‘ä¸å®é™…ä¸ç¬¦ã€‚</p><p>çŸ©å½¢é¢ç¯å…‰çš„ä»£ç ä¸ºï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const rectAreaLight = new Three.RectAreaLight(0xFFFFFF, 5, 12, 4)
</span></span><span style=display:flex><span>rectAreaLight.position.set(0, 10, 0)
</span></span><span style=display:flex><span>rectAreaLight.rotation.x = Three.MathUtils.degToRad(-90)
</span></span><span style=display:flex><span>newScene.add(rectAreaLight)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const rectAreaLightHelper = new RectAreaLightHelper(rectAreaLight)
</span></span><span style=display:flex><span>newScene.add(rectAreaLightHelper)
</span></span></code></pre></div><p>æˆ‘ä»¬å¯¹ rectAreaLight è¿›è¡Œäº† position(ä½ç½®)ã€rotation(æ—‹è½¬) è®¾ç½®ï¼Œ<strong>éš¾é“ å¯¹åº”çš„è¾…åŠ©å¯¹è±¡å¹¶ä¸ä¼šè·ŸéšåŒæ­¥å˜åŒ–ï¼Ÿ</strong></p><h2 id=é¢å¤–çš„ä¸€äº›å” å¨è¯>é¢å¤–çš„ä¸€äº›å” å¨è¯<a hidden class=anchor aria-hidden=true href=#é¢å¤–çš„ä¸€äº›å” å¨è¯>#</a></h2><p>æˆ‘æ˜¯ä¸€è¾¹å­¦ä¹  Three.js å®˜æ–¹æ•™ç¨‹ï¼Œä¸€è¾¹å†™æœ¬ç³»åˆ—æ–‡ç« ã€‚</p><p>æœ¬ç‰‡æ–‡ç« çš„æºå¤´ï¼Œå¯¹åº”çš„åŸå§‹æ•™ç¨‹æ˜¯ï¼š<a href=https://threejsfundamentals.org/threejs/lessons/threejs-lights.html>https://threejsfundamentals.org/threejs/lessons/threejs-lights.html</a></p><p>å› ä¸ºä¹‹å‰åˆšå¥½å­¦è¿‡ åœºæ™¯ï¼ŒæŒ‰ç…§å½“æ—¶ç¼–å†™çš„ç¤ºä¾‹ä»£ç ï¼š</p><ol><li>æœˆçƒå›´ç»•åœ°çƒ</li><li>åœ°çƒå›´ç»•å¤ªé˜³</li><li>å¤ªé˜³è‡ªè½¬</li></ol><p>æˆ‘å½“æ—¶å¾—å‡ºäº†ä¸€ä¸ªç»“è®ºï¼šæ¯ä¸€ä¸ª scene å®ä¾‹éƒ½æ˜¯ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„ åœºæ™¯ç©ºé—´ï¼Œ<strong>æˆ‘æƒ³å½“ç„¶å¾—è®¤ä¸ºè¿™é‡Œé¢çš„ç‹¬ç«‹ä¹ŸåŒ…å« åœºæ™¯ä¸­çš„ å…‰</strong>ã€‚</p><p>æ‰€ä»¥æœ€åˆæˆ‘æƒ³å®ç° å…‰ ç¤ºä¾‹æ—¶è¿™æ ·çš„ï¼š</p><ol><li>ä¸€ä¸ªä¸»åœºæ™¯</li><li>ä¸»åœºæ™¯å†…ï¼Œ2 è¡Œ 3 åˆ— åˆ†å¸ƒç€ 6 ä¸ªå­åœºæ™¯</li><li>è¿™ 6 ä¸ªå­åœºæ™¯é‡Œï¼Œåˆ†åˆ«åŒ…å«è¿™ 6 ä¸­åŸºç¡€å…‰æº</li></ol><p>æŒ‰ç…§è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ç¼–å†™äº†ä»£ç ï¼Œç»“æœæ¸²æŸ“åçš„åœºæ™¯ç”»é¢ï¼Œ<strong>å®Œå…¨ä¸æ˜¯æˆ‘é¢„æœŸçš„ï¼Œå®é™…ç»“æœæ˜¯ï¼š6 ä¸ªå­åœºæ™¯ä¸Šçš„ç¯å…‰ï¼Œå®Œå…¨æ··åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä¸æ˜¯ç›¸äº’ç‹¬ç«‹çš„</strong>ã€‚</p><p><strong>å½“æ—¶æˆ‘å®Œå…¨æ‡µçš„çŠ¶æ€ã€‚</strong></p><p>ç»è¿‡ 1 å¤©çš„è¿·æƒ‘ï¼ŒæŸ¥èµ„æ–™ã€QQäº¤æµç¾¤é‡Œè¯¢é—®å…¶ä»–äººï¼Œç›´è‡³æˆ‘æœ€ç»ˆæŸ¥é˜…äº† scene.add() å‡½æ•°æºç ï¼Œæ‰æ˜ç™½è¿‡æ¥ï¼Œæˆ‘é‚£ä¸ªç»“è®ºæ˜¯é”™è¯¯çš„ã€‚</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>sceneB.add(lightB)
</span></span><span style=display:flex><span>sceneA.add(sceneB)
</span></span></code></pre></div><p>ä»¥ä¸Šä»£ç æœ€ç»ˆçœŸæ­£çš„æ‰§è¡Œï¼Œä¼šå°† lightB æ·»åŠ åˆ° sceneA ä¸­ã€‚</p><p>å°¤å…¶å‡è®¾ lightB å…‰çš„ç±»å‹ä¸º ç¯å¢ƒå…‰ï¼Œè€Œç¯å¢ƒå…‰æ˜¯æ— å¤„ä¸åœ¨çš„ï¼Œé‚£ä¹ˆ lightB ä¼šå½±å“åˆ°æ‰€æœ‰ sceneA ä¸­çš„ç‰©ä½“ã€‚</p><p>è¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆ â€œ6 ä¸ªå­åœºæ™¯ä¸Šçš„ç¯å…‰ï¼Œå®Œå…¨æ··åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä¸æ˜¯ç›¸äº’ç‹¬ç«‹çš„â€ã€‚</p><p>æˆ–è®¸ä½ ä¼šç–‘æƒ‘ï¼Ÿä½ è¯´çš„è¿™äº›ä¸éƒ½å·²ç»åœ¨ <a href=https://github.com/puxiao/threejs-tutorial/blob/main/08%20Three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%9C%BA%E6%99%AF.md>Three.jsåŸºç¡€ä¹‹åœºæ™¯.md</a> ä¸€èŠ‚ä¸­è®²è¿‡äº†ï¼Œæ€ä¹ˆåˆè¯´äº†ä¸€éï¼Ÿ</p><p>äº‹å®æ˜¯æˆ‘åœ¨è¿›ä¸€æ­¥ç†è§£ åœºæ™¯ã€å…‰ ä¹‹åï¼Œåˆé‡æ–°ä¿®æ”¹ç¼–è¾‘äº† ä¹‹å‰ç« èŠ‚çš„é”™è¯¯è§‚ç‚¹ï¼Œæ‰€ä»¥ä½ çœ‹åˆ°çš„æ—¶å€™éƒ½æ‰æ˜¯æ­£ç¡®çš„ã€‚</p><p>æˆ‘æ˜¯ä¸€è¾¹å­¦ä¹ ï¼Œä¸€è¾¹æœ‰æ–°çš„çŸ¥è¯†é¢†æ‚Ÿï¼Œç„¶åå†ä¸æ–­å›å¤´ä¿®æ”¹ã€è¡¥å……ä¹‹å‰æ–‡ç« ä¸­çš„ç›¸å…³çŸ¥è¯†ç‚¹ã€‚</p><p><strong>æˆ‘å” å¨çš„è¿™äº›ç›®çš„ï¼Œå…¶å®æƒ³è¡¨è¾¾ 2 ä¸ªäº‹æƒ…ï¼š</strong></p><ol><li>å­¦ä¹  Three.js çš„ ç±»ã€å‡½æ•°ã€æ–¹æ³•ã€å±æ€§æ—¶å€™ï¼Œæœ€å¥½å»çœ‹ä¸€ä¸‹ three.js çš„æºç ï¼Œç»å¯¹ä¼šåŠ æ·±ä½ çš„ Three.js ç†è§£å’ŒåŠŸåŠ›ã€‚</li><li>å­¦ä¹  Three.js çœŸçš„æŒºéš¾ï¼Œéœ€è¦ä¸æ–­æ‰“ç ´å·²æœ‰è®¤çŸ¥ï¼Œè‹¥æœ‰äº›åœ°æ–¹æš‚æ—¶æ— æ³•ç†è§£ä¹Ÿæ²¡å…³ç³»ï¼Œåªè¦ç»§ç»­åŠ æ²¹ï¼Œç»ˆä¼šææ˜ç™½çš„ã€‚</li></ol><p>å” å¨ç»“æŸã€‚</p><p>æœ¬æ–‡å­¦ä¹ äº† å…‰(Light)ï¼ŒæŒ‰é“ç†æ¥ä¸‹æ¥åº”è¯¥å­¦ä¹  é˜´å½±(LightShadown)ï¼Œä½†æ˜¯ä¸‹èŠ‚æˆ‘ä»¬å…ˆå­¦ä¹  é•œå¤´(Camera)ï¼Œå­¦å®Œä¹‹åå†å›è¿‡å¤´å­¦ä¹  é˜´å½±ã€‚</p><blockquote><p>æ˜å¤©æ˜¯2020å¹´12æœˆ19æ—¥ï¼Œé˜¿é‡Œå·´å·´ å‰ç«¯ D2 æŠ€æœ¯åˆ†äº«å¤§ä¼šå¼€å¹•ï¼Œ19å·ã€20å· ä¸ºæœŸ 2 å¤©çš„å‰ç«¯æŠ€æœ¯ç›´æ’­ä¼šè®®åˆ†äº«ã€‚</p></blockquote><blockquote><p>èŠ± 98 å…ƒä¹°çš„ç›´æ’­è§‚çœ‹é—¨ç¥¨ï¼Œä¸èƒ½æµªè´¹äº†ï¼Œæ‰€ä»¥ï¼Œæ¢æ¢è„‘å­ï¼Œæœªæ¥ 2 å¤©æš‚åœ Three.js çš„å­¦ä¹ ã€‚</p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://bablvsj.github.io/tags/three.js/>Three.js</a></li></ul><nav class=paginav><a class=prev href=https://bablvsj.github.io/posts/threejs/10-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%BA%B9%E7%90%86/><span class=title>Â« Prev</span><br><span>10 Three.jsåŸºç¡€ä¹‹çº¹ç†</span></a>
<a class=next href=https://bablvsj.github.io/posts/threejs/12-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E9%95%9C%E5%A4%B4/><span class=title>Next Â»</span><br><span>12 Three.jsåŸºç¡€ä¹‹é•œå¤´</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bablvsj.github.io>Bablvsj's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div class=flex-c-d><a class=flex-d-c href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank><span>æœ¬ç«™ç”±</span><img width=60 src=/images/upyun.png>æä¾›CDNåŠ é€Ÿ/äº‘å­˜å‚¨æœåŠ¡</a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>