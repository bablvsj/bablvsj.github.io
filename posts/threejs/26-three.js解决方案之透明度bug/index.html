<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>26 Three.jsè§£å†³æ–¹æ¡ˆä¹‹é€æ˜åº¦bug | Bablvsj's Blog</title><meta name=keywords content="Three.js"><meta name=description content="26 Three.jsè§£å†³æ–¹æ¡ˆä¹‹é€æ˜åº¦bug - Bablvsj's Blog"><meta name=author content><link rel=canonical href=https://bablvsj.github.io/posts/threejs/26-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E9%80%8F%E6%98%8E%E5%BA%A6bug/><link crossorigin=anonymous href=/assets/css/stylesheet.b33b75c69bb2ec0d4accfeaad1d3ba05b272f180583f687c640a522d6492076f.css integrity="sha256-szt1xpuy7A1KzP6q0dO6BbJy8YBYP2h8ZApSLWSSB28=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://bablvsj.github.io/img/Q.gif><link rel=apple-touch-icon href=https://bablvsj.github.io/Q.gif><link rel=mask-icon href=https://bablvsj.github.io/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=stylesheet href=/css/syntax.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="26 Three.jsè§£å†³æ–¹æ¡ˆä¹‹é€æ˜åº¦bug"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://bablvsj.github.io/posts/threejs/26-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E9%80%8F%E6%98%8E%E5%BA%A6bug/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-19T17:11:35+08:00"><meta property="article:modified_time" content="2023-12-19T17:11:35+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="26 Three.jsè§£å†³æ–¹æ¡ˆä¹‹é€æ˜åº¦bug"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"æ–‡ç« ","item":"https://bablvsj.github.io/posts/"},{"@type":"ListItem","position":3,"name":"26 Three.jsè§£å†³æ–¹æ¡ˆä¹‹é€æ˜åº¦bug","item":"https://bablvsj.github.io/posts/threejs/26-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E9%80%8F%E6%98%8E%E5%BA%A6bug/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"26 Three.jsè§£å†³æ–¹æ¡ˆä¹‹é€æ˜åº¦bug","name":"26 Three.jsè§£å†³æ–¹æ¡ˆä¹‹é€æ˜åº¦bug","description":"","keywords":["Three.js"],"articleBody":"é€æ˜åº¦(transparency) åœ¨ Three.js ä¸­å¾ˆå®¹æ˜“å®ç°ï¼Œä½†æ˜¯é€æ˜åº¦åˆå­˜åœ¨ä¸€ä¸ª â€œBugâ€ï¼Œè§£å†³èµ·æ¥åˆæ¯”è¾ƒéš¾ã€‚\nè¯·æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„ â€œBugâ€ æ˜¯åŠ äº†å¼•å·çš„ï¼Œå…·ä½“åŸå› æˆ‘ä»¬ç¨åè®²è§£ã€‚\næˆ‘ä»¬å…ˆä»ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹å¼€å§‹ã€‚\nç¤ºä¾‹1ï¼šæ¸²æŸ“ä¸€ä¸ªåŠé€æ˜çš„ç«‹æ–¹ä½“ æ‰€æœ‰æè´¨çš„åŸºç±» Three.Material æœ‰ 2 ä¸ªå±æ€§å’Œè®¾ç½®é€æ˜åº¦æœ‰å…³ï¼š\ntransparentï¼šè®¾ç½®æè´¨æ˜¯å¦é€æ˜ opacityï¼šè®¾ç½®æè´¨é€æ˜åº¦ï¼Œå–å€¼èŒƒå›´ 0 - 1 ç”±äº Material æ˜¯æ‰€æœ‰æè´¨çš„åŸºç±»ï¼Œä¹Ÿå°±æ„å‘³ç€æ‰€æœ‰æè´¨éƒ½æ‹¥æœ‰ä¸Šè¿° 2 ä¸ªå±æ€§\nå‡è®¾æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªåŠé€æ˜çš„ç«‹æ–¹ä½“ï¼Œä»£ç å¦‚ä¸‹ï¼š\nconst geometry = new Three.BoxBufferGeometry(2, 2, 2) const material = new Three.MeshBasicMaterial({ color: 'red', transparent: true, opacity: 0.5 }) const cube = new Three.Mesh(geometry, material) scene.add(cube) ä¸Šé¢æˆ‘ä»¬åªæ˜¯ç»™æè´¨è®¾ç½®äº†ä¸€ä¸ª çº¢è‰²ï¼Œå½“æˆ‘ä»¬è¿è¡Œç¨‹åºçš„æ—¶å€™ä¼šå‘ç°ï¼šå•ç‹¬ä¸€ä¸ªåŠé€æ˜ç«‹æ–¹ä½“ï¼Œä¼¼ä¹çœ‹ä¸å‡ºä»»ä½•åŠé€æ˜çš„æ„æ€ã€‚\nå³ä½¿ç»™æè´¨æ·»åŠ  side: Three.DoubleSide\næˆ‘ä»¬éœ€è¦æ·»åŠ å¤šä¸ªåŠé€æ˜ç«‹æ–¹ä½“ï¼Œæ‰æ›´å®¹æ˜“çœ‹å‡ºæ¥å½¼æ­¤åŠé€æ˜ã€‚\næˆ‘ä»¬ç»§ç»­ä¿®æ”¹ç¤ºä¾‹ã€‚\næ¸²æŸ“8ä¸ªå°ç«‹æ–¹ä½“ æˆ‘ä»¬çš„æ¸²æŸ“ç›®æ ‡ï¼š\næ¸²æŸ“8ä¸ªä¸åŒé¢œè‰²ï¼Œé€æ˜åº¦éƒ½ä¸º 0.5 çš„ç«‹æ–¹ä½“\nè¿™ 8 ä¸ªç«‹æ–¹ä½“åˆ†å¸ƒåœ¨ä¸€ä¸ª 2 x 2 x 2 çš„ç©ºé—´ä¸­\nè¿™ç§åˆ†å¸ƒæ–¹å¼ï¼Œåœ¨é­”æ–¹ç©å…·ä¸­è¢«ç§°ä¸º â€œäºŒé˜¶é­”æ–¹â€\næ¯ä¸ªç«‹æ–¹ä½“ é‡Œå¤– 2 ä¸ªé¢éƒ½è¦è¿›è¡Œæ¸²æŸ“\nå…·ä½“å®ç°ä»£ç ï¼š\nconst colors = ['red', 'blue', 'darkorange', 'darkviolet', 'green', 'tomato', 'sienna', 'crimson'] const cube_size = 1 //ç«‹æ–¹ä½“å°ºå¯¸ const cube_margin = 0.6 //ç«‹æ–¹ä½“é—´è·ç©ºéš™ colors.forEach((color, index) =\u003e { const geometry = new Three.BoxBufferGeometry(cube_size, cube_size, cube_size) const material = new Three.MeshPhongMaterial({ color, transparent: true, opacity: 0.5, side: Three.DoubleSide }) const cube = new Three.Mesh(geometry, material) cube.position.x = (index % 2 ? 1 : -1) * cube_size * cube_margin cube.position.y = (Math.floor(index / 4) ? -1 : 1) * cube_size * cube_margin cube.position.z = ((index % 4) \u003e= 2) ? 1 : -1 * cube_size * cube_margin / 2 scene.add(cube) }) åœ¨ç›®å‰æœ€æ–°çš„ Three.js r127 ç‰ˆæœ¬ä¸­ï¼Œå¯¹äºé¢„ç½®é¢œè‰²çš„å•è¯ï¼Œåªæ”¯æŒå…¨å°å†™ï¼Œä¾‹å¦‚ï¼š\nçº¢è‰² åªå¯ä»¥å†™ redï¼Œä¸å¯ä»¥å†™æˆ Red å†æˆ–è€… æš—æ¡”è‰² åªå¯ä»¥å†™ darkorangeï¼Œä¸å¯ä»¥å†™æˆDarkOrange è¿™æ˜¯å› ä¸ºåœ¨ Color æºç ä¸­ï¼Œè®°å½•å†…ç½®é¢œè‰²å€¼çš„å¯¹è±¡ key éƒ½æ˜¯å°å†™ï¼Œæˆ‘å·²é’ˆå¯¹è¿™ä¸ªé—®é¢˜æäº¤äº†è‡ªå·±çš„ prï¼š\nhttps://github.com/mrdoob/three.js/pull/21687\næˆ‘ä¿®æ”¹äº†ä¸€ç‚¹ä»£ç ï¼Œè®©å–å€¼æ—¶å¯¹é¢œè‰²å€¼çš„å­—ç¬¦ä¸²æ‰§è¡Œ .toLowerCase()ï¼Œè¿™æ ·å³ä½¿é¢œè‰²å€¼å­—ç¬¦ä¸²æœ‰å¤§å†™å¯ä»¥æœ€ç»ˆå®é™…è¢«è½¬åŒ–ä¸ºå°å†™ã€‚\nå®é™…è¿è¡Œåï¼Œå°±ä¼šçœ‹åˆ° 8 ä¸ªåŠé€æ˜çš„å°ç«‹æ–¹ä½“ã€‚é€šè¿‡ OrbitControls æ—‹è½¬è§†è§’ï¼Œçœ‹ç€æ„Ÿè§‰æŒºå¥½çš„å‘€ã€‚\nå½“ä½ å°è¯•ä¸æ–­å˜æ¢è§†è§’æŸ¥çœ‹ç«‹æ–¹ä½“æ—¶ï¼Œåœ¨æŸäº›ç‰¹æ®Šçš„è§†è§’ä¸‹ï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°ç«‹æ–¹ä½“å·¦ä¾§åè¡¨é¢ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸæœ¬ç«‹æ–¹ä½“å·¦ä¾§åè¡¨é¢åº”è¯¥ä¹Ÿè¢«æ¸²æŸ“ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶æœªè¢«æ¸²æŸ“ã€‚\nå¦‚æœä½ å®åœ¨æ˜¯æ²¡æœ‰çœ‹å‡ºæ¥ä»€ä¹ˆé—®é¢˜ï¼Œæš‚æ—¶ç›¸ä¿¡æˆ‘ä¸€ä¸‹ï¼Œå°±å¥½åƒä½ å·²çœŸçš„å‘ç°äº†é‚£æ ·ã€‚\nä¸‹é¢å¬ä¸€ä¸‹å…³äºå‡ºç°è¿™ä¸ª â€œbugâ€ çš„è§£é‡Šã€‚\nThree.jsç»˜åˆ¶ 3D å¯¹è±¡çš„æ–¹å¼ ä¸Šé¢æåˆ°çš„æ¸²æŸ“ â€œBugâ€ï¼Œæ˜¯ç”±äº Three.js ç»˜åˆ¶ 3D å¯¹è±¡çš„æ–¹å¼é€ æˆçš„ã€‚\nå¯¹äºæ¯ä¸€ä¸ªå‡ ä½•å›¾å½¢ï¼Œæ¯ä¸ªä¸‰è§’å½¢ä¸€æ¬¡åªç»˜åˆ¶ä¸€ä¸ªã€‚\nç«‹æ–¹ä½“çš„ 1 ä¸ªé¢æ˜¯ä¸€ä¸ª æ­£æ–¹å½¢ï¼Œè€Œè¿™ä¸ªæ­£æ–¹å½¢æ˜¯ç”± 2 ä¸ªä¸‰è§’å½¢æ„æˆçš„ã€‚\nåœ¨ç»˜åˆ¶ 1 ä¸ªé¢(æ­£æ–¹å½¢)ï¼ŒThree.js ä¼šå…ˆåç»˜åˆ¶ 2 ä¸ªä¸‰è§’å½¢ï¼Œæœ€ç»ˆæ‹¼æ¥æˆ 1 ä¸ªæ­£æ–¹å½¢ã€‚\næ¯æ¬¡ç»˜åˆ¶ä¸€ä¸ªä¸‰è§’å½¢æ—¶ï¼Œä¼šè®°å½• 2 ä¸ªäº‹æƒ…ï¼š\nä¸‰è§’å½¢çš„é¢œè‰²\nä¸‰è§’å½¢çš„åƒç´ æ·±åº¦\nåƒç´ æ·±åº¦æ˜¯æŒ‡å­˜å‚¨æ¯ä¸ªåƒç´ æ‰€ç”¨çš„ä½æ•°ï¼Œç”¨æ¥åº¦é‡å›¾åƒçš„åˆ†è¾¨ç‡ã€‚\nå½“ç»˜åˆ¶ä¸‹ä¸€ä¸ªä¸‰è§’å½¢æ—¶ï¼Œå¯¹äºæ¯ä¸€ä¸ªåƒç´ ï¼Œå¦‚æœæ·±åº¦æ¯”ä¹‹å‰è®°å½•çš„æ·±åº¦è¿˜è¦æ·±ï¼Œåˆ™ä¸ä¼šç»˜åˆ¶ä»»ä½•åƒç´ \nè¿™å…¶å®æ˜¯ Three.js ç»˜åˆ¶ç‰©ä½“æ—¶é‡‡å–çš„ä¸€ç§èŠ‚çœæ€§èƒ½çš„ç­–ç•¥\nè¿™å¥—ç­–ç•¥å¯¹äºä¸é€æ˜çš„ç‰©ä½“æ¥è¯´éå¸¸æœ‰ç”¨ï¼Œä½†æ˜¯å¯¹äºé€æ˜çš„ç‰©ä½“å´ä¸èµ·ä½œç”¨ã€‚\nä¸€ä¸ªç«‹æ–¹ä½“æœ‰ 6 ä¸ªé¢ï¼Œæ¯ä¸ªé¢ 2 ä¸ªä¸‰è§’å½¢ï¼Œä¹Ÿå°±æ„å‘³ç€ä¸€ä¸ªç«‹æ–¹ä½“éœ€è¦ç»˜åˆ¶ 12 ä¸ªä¸‰è§’å½¢ã€‚\nè€Œè¿™ 12 ä¸ªä¸‰è§’å½¢ç©¶ç«Ÿå…ˆç»˜åˆ¶å“ªä¸ªï¼Œä»–ä»¬ç»˜åˆ¶çš„é¡ºåºæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\nç­”ï¼šç»˜åˆ¶é¡ºåºå–å†³äºæˆ‘ä»¬çš„è§†è§’ï¼Œè¶Šæ¥è¿‘ç›¸æœºçš„ä¸‰è§’å½¢è¶Šä¼˜å…ˆè¢«ç»˜åˆ¶ã€‚\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸Šé¢æåˆ°çš„ç»˜åˆ¶ bug åªæœ‰åœ¨æŸäº›ç‰¹å®šè§’åº¦ä¸‹æ‰ä¼šå‡ºç°çš„åŸå› ã€‚\nè¶Šé è¿‘ç›¸æœºçš„ä¸‰è§’å½¢è¶Šå…ˆè¢«ç»˜åˆ¶ï¼Œè¿™ä¹Ÿæ„å‘³ç€åœ¨æŸäº›è§’åº¦ä¸‹ï¼Œè¿œç¦»æ‘„åƒæœºçš„æŸä¸ªé¢(ç«‹æ–¹ä½“èƒŒé¢æˆ–ä¾§èƒŒé¢)æœ‰å¯èƒ½ä¸ä¼šè¢«ç»˜åˆ¶ã€‚\nè¿™ç§æƒ…å†µä¸ä»…ä¼šå‡ºç°åœ¨ç«‹æ–¹ä½“èº«ä¸Šï¼Œçƒä½“ä¸Šä¹Ÿä¼šå‡ºç°ã€‚\né’ˆå¯¹ä»¥ä¸Šæƒ…å†µï¼Œæœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆï¼š\nå°†æ¯ä¸ªç«‹æ–¹ä½“æ·»åŠ  2 æ¬¡åˆ°åœºæ™¯ä¸­ ç¬¬ 1 æ¬¡æ·»åŠ çš„ç«‹æ–¹ä½“è®¾ç½®åªè®©æ¸²æŸ“ èƒŒé¢(Three.BackSide) ç¬¬ 2 æ¬¡æ·»åŠ çš„ç«‹æ–¹ä½“è®¾ç½®åªè®©æ¸²æŸ“ å‰é¢(Three.FrontSide) è¿™æ ·ä¸€ç•ªæ“ä½œè¿‡åï¼Œç¡®ä¿ Three.js å¯ä»¥å°†æ¯ä¸ªç«‹æ–¹ä½“çš„å‰é¢ã€åé¢éƒ½ä¼šæ¸²æŸ“ï¼Œæ‹¼åˆä¸€ä¸‹ 2 æ¬¡çš„æ¸²æŸ“ç»“æœï¼Œå°† â€œæ­£ç¡®çš„â€ ç»“æœæ¸²æŸ“å‡ºæ¥ã€‚\nè¡¥å……è¯´æ˜\nä¸Šé¢çš„è§£å†³æ–¹æ¡ˆå®é™…ä¸Šéœ€è¦ç»˜åˆ¶ 2 æ¬¡ï¼Œè¿™ä¹Ÿè®¸ä¼šé€ æˆæ€§èƒ½ä¸Šçš„æµªè´¹ã€‚ å¦‚æœä½ å¹¶ä¸æ˜¯ç‰¹åˆ«åœ¨ä¹é‚£ä¸€ç‚¹ç‚¹æ¸²æŸ“ â€œBugâ€ï¼Œä½ å®Œå…¨å¯ä»¥å¿½è§†å®ƒã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å†é€šè¿‡å¦å¤–ä¸€ä¸ªç¤ºä¾‹ï¼Œè®²è§£å¦å¤–ä¸€ç§æœ‰é’ˆå¯¹æ€§çš„è§£å†³æ–¹æ¡ˆã€‚\nç»˜åˆ¶2ä¸ªä¸­å¿ƒäº¤å‰çš„å¹³é¢æ­£æ–¹å½¢ æˆ‘ä»¬çš„ç¤ºä¾‹ç›®æ ‡æ˜¯ï¼š\nç»˜åˆ¶ 2 ä¸ªå¹³é¢çš„æ­£æ–¹å½¢\nåˆ›å»ºå¹³é¢ åœ¨ Three.js ä¸­ä½¿ç”¨çš„æ˜¯ Three.PlaneBufferGeometry\nç»™æ¯ä¸ªå¹³é¢æ·»åŠ ä¸€ä¸ªé¢œè‰²å’Œçº¹ç†è´´å›¾ï¼Œä¸¤é¢éƒ½æ¸²æŸ“ï¼Œå¹¶è®¾ç½®æ­£æ–¹å½¢å¹³é¢é€æ˜åº¦ä¸º 0.5\nè´´å›¾æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ç½‘ä¸Šçš„ 2 å¼ å›¾ç‰‡èµ„æº\nå›¾ç‰‡éƒ½æ˜¯ç”±èƒŒæ™¯è‰²çš„ï¼Œå¹¶éèƒŒæ™¯é€æ˜çš„ PNG\nè®©è¿™ 2 ä¸ªå¹³é¢å½¢æˆ åå­—äº¤å‰ çš„çŠ¶æ€\nä¹Ÿå°±æ˜¯è¯´è®©å…¶ä¸­ä¸€ä¸ªå¹³é¢çš„ y è½´æ—‹è½¬ 180åº¦\nå®ç°çš„ä»£ç ï¼š\nconst planeDataArr = [ { color: 'red', ratation: 0, imgsrc: 'https://threejsfundamentals.org/threejs/resources/images/happyface.png' }, { color: 'yellow', ratation: Math.PI * 0.5, imgsrc: 'https://threejsfundamentals.org/threejs/resources/images/hmmmface.png' } ] planeDataArr.forEach((value) =\u003e { const geometry = new Three.PlaneBufferGeometry(2, 2) const textureLoader = new TextureLoader() const material = new Three.MeshBasicMaterial({ color: value.color, map: textureLoader.load(value.imgsrc), opacity: 0.5, transparent: true, side:Three.DoubleSide }) const plane = new Three.Mesh(geometry, material) plane.rotation.y = value.ratation scene.add(plane) }) è¿™æ¬¡ï¼Œæˆ‘ä»¬å°†å¾ˆå®¹æ˜“çœ‹åˆ°ï¼Œå½“çº¢è‰²å¹³é¢ä¸€ä¾§å®Œå…¨è¦†ç›–ä½é»„è‰²å¹³é¢ä¸€ä¾§æ—¶ï¼Œä¼šå®Œå…¨çœ‹ä¸åˆ°é»„è‰²å¹³é¢é‚£ä¸€ä¾§ã€‚\nå®é™…è¿è¡Œæ•ˆæœæˆ‘å°±ä¸è´´å›¾äº†ï¼Œä½ å¯ä»¥å°†ä¸Šé¢ä»£ç å®é™…è¿è¡Œä¸€ä¸‹ã€‚\nä½ å°±å‡è£…æ­¤åˆ»ä½ çœ‹åˆ°äº†ã€‚\nç”¨æˆ‘ä»¬ä¸Šé¢è®²è¿‡çš„ç†è®ºå¯è§£é‡Šè¿™ä¸ªç°è±¡ï¼šå³ çº¢è‰²å¹³é¢ä¸€ä¾§é¢œè‰²æ·±åº¦å¤§äºé»„è‰²å¹³é¢ä¸€ä¾§ï¼Œå½“å®Œå…¨è¦†ç›–ä½ä¹‹åé»„è‰²å¹³é¢é‚£ä¸€ä¾§å°±ä¸ä¼šå†è¿›è¡Œæ¸²æŸ“ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±çœ‹ä¸åˆ°äº†ã€‚\nè§£å†³æ–¹æ¡ˆï¼šå°†ä¸Šé¢ 2 ä¸ªå¹³é¢æ‹†åˆ†æˆ 4 ä¸ªå¹³é¢ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æ¯ä¸ªå¹³é¢éƒ½ä¼šè¢«æ¸²æŸ“ã€‚\nç”±äºæˆ‘ä»¬è¿™ä¸ªåœºæ™¯ 2 ä¸ªå¹³é¢åå­—äº¤å‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ç›´æ¥åˆ›å»º 4 ä¸ªå°çš„å¹³é¢ï¼Œç„¶åå°†è¿™ 4 ä¸ªå°å¹³é¢ç»„åˆæˆ â€œ2 ä¸ªåå­—ç›¸äº¤çš„å¹³é¢â€ã€‚\nå…·ä½“å®ç°çš„æ–¹å¼æ˜¯ï¼š\nå°†åŸæœ¬ è¾ƒå¤§çš„ 1 ä¸ªå¹³é¢æ‹†åˆ†æˆ 2 ä¸ªå°å¹³é¢\nè®¾ç½®è¿™ 2 ä¸ªå°å¹³é¢çš„çº¹ç†è´´å›¾åç§»ï¼Œå„è‡ªå ä¸€åŠ\nè¿™æ ·å¯ä»¥æœ€ç»ˆè®© 2 ä¸ªå°å¹³é¢è´´åˆæˆ 1 ä¸ªå®Œæ•´çš„å¹³é¢(çº¹ç†)\nä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬è®¡ç®—æ—‹è½¬ï¼Œå¥½è®©ä»–ä»¬å½¢æˆåå­—äº¤å‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°† æ¯ç»„å°å¹³é¢æ”¾ç½®åœ¨åŒä¸€ä¸ªç©ºé—´ä¸­\nè¿™éœ€è¦ä½¿ç”¨åˆ° Three.Object3D\nå®é™…ä»£ç ï¼š\nconst planeDataArr = [ { color: 'red', ratation: 0, imgsrc: 'https://threejsfundamentals.org/threejs/resources/images/happyface.png' }, { color: 'yellow', ratation: Math.PI * 0.5, imgsrc: 'https://threejsfundamentals.org/threejs/resources/images/hmmmface.png' } ] planeDataArr.forEach((value) =\u003e { const base = new Three.Object3D() base.rotation.y = value.ratation scene.add(base) const plane_size = 2 const half_size = plane_size / 2 const geometry = new Three.PlaneBufferGeometry(half_size, plane_size) const arr = [-1, 1] arr.forEach((x) =\u003e { const textureLoader = new TextureLoader() const texture = textureLoader.load(value.imgsrc) texture.offset.x = x \u003c 1 ? 0 : 0.5 texture.repeat.x = 0.5 const material = new Three.MeshBasicMaterial({ color: value.color, map: texture, transparent: true, opacity: 0.5, side: Three.DoubleSide }) const plane = new Three.Mesh(geometry, material) plane.position.x = x * half_size / 2 base.add(plane) }); }) å‡è®¾æˆ‘ä»¬ç›®æ ‡å¹³é¢å®½é«˜å‡ä¸º 2ï¼Œé‚£ä¹ˆï¼š\næˆ‘ä»¬å°†è¯¥ç›®æ ‡å¹³é¢æ‹†åˆ†æˆ 2 ä¸ª å®½ 1ã€é«˜ 2 çš„å¹³é¢ è·å–å¹¶è®¾ç½®çº¹ç†è´´å›¾ï¼Œå¹¶åˆ†åˆ«è®¾ç½®çº¹ç†çš„ offset.x ã€repeat.x å„å  ä¸€åŠï¼Œä¹Ÿå°±æ˜¯ 0.5 æˆ‘ä»¬çŸ¥é“æ‹†åˆ†å‡ºçš„ 2 ä¸ªå°å¹³é¢ä»–ä»¬ x è½´ç›¸å·® 1 ä¸ªå°å¹³é¢çš„å®½åº¦ï¼Œç”±äºæˆ‘ä»¬è®¾ç½®çš„å†…éƒ¨å¾ªç¯æ•°ç»„ä¸º [-1,1]ï¼Œæ‰€ä»¥ 2 ä¸ªå°å¹³é¢çš„ x å€¼åº”è¯¥æ˜¯ æ­£è´Ÿå®½åº¦ä¸€åŠçš„ä¸€åŠã€‚ è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬å†è¿è¡Œå°±ä¼šå‘ç°ï¼Œæ— è®ºä»»ä½•è§†è§’ä¸‹ï¼Œçº¢è‰²å¹³é¢ä¸å†ä¼šè¿™è¯¥é»„è‰²å¹³é¢äº†ã€‚\nè¿™æ˜¯ç¬¬ 2 ç§è§£å†³é€æ˜ â€œbugâ€ çš„æ–¹æ¡ˆï¼šå°†å¯¹è±¡è¿›è¡Œæ‹†åˆ†\nä½†æ˜¯è¯·æ³¨æ„ï¼Œè¯¥è§£å†³æ–¹å¼åªé€‚åˆé‚£äº›ç®€å•ï¼Œä¸”ä½ç½®ç›¸å¯¹å›ºå®šçš„ 3D å¯¹è±¡ã€‚\nè‹¥ç‰©ä½“æœ¬èº«å°±æ¯”è¾ƒå¤æ‚ï¼Œé¢æ¯”è¾ƒå¤šï¼Œè¿˜è¦å†æ‹†åˆ†ï¼Œé‚£ä¹ˆå°±å¤ªæ¶ˆè€—æ¸²æŸ“æ€§èƒ½\nå¹¶ä¸”ä½ç½®å¿…é¡»ç›¸å¯¹å›ºå®šï¼Œè‹¥ä¸å›ºå®šä¼šå¢åŠ æˆ‘ä»¬æ‹¼æ¥çš„éš¾åº¦\næ¥ä¸‹æ¥è®²è§£ç¬¬ 3 ç§è§£å†³æ–¹æ¡ˆã€‚\nå¯ç”¨alphaTestæ¥é¿å…é®æŒ¡é—®é¢˜ é¦–å…ˆæˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¸Šé¢çš„ä¾‹å­ï¼Œå½“æ—¶ç¤ºä¾‹ä¸­ 2 ä¸ªå¹³é¢çš„çº¹ç†è´´å›¾èƒŒæ™¯æ˜¯ä¸é€æ˜çš„ã€‚\né‚£æˆ‘ä»¬å¯ä»¥å°è¯•å¦å¤– 2 ä¸ªå›¾ç‰‡è´´å›¾ï¼Œä»–ä»¬æ˜¯èƒŒæ™¯é€æ˜çš„ PNG å›¾ç‰‡ã€‚\næˆ‘ä»¬è¦ä½¿ç”¨æè´¨(Three.Material) çš„ä¸€ä¸ªå±æ€§ .alphaTestã€‚\n.alphaTestå±æ€§ä»‹ç»\n.alphaTest æ˜¯ä¸€ä¸ªé€æ˜åº¦æ£€æµ‹å€¼ï¼Œå€¼å¾—ç±»å‹æ˜¯ Numberï¼Œå–å€¼èŒƒå›´ä¸º 0 - 1ã€‚\nè‹¥é€æ˜åº¦ä½äºè¯¥å€¼ï¼Œåˆ™ä¸ä¼šè¿›è¡Œæ¸²æŸ“ã€‚\nåä¹‹ï¼Œåªæœ‰æŸä¸ªç‚¹é€æ˜åº¦é«˜äºè¯¥å€¼çš„æ‰ä¼šè¿›è¡Œæ¸²æŸ“\n.alphaTest é»˜è®¤å€¼ä¸º 0ã€‚\nä¹Ÿå°±æ˜¯è¯´é»˜è®¤æƒ…å†µä¸‹å³ä½¿é€æ˜åº¦ä¸º 0 ä¹Ÿä¼šè¿›è¡Œæ¸²æŸ“\nå‡è®¾æˆ‘ä»¬ç»™æè´¨è®¾ç½®æœ‰ colorï¼Œé‚£ä¹ˆè‚¯å®šå°±ä¼šæ¸²æŸ“å‡ºå†…å®¹\næˆ‘ä»¬åœ¨æœ€åˆ 2 ä¸ªå¹³é¢çš„ä»£ç åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ã€‚\nä¿®æ”¹çº¹ç†è´´å›¾èµ„æºï¼Œè¿™æ¬¡ä½¿ç”¨èƒŒæ™¯é€æ˜çš„ PNG å›¾ç‰‡ æè´¨ä¸å†è®¾ç½® .opacity å±æ€§ï¼Œæ”¹è®¾ç½® .alphaTest å±æ€§ ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š\nconst planeDataArr = [ { color: 'red', ratation: 0, imgsrc: 'https://threejsfundamentals.org/threejs/resources/images/tree-01.png' }, { color: 'yellow', ratation: Math.PI * 0.5, imgsrc: 'https://threejsfundamentals.org/threejs/resources/images/tree-02.png' } ] planeDataArr.forEach((value) =\u003e { const geometry = new Three.PlaneBufferGeometry(2, 2) const textureLoader = new TextureLoader() const material = new Three.MeshBasicMaterial({ color: value.color, map: textureLoader.load(value.imgsrc), alphaTest: 0.5, transparent: true, side:Three.DoubleSide }) const plane = new Three.Mesh(geometry, material) plane.rotation.y = value.ratation scene.add(plane) }) è¯·æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬å–äº†ä¸€ä¸ªé€æ˜åº¦çš„ä¸­é—´å€¼ï¼Œå°† .alphaTest å±æ€§å€¼è®¾ç½®ä¸º 0.5ã€‚\nä½ å¯ä»¥å°è¯•å°† .alphaTest åˆ†åˆ«è®¾ç½®ä¸º 0.2 æˆ– 0.8 çœ‹çœ‹ç»“æœä¼šæœ‰ä»€ä¹ˆå˜åŒ–ã€‚\næœ€ç»ˆè¾¹ç¼˜æ¸…æ™°åº¦å–å†³äºè´´å›¾å›¾ç‰‡ä¸­æŠ å›¾çš„ç²¾ç»†ç¨‹åº¦ã€‚è‹¥è¾¹ç¼˜è¶Šä¸æ¸…æ™°(ä¹Ÿå°±æ˜¯è¶Šæ¨¡ç³Š)ï¼Œæœ€ç»ˆå‘ˆç°å‡ºçš„ç™½è¾¹ä¼šè¶Šä¸¥é‡ã€‚\nå®é™…è¿è¡Œåå°±ä¼šå‘ç°ï¼Œ2 æ£µä¸åŒé¢œè‰²çš„æ ‘æœ¨ï¼Œå½¼æ­¤åå­—äº¤å‰ï¼Œå¯ä»¥é€è¿‡å‰é¢æ ‘çš„æå¶çœ‹åˆ°å¦å¤–ä¸€é¢—æ ‘ã€‚\næœ¬æ–‡å°èŠ‚ æˆ‘ä»¬è®²è§£äº†ä¸ºä»€ä¹ˆä¼šåœ¨æŸäº›è§†è§’ä¸‹ï¼ŒæŸäº›åŠé€æ˜çš„ç‰©ä½“ä¸ªåˆ«åœ°æ–¹ä¸‰è§’é¢ä¸ä¼šè¢«æ¸²æŸ“çš„åŸå› ã€‚\né€šè¿‡å‡ ä¸ªç¤ºä¾‹ï¼Œè®²è§£äº† 3 ç§è§£å†³æ–¹æ¡ˆï¼š\nå°†ç‰©ä½“æ·»åŠ  2 ä»½ï¼Œ1ä»½è´Ÿè´£æ¸²æŸ“å‰é¢ï¼Œå¦å¤–ä¸€ä»½è´Ÿè´£æ¸²æŸ“åé¢\nç¼ºç‚¹ï¼šå¢åŠ æ¸²æŸ“å·¥ä½œé‡\nå°†ç‰©ä½“(æˆ–å¹³é¢)è¿›è¡Œæ‹†åˆ†ï¼Œå·²ç¡®ä¿æ¯ 1 ä»½å‡ä¼šæœ‰æœºä¼šè¢«æ¸²æŸ“\nç¼ºç‚¹ï¼šåªé€‚åˆç®€å•çš„ç‰©ä½“ï¼Œä¸”ä½ç½®å›ºå®šå®¹æ˜“æ‹¼å‡‘\né€šè¿‡è®¾ç½® .alphaTestï¼Œä»¥å®ç°é€æ˜æ¸²æŸ“\nç¼ºç‚¹ï¼šè‹¥è´´å›¾æŠ å›¾ä¸å¤Ÿç²¾ç»†ï¼Œå®¹æ˜“å‡ºç°ç™½è¾¹\nå°±åƒä¸Šé¢æˆ‘ä»¬æåˆ°çš„ï¼Œæ¯ä¸€ç§è§£å†³æ–¹æ¡ˆéƒ½æœ‰å„è‡ªçš„ä½¿ç”¨åœºæ™¯å’Œç¼ºç‚¹ã€‚\næˆ‘ä»¬ä»Šååœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œä¸€å®šè¦æ ¹æ®å®é™…æƒ…å†µæ¥ä½œå‡ºé€‰æ‹©ï¼Œçœ‹ä½¿ç”¨å“ªç§æ–¹æ¡ˆã€‚\nè¯´ç™½äº†ï¼Œæ— éå°±æ˜¯åœ¨æ€§èƒ½ã€å¤æ‚åº¦ã€ç²¾ç»†åŒ–æ–¹é¢è¿›è¡Œå–èˆï¼Œæœ€ç»ˆæ‰¾å‡ºåˆé€‚çš„æ–¹æ¡ˆã€‚\nä½ å¯èƒ½ä¼šæ³¨æ„åˆ°æœ¬ç« èŠ‚æˆ‘å¹¶æ²¡æœ‰è´´å‡ºå®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œè€Œä»…ä»…è´´å‡ºäº†æ ¸å¿ƒçš„ä»£ç ã€‚\næˆ‘æ˜¯è¿™æ ·è®¤ä¸ºçš„ï¼Œå¦‚æœåˆ°äº†ä»Šå¤©ä½ ä¾ç„¶æ— æ³•è‡ªå·±å†™å‡ºå®Œæ•´çš„ä»£ç ï¼Œè¿˜éœ€è¦é å¤åˆ¶æˆ‘å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œé‚£ä½ å¹²è„†åˆ«å­¦ Three.jsäº†ï¼Œæ”¾å¼ƒå§ã€‚\nè‡³æ­¤ï¼Œæœ¬ç« ç»“æŸã€‚\nç›®å‰æˆ‘ä»¬æ‰€æœ‰çš„ç¤ºä¾‹éƒ½æ˜¯åŸºäº 1 ä¸ª ç”»å¸ƒ(canvas) å’Œ 1 ä¸ª é•œå¤´(camera)ï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬è®²è§£åŒä¸€ä¸ªç½‘é¡µä¸­æ¸²æŸ“å¤šä¸ª ç”»å¸ƒ å’Œå¤šä¸ªé•œå¤´ã€‚\n","wordCount":"3723","inLanguage":"en","datePublished":"2023-12-19T17:11:35+08:00","dateModified":"2023-12-19T17:11:35+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://bablvsj.github.io/posts/threejs/26-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E9%80%8F%E6%98%8E%E5%BA%A6bug/"},"publisher":{"@type":"Organization","name":"Bablvsj's Blog","logo":{"@type":"ImageObject","url":"https://bablvsj.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bablvsj.github.io accesskey=h title="Bablvsj's Blog (Alt + H)">Bablvsj's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bablvsj.github.io/ title=ä¸»é¡µ><span>ä¸»é¡µ</span></a></li><li><a href=https://bablvsj.github.io/archives/ title=æ—¶é—´è½´><span>æ—¶é—´è½´</span></a></li><li><a href=https://bablvsj.github.io/tags title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://bablvsj.github.io/about title=å…³äº><span>å…³äº</span></a></li><li><a href=https://bablvsj.github.io/search title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>26 Three.jsè§£å†³æ–¹æ¡ˆä¹‹é€æ˜åº¦bug</h1><div class=post-meta><div class=post-tags-meta><a href=https://bablvsj.github.io/tags/three.js/>Three.js</a></div>8 min&nbsp;Â·&nbsp;<span title='2023-12-19 17:11:35 +0800 +0800'>2023/12/19</span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><div class=inner><ul><li><a href=#%e7%a4%ba%e4%be%8b1%e6%b8%b2%e6%9f%93%e4%b8%80%e4%b8%aa%e5%8d%8a%e9%80%8f%e6%98%8e%e7%9a%84%e7%ab%8b%e6%96%b9%e4%bd%93 aria-label=ç¤ºä¾‹1ï¼šæ¸²æŸ“ä¸€ä¸ªåŠé€æ˜çš„ç«‹æ–¹ä½“>ç¤ºä¾‹1ï¼šæ¸²æŸ“ä¸€ä¸ªåŠé€æ˜çš„ç«‹æ–¹ä½“</a></li><li><a href=#%e6%b8%b2%e6%9f%938%e4%b8%aa%e5%b0%8f%e7%ab%8b%e6%96%b9%e4%bd%93 aria-label=æ¸²æŸ“8ä¸ªå°ç«‹æ–¹ä½“>æ¸²æŸ“8ä¸ªå°ç«‹æ–¹ä½“</a></li><li><a href=#threejs%e7%bb%98%e5%88%b6-3d-%e5%af%b9%e8%b1%a1%e7%9a%84%e6%96%b9%e5%bc%8f aria-label="Three.jsç»˜åˆ¶ 3D å¯¹è±¡çš„æ–¹å¼">Three.jsç»˜åˆ¶ 3D å¯¹è±¡çš„æ–¹å¼</a></li><li><a href=#%e7%bb%98%e5%88%b62%e4%b8%aa%e4%b8%ad%e5%bf%83%e4%ba%a4%e5%8f%89%e7%9a%84%e5%b9%b3%e9%9d%a2%e6%ad%a3%e6%96%b9%e5%bd%a2 aria-label=ç»˜åˆ¶2ä¸ªä¸­å¿ƒäº¤å‰çš„å¹³é¢æ­£æ–¹å½¢>ç»˜åˆ¶2ä¸ªä¸­å¿ƒäº¤å‰çš„å¹³é¢æ­£æ–¹å½¢</a></li><li><a href=#%e5%90%af%e7%94%a8alphatest%e6%9d%a5%e9%81%bf%e5%85%8d%e9%81%ae%e6%8c%a1%e9%97%ae%e9%a2%98 aria-label=å¯ç”¨alphaTestæ¥é¿å…é®æŒ¡é—®é¢˜>å¯ç”¨alphaTestæ¥é¿å…é®æŒ¡é—®é¢˜</a></li><li><a href=#%e6%9c%ac%e6%96%87%e5%b0%8f%e8%8a%82 aria-label=æœ¬æ–‡å°èŠ‚>æœ¬æ–‡å°èŠ‚</a></li></ul></div></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>é€æ˜åº¦(transparency) åœ¨ Three.js ä¸­å¾ˆå®¹æ˜“å®ç°ï¼Œä½†æ˜¯é€æ˜åº¦åˆå­˜åœ¨ä¸€ä¸ª &ldquo;Bug&rdquo;ï¼Œè§£å†³èµ·æ¥åˆæ¯”è¾ƒéš¾ã€‚</p><blockquote><p>è¯·æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„ â€œBugâ€ æ˜¯åŠ äº†å¼•å·çš„ï¼Œå…·ä½“åŸå› æˆ‘ä»¬ç¨åè®²è§£ã€‚</p></blockquote><br><p>æˆ‘ä»¬å…ˆä»ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹å¼€å§‹ã€‚</p><h3 id=ç¤ºä¾‹1æ¸²æŸ“ä¸€ä¸ªåŠé€æ˜çš„ç«‹æ–¹ä½“>ç¤ºä¾‹1ï¼šæ¸²æŸ“ä¸€ä¸ªåŠé€æ˜çš„ç«‹æ–¹ä½“<a hidden class=anchor aria-hidden=true href=#ç¤ºä¾‹1æ¸²æŸ“ä¸€ä¸ªåŠé€æ˜çš„ç«‹æ–¹ä½“>#</a></h3><p>æ‰€æœ‰æè´¨çš„åŸºç±» Three.Material æœ‰ 2 ä¸ªå±æ€§å’Œè®¾ç½®é€æ˜åº¦æœ‰å…³ï¼š</p><ol><li>transparentï¼šè®¾ç½®æè´¨æ˜¯å¦é€æ˜</li><li>opacityï¼šè®¾ç½®æè´¨é€æ˜åº¦ï¼Œå–å€¼èŒƒå›´ 0 - 1</li></ol><blockquote><p>ç”±äº Material æ˜¯æ‰€æœ‰æè´¨çš„åŸºç±»ï¼Œä¹Ÿå°±æ„å‘³ç€æ‰€æœ‰æè´¨éƒ½æ‹¥æœ‰ä¸Šè¿° 2 ä¸ªå±æ€§</p></blockquote><br><p>å‡è®¾æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªåŠé€æ˜çš„ç«‹æ–¹ä½“ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const geometry = new Three.BoxBufferGeometry(2, 2, 2)
</span></span><span style=display:flex><span>const material = new Three.MeshBasicMaterial({
</span></span><span style=display:flex><span>    color: &#39;red&#39;,
</span></span><span style=display:flex><span>    transparent: true,
</span></span><span style=display:flex><span>    opacity: 0.5
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>const cube = new Three.Mesh(geometry, material)
</span></span><span style=display:flex><span>scene.add(cube)
</span></span></code></pre></div><br><p>ä¸Šé¢æˆ‘ä»¬åªæ˜¯ç»™æè´¨è®¾ç½®äº†ä¸€ä¸ª çº¢è‰²ï¼Œå½“æˆ‘ä»¬è¿è¡Œç¨‹åºçš„æ—¶å€™ä¼šå‘ç°ï¼šå•ç‹¬ä¸€ä¸ªåŠé€æ˜ç«‹æ–¹ä½“ï¼Œä¼¼ä¹çœ‹ä¸å‡ºä»»ä½•åŠé€æ˜çš„æ„æ€ã€‚</p><blockquote><p>å³ä½¿ç»™æè´¨æ·»åŠ  <code>side: Three.DoubleSide</code></p></blockquote><p>æˆ‘ä»¬éœ€è¦æ·»åŠ å¤šä¸ªåŠé€æ˜ç«‹æ–¹ä½“ï¼Œæ‰æ›´å®¹æ˜“çœ‹å‡ºæ¥å½¼æ­¤åŠé€æ˜ã€‚</p><p>æˆ‘ä»¬ç»§ç»­ä¿®æ”¹ç¤ºä¾‹ã€‚</p><br><h3 id=æ¸²æŸ“8ä¸ªå°ç«‹æ–¹ä½“>æ¸²æŸ“8ä¸ªå°ç«‹æ–¹ä½“<a hidden class=anchor aria-hidden=true href=#æ¸²æŸ“8ä¸ªå°ç«‹æ–¹ä½“>#</a></h3><p>æˆ‘ä»¬çš„æ¸²æŸ“ç›®æ ‡ï¼š</p><ol><li><p>æ¸²æŸ“8ä¸ªä¸åŒé¢œè‰²ï¼Œé€æ˜åº¦éƒ½ä¸º 0.5 çš„ç«‹æ–¹ä½“</p></li><li><p>è¿™ 8 ä¸ªç«‹æ–¹ä½“åˆ†å¸ƒåœ¨ä¸€ä¸ª 2 x 2 x 2 çš„ç©ºé—´ä¸­</p><blockquote><p>è¿™ç§åˆ†å¸ƒæ–¹å¼ï¼Œåœ¨é­”æ–¹ç©å…·ä¸­è¢«ç§°ä¸º â€œäºŒé˜¶é­”æ–¹â€</p></blockquote></li><li><p>æ¯ä¸ªç«‹æ–¹ä½“ é‡Œå¤– 2 ä¸ªé¢éƒ½è¦è¿›è¡Œæ¸²æŸ“</p></li></ol><br><p>å…·ä½“å®ç°ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const colors = [&#39;red&#39;, &#39;blue&#39;, &#39;darkorange&#39;, &#39;darkviolet&#39;, &#39;green&#39;, &#39;tomato&#39;, &#39;sienna&#39;, &#39;crimson&#39;]
</span></span><span style=display:flex><span>const cube_size = 1 //ç«‹æ–¹ä½“å°ºå¯¸
</span></span><span style=display:flex><span>const cube_margin = 0.6 //ç«‹æ–¹ä½“é—´è·ç©ºéš™
</span></span><span style=display:flex><span>colors.forEach((color, index) =&gt; {
</span></span><span style=display:flex><span>    const geometry = new Three.BoxBufferGeometry(cube_size, cube_size, cube_size)
</span></span><span style=display:flex><span>    const material = new Three.MeshPhongMaterial({
</span></span><span style=display:flex><span>        color,
</span></span><span style=display:flex><span>        transparent: true,
</span></span><span style=display:flex><span>        opacity: 0.5,
</span></span><span style=display:flex><span>        side: Three.DoubleSide
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    const cube = new Three.Mesh(geometry, material)
</span></span><span style=display:flex><span>    cube.position.x = (index % 2 ? 1 : -1) * cube_size * cube_margin
</span></span><span style=display:flex><span>    cube.position.y = (Math.floor(index / 4) ? -1 : 1) * cube_size * cube_margin
</span></span><span style=display:flex><span>    cube.position.z = ((index % 4) &gt;= 2) ? 1 : -1 * cube_size * cube_margin / 2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    scene.add(cube)
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><blockquote><p>åœ¨ç›®å‰æœ€æ–°çš„ Three.js r127 ç‰ˆæœ¬ä¸­ï¼Œå¯¹äºé¢„ç½®é¢œè‰²çš„å•è¯ï¼Œåªæ”¯æŒå…¨å°å†™ï¼Œä¾‹å¦‚ï¼š</p><ol><li>çº¢è‰² åªå¯ä»¥å†™ <code>red</code>ï¼Œä¸å¯ä»¥å†™æˆ <code>Red</code></li><li>å†æˆ–è€… æš—æ¡”è‰² åªå¯ä»¥å†™ <code>darkorange</code>ï¼Œä¸å¯ä»¥å†™æˆ<code>DarkOrange</code></li></ol><p>è¿™æ˜¯å› ä¸ºåœ¨ Color æºç ä¸­ï¼Œè®°å½•å†…ç½®é¢œè‰²å€¼çš„å¯¹è±¡ key éƒ½æ˜¯å°å†™ï¼Œæˆ‘å·²é’ˆå¯¹è¿™ä¸ªé—®é¢˜æäº¤äº†è‡ªå·±çš„ prï¼š</p><p><a href=https://github.com/mrdoob/three.js/pull/21687>https://github.com/mrdoob/three.js/pull/21687</a></p><p>æˆ‘ä¿®æ”¹äº†ä¸€ç‚¹ä»£ç ï¼Œè®©å–å€¼æ—¶å¯¹é¢œè‰²å€¼çš„å­—ç¬¦ä¸²æ‰§è¡Œ .toLowerCase()ï¼Œè¿™æ ·å³ä½¿é¢œè‰²å€¼å­—ç¬¦ä¸²æœ‰å¤§å†™å¯ä»¥æœ€ç»ˆå®é™…è¢«è½¬åŒ–ä¸ºå°å†™ã€‚</p></blockquote><br><p>å®é™…è¿è¡Œåï¼Œå°±ä¼šçœ‹åˆ° 8 ä¸ªåŠé€æ˜çš„å°ç«‹æ–¹ä½“ã€‚é€šè¿‡ OrbitControls æ—‹è½¬è§†è§’ï¼Œçœ‹ç€æ„Ÿè§‰æŒºå¥½çš„å‘€ã€‚</p><br><p>å½“ä½ å°è¯•ä¸æ–­å˜æ¢è§†è§’æŸ¥çœ‹ç«‹æ–¹ä½“æ—¶ï¼Œåœ¨æŸäº›ç‰¹æ®Šçš„è§†è§’ä¸‹ï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°ç«‹æ–¹ä½“å·¦ä¾§åè¡¨é¢ã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸæœ¬ç«‹æ–¹ä½“å·¦ä¾§åè¡¨é¢åº”è¯¥ä¹Ÿè¢«æ¸²æŸ“ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶æœªè¢«æ¸²æŸ“ã€‚</p></blockquote><br><p>å¦‚æœä½ å®åœ¨æ˜¯æ²¡æœ‰çœ‹å‡ºæ¥ä»€ä¹ˆé—®é¢˜ï¼Œæš‚æ—¶ç›¸ä¿¡æˆ‘ä¸€ä¸‹ï¼Œå°±å¥½åƒä½ å·²çœŸçš„å‘ç°äº†é‚£æ ·ã€‚</p><p>ä¸‹é¢å¬ä¸€ä¸‹å…³äºå‡ºç°è¿™ä¸ª &ldquo;bug&rdquo; çš„è§£é‡Šã€‚</p><br><h3 id=threejsç»˜åˆ¶-3d-å¯¹è±¡çš„æ–¹å¼>Three.jsç»˜åˆ¶ 3D å¯¹è±¡çš„æ–¹å¼<a hidden class=anchor aria-hidden=true href=#threejsç»˜åˆ¶-3d-å¯¹è±¡çš„æ–¹å¼>#</a></h3><p>ä¸Šé¢æåˆ°çš„æ¸²æŸ“ â€œBugâ€ï¼Œæ˜¯ç”±äº Three.js ç»˜åˆ¶ 3D å¯¹è±¡çš„æ–¹å¼é€ æˆçš„ã€‚</p><br><p>å¯¹äºæ¯ä¸€ä¸ªå‡ ä½•å›¾å½¢ï¼Œæ¯ä¸ªä¸‰è§’å½¢ä¸€æ¬¡åªç»˜åˆ¶ä¸€ä¸ªã€‚</p><blockquote><p>ç«‹æ–¹ä½“çš„ 1 ä¸ªé¢æ˜¯ä¸€ä¸ª æ­£æ–¹å½¢ï¼Œè€Œè¿™ä¸ªæ­£æ–¹å½¢æ˜¯ç”± 2 ä¸ªä¸‰è§’å½¢æ„æˆçš„ã€‚</p><p>åœ¨ç»˜åˆ¶ 1 ä¸ªé¢(æ­£æ–¹å½¢)ï¼ŒThree.js ä¼šå…ˆåç»˜åˆ¶ 2 ä¸ªä¸‰è§’å½¢ï¼Œæœ€ç»ˆæ‹¼æ¥æˆ 1 ä¸ªæ­£æ–¹å½¢ã€‚</p></blockquote><br><p>æ¯æ¬¡ç»˜åˆ¶ä¸€ä¸ªä¸‰è§’å½¢æ—¶ï¼Œä¼šè®°å½• 2 ä¸ªäº‹æƒ…ï¼š</p><ol><li><p>ä¸‰è§’å½¢çš„é¢œè‰²</p></li><li><p>ä¸‰è§’å½¢çš„åƒç´ æ·±åº¦</p><blockquote><p>åƒç´ æ·±åº¦æ˜¯æŒ‡å­˜å‚¨æ¯ä¸ªåƒç´ æ‰€ç”¨çš„ä½æ•°ï¼Œç”¨æ¥åº¦é‡å›¾åƒçš„åˆ†è¾¨ç‡ã€‚</p></blockquote></li><li><p>å½“ç»˜åˆ¶ä¸‹ä¸€ä¸ªä¸‰è§’å½¢æ—¶ï¼Œå¯¹äºæ¯ä¸€ä¸ªåƒç´ ï¼Œå¦‚æœæ·±åº¦æ¯”ä¹‹å‰è®°å½•çš„æ·±åº¦è¿˜è¦æ·±ï¼Œåˆ™ä¸ä¼šç»˜åˆ¶ä»»ä½•åƒç´ </p><blockquote><p>è¿™å…¶å®æ˜¯ Three.js ç»˜åˆ¶ç‰©ä½“æ—¶é‡‡å–çš„ä¸€ç§èŠ‚çœæ€§èƒ½çš„ç­–ç•¥</p></blockquote></li></ol><br><p>è¿™å¥—ç­–ç•¥å¯¹äºä¸é€æ˜çš„ç‰©ä½“æ¥è¯´éå¸¸æœ‰ç”¨ï¼Œä½†æ˜¯å¯¹äºé€æ˜çš„ç‰©ä½“å´ä¸èµ·ä½œç”¨ã€‚</p><br><p>ä¸€ä¸ªç«‹æ–¹ä½“æœ‰ 6 ä¸ªé¢ï¼Œæ¯ä¸ªé¢ 2 ä¸ªä¸‰è§’å½¢ï¼Œä¹Ÿå°±æ„å‘³ç€ä¸€ä¸ªç«‹æ–¹ä½“éœ€è¦ç»˜åˆ¶ 12 ä¸ªä¸‰è§’å½¢ã€‚</p><p>è€Œè¿™ 12 ä¸ªä¸‰è§’å½¢ç©¶ç«Ÿå…ˆç»˜åˆ¶å“ªä¸ªï¼Œä»–ä»¬ç»˜åˆ¶çš„é¡ºåºæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ç­”ï¼šç»˜åˆ¶é¡ºåºå–å†³äºæˆ‘ä»¬çš„è§†è§’ï¼Œè¶Šæ¥è¿‘ç›¸æœºçš„ä¸‰è§’å½¢è¶Šä¼˜å…ˆè¢«ç»˜åˆ¶ã€‚</p><blockquote><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸Šé¢æåˆ°çš„ç»˜åˆ¶ bug åªæœ‰åœ¨æŸäº›ç‰¹å®šè§’åº¦ä¸‹æ‰ä¼šå‡ºç°çš„åŸå› ã€‚</p></blockquote><blockquote><p>è¶Šé è¿‘ç›¸æœºçš„ä¸‰è§’å½¢è¶Šå…ˆè¢«ç»˜åˆ¶ï¼Œè¿™ä¹Ÿæ„å‘³ç€åœ¨æŸäº›è§’åº¦ä¸‹ï¼Œè¿œç¦»æ‘„åƒæœºçš„æŸä¸ªé¢(ç«‹æ–¹ä½“èƒŒé¢æˆ–ä¾§èƒŒé¢)æœ‰å¯èƒ½ä¸ä¼šè¢«ç»˜åˆ¶ã€‚</p></blockquote><p>è¿™ç§æƒ…å†µä¸ä»…ä¼šå‡ºç°åœ¨ç«‹æ–¹ä½“èº«ä¸Šï¼Œçƒä½“ä¸Šä¹Ÿä¼šå‡ºç°ã€‚</p><br><p><strong>é’ˆå¯¹ä»¥ä¸Šæƒ…å†µï¼Œæœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆï¼š</strong></p><ol><li>å°†æ¯ä¸ªç«‹æ–¹ä½“æ·»åŠ  2 æ¬¡åˆ°åœºæ™¯ä¸­</li><li>ç¬¬ 1 æ¬¡æ·»åŠ çš„ç«‹æ–¹ä½“è®¾ç½®åªè®©æ¸²æŸ“ èƒŒé¢(Three.BackSide)</li><li>ç¬¬ 2 æ¬¡æ·»åŠ çš„ç«‹æ–¹ä½“è®¾ç½®åªè®©æ¸²æŸ“ å‰é¢(Three.FrontSide)</li></ol><p>è¿™æ ·ä¸€ç•ªæ“ä½œè¿‡åï¼Œç¡®ä¿ Three.js å¯ä»¥å°†æ¯ä¸ªç«‹æ–¹ä½“çš„å‰é¢ã€åé¢éƒ½ä¼šæ¸²æŸ“ï¼Œæ‹¼åˆä¸€ä¸‹ 2 æ¬¡çš„æ¸²æŸ“ç»“æœï¼Œå°† â€œæ­£ç¡®çš„â€ ç»“æœæ¸²æŸ“å‡ºæ¥ã€‚</p><br><p><strong>è¡¥å……è¯´æ˜</strong></p><ol><li>ä¸Šé¢çš„è§£å†³æ–¹æ¡ˆå®é™…ä¸Šéœ€è¦ç»˜åˆ¶ 2 æ¬¡ï¼Œè¿™ä¹Ÿè®¸ä¼šé€ æˆæ€§èƒ½ä¸Šçš„æµªè´¹ã€‚</li><li>å¦‚æœä½ å¹¶ä¸æ˜¯ç‰¹åˆ«åœ¨ä¹é‚£ä¸€ç‚¹ç‚¹æ¸²æŸ“ â€œBugâ€ï¼Œä½ å®Œå…¨å¯ä»¥å¿½è§†å®ƒã€‚</li></ol><br><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†é€šè¿‡å¦å¤–ä¸€ä¸ªç¤ºä¾‹ï¼Œè®²è§£å¦å¤–ä¸€ç§æœ‰é’ˆå¯¹æ€§çš„è§£å†³æ–¹æ¡ˆã€‚</p><br><h3 id=ç»˜åˆ¶2ä¸ªä¸­å¿ƒäº¤å‰çš„å¹³é¢æ­£æ–¹å½¢>ç»˜åˆ¶2ä¸ªä¸­å¿ƒäº¤å‰çš„å¹³é¢æ­£æ–¹å½¢<a hidden class=anchor aria-hidden=true href=#ç»˜åˆ¶2ä¸ªä¸­å¿ƒäº¤å‰çš„å¹³é¢æ­£æ–¹å½¢>#</a></h3><p>æˆ‘ä»¬çš„ç¤ºä¾‹ç›®æ ‡æ˜¯ï¼š</p><ol><li><p>ç»˜åˆ¶ 2 ä¸ªå¹³é¢çš„æ­£æ–¹å½¢</p><blockquote><p>åˆ›å»ºå¹³é¢ åœ¨ Three.js ä¸­ä½¿ç”¨çš„æ˜¯ Three.PlaneBufferGeometry</p></blockquote></li><li><p>ç»™æ¯ä¸ªå¹³é¢æ·»åŠ ä¸€ä¸ªé¢œè‰²å’Œçº¹ç†è´´å›¾ï¼Œä¸¤é¢éƒ½æ¸²æŸ“ï¼Œå¹¶è®¾ç½®æ­£æ–¹å½¢å¹³é¢é€æ˜åº¦ä¸º 0.5</p><blockquote><p>è´´å›¾æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ç½‘ä¸Šçš„ 2 å¼ å›¾ç‰‡èµ„æº</p><p>å›¾ç‰‡éƒ½æ˜¯ç”±èƒŒæ™¯è‰²çš„ï¼Œå¹¶éèƒŒæ™¯é€æ˜çš„ PNG</p></blockquote></li><li><p>è®©è¿™ 2 ä¸ªå¹³é¢å½¢æˆ åå­—äº¤å‰ çš„çŠ¶æ€</p><blockquote><p>ä¹Ÿå°±æ˜¯è¯´è®©å…¶ä¸­ä¸€ä¸ªå¹³é¢çš„ y è½´æ—‹è½¬ 180åº¦</p></blockquote></li></ol><br><p><strong>å®ç°çš„ä»£ç ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const planeDataArr = [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        color: &#39;red&#39;,
</span></span><span style=display:flex><span>        ratation: 0,
</span></span><span style=display:flex><span>        imgsrc: &#39;https://threejsfundamentals.org/threejs/resources/images/happyface.png&#39;
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        color: &#39;yellow&#39;,
</span></span><span style=display:flex><span>        ratation: Math.PI * 0.5,
</span></span><span style=display:flex><span>        imgsrc: &#39;https://threejsfundamentals.org/threejs/resources/images/hmmmface.png&#39;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>planeDataArr.forEach((value) =&gt; {
</span></span><span style=display:flex><span>    const geometry = new Three.PlaneBufferGeometry(2, 2)
</span></span><span style=display:flex><span>    const textureLoader = new TextureLoader()
</span></span><span style=display:flex><span>    const material = new Three.MeshBasicMaterial({
</span></span><span style=display:flex><span>        color: value.color,
</span></span><span style=display:flex><span>        map: textureLoader.load(value.imgsrc),
</span></span><span style=display:flex><span>        opacity: 0.5,
</span></span><span style=display:flex><span>        transparent: true,
</span></span><span style=display:flex><span>        side:Three.DoubleSide
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    const plane = new Three.Mesh(geometry, material)
</span></span><span style=display:flex><span>    plane.rotation.y = value.ratation
</span></span><span style=display:flex><span>    scene.add(plane)
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><br><p>è¿™æ¬¡ï¼Œæˆ‘ä»¬å°†å¾ˆå®¹æ˜“çœ‹åˆ°ï¼Œå½“çº¢è‰²å¹³é¢ä¸€ä¾§å®Œå…¨è¦†ç›–ä½é»„è‰²å¹³é¢ä¸€ä¾§æ—¶ï¼Œä¼šå®Œå…¨çœ‹ä¸åˆ°é»„è‰²å¹³é¢é‚£ä¸€ä¾§ã€‚</p><blockquote><p>å®é™…è¿è¡Œæ•ˆæœæˆ‘å°±ä¸è´´å›¾äº†ï¼Œä½ å¯ä»¥å°†ä¸Šé¢ä»£ç å®é™…è¿è¡Œä¸€ä¸‹ã€‚</p></blockquote><blockquote><p>ä½ å°±å‡è£…æ­¤åˆ»ä½ çœ‹åˆ°äº†ã€‚</p></blockquote><br><p>ç”¨æˆ‘ä»¬ä¸Šé¢è®²è¿‡çš„ç†è®ºå¯è§£é‡Šè¿™ä¸ªç°è±¡ï¼šå³ çº¢è‰²å¹³é¢ä¸€ä¾§é¢œè‰²æ·±åº¦å¤§äºé»„è‰²å¹³é¢ä¸€ä¾§ï¼Œå½“å®Œå…¨è¦†ç›–ä½ä¹‹åé»„è‰²å¹³é¢é‚£ä¸€ä¾§å°±ä¸ä¼šå†è¿›è¡Œæ¸²æŸ“ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±çœ‹ä¸åˆ°äº†ã€‚</p><br><p><strong>è§£å†³æ–¹æ¡ˆï¼šå°†ä¸Šé¢ 2 ä¸ªå¹³é¢æ‹†åˆ†æˆ 4 ä¸ªå¹³é¢ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æ¯ä¸ªå¹³é¢éƒ½ä¼šè¢«æ¸²æŸ“ã€‚</strong></p><p>ç”±äºæˆ‘ä»¬è¿™ä¸ªåœºæ™¯ 2 ä¸ªå¹³é¢åå­—äº¤å‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ç›´æ¥åˆ›å»º 4 ä¸ªå°çš„å¹³é¢ï¼Œç„¶åå°†è¿™ 4 ä¸ªå°å¹³é¢ç»„åˆæˆ â€œ2 ä¸ªåå­—ç›¸äº¤çš„å¹³é¢â€ã€‚</p><p>å…·ä½“å®ç°çš„æ–¹å¼æ˜¯ï¼š</p><ol><li><p>å°†åŸæœ¬ è¾ƒå¤§çš„ 1 ä¸ªå¹³é¢æ‹†åˆ†æˆ 2 ä¸ªå°å¹³é¢</p></li><li><p>è®¾ç½®è¿™ 2 ä¸ªå°å¹³é¢çš„çº¹ç†è´´å›¾åç§»ï¼Œå„è‡ªå ä¸€åŠ</p><blockquote><p>è¿™æ ·å¯ä»¥æœ€ç»ˆè®© 2 ä¸ªå°å¹³é¢è´´åˆæˆ 1 ä¸ªå®Œæ•´çš„å¹³é¢(çº¹ç†)</p></blockquote></li><li><p>ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬è®¡ç®—æ—‹è½¬ï¼Œå¥½è®©ä»–ä»¬å½¢æˆåå­—äº¤å‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°† æ¯ç»„å°å¹³é¢æ”¾ç½®åœ¨åŒä¸€ä¸ªç©ºé—´ä¸­</p><blockquote><p>è¿™éœ€è¦ä½¿ç”¨åˆ° Three.Object3D</p></blockquote></li></ol><br><p><strong>å®é™…ä»£ç ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const planeDataArr = [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        color: &#39;red&#39;,
</span></span><span style=display:flex><span>        ratation: 0,
</span></span><span style=display:flex><span>        imgsrc: &#39;https://threejsfundamentals.org/threejs/resources/images/happyface.png&#39;
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        color: &#39;yellow&#39;,
</span></span><span style=display:flex><span>        ratation: Math.PI * 0.5,
</span></span><span style=display:flex><span>        imgsrc: &#39;https://threejsfundamentals.org/threejs/resources/images/hmmmface.png&#39;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>planeDataArr.forEach((value) =&gt; {
</span></span><span style=display:flex><span>    const base = new Three.Object3D()
</span></span><span style=display:flex><span>    base.rotation.y = value.ratation
</span></span><span style=display:flex><span>    scene.add(base)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    const plane_size = 2
</span></span><span style=display:flex><span>    const half_size = plane_size / 2
</span></span><span style=display:flex><span>    const geometry = new Three.PlaneBufferGeometry(half_size, plane_size)
</span></span><span style=display:flex><span>    const arr = [-1, 1]
</span></span><span style=display:flex><span>    arr.forEach((x) =&gt; {
</span></span><span style=display:flex><span>        const textureLoader = new TextureLoader()
</span></span><span style=display:flex><span>        const texture = textureLoader.load(value.imgsrc)
</span></span><span style=display:flex><span>        texture.offset.x = x &lt; 1 ? 0 : 0.5
</span></span><span style=display:flex><span>        texture.repeat.x = 0.5
</span></span><span style=display:flex><span>        const material = new Three.MeshBasicMaterial({
</span></span><span style=display:flex><span>            color: value.color,
</span></span><span style=display:flex><span>            map: texture,
</span></span><span style=display:flex><span>            transparent: true,
</span></span><span style=display:flex><span>            opacity: 0.5,
</span></span><span style=display:flex><span>            side: Three.DoubleSide
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        const plane = new Three.Mesh(geometry, material)
</span></span><span style=display:flex><span>        plane.position.x = x * half_size / 2
</span></span><span style=display:flex><span>        base.add(plane)
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><blockquote><p>å‡è®¾æˆ‘ä»¬ç›®æ ‡å¹³é¢å®½é«˜å‡ä¸º 2ï¼Œé‚£ä¹ˆï¼š</p><ol><li>æˆ‘ä»¬å°†è¯¥ç›®æ ‡å¹³é¢æ‹†åˆ†æˆ 2 ä¸ª å®½ 1ã€é«˜ 2 çš„å¹³é¢</li><li>è·å–å¹¶è®¾ç½®çº¹ç†è´´å›¾ï¼Œå¹¶åˆ†åˆ«è®¾ç½®çº¹ç†çš„ offset.x ã€repeat.x å„å  ä¸€åŠï¼Œä¹Ÿå°±æ˜¯ 0.5</li><li>æˆ‘ä»¬çŸ¥é“æ‹†åˆ†å‡ºçš„ 2 ä¸ªå°å¹³é¢ä»–ä»¬ x è½´ç›¸å·® 1 ä¸ªå°å¹³é¢çš„å®½åº¦ï¼Œç”±äºæˆ‘ä»¬è®¾ç½®çš„å†…éƒ¨å¾ªç¯æ•°ç»„ä¸º [-1,1]ï¼Œæ‰€ä»¥ 2 ä¸ªå°å¹³é¢çš„ x å€¼åº”è¯¥æ˜¯ æ­£è´Ÿå®½åº¦ä¸€åŠçš„ä¸€åŠã€‚</li></ol></blockquote><br><p>è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬å†è¿è¡Œå°±ä¼šå‘ç°ï¼Œæ— è®ºä»»ä½•è§†è§’ä¸‹ï¼Œçº¢è‰²å¹³é¢ä¸å†ä¼šè¿™è¯¥é»„è‰²å¹³é¢äº†ã€‚</p><br><p><strong>è¿™æ˜¯ç¬¬ 2 ç§è§£å†³é€æ˜ &ldquo;bug&rdquo; çš„æ–¹æ¡ˆï¼šå°†å¯¹è±¡è¿›è¡Œæ‹†åˆ†</strong></p><p><strong>ä½†æ˜¯è¯·æ³¨æ„ï¼Œè¯¥è§£å†³æ–¹å¼åªé€‚åˆé‚£äº›ç®€å•ï¼Œä¸”ä½ç½®ç›¸å¯¹å›ºå®šçš„ 3D å¯¹è±¡ã€‚</strong></p><blockquote><p>è‹¥ç‰©ä½“æœ¬èº«å°±æ¯”è¾ƒå¤æ‚ï¼Œé¢æ¯”è¾ƒå¤šï¼Œè¿˜è¦å†æ‹†åˆ†ï¼Œé‚£ä¹ˆå°±å¤ªæ¶ˆè€—æ¸²æŸ“æ€§èƒ½</p><p>å¹¶ä¸”ä½ç½®å¿…é¡»ç›¸å¯¹å›ºå®šï¼Œè‹¥ä¸å›ºå®šä¼šå¢åŠ æˆ‘ä»¬æ‹¼æ¥çš„éš¾åº¦</p></blockquote><br><p>æ¥ä¸‹æ¥è®²è§£ç¬¬ 3 ç§è§£å†³æ–¹æ¡ˆã€‚</p><h3 id=å¯ç”¨alphatestæ¥é¿å…é®æŒ¡é—®é¢˜>å¯ç”¨alphaTestæ¥é¿å…é®æŒ¡é—®é¢˜<a hidden class=anchor aria-hidden=true href=#å¯ç”¨alphatestæ¥é¿å…é®æŒ¡é—®é¢˜>#</a></h3><p>é¦–å…ˆæˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¸Šé¢çš„ä¾‹å­ï¼Œå½“æ—¶ç¤ºä¾‹ä¸­ 2 ä¸ªå¹³é¢çš„çº¹ç†è´´å›¾èƒŒæ™¯æ˜¯ä¸é€æ˜çš„ã€‚</p><p>é‚£æˆ‘ä»¬å¯ä»¥å°è¯•å¦å¤– 2 ä¸ªå›¾ç‰‡è´´å›¾ï¼Œä»–ä»¬æ˜¯èƒŒæ™¯é€æ˜çš„ PNG å›¾ç‰‡ã€‚</p><p>æˆ‘ä»¬è¦ä½¿ç”¨æè´¨(Three.Material) çš„ä¸€ä¸ªå±æ€§ .alphaTestã€‚</p><br><p><strong>.alphaTestå±æ€§ä»‹ç»</strong></p><p>.alphaTest æ˜¯ä¸€ä¸ªé€æ˜åº¦æ£€æµ‹å€¼ï¼Œå€¼å¾—ç±»å‹æ˜¯ Numberï¼Œå–å€¼èŒƒå›´ä¸º 0 - 1ã€‚</p><p>è‹¥é€æ˜åº¦ä½äºè¯¥å€¼ï¼Œåˆ™ä¸ä¼šè¿›è¡Œæ¸²æŸ“ã€‚</p><blockquote><p>åä¹‹ï¼Œåªæœ‰æŸä¸ªç‚¹é€æ˜åº¦é«˜äºè¯¥å€¼çš„æ‰ä¼šè¿›è¡Œæ¸²æŸ“</p></blockquote><p>.alphaTest é»˜è®¤å€¼ä¸º 0ã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯è¯´é»˜è®¤æƒ…å†µä¸‹å³ä½¿é€æ˜åº¦ä¸º 0 ä¹Ÿä¼šè¿›è¡Œæ¸²æŸ“</p><p>å‡è®¾æˆ‘ä»¬ç»™æè´¨è®¾ç½®æœ‰ colorï¼Œé‚£ä¹ˆè‚¯å®šå°±ä¼šæ¸²æŸ“å‡ºå†…å®¹</p></blockquote><br><p>æˆ‘ä»¬åœ¨æœ€åˆ 2 ä¸ªå¹³é¢çš„ä»£ç åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ã€‚</p><ol><li>ä¿®æ”¹çº¹ç†è´´å›¾èµ„æºï¼Œè¿™æ¬¡ä½¿ç”¨èƒŒæ™¯é€æ˜çš„ PNG å›¾ç‰‡</li><li>æè´¨ä¸å†è®¾ç½® .opacity å±æ€§ï¼Œæ”¹è®¾ç½® .alphaTest å±æ€§</li></ol><br><p>ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const planeDataArr = [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        color: &#39;red&#39;,
</span></span><span style=display:flex><span>        ratation: 0,
</span></span><span style=display:flex><span>        imgsrc: &#39;https://threejsfundamentals.org/threejs/resources/images/tree-01.png&#39;
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        color: &#39;yellow&#39;,
</span></span><span style=display:flex><span>        ratation: Math.PI * 0.5,
</span></span><span style=display:flex><span>        imgsrc: &#39;https://threejsfundamentals.org/threejs/resources/images/tree-02.png&#39;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>planeDataArr.forEach((value) =&gt; {
</span></span><span style=display:flex><span>    const geometry = new Three.PlaneBufferGeometry(2, 2)
</span></span><span style=display:flex><span>    const textureLoader = new TextureLoader()
</span></span><span style=display:flex><span>    const material = new Three.MeshBasicMaterial({
</span></span><span style=display:flex><span>        color: value.color,
</span></span><span style=display:flex><span>        map: textureLoader.load(value.imgsrc),
</span></span><span style=display:flex><span>        alphaTest: 0.5,
</span></span><span style=display:flex><span>        transparent: true,
</span></span><span style=display:flex><span>        side:Three.DoubleSide
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    const plane = new Three.Mesh(geometry, material)
</span></span><span style=display:flex><span>    plane.rotation.y = value.ratation
</span></span><span style=display:flex><span>    scene.add(plane)
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><blockquote><p>è¯·æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬å–äº†ä¸€ä¸ªé€æ˜åº¦çš„ä¸­é—´å€¼ï¼Œå°† .alphaTest å±æ€§å€¼è®¾ç½®ä¸º 0.5ã€‚</p><p>ä½ å¯ä»¥å°è¯•å°† .alphaTest åˆ†åˆ«è®¾ç½®ä¸º 0.2 æˆ– 0.8 çœ‹çœ‹ç»“æœä¼šæœ‰ä»€ä¹ˆå˜åŒ–ã€‚</p><blockquote><p>æœ€ç»ˆè¾¹ç¼˜æ¸…æ™°åº¦å–å†³äºè´´å›¾å›¾ç‰‡ä¸­æŠ å›¾çš„ç²¾ç»†ç¨‹åº¦ã€‚è‹¥è¾¹ç¼˜è¶Šä¸æ¸…æ™°(ä¹Ÿå°±æ˜¯è¶Šæ¨¡ç³Š)ï¼Œæœ€ç»ˆå‘ˆç°å‡ºçš„ç™½è¾¹ä¼šè¶Šä¸¥é‡ã€‚</p></blockquote></blockquote><br><p>å®é™…è¿è¡Œåå°±ä¼šå‘ç°ï¼Œ2 æ£µä¸åŒé¢œè‰²çš„æ ‘æœ¨ï¼Œå½¼æ­¤åå­—äº¤å‰ï¼Œå¯ä»¥é€è¿‡å‰é¢æ ‘çš„æå¶çœ‹åˆ°å¦å¤–ä¸€é¢—æ ‘ã€‚</p><h3 id=æœ¬æ–‡å°èŠ‚>æœ¬æ–‡å°èŠ‚<a hidden class=anchor aria-hidden=true href=#æœ¬æ–‡å°èŠ‚>#</a></h3><p>æˆ‘ä»¬è®²è§£äº†ä¸ºä»€ä¹ˆä¼šåœ¨æŸäº›è§†è§’ä¸‹ï¼ŒæŸäº›åŠé€æ˜çš„ç‰©ä½“ä¸ªåˆ«åœ°æ–¹ä¸‰è§’é¢ä¸ä¼šè¢«æ¸²æŸ“çš„åŸå› ã€‚</p><p>é€šè¿‡å‡ ä¸ªç¤ºä¾‹ï¼Œè®²è§£äº† 3 ç§è§£å†³æ–¹æ¡ˆï¼š</p><ol><li><p>å°†ç‰©ä½“æ·»åŠ  2 ä»½ï¼Œ1ä»½è´Ÿè´£æ¸²æŸ“å‰é¢ï¼Œå¦å¤–ä¸€ä»½è´Ÿè´£æ¸²æŸ“åé¢</p><blockquote><p>ç¼ºç‚¹ï¼šå¢åŠ æ¸²æŸ“å·¥ä½œé‡</p></blockquote></li><li><p>å°†ç‰©ä½“(æˆ–å¹³é¢)è¿›è¡Œæ‹†åˆ†ï¼Œå·²ç¡®ä¿æ¯ 1 ä»½å‡ä¼šæœ‰æœºä¼šè¢«æ¸²æŸ“</p><blockquote><p>ç¼ºç‚¹ï¼šåªé€‚åˆç®€å•çš„ç‰©ä½“ï¼Œä¸”ä½ç½®å›ºå®šå®¹æ˜“æ‹¼å‡‘</p></blockquote></li><li><p>é€šè¿‡è®¾ç½® .alphaTestï¼Œä»¥å®ç°é€æ˜æ¸²æŸ“</p><blockquote><p>ç¼ºç‚¹ï¼šè‹¥è´´å›¾æŠ å›¾ä¸å¤Ÿç²¾ç»†ï¼Œå®¹æ˜“å‡ºç°ç™½è¾¹</p></blockquote></li></ol><br><p>å°±åƒä¸Šé¢æˆ‘ä»¬æåˆ°çš„ï¼Œæ¯ä¸€ç§è§£å†³æ–¹æ¡ˆéƒ½æœ‰å„è‡ªçš„ä½¿ç”¨åœºæ™¯å’Œç¼ºç‚¹ã€‚</p><p>æˆ‘ä»¬ä»Šååœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œä¸€å®šè¦æ ¹æ®å®é™…æƒ…å†µæ¥ä½œå‡ºé€‰æ‹©ï¼Œçœ‹ä½¿ç”¨å“ªç§æ–¹æ¡ˆã€‚</p><blockquote><p>è¯´ç™½äº†ï¼Œæ— éå°±æ˜¯åœ¨æ€§èƒ½ã€å¤æ‚åº¦ã€ç²¾ç»†åŒ–æ–¹é¢è¿›è¡Œå–èˆï¼Œæœ€ç»ˆæ‰¾å‡ºåˆé€‚çš„æ–¹æ¡ˆã€‚</p></blockquote><br><blockquote><p>ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°æœ¬ç« èŠ‚æˆ‘å¹¶æ²¡æœ‰è´´å‡ºå®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œè€Œä»…ä»…è´´å‡ºäº†æ ¸å¿ƒçš„ä»£ç ã€‚</p><p>æˆ‘æ˜¯è¿™æ ·è®¤ä¸ºçš„ï¼Œå¦‚æœåˆ°äº†ä»Šå¤©ä½ ä¾ç„¶æ— æ³•è‡ªå·±å†™å‡ºå®Œæ•´çš„ä»£ç ï¼Œè¿˜éœ€è¦é å¤åˆ¶æˆ‘å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œé‚£ä½ å¹²è„†åˆ«å­¦ Three.jsäº†ï¼Œæ”¾å¼ƒå§ã€‚</p></blockquote><br><p>è‡³æ­¤ï¼Œæœ¬ç« ç»“æŸã€‚</p><p>ç›®å‰æˆ‘ä»¬æ‰€æœ‰çš„ç¤ºä¾‹éƒ½æ˜¯åŸºäº 1 ä¸ª ç”»å¸ƒ(canvas) å’Œ 1 ä¸ª é•œå¤´(camera)ï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬è®²è§£åŒä¸€ä¸ªç½‘é¡µä¸­æ¸²æŸ“å¤šä¸ª ç”»å¸ƒ å’Œå¤šä¸ªé•œå¤´ã€‚</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://bablvsj.github.io/tags/three.js/>Three.js</a></li></ul><nav class=paginav><a class=prev href=https://bablvsj.github.io/posts/threejs/25-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%92%8C%E5%A4%A9%E7%A9%BA%E7%9B%92/><span class=title>Â« Prev</span><br><span>25 Three.jsè§£å†³æ–¹æ¡ˆä¹‹æ·»åŠ èƒŒæ™¯å’Œå¤©ç©ºç›’</span></a>
<a class=next href=https://bablvsj.github.io/posts/threejs/27-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E5%A4%9A%E7%94%BB%E5%B8%83%E5%A4%9A%E5%9C%BA%E6%99%AF/><span class=title>Next Â»</span><br><span>27 Three.jsè§£å†³æ–¹æ¡ˆä¹‹å¤šç”»å¸ƒã€å¤šåœºæ™¯</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bablvsj.github.io>Bablvsj's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div class=flex-c-d><a class=flex-d-c href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank><span>æœ¬ç«™ç”±</span><img width=60 src=/images/upyun.png>æä¾›CDNåŠ é€Ÿ/äº‘å­˜å‚¨æœåŠ¡</a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>