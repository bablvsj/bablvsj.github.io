<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>12 Three.jsåŸºç¡€ä¹‹é•œå¤´ | Bablvsj's Blog</title><meta name=keywords content="Three.js"><meta name=description content="12 Three.jsåŸºç¡€ä¹‹é•œå¤´ - Bablvsj's Blog"><meta name=author content><link rel=canonical href=https://bablvsj.github.io/posts/threejs/12-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E9%95%9C%E5%A4%B4/><link crossorigin=anonymous href=/assets/css/stylesheet.b33b75c69bb2ec0d4accfeaad1d3ba05b272f180583f687c640a522d6492076f.css integrity="sha256-szt1xpuy7A1KzP6q0dO6BbJy8YBYP2h8ZApSLWSSB28=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://bablvsj.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://bablvsj.github.io/img/Q.gif><link rel=apple-touch-icon href=https://bablvsj.github.io/Q.gif><link rel=mask-icon href=https://bablvsj.github.io/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=stylesheet href=/css/syntax.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="12 Three.jsåŸºç¡€ä¹‹é•œå¤´"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://bablvsj.github.io/posts/threejs/12-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E9%95%9C%E5%A4%B4/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-19T17:11:35+08:00"><meta property="article:modified_time" content="2023-12-19T17:11:35+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="12 Three.jsåŸºç¡€ä¹‹é•œå¤´"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"æ–‡ç« ","item":"https://bablvsj.github.io/posts/"},{"@type":"ListItem","position":3,"name":"12 Three.jsåŸºç¡€ä¹‹é•œå¤´","item":"https://bablvsj.github.io/posts/threejs/12-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E9%95%9C%E5%A4%B4/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"12 Three.jsåŸºç¡€ä¹‹é•œå¤´","name":"12 Three.jsåŸºç¡€ä¹‹é•œå¤´","description":"","keywords":["Three.js"],"articleBody":"åœ¨ä¹‹å‰æ‰€æœ‰çš„ç¤ºä¾‹ä¸­ï¼Œå…³äºé•œå¤´ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯ PerspectiveCamera(é€è§†é•œå¤´)ã€‚\nå†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼Œæˆ‘ä¸ªäººåå¥½æ˜¯å–œæ¬¢å°† Camera ç§°ä¸º â€œé•œå¤´â€ï¼Œä½†æ˜¯ Three.js å®˜æ–¹æˆ–å…¶ä»–æ•™ç¨‹ä¸­ç§°å‘¼å…¶ä¸º â€œç›¸æœºâ€\nåœ¨ Three.js ä¸­ï¼Œä¸€å…±æœ‰ 5 ç§é•œå¤´ï¼š\né•œå¤´ç±»å‹(éƒ½ç»§æ‰¿äºThree.Camera) é•œå¤´åç§° è§£é‡Šè¯´æ˜ ArrayCamera é•œå¤´é˜µåˆ— ä¸€ç»„å·²é¢„å®šä¹‰çš„é•œå¤´ CubeCamera ç«‹æ–¹é•œå¤´ 6ä¸ªé¢çš„é•œå¤´(å‰ã€åã€å·¦ã€å³ã€é¡¶ã€åº•) OrthographicCamera æ­£äº¤é•œå¤´ æ— è®ºç‰©ä½“è·ç¦»é•œå¤´è¿œè¿‘ï¼Œæœ€ç»ˆæ¸²æŸ“å‡ºçš„å¤§å°ä¸å˜ PerspectiveCamera é€è§†é•œå¤´ åƒäººçœ¼ç›ä¸€æ ·çš„é•œå¤´ï¼Œè¿œå¤§è¿‘å°ï¼Œæœ€å¸¸ç”¨çš„é•œå¤´ StereoCamera ç«‹ä½“é•œå¤´ åŒé€è§†é•œå¤´ï¼Œå¸¸ç”¨äºåˆ›å»º 3D ç«‹ä½“å½±åƒæˆ– è§†å·®å±éšœ æ‰€æœ‰é•œå¤´çš„è¾…åŠ©å¯¹è±¡éƒ½æ˜¯ï¼šThree.CameraHelper\nç”±äº é€è§†é•œå¤´(PerspectiveCamera) æ˜¯æ—¥å¸¸ä¸­ä½¿ç”¨æœ€é¢‘ç¹çš„é•œå¤´ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬å…ˆä» é€è§†é•œå¤´ å¼€å§‹è®²è§£ã€‚\né•œå¤´çš„ä¸€äº›çŸ¥è¯† æˆ‘ä»¬é€šè¿‡é€è§†é•œå¤´ï¼Œæ¥è®²è§£ä¸€äº›é•œå¤´çš„çŸ¥è¯†\né€è§†é•œå¤´(PerspectiveCamera) æ‰€å‘ˆç°å‡ºçš„æ•ˆæœï¼Œå’Œæˆ‘ä»¬ç”¨æœ‰çœ¼ç›è§‚å¯Ÿä¸–ç•Œæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚\nå¹³æˆªé¢ æ— è®ºæ‰€è§‚å¯Ÿçš„ç‰©ä½“æ˜¯ä»€ä¹ˆç±»å‹ï¼Œä¾‹å¦‚çƒä½“ã€ç«‹æ–¹ä½“ã€æ¤ä½“ç­‰ï¼Œåœ¨æˆ‘ä»¬çš„è§†é‡ä¸­éƒ½ä¼šå½¢æˆ 2 ä¸ªæˆªé¢ï¼š\nè¿œæˆªé¢(far)ï¼šç‰©ä½“æœ€è¿œå¤„çš„æˆªé¢ è¿‘æˆªé¢(near)ï¼šç‰©ä½“æœ€è¿‘å¤„çš„æˆªé¢ è‹¥ä»¥æŸä¸ªç‰¹å®šè§’åº¦ï¼Œå½“é•œå¤´(çœ¼ç›)è§‚å¯Ÿç‰©ä½“æ—¶ï¼Œç‰©ä½“è¿œæˆªé¢å’Œè¿‘æˆªé¢å®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆæ­¤æ—¶è¿‘æˆªé¢å°±ä¼šé®æŒ¡è¿œæˆªé¢ï¼Œæˆ‘ä»¬åªèƒ½çœ‹åˆ°è¿‘æˆªé¢ã€‚\nä¾‹å¦‚æˆ‘ä»¬åœ¨ä¸€ä¸ªç«‹æ–¹ä½“çš„æ­£å‰æ–¹ï¼Œæ­¤æ—¶è¿‘æˆªé¢å®Œå…¨é®æŒ¡ä½è¿œæˆªé¢ï¼Œæ­¤æ—¶æˆ‘ä»¬è§‚å¯Ÿåˆ°çš„ç«‹æ–¹ä½“æ›´åƒæ˜¯ä¸€ä¸ªå¹³é¢ã€‚\nä½†æ˜¯ç”±äºå¯èƒ½å­˜åœ¨é˜´å½±ï¼Œæˆ‘ä»¬ä¾ç„¶èƒ½å¤Ÿæ„ŸçŸ¥åˆ°è¿™æ˜¯ä¸€ä¸ª â€œ3Dç«‹ä½“ç‰©ä½“â€ã€‚\nè§†æ¤ æƒ³è±¡ä¸€ä¸‹ï¼Œå‡è®¾æŠŠæˆ‘ä»¬çš„é•œå¤´(çœ¼ç›) å½“åšä¸€ä¸ªç‚¹ï¼Œç”±è¿™ä¸ªç‚¹ä¾æ¬¡ä¸ç‰©ä½“çš„è¿‘æˆªé¢ã€è¿œæˆªé¢çš„é¡¶ç‚¹è¿›è¡Œè¿æ¥ï¼Œå°±ä¼šå½¢æˆä¸€ä¸ª æ¤ä½“ï¼Œè€Œè¿™ä¸ªè™šæ„å‡ºæ¥çš„æ¤ä½“ï¼Œå°±æ˜¯æˆ‘ä»¬é•œå¤´(çœ¼ç›)ä¸ç‰©ä½“åœ¨ç©ºé—´ä¸Šå­˜åœ¨çš„è§†æ¤ã€‚\nå¦‚æœæˆ‘ä»¬çœ¼ç›ä¸æ˜¯ä¸ç‰©ä½“ï¼Œè€Œæ˜¯ä¸ â€œåœºæ™¯(Three.Scene)çš„è¿‘æˆªé¢ã€è¿œæˆªé¢â€ å½¢æˆçš„è§†æ¤ï¼Œå°±æ˜¯æ­£å¸¸ Three.js åœºæ™¯ä¸­å¯è§ç©ºé—´ã€‚\nè¯·æ³¨æ„ï¼Œä¸Šé¢æåˆ°çš„ åœºæ™¯çš„è¿œæˆªé¢å’Œè¿‘æˆªé¢ æ˜¯åŠ äº†å¼•å·ï¼Œäº‹å®ä¸Šæ²¡æœ‰åŠæ³•ç›´æ¥è®¾ç½®åœºæ™¯çš„è¿œè¿‘æˆªé¢ï¼Œåœºæ™¯çš„è¿‘è¿œè§†æ¤æ˜¯ç”±é•œå¤´çš„ä»¥ä¸‹å‡ ä¸ªå‚æ•°æœ€ç»ˆè®¡ç®—å‡ºçš„ï¼š\né•œå¤´çš„è§‚å¯Ÿè§’åº¦(fov) é•œå¤´ç”»é¢çš„å®½é«˜æ¯”(aspect) é•œå¤´çš„æœ€è¿‘å¯è§è·ç¦»(far) é•œå¤´çš„æœ€è¿œå¯è§è·ç¦»(near) ä¸€ä¸ªéšå«å› ç´ ï¼šé•œå¤´æœ¬èº«çš„ä½ç½®(camera.position) è¿‘æˆªé¢å’Œè¿œæˆªé¢å†³å®šäº†ç‰©ä½“æ˜¯å¦åœ¨é•œå¤´å†…å¯è§\nç‰©ä½“ä¸é•œå¤´çš„è·ç¦»å†³å®šç‰©ä½“åœ¨è§†è§‰ä¸Šçš„å¤§å°\nå½“æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªé€è§†é•œå¤´æ—¶ï¼Œæ„é€ å‡½æ•°éœ€è¦ä¼ é€’çš„ 4 ä¸ªå‚æ•°ï¼Œå°±æ˜¯ä¸Šé¢å‰ 4 ä¸ªå…ƒç´ ã€‚\né€è§†é•œå¤´é»˜è®¤å‚æ•°å€¼ï¼šfov=50ã€aspect=1ã€near=0.1ã€far=2000\nè¡¥å……è¯´æ˜ï¼š\nåœ¨ Three.js å®˜æ–¹æ–‡æ¡£ä¸­å¯¹ä»¥ä¸Š 4 ä¸ªå‚æ•°çš„è§£é‡Šæ˜¯ï¼š\nfovï¼šæ‘„åƒæœºè§†æ¤ä½“å‚ç›´è§†é‡è§’åº¦ aspectï¼šæ‘„åƒæœºè§†æ¤ä½“é•¿å®½æ¯”(å®½é«˜æ¯”) nearï¼šæ‘„åƒæœºè§†æ¤ä½“è¿‘ç«¯é¢ farï¼šæ‘„åƒæœºè§†æ¤ä½“è¿œç«¯é¢ è™½ç„¶æˆ‘çš„æè¿°å’Œå®˜æ–¹æè¿°æ–‡å­—ä¸Šå­˜åœ¨å·®å¼‚ï¼Œä½†æ„æ€ç›¸åŒã€‚æˆ‘è®¤ä¸ºæˆ‘çš„ç”¨è¯æ›´åŠ å£è¯­åŒ–ï¼Œå®¹æ˜“ç†è§£ï¼Œæ‰€ä»¥åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä¼šç»§ç»­ä½¿ç”¨æˆ‘çš„æè¿°è¯­è¨€ã€‚\nå› ä¸ºå—åˆ°è‡ªå·±å¯¹ Three.js çš„ç†è§£ç¨‹åº¦ï¼Œæˆ–è®¸åä¸ªäººåŒ–è¯­è¨€æè¿°æˆ–è®¸æ˜¯ä¸æ­£ç¡®çš„ã€‚\nå…³äºé•œå¤´è¿‘æˆªé¢ä¸è¿œæˆªé¢çš„è¡¥å……è¯´æ˜ï¼šè®¡ç®—é‡ä¸æ€§èƒ½ æˆ‘ä»¬çŸ¥é“é€è§†é•œå¤´é»˜è®¤å‚æ•°å€¼ï¼šfov=50ã€aspect=1ã€near=0.1ã€far=2000ï¼Œè€Œæˆ‘ä»¬ä¹‹å‰æ–‡ç« ä¸­çš„ç¤ºä¾‹ï¼Œé€šå¸¸é•œå¤´è®¾ç½®å‚æ•°ä¸ºï¼šnew Three.PerspectiveCamera(45,2,0.1,1000)\nä¹Ÿå°±æ˜¯è¯´ï¼Œè¿‘æˆªé¢(é•œå¤´æœ€è¿‘å¯è§è·ç¦»)é€šå¸¸è®¾ç½®ä¸º 0.1ã€è¿œæˆªé¢(é•œå¤´æœ€è¿œå¯è§è·ç¦»)é€šå¸¸ä¸º 1000\nè‹¥è¶…å‡ºè¿™ä¸ªèŒƒå›´å†…çš„ç‰©ä½“æˆ–ç‰©ä½“å±€éƒ¨åˆ™éƒ½å°†ä¸å¯è§ã€‚\næ€è€ƒä¸€ä¸‹ å‡è®¾æˆ‘ä»¬ç›´æ¥å°† near ç”± 0.1 ä¿®æ”¹ä¸º 0.0001ã€far ç”± 1000 ä¿®æ”¹ä¸º 1000000ï¼Œé‚£æ˜¯ä¸æ˜¯åœºæ™¯æœ€è¿‘å¯è§åº¦æ›´åŠ ç²¾ç»†ã€å¯è§èŒƒå›´å˜å¾—æ›´å¤§ï¼Œèƒ½å¤Ÿæ‰¿è½½æ›´å¤šçš„ç‰©ä½“å‘¢ï¼Ÿ\nç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä½†åœºæ™¯è¶Šå¤§ï¼Œå¯è§åº¦è¶Šå¾®è§‚ï¼Œæ¸²æŸ“æ‰€éœ€è®¡ç®—é‡ä¹Ÿè¶Šå¤§ã€‚\nè¯·è®°å¾—ï¼šå½“è®¡ç®—é‡å¤§åˆ°ä¸€å®šç¨‹åº¦åï¼Œå°±ä¼šå‡ºç°æ¸²æŸ“å¼‚å¸¸ï¼Œç”»é¢ä¼šå‡ºç°ä¸€äº›æ„å¤–çš„ã€ä¸ç¬¦åˆé¢„æœŸç»“æœã€‚\né€šå¸¸è¡¨ç°ä¸ºç‰©ä½“è¡¨é¢åƒç´ ç´Šä¹±ã€ç ´ç¢ã€é—ªçƒã€åƒç´ å‰åå¤±è°ƒï¼Œè¿™æ˜¯å› ä¸º GPU æ²¡æœ‰è¶³å¤Ÿçš„ç²¾åº¦æ¥ç¡®è®¤å“ªäº›åƒç´ åº”è¯¥åœ¨å‰ï¼Œå“ªäº›åœ¨åã€‚\næˆ‘ååˆ†ç¡®ä¿¡æ­¤åˆ»æˆ‘æ˜¯åœ¨è®²è§£ Three.jsï¼Œè€Œä¸æ˜¯ å¤§å§¨å¦ˆã€‚\nè§£å†³åŠæ³•(å¹¶ä¸æ¨è)ï¼šå°†æ¸²æŸ“å™¨çš„logarithmicDepthBufferè®¾ç½®ä¸ºtrue logarighmicDepthBufferï¼šå¯¹æ•°æ·±åº¦ç¼“å­˜å™¨\nconst renderer = new Three.WebGLRenderer({ canvas:xxxx, logarithmicDepthBuffer:true }) æ³¨æ„äº‹é¡¹ï¼š\né€šå¸¸ç”µè„‘æµè§ˆå™¨éƒ½å·²æ”¯æŒ logarithmicDepthBuffer å±æ€§ï¼Œä½†å¾ˆå¤šæ‰‹æœºç›®å‰è¿˜ä¸æ”¯æŒã€‚ logarithmicDepthBuffer ä¸º true åªæ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½å¤Ÿç¼“è§£é—®é¢˜ï¼Œä½†è‹¥ near è¶³å¤Ÿå°ã€far è¶³å¤Ÿå¤§æ—¶ï¼Œä¾ç„¶ä¼šå‡ºç° GPU è®¡ç®—ç²¾åº¦ä¸å¤Ÿï¼Œé€ æˆç”»é¢æ¸²æŸ“ç´Šä¹±ã€‚ è§£å†³åŠæ³•(æ¨èåšæ³•)ï¼šä¸è§£å†³ è¯·è®°å¾—ï¼šä½ æœ¬å°±ä¸åº”è¯¥æŠŠ near è®¾ç½®è¿‡å°ã€far è®¾ç½®è¿‡å¤§ï¼\nnear å’Œ far æ­£ç¡®çš„è®¾å®šåŸåˆ™ å°½å¯èƒ½è®© near å’Œ far æ›´æ¥è¿‘é•œå¤´ä¸è¿œçš„ä½ç½®ï¼Œå½“ç„¶å‰ææ˜¯ä¸è®©ä»»ä½•ç‰©ä½“è¶…å‡ºæ¶ˆå¤±çš„èŒƒå›´å†…ã€‚\næ³¨æ„ï¼Œè¿™é‡Œçš„ â€œæ›´æ¥è¿‘é•œå¤´ä¸è¿œçš„ä½ç½®â€ æ˜¯æŒ‡ â€œåˆé€‚ã€é€‚å½“çš„ä½ç½®â€ï¼Œå¹¶ä¸æ˜¯æŒ‡å°æ•°ç‚¹åç²¾ç¡®å¤šå°‘ä½ã€‚\nåœ¨ä¿è¯ç²¾åº¦çš„å‰æä¸‹ï¼Œå°½å¯èƒ½è®¾ç½®åˆé€‚çš„ è¿‘æˆªé¢å’Œè¿œæˆªé¢ï¼Œè¿™æ ·è®© é•œå¤´ä¸ç‰©ä½“äº§ç”Ÿçš„è§†æ¤ â€œæ›´å°ã€æ›´æ¥è¿‘â€ï¼Œä»¥èŠ‚çœæ¸²æŸ“æ‰€éœ€è®¡ç®—é‡å’Œæ€§èƒ½ã€‚\nä¸¾ä¸€ä¸ªä¾‹å­ï¼š\nå‡è®¾ä½ éœ€è¦æ¸²æŸ“å‡ºä¸€ä¸ª è¶³çƒ çš„ç‰¹å†™ï¼Œé‚£ä¹ˆæŠŠè¶³çƒæ”¾ç½®åœ¨ä¸€ä¸ª æ¯”è¾ƒå°çš„å¹³å°æˆ–åœ°é¢å³å¯ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªåŸå¸‚ä¸€æ ·å¤§å°çš„åœºæ™¯ï¼Œå´åªæ¸²æŸ“å‡ºä¸€ä¸ª è¶³çƒçš„è¿‘è·ç¦»ç‰¹å†™ã€‚\nä½†æ˜¯å‡è®¾ä½ çš„åœºæ™¯ç¡®ç¡®å®å®éœ€è¦éå¸¸å¤§ï¼Œæ­¤æ—¶å°±éœ€è¦å¤šå‚è€ƒç½‘ä¸Šå…¶ä»–äººæ˜¯å¦‚ä½•å¤„ç†ç±»ä¼¼åœºæ™¯çš„ã€‚\næˆ–è®¸åç»­æ–‡ç« ä¸­ä¹Ÿä¼šæœ‰è®²è§£ï¼Œæ­¤æ—¶æ­¤åˆ»ä½ åªéœ€çŸ¥é“ near å’Œ far è®¾ç½®åˆé€‚å³å¯ï¼Œæ²¡å¿…è¦è¿‡äºç²¾ç»†æˆ–å·¨å¤§ã€‚\né•œå¤´ç¤ºä¾‹1ï¼šä½¿ç”¨CameraHelperæ¥è§‚å¯Ÿé•œå¤´ å…³äº é€è§†é•œå¤´ PerspectiveCamera æˆ‘ä»¬ä¹‹å‰ç¤ºä¾‹ä¸­å·²ç»ä½¿ç”¨å¤šæ¬¡ã€‚\næœ¬ç¤ºä¾‹ä¸»è¦æ¼”ç¤º é€šè¿‡ é•œå¤´è¾…åŠ©å¯¹è±¡(CameraHelper) æ¥è§‚å¯Ÿé•œå¤´ã€‚\næ€è€ƒä¸€ä¸‹ åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªé•œå¤´åªèƒ½çœ‹åˆ°åˆ«çš„ç‰©ä½“ä½†æ— æ³•çœ‹åˆ°è‡ªå·±ã€‚\nå°±å¥½åƒæˆ‘ä»¬çš„çœ¼ç›å¯ä»¥çœ‹åˆ°è¿™ä¸ªä¸–ç•Œï¼Œä½†æ˜¯çœ¼ç›æœ¬èº«è‡ªå·±æ²¡æ³•çœ‹åˆ°è‡ªå·±(çœ¼ç›)ã€‚\nå½“ç„¶é™¤éå¯¹ç€é•œå­ï¼Œä¸è¿‡å¯¹ç€é•œå­çš„æœ¬è´¨ä¾ç„¶æ˜¯çœ¼ç›å»çœ‹åˆ«çš„ç‰©ä½“ã€‚\næ›´åŠ ç›´ç™½ä¸€ç‚¹ï¼šå°±ç®—ä½ çœ¼ç›é•¿å¾—å†å¤§ï¼Œä½ ä¹Ÿåšä¸åˆ°å·¦çœ¼ç›´æ¥çœ‹åˆ°è‡ªå·±å³çœ¼ã€‚\næˆ‘ä»¬äººè™½ç„¶æ˜¯ 2 ä¸ªçœ¼çƒï¼Œä½†æ˜¯åœ¨ Three.js çš„ç›¸å…³ä¸¾ä¾‹ä¸­ï¼Œæ˜¯å°† å·¦å³ä¸¤ä¸ªçœ¼ç›å½“æˆ æ˜¯ 1 ä¸ªé•œå¤´æ¥é˜è¿°çš„ã€‚\nHelloCameraç¤ºä¾‹ç›®æ ‡ åˆ›å»ºä¸€ä¸ªåŒ…å«ç‰©ä½“çš„åœºæ™¯ åˆ›å»º 2 ä¸ªé•œå¤´ï¼Œé•œå¤´Aå’Œé•œå¤´B å°†ç½‘é¡µç”»é¢ä¸€åˆ†ä¸ºäºŒ å·¦ä¾§æ˜¾ç¤º é•œå¤´A æ‰€çœ‹åˆ°çš„åœºæ™¯ å³ä¾§ä½¿ç”¨ä½¿ç”¨ é•œå¤´B æ¥è§‚å¯Ÿ é•œå¤´A è¡¥å……è¯´æ˜ï¼š\näº‹å®ä¸Šæ˜¯ é•œå¤´B è§‚å¯Ÿå¹¶æ˜¾ç¤º é•œå¤´A å¯¹åº”çš„è¾…åŠ©å¯¹è±¡ (CameraHelper) ä¸ºäº†çœäº‹ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å‰æ–‡è®²è§£ç¯å…‰æ—¶ç¼–å†™çš„ create-scene.ts æ¥åˆ›å»ºåœºæ™¯ ä»£ç å®ç°æ€è·¯ å…³é”®ç‚¹ 1ï¼šåŒä¸€ä¸ªåœºæ™¯æ¸²æŸ“å‡º 2 ä¸ªä¸åŒçš„ç”»é¢ **å®ç° 2 ä¸ªç”»é¢ï¼š**æ·»åŠ å·¦å³ 2 ä¸ªé•œå¤´ï¼Œæ¯ä¸ªé•œå¤´è®¾ç½®ä¸åŒï¼Œæœ€ç»ˆå‘ˆç°å‡ºçš„åœºæ™¯ä¸åŒ\nconst leftCamera = new Three.PerspectiveCamera(45, 2, 5, 100) leftCamera.position.set(0, 10, 20) const rightCamera = new Three.PerspectiveCamera(60, 2, 0.1, 200) rightCamera.position.set(40, 10, 30) rightCamera.lookAt(0, 5, 0) **å®ç° 2 ä¸ªäº¤äº’ï¼š**æ·»åŠ  å·¦å³ 2 ä¸ª divã€2 ä¸ª OrbitControlsï¼Œè¦†ç›–äºcanvas ä¹‹ä¸Š\nconst leftControls = new OrbitControls(leftCamera, leftViewRef.current) leftControls.target.set(0, 5, 0) leftControls.update() const rightControls = new OrbitControls(rightCamera, rightViewRef.current) rightControls.target.set(0, 5, 0) rightControls.update() ... **æ¸²æŸ“ 2 ä¸ªç”»é¢ï¼š**ä½¿ç”¨æ¸²æŸ“å™¨çš„ è£å‡ åŠŸèƒ½\næ¸²æŸ“å™¨è£å‡åŠŸèƒ½ï¼Œæ¶‰åŠåˆ°çš„æ–¹æ³•æœ‰ setScissor()ã€setScissorTarget()ã€setViewport() ã€‚\næˆ‘ä»¬ä¹‹å‰ç¤ºä¾‹ä¸­ï¼Œä¸ºäº†é€‚åº”æµè§ˆå™¨çª—å£å¤§å°çš„æ”¹å˜ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿‡ æ¸²æŸ“å™¨çš„ setSize()\nsetScissor ( x : Integer, y : Integer, width : Integer, height : Integer ) : null å°†å‰ªè£åŒºåŸŸè®¾ä¸º(x, y)åˆ°(x + width, y + height) Sets the scissor area from\nsetScissorTest ( boolean : Boolean ) : null å¯ç”¨æˆ–ç¦ç”¨å‰ªè£æ£€æµ‹. è‹¥å¯ç”¨ï¼Œåˆ™åªæœ‰åœ¨æ‰€å®šä¹‰çš„è£å‰ªåŒºåŸŸå†…çš„åƒç´ æ‰ä¼šå—ä¹‹åçš„æ¸²æŸ“å™¨å½±å“ã€‚\nsetViewport ( x : Integer, y : Integer, width : Integer, height : Integer ) : null å°†è§†å£å¤§å°è®¾ç½®ä¸º(x, y)åˆ° (x + width, y + height)\nè¯·é¢å¤–ç•™æ„åœ¨åé¢å®é™…ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰çš„ setScissorForElement() å‡½æ•°ã€‚\nå¤šæ•²å‡ éï¼Œè®°ä½ setScissorForElement() å‡½æ•°ä¸­è·å¾—è£å‡åŒºåŸŸçš„ä»£ç å¥—è·¯\nå…³é”®ç‚¹ 2ï¼šé•œå¤´è¾…åŠ©å¯¹è±¡ é•œå¤´è¾…åŠ©å¯¹è±¡ä¸º Three.CameraHelperï¼Œä»–çš„ç”¨æ³•å¾ˆç®€å•ï¼š\nconst helper = new THREE.CameraHelper( leftCamera ) scene.add( helper ) å…³é”®ç‚¹ 3ï¼šå¦‚ä½•æ¸²æŸ“ åœ¨ä¹‹å‰æ‰€æœ‰çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæ¸²æŸ“ä»£ç éƒ½ä¸ºï¼š\nrenderer.render(scene, camera) ä½†æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ˜¯åŒä¸€ä¸ª sceneï¼Œä½†æ˜¯ 2 ä¸ªä¸åŒçš„ cameraï¼Œå› æ­¤ä¸ä¹‹å¯¹åº”çš„æ¸²æŸ“ä»£ç ä¹Ÿè¦å‘ç”Ÿå˜åŒ–ã€‚\néœ€è¦ä¾æ¬¡åˆ†åˆ«æ¸²æŸ“å‡º å·¦ä¾§é•œå¤´è§†è§’ å’Œ å³ä¾§é•œå¤´è§†è§’ã€‚\n//leftCameraä¸€äº›æ›´æ–°æ“ä½œ ... renderer.render(sceneRef.current, leftCamera) //rightCameraä¸€äº›æ›´æ–°æ“ä½œ ... renderer.render(sceneRef.current, rightCamera) å…·ä½“çš„ä»£ç  create-scene.ts æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ä¹‹å‰ â€œ11 Three.jsåŸºç¡€ä¹‹ç¯å…‰.mdâ€ ä¸­å·²å†™å¥½çš„ä»£ç ã€‚\nindex.scss .full-screen,canvas { display: block; height: inherit; width: inherit; } .split { position: fixed; display: flex; width: inherit; height: inherit; } .split div { width: inherit; height: inherit; } index.tsx import { useRef, useEffect } from 'react' import * as Three from 'three' import createScene from '@/components/hello-light/create-scene' import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls' import './index.scss' const HelloCamera = () =\u003e { const canvasRef = useRef(null) const sceneRef = useRef(null) const leftViewRef = useRef(null) const rightViewRef = useRef(null) useEffect(() =\u003e { if (canvasRef.current === null || leftViewRef.current === null || rightViewRef.current === null) { return } const renderer = new Three.WebGLRenderer({ canvas: canvasRef.current as HTMLCanvasElement }) renderer.setScissorTest(true) const scene = createScene() scene.background = new Three.Color(0x000000) sceneRef.current = scene const light = new Three.DirectionalLight(0xFFFFFF, 1) light.position.set(0, 10, 0) light.target.position.set(5, 0, 0) scene.add(light) scene.add(light.target) const leftCamera = new Three.PerspectiveCamera(45, 2, 5, 100) leftCamera.position.set(0, 10, 20) const helper = new Three.CameraHelper(leftCamera) scene.add(helper) const leftControls = new OrbitControls(leftCamera, leftViewRef.current) leftControls.target.set(0, 5, 0) leftControls.update() const rightCamera = new Three.PerspectiveCamera(60, 2, 0.1, 200) rightCamera.position.set(40, 10, 30) //ä¸ºäº†èƒ½å¤Ÿçœ‹æ¸…ã€çœ‹å…¨é•œå¤´ï¼Œæ‰€ä»¥å°†å³ä¾§é•œå¤´çš„ä½ç½®è®¾ç½®ç¨è¿œä¸€äº› rightCamera.lookAt(0, 5, 0) const rightControls = new OrbitControls(rightCamera, rightViewRef.current) rightControls.target.set(0, 5, 0) rightControls.update() const setScissorForElement = (div: HTMLDivElement) =\u003e { if (canvasRef.current === null) { return } //è·å¾— canvas å’Œ div çš„çŸ©å½¢æ¡†å°ºå¯¸å’Œä½ç½® const canvasRect = canvasRef.current.getBoundingClientRect() const divRect = div.getBoundingClientRect() //è®¡ç®—å‡ºè£åˆ‡æ¡†çš„å°ºå¯¸å’Œä½ç½® const right = Math.min(divRect.right, canvasRect.right) - canvasRect.left const left = Math.max(0, divRect.left - canvasRect.left) const bottom = Math.min(divRect.bottom, canvasRect.bottom) - canvasRect.top const top = Math.max(0, divRect.top - canvasRect.top) const width = Math.min(canvasRect.width, right - left) const height = Math.min(canvasRect.height, bottom - top) //å°†å‰ªåˆ€è®¾ç½®ä¸ºä»…æ¸²æŸ“åˆ°ç”»å¸ƒçš„è¯¥éƒ¨åˆ† const positiveYUpBottom = canvasRect.height - bottom renderer.setScissor(left, positiveYUpBottom, width, height) renderer.setViewport(left, positiveYUpBottom, width, height) //è¿”å›å¤–è§‚ return width / height } const render = () =\u003e { if (leftCamera === null || rightCamera === null || sceneRef.current === null) { return } const sceneBackground = sceneRef.current.background as Three.Color //æ¸²æŸ“ å·¦ä¾§ é•œå¤´ const leftAspect = setScissorForElement(leftViewRef.current as HTMLDivElement) leftCamera.aspect = leftAspect as number leftCamera.updateProjectionMatrix() helper.update() helper.visible = false sceneBackground.set(0x000000) renderer.render(sceneRef.current, leftCamera) //æ¸²æŸ“ å³ä¾§ ä¸ªé•œå¤´ const rightAspect = setScissorForElement(rightViewRef.current as HTMLDivElement) rightCamera.aspect = rightAspect as number rightCamera.updateProjectionMatrix() helper.visible = true sceneBackground.set(0x000040) renderer.render(sceneRef.current, rightCamera) window.requestAnimationFrame(render) } window.requestAnimationFrame(render) const handleResize = () =\u003e { if (canvasRef.current === null) { return } const width = canvasRef.current.clientWidth const height = canvasRef.current.clientHeight renderer.setSize(width, height, false) } handleResize() window.addEventListener('resize', handleResize) return () =\u003e { window.removeEventListener('resize', handleResize) } }, [canvasRef]) return ( ) } export default HelloCamera æ‰§è¡Œä»¥åï¼Œå°±ä¼šçœ‹åˆ°æµè§ˆå™¨ä¸­å·¦å³ 2 ä¸ªå¯äº¤äº’çš„ç”»é¢ã€‚å…¶ä¸­å³ä¾§ç”»é¢ä¸­åŒ…å«å·¦ä¾§ç¯å…‰è¾…åŠ©å¯¹è±¡ã€‚\né•œå¤´ç¤ºä¾‹2ï¼šOrthographicCamera ç¬¬äºŒä¸ªæ¯”è¾ƒç»å¸¸ç”¨çš„é•œå¤´æ˜¯ OrthographicCamera(æ­£äº¤é•œå¤´)ã€‚\næ­£äº¤é•œå¤´ä¸é€è§†é•œå¤´æœ€å¤§çš„åŒºåˆ«ç‚¹åœ¨äºï¼š\næ­£äº¤é•œå¤´çš„è§†æ¤ä½“ä¸æ˜¯ æ¤ä½“ï¼Œè€Œæ˜¯ç«‹æ–¹ä½“\næ­£äº¤é•œå¤´çœ‹åˆ°çš„éƒ½æ˜¯ä¸€ä¸ªâ€œé¢â€\nå› æ­¤ï¼Œæ­£äº¤é•œå¤´æ²¡æœ‰ â€œé€è§†(è¿‘å¤§è¿œå°)â€è¿™ä¸ªæ¦‚å¿µ\næˆ‘å¯¹äºä»¥ä¸Š 2 ç‚¹ç†è§£å¹¶ä¸æ·±ï¼Œå…ˆè®°ä½ä»¥åå†æ…¢æ…¢ç ”ç©¶\nOrthographicCameraçš„ç”¨é€” ç”¨é€”1ï¼šä½œä¸º 2D ç”»å¸ƒ ä½œä¸º 3D å»ºæ¨¡ç¨‹åº çš„ ä¸Šã€ä¸‹ã€å·¦ã€å³ã€å‰ã€å è§†å›¾ã€‚ OrthographicCameraåŸºæœ¬ç”¨æ³• const camera = new Three.OrthographicCamera(-1, 1, 1, -1, 5, 50) camera.zoom = 0.2 camera.position.set(0,10,20) åˆå§‹åŒ–æ—¶ï¼Œæ„é€ å‡½æ•°å†…çš„å‚æ•°ä¾æ¬¡æ˜¯ï¼š\nOrthographicCamera( left : Number, right : Number, top : Number, bottom : Number, near : Number, far : Number )\nleftï¼šè§†æ¤ä½“å·¦ä¾§é¢ rightï¼šè§†æ¤ä½“å³ä¾§é¢ topï¼šè§†æ¤ä½“é¡¶é¢ bottomï¼šè§†æ¤ä½“åº•é¢ nearï¼šè§†æ¤ä½“è¿‘ç«¯é¢ farï¼šè§†æ¤ä½“è¿œç«¯é¢ ä»å®é™…çš„è§’åº¦æ¥çœ‹ï¼Œä¸€å®šè¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š\nleft çš„å€¼ä¸èƒ½å¤§äº rightï¼ŒåŒç† bottom çš„å€¼ä¸èƒ½å¤§äº topã€‚ å¦‚æœæ²¡æœ‰æŒ‰ç…§è¿™ä¸ªçº¦å®šï¼Œä¾‹å¦‚ bottom å¤§äº top ç›¸å½“äºé¢ å€’äº†ç›¸æœºã€‚ near è®¾ç½®è¶Šå°ï¼ŒæŠ•å½±çš„æ˜ åƒè¶Šå¤§ left ä¸ right ä¹‹é—´çš„è·ç¦»ã€top ä¸ bottom ä¹‹é—´çš„è·ç¦»çš„æ¯”ä¾‹ä¸€å®šè¦å’Œ canvas æ¯”ä¾‹ç›¸åŒï¼Œå¦åˆ™ä¼šå¯¼è‡´æŠ•å½±çš„ç‰©ä½“å½¢çŠ¶å˜å½¢ æ­£äº¤é•œå¤´ä¸é€è§†é•œå¤´çš„å‡ ç‚¹ä¸åŒåœ°æ–¹ æ¸²æŸ“æ—¶ï¼Œå¯¹åº”çš„è®¾ç½®ä¸åŒã€‚\né€è§†é•œå¤´æ¸²æŸ“æ—¶ï¼Œéœ€è¦ä¿®æ”¹çš„æ˜¯ camera.aspect = newAspect\næ­£äº¤é•œå¤´æ¸²æŸ“æ—¶ï¼Œéœ€è¦ä¿®æ”¹çš„æ˜¯ camera.left = - new Aspectã€camera.right = new Aspect\nå‡è®¾æˆ‘ä»¬åœ¨ HelloCamera ç¤ºä¾‹ä¸­ä½¿ç”¨ OrthographicCamera éœ€è¦ä¿®æ”¹çš„åœ°æ–¹ä¸ºï¼š\n- const leftCamera = new Three.PerspectiveCamera(45, 2, 5, 100) - leftCamera.position.set(0, 10, 20) + const leftCamera = new Three.OrthographicCamera(-1, 1, 1, -1, 5, 50) + leftCamera.zoom = 0.2 leftCamera.position.set(0,10,20) ... const leftAspect = setScissorForElement(leftViewRef.current as HTMLDivElement) - leftCamera.aspect = leftAspect as number + leftCamera.left = -(leftAspect as number) + leftCamera.right = leftAspect as number leftCamera.updateProjectionMatrix() å…¶ä»–ä»£ç æ— éœ€ä¿®æ”¹ï¼Œå‘å¸ƒè°ƒè¯•ï¼Œå³å¯çœ‹åˆ°æ­£äº¤é•œå¤´è¾…åŠ©å¯¹è±¡ï¼Œæ­¤æ—¶çš„è§†æ¤ä¸å†æ˜¯æ¤ä½“ï¼Œè€Œæ˜¯ä¸€ä¸ªç«‹æ–¹ä½“ã€‚\nå…³äºå…¶ä»–é•œå¤´ï¼šArrayCameraã€CubeCameraã€StereoCamera æœ¬æ–‡ä¸å†è®²è§£ï¼Œä»¥åç”¨åˆ°çš„æ—¶å€™å†æ·±å…¥ç ”ç©¶ã€‚\nå…·ä½“çš„ç”¨æ³•ï¼Œå¯æŸ¥é˜…ï¼šhttps://threejs.org/docs/index.html#api/zh/cameras/Camera\nè‡³æ­¤ï¼Œå…³äºé•œå¤´çš„åŸºç¡€çŸ¥è¯†è®²è§£å®Œæ¯•ã€‚\nè™½ç„¶æœ¬æ–‡æ˜¯åœ¨è®²é•œå¤´ï¼Œä½†æœ¬æ–‡çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹å´æ˜¯åœ¨è®² æ¸²æŸ“å™¨çš„è£åˆ‡ åŠŸèƒ½ã€‚\nä¸€å®šè¦å¤šå¤šå¤ä¹ ï¼Œç†Ÿç»ƒæŒæ¡ æ¸²æŸ“å™¨çš„ setScissor()ã€setScissorTest()ã€setViewport() æ–¹æ³•ã€‚\nä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†è®²è§£ Shardown(é˜´å½±)\n","wordCount":"4738","inLanguage":"en","datePublished":"2023-12-19T17:11:35+08:00","dateModified":"2023-12-19T17:11:35+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://bablvsj.github.io/posts/threejs/12-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E9%95%9C%E5%A4%B4/"},"publisher":{"@type":"Organization","name":"Bablvsj's Blog","logo":{"@type":"ImageObject","url":"https://bablvsj.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bablvsj.github.io accesskey=h title="Bablvsj's Blog (Alt + H)">Bablvsj's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bablvsj.github.io/ title=ä¸»é¡µ><span>ä¸»é¡µ</span></a></li><li><a href=https://bablvsj.github.io/archives/ title=æ—¶é—´è½´><span>æ—¶é—´è½´</span></a></li><li><a href=https://bablvsj.github.io/tags title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://bablvsj.github.io/about title=å…³äº><span>å…³äº</span></a></li><li><a href=https://bablvsj.github.io/search title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>12 Three.jsåŸºç¡€ä¹‹é•œå¤´</h1><div class=post-meta><div class=post-tags-meta><a href=https://bablvsj.github.io/tags/three.js/>Three.js</a></div>10 min&nbsp;Â·&nbsp;<span title='2023-12-19 17:11:35 +0800 +0800'>2023/12/19</span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><div class=inner><ul><li><a href=#%e9%95%9c%e5%a4%b4%e7%9a%84%e4%b8%80%e4%ba%9b%e7%9f%a5%e8%af%86 aria-label=é•œå¤´çš„ä¸€äº›çŸ¥è¯†>é•œå¤´çš„ä¸€äº›çŸ¥è¯†</a><ul><ul><li><a href=#%e5%b9%b3%e6%88%aa%e9%9d%a2 aria-label=å¹³æˆªé¢>å¹³æˆªé¢</a></li><li><a href=#%e8%a7%86%e6%a4%8e aria-label=è§†æ¤>è§†æ¤</a></li></ul></ul></li><li><a href=#%e5%85%b3%e4%ba%8e%e9%95%9c%e5%a4%b4%e8%bf%91%e6%88%aa%e9%9d%a2%e4%b8%8e%e8%bf%9c%e6%88%aa%e9%9d%a2%e7%9a%84%e8%a1%a5%e5%85%85%e8%af%b4%e6%98%8e%e8%ae%a1%e7%ae%97%e9%87%8f%e4%b8%8e%e6%80%a7%e8%83%bd aria-label=å…³äºé•œå¤´è¿‘æˆªé¢ä¸è¿œæˆªé¢çš„è¡¥å……è¯´æ˜ï¼šè®¡ç®—é‡ä¸æ€§èƒ½>å…³äºé•œå¤´è¿‘æˆªé¢ä¸è¿œæˆªé¢çš„è¡¥å……è¯´æ˜ï¼šè®¡ç®—é‡ä¸æ€§èƒ½</a><ul><ul><li><a href=#%e6%80%9d%e8%80%83%e4%b8%80%e4%b8%8b aria-label=æ€è€ƒä¸€ä¸‹>æ€è€ƒä¸€ä¸‹</a></li><li><a href=#%e8%a7%a3%e5%86%b3%e5%8a%9e%e6%b3%95%e5%b9%b6%e4%b8%8d%e6%8e%a8%e8%8d%90%e5%b0%86%e6%b8%b2%e6%9f%93%e5%99%a8%e7%9a%84logarithmicdepthbuffer%e8%ae%be%e7%bd%ae%e4%b8%batrue aria-label=è§£å†³åŠæ³•(å¹¶ä¸æ¨è)ï¼šå°†æ¸²æŸ“å™¨çš„logarithmicDepthBufferè®¾ç½®ä¸ºtrue>è§£å†³åŠæ³•(å¹¶ä¸æ¨è)ï¼šå°†æ¸²æŸ“å™¨çš„logarithmicDepthBufferè®¾ç½®ä¸ºtrue</a></li><li><a href=#%e8%a7%a3%e5%86%b3%e5%8a%9e%e6%b3%95%e6%8e%a8%e8%8d%90%e5%81%9a%e6%b3%95%e4%b8%8d%e8%a7%a3%e5%86%b3 aria-label=è§£å†³åŠæ³•(æ¨èåšæ³•)ï¼šä¸è§£å†³>è§£å†³åŠæ³•(æ¨èåšæ³•)ï¼šä¸è§£å†³</a></li><li><a href=#near-%e5%92%8c-far-%e6%ad%a3%e7%a1%ae%e7%9a%84%e8%ae%be%e5%ae%9a%e5%8e%9f%e5%88%99 aria-label="near å’Œ far æ­£ç¡®çš„è®¾å®šåŸåˆ™">near å’Œ far æ­£ç¡®çš„è®¾å®šåŸåˆ™</a></li></ul></ul></li><li><a href=#%e9%95%9c%e5%a4%b4%e7%a4%ba%e4%be%8b1%e4%bd%bf%e7%94%a8camerahelper%e6%9d%a5%e8%a7%82%e5%af%9f%e9%95%9c%e5%a4%b4 aria-label=é•œå¤´ç¤ºä¾‹1ï¼šä½¿ç”¨CameraHelperæ¥è§‚å¯Ÿé•œå¤´>é•œå¤´ç¤ºä¾‹1ï¼šä½¿ç”¨CameraHelperæ¥è§‚å¯Ÿé•œå¤´</a><ul><ul><li><a href=#%e6%80%9d%e8%80%83%e4%b8%80%e4%b8%8b-1 aria-label=æ€è€ƒä¸€ä¸‹>æ€è€ƒä¸€ä¸‹</a></li></ul><li><a href=#hellocamera%e7%a4%ba%e4%be%8b%e7%9b%ae%e6%a0%87 aria-label=HelloCameraç¤ºä¾‹ç›®æ ‡>HelloCameraç¤ºä¾‹ç›®æ ‡</a></li><li><a href=#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af aria-label=ä»£ç å®ç°æ€è·¯>ä»£ç å®ç°æ€è·¯</a><ul><li><a href=#%e5%85%b3%e9%94%ae%e7%82%b9-1%e5%90%8c%e4%b8%80%e4%b8%aa%e5%9c%ba%e6%99%af%e6%b8%b2%e6%9f%93%e5%87%ba-2-%e4%b8%aa%e4%b8%8d%e5%90%8c%e7%9a%84%e7%94%bb%e9%9d%a2 aria-label="å…³é”®ç‚¹ 1ï¼šåŒä¸€ä¸ªåœºæ™¯æ¸²æŸ“å‡º 2 ä¸ªä¸åŒçš„ç”»é¢">å…³é”®ç‚¹ 1ï¼šåŒä¸€ä¸ªåœºæ™¯æ¸²æŸ“å‡º 2 ä¸ªä¸åŒçš„ç”»é¢</a></li><li><a href=#%e5%85%b3%e9%94%ae%e7%82%b9-2%e9%95%9c%e5%a4%b4%e8%be%85%e5%8a%a9%e5%af%b9%e8%b1%a1 aria-label="å…³é”®ç‚¹ 2ï¼šé•œå¤´è¾…åŠ©å¯¹è±¡">å…³é”®ç‚¹ 2ï¼šé•œå¤´è¾…åŠ©å¯¹è±¡</a></li><li><a href=#%e5%85%b3%e9%94%ae%e7%82%b9-3%e5%a6%82%e4%bd%95%e6%b8%b2%e6%9f%93 aria-label="å…³é”®ç‚¹ 3ï¼šå¦‚ä½•æ¸²æŸ“">å…³é”®ç‚¹ 3ï¼šå¦‚ä½•æ¸²æŸ“</a></li></ul></li><li><a href=#%e5%85%b7%e4%bd%93%e7%9a%84%e4%bb%a3%e7%a0%81 aria-label=å…·ä½“çš„ä»£ç >å…·ä½“çš„ä»£ç </a><ul><li><a href=#create-scenets aria-label=create-scene.ts>create-scene.ts</a></li><li><a href=#indexscss aria-label=index.scss>index.scss</a></li><li><a href=#indextsx aria-label=index.tsx>index.tsx</a></li></ul></li></ul></li><li><a href=#%e9%95%9c%e5%a4%b4%e7%a4%ba%e4%be%8b2orthographiccamera aria-label=é•œå¤´ç¤ºä¾‹2ï¼šOrthographicCamera>é•œå¤´ç¤ºä¾‹2ï¼šOrthographicCamera</a><ul><ul><li><a href=#orthographiccamera%e7%9a%84%e7%94%a8%e9%80%94 aria-label=OrthographicCameraçš„ç”¨é€”>OrthographicCameraçš„ç”¨é€”</a></li><li><a href=#orthographiccamera%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95 aria-label=OrthographicCameraåŸºæœ¬ç”¨æ³•>OrthographicCameraåŸºæœ¬ç”¨æ³•</a></li><li><a href=#%e6%ad%a3%e4%ba%a4%e9%95%9c%e5%a4%b4%e4%b8%8e%e9%80%8f%e8%a7%86%e9%95%9c%e5%a4%b4%e7%9a%84%e5%87%a0%e7%82%b9%e4%b8%8d%e5%90%8c%e5%9c%b0%e6%96%b9 aria-label=æ­£äº¤é•œå¤´ä¸é€è§†é•œå¤´çš„å‡ ç‚¹ä¸åŒåœ°æ–¹>æ­£äº¤é•œå¤´ä¸é€è§†é•œå¤´çš„å‡ ç‚¹ä¸åŒåœ°æ–¹</a></li></ul><li><a href=#%e5%81%87%e8%ae%be%e6%88%91%e4%bb%ac%e5%9c%a8-hellocamera-%e7%a4%ba%e4%be%8b%e4%b8%ad%e4%bd%bf%e7%94%a8-orthographiccamera aria-label="å‡è®¾æˆ‘ä»¬åœ¨ HelloCamera ç¤ºä¾‹ä¸­ä½¿ç”¨ OrthographicCamera">å‡è®¾æˆ‘ä»¬åœ¨ HelloCamera ç¤ºä¾‹ä¸­ä½¿ç”¨ OrthographicCamera</a></li></ul></li></ul></div></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>åœ¨ä¹‹å‰æ‰€æœ‰çš„ç¤ºä¾‹ä¸­ï¼Œå…³äºé•œå¤´ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯ PerspectiveCamera(é€è§†é•œå¤´)ã€‚</p><blockquote><p>å†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼Œæˆ‘ä¸ªäººåå¥½æ˜¯å–œæ¬¢å°† Camera ç§°ä¸º â€œé•œå¤´â€ï¼Œä½†æ˜¯ Three.js å®˜æ–¹æˆ–å…¶ä»–æ•™ç¨‹ä¸­ç§°å‘¼å…¶ä¸º â€œç›¸æœºâ€</p></blockquote><p><strong>åœ¨ Three.js ä¸­ï¼Œä¸€å…±æœ‰ 5 ç§é•œå¤´ï¼š</strong></p><table><thead><tr><th>é•œå¤´ç±»å‹(éƒ½ç»§æ‰¿äºThree.Camera)</th><th>é•œå¤´åç§°</th><th>è§£é‡Šè¯´æ˜</th></tr></thead><tbody><tr><td>ArrayCamera</td><td>é•œå¤´é˜µåˆ—</td><td>ä¸€ç»„å·²é¢„å®šä¹‰çš„é•œå¤´</td></tr><tr><td>CubeCamera</td><td>ç«‹æ–¹é•œå¤´</td><td>6ä¸ªé¢çš„é•œå¤´(å‰ã€åã€å·¦ã€å³ã€é¡¶ã€åº•)</td></tr><tr><td>OrthographicCamera</td><td>æ­£äº¤é•œå¤´</td><td>æ— è®ºç‰©ä½“è·ç¦»é•œå¤´è¿œè¿‘ï¼Œæœ€ç»ˆæ¸²æŸ“å‡ºçš„å¤§å°ä¸å˜</td></tr><tr><td>PerspectiveCamera</td><td>é€è§†é•œå¤´</td><td>åƒäººçœ¼ç›ä¸€æ ·çš„é•œå¤´ï¼Œè¿œå¤§è¿‘å°ï¼Œæœ€å¸¸ç”¨çš„é•œå¤´</td></tr><tr><td>StereoCamera</td><td>ç«‹ä½“é•œå¤´</td><td>åŒé€è§†é•œå¤´ï¼Œå¸¸ç”¨äºåˆ›å»º 3D ç«‹ä½“å½±åƒæˆ– è§†å·®å±éšœ</td></tr></tbody></table><p><strong>æ‰€æœ‰é•œå¤´çš„è¾…åŠ©å¯¹è±¡éƒ½æ˜¯ï¼šThree.CameraHelper</strong></p><p>ç”±äº é€è§†é•œå¤´(PerspectiveCamera) æ˜¯æ—¥å¸¸ä¸­ä½¿ç”¨æœ€é¢‘ç¹çš„é•œå¤´ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬å…ˆä» é€è§†é•œå¤´ å¼€å§‹è®²è§£ã€‚</p><h2 id=é•œå¤´çš„ä¸€äº›çŸ¥è¯†>é•œå¤´çš„ä¸€äº›çŸ¥è¯†<a hidden class=anchor aria-hidden=true href=#é•œå¤´çš„ä¸€äº›çŸ¥è¯†>#</a></h2><blockquote><p>æˆ‘ä»¬é€šè¿‡é€è§†é•œå¤´ï¼Œæ¥è®²è§£ä¸€äº›é•œå¤´çš„çŸ¥è¯†<br>é€è§†é•œå¤´(PerspectiveCamera) æ‰€å‘ˆç°å‡ºçš„æ•ˆæœï¼Œå’Œæˆ‘ä»¬ç”¨æœ‰çœ¼ç›è§‚å¯Ÿä¸–ç•Œæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚</p></blockquote><h4 id=å¹³æˆªé¢>å¹³æˆªé¢<a hidden class=anchor aria-hidden=true href=#å¹³æˆªé¢>#</a></h4><p>æ— è®ºæ‰€è§‚å¯Ÿçš„ç‰©ä½“æ˜¯ä»€ä¹ˆç±»å‹ï¼Œä¾‹å¦‚çƒä½“ã€ç«‹æ–¹ä½“ã€æ¤ä½“ç­‰ï¼Œåœ¨æˆ‘ä»¬çš„è§†é‡ä¸­éƒ½ä¼šå½¢æˆ 2 ä¸ªæˆªé¢ï¼š</p><ol><li><strong>è¿œæˆªé¢(far)ï¼šç‰©ä½“æœ€è¿œå¤„çš„æˆªé¢</strong></li><li><strong>è¿‘æˆªé¢(near)ï¼šç‰©ä½“æœ€è¿‘å¤„çš„æˆªé¢</strong></li></ol><p>è‹¥ä»¥æŸä¸ªç‰¹å®šè§’åº¦ï¼Œå½“é•œå¤´(çœ¼ç›)è§‚å¯Ÿç‰©ä½“æ—¶ï¼Œç‰©ä½“è¿œæˆªé¢å’Œè¿‘æˆªé¢å®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆæ­¤æ—¶è¿‘æˆªé¢å°±ä¼šé®æŒ¡è¿œæˆªé¢ï¼Œæˆ‘ä»¬åªèƒ½çœ‹åˆ°è¿‘æˆªé¢ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬åœ¨ä¸€ä¸ªç«‹æ–¹ä½“çš„æ­£å‰æ–¹ï¼Œæ­¤æ—¶è¿‘æˆªé¢å®Œå…¨é®æŒ¡ä½è¿œæˆªé¢ï¼Œæ­¤æ—¶æˆ‘ä»¬è§‚å¯Ÿåˆ°çš„ç«‹æ–¹ä½“æ›´åƒæ˜¯ä¸€ä¸ªå¹³é¢ã€‚</p><blockquote><p>ä½†æ˜¯ç”±äºå¯èƒ½å­˜åœ¨é˜´å½±ï¼Œæˆ‘ä»¬ä¾ç„¶èƒ½å¤Ÿæ„ŸçŸ¥åˆ°è¿™æ˜¯ä¸€ä¸ª â€œ3Dç«‹ä½“ç‰©ä½“â€ã€‚</p></blockquote><h4 id=è§†æ¤>è§†æ¤<a hidden class=anchor aria-hidden=true href=#è§†æ¤>#</a></h4><p>æƒ³è±¡ä¸€ä¸‹ï¼Œå‡è®¾æŠŠæˆ‘ä»¬çš„é•œå¤´(çœ¼ç›) å½“åšä¸€ä¸ªç‚¹ï¼Œç”±è¿™ä¸ªç‚¹ä¾æ¬¡ä¸ç‰©ä½“çš„è¿‘æˆªé¢ã€è¿œæˆªé¢çš„é¡¶ç‚¹è¿›è¡Œè¿æ¥ï¼Œå°±ä¼šå½¢æˆä¸€ä¸ª æ¤ä½“ï¼Œè€Œè¿™ä¸ªè™šæ„å‡ºæ¥çš„æ¤ä½“ï¼Œå°±æ˜¯æˆ‘ä»¬é•œå¤´(çœ¼ç›)ä¸ç‰©ä½“åœ¨ç©ºé—´ä¸Šå­˜åœ¨çš„è§†æ¤ã€‚</p><p>å¦‚æœæˆ‘ä»¬çœ¼ç›ä¸æ˜¯ä¸ç‰©ä½“ï¼Œè€Œæ˜¯ä¸ <strong>â€œåœºæ™¯(Three.Scene)çš„è¿‘æˆªé¢ã€è¿œæˆªé¢â€</strong> å½¢æˆçš„è§†æ¤ï¼Œå°±æ˜¯æ­£å¸¸ Three.js åœºæ™¯ä¸­å¯è§ç©ºé—´ã€‚</p><p>è¯·æ³¨æ„ï¼Œä¸Šé¢æåˆ°çš„ åœºæ™¯çš„è¿œæˆªé¢å’Œè¿‘æˆªé¢ æ˜¯åŠ äº†å¼•å·ï¼Œäº‹å®ä¸Šæ²¡æœ‰åŠæ³•ç›´æ¥è®¾ç½®åœºæ™¯çš„è¿œè¿‘æˆªé¢ï¼Œåœºæ™¯çš„è¿‘è¿œè§†æ¤æ˜¯ç”±é•œå¤´çš„ä»¥ä¸‹å‡ ä¸ªå‚æ•°æœ€ç»ˆè®¡ç®—å‡ºçš„ï¼š</p><ol><li>é•œå¤´çš„è§‚å¯Ÿè§’åº¦(fov)</li><li>é•œå¤´ç”»é¢çš„å®½é«˜æ¯”(aspect)</li><li>é•œå¤´çš„æœ€è¿‘å¯è§è·ç¦»(far)</li><li>é•œå¤´çš„æœ€è¿œå¯è§è·ç¦»(near)</li><li>ä¸€ä¸ªéšå«å› ç´ ï¼šé•œå¤´æœ¬èº«çš„ä½ç½®(camera.position)</li></ol><blockquote><p>è¿‘æˆªé¢å’Œè¿œæˆªé¢å†³å®šäº†ç‰©ä½“æ˜¯å¦åœ¨é•œå¤´å†…å¯è§<br>ç‰©ä½“ä¸é•œå¤´çš„è·ç¦»å†³å®šç‰©ä½“åœ¨è§†è§‰ä¸Šçš„å¤§å°</p></blockquote><p>å½“æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªé€è§†é•œå¤´æ—¶ï¼Œæ„é€ å‡½æ•°éœ€è¦ä¼ é€’çš„ 4 ä¸ªå‚æ•°ï¼Œå°±æ˜¯ä¸Šé¢å‰ 4 ä¸ªå…ƒç´ ã€‚</p><p><strong>é€è§†é•œå¤´é»˜è®¤å‚æ•°å€¼ï¼šfov=50ã€aspect=1ã€near=0.1ã€far=2000</strong></p><p><strong>è¡¥å……è¯´æ˜ï¼š</strong></p><p>åœ¨ Three.js å®˜æ–¹æ–‡æ¡£ä¸­å¯¹ä»¥ä¸Š 4 ä¸ªå‚æ•°çš„è§£é‡Šæ˜¯ï¼š</p><ol><li>fovï¼šæ‘„åƒæœºè§†æ¤ä½“å‚ç›´è§†é‡è§’åº¦</li><li>aspectï¼šæ‘„åƒæœºè§†æ¤ä½“é•¿å®½æ¯”(å®½é«˜æ¯”)</li><li>nearï¼šæ‘„åƒæœºè§†æ¤ä½“è¿‘ç«¯é¢</li><li>farï¼šæ‘„åƒæœºè§†æ¤ä½“è¿œç«¯é¢</li></ol><blockquote><p>è™½ç„¶æˆ‘çš„æè¿°å’Œå®˜æ–¹æè¿°æ–‡å­—ä¸Šå­˜åœ¨å·®å¼‚ï¼Œä½†æ„æ€ç›¸åŒã€‚æˆ‘è®¤ä¸ºæˆ‘çš„ç”¨è¯æ›´åŠ å£è¯­åŒ–ï¼Œå®¹æ˜“ç†è§£ï¼Œæ‰€ä»¥åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä¼šç»§ç»­ä½¿ç”¨æˆ‘çš„æè¿°è¯­è¨€ã€‚</p><p>å› ä¸ºå—åˆ°è‡ªå·±å¯¹ Three.js çš„ç†è§£ç¨‹åº¦ï¼Œæˆ–è®¸åä¸ªäººåŒ–è¯­è¨€æè¿°æˆ–è®¸æ˜¯ä¸æ­£ç¡®çš„ã€‚</p></blockquote><h2 id=å…³äºé•œå¤´è¿‘æˆªé¢ä¸è¿œæˆªé¢çš„è¡¥å……è¯´æ˜è®¡ç®—é‡ä¸æ€§èƒ½>å…³äºé•œå¤´è¿‘æˆªé¢ä¸è¿œæˆªé¢çš„è¡¥å……è¯´æ˜ï¼šè®¡ç®—é‡ä¸æ€§èƒ½<a hidden class=anchor aria-hidden=true href=#å…³äºé•œå¤´è¿‘æˆªé¢ä¸è¿œæˆªé¢çš„è¡¥å……è¯´æ˜è®¡ç®—é‡ä¸æ€§èƒ½>#</a></h2><p>æˆ‘ä»¬çŸ¥é“é€è§†é•œå¤´é»˜è®¤å‚æ•°å€¼ï¼šfov=50ã€aspect=1ã€near=0.1ã€far=2000ï¼Œè€Œæˆ‘ä»¬ä¹‹å‰æ–‡ç« ä¸­çš„ç¤ºä¾‹ï¼Œé€šå¸¸é•œå¤´è®¾ç½®å‚æ•°ä¸ºï¼šnew Three.PerspectiveCamera(45,2,0.1,1000)</p><blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿‘æˆªé¢(é•œå¤´æœ€è¿‘å¯è§è·ç¦»)é€šå¸¸è®¾ç½®ä¸º 0.1ã€è¿œæˆªé¢(é•œå¤´æœ€è¿œå¯è§è·ç¦»)é€šå¸¸ä¸º 1000</p></blockquote><p>è‹¥è¶…å‡ºè¿™ä¸ªèŒƒå›´å†…çš„ç‰©ä½“æˆ–ç‰©ä½“å±€éƒ¨åˆ™éƒ½å°†ä¸å¯è§ã€‚</p><h4 id=æ€è€ƒä¸€ä¸‹>æ€è€ƒä¸€ä¸‹<a hidden class=anchor aria-hidden=true href=#æ€è€ƒä¸€ä¸‹>#</a></h4><p>å‡è®¾æˆ‘ä»¬ç›´æ¥å°† near ç”± 0.1 ä¿®æ”¹ä¸º 0.0001ã€far ç”± 1000 ä¿®æ”¹ä¸º 1000000ï¼Œé‚£æ˜¯ä¸æ˜¯åœºæ™¯æœ€è¿‘å¯è§åº¦æ›´åŠ ç²¾ç»†ã€å¯è§èŒƒå›´å˜å¾—æ›´å¤§ï¼Œèƒ½å¤Ÿæ‰¿è½½æ›´å¤šçš„ç‰©ä½“å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä½†åœºæ™¯è¶Šå¤§ï¼Œå¯è§åº¦è¶Šå¾®è§‚ï¼Œæ¸²æŸ“æ‰€éœ€è®¡ç®—é‡ä¹Ÿè¶Šå¤§ã€‚</p><p><strong>è¯·è®°å¾—ï¼šå½“è®¡ç®—é‡å¤§åˆ°ä¸€å®šç¨‹åº¦åï¼Œå°±ä¼šå‡ºç°æ¸²æŸ“å¼‚å¸¸ï¼Œç”»é¢ä¼šå‡ºç°ä¸€äº›æ„å¤–çš„ã€ä¸ç¬¦åˆé¢„æœŸç»“æœã€‚</strong></p><p><strong>é€šå¸¸è¡¨ç°ä¸ºç‰©ä½“è¡¨é¢åƒç´ ç´Šä¹±ã€ç ´ç¢ã€é—ªçƒã€åƒç´ å‰åå¤±è°ƒï¼Œè¿™æ˜¯å› ä¸º GPU æ²¡æœ‰è¶³å¤Ÿçš„ç²¾åº¦æ¥ç¡®è®¤å“ªäº›åƒç´ åº”è¯¥åœ¨å‰ï¼Œå“ªäº›åœ¨åã€‚</strong></p><blockquote><p>æˆ‘ååˆ†ç¡®ä¿¡æ­¤åˆ»æˆ‘æ˜¯åœ¨è®²è§£ Three.jsï¼Œè€Œä¸æ˜¯ å¤§å§¨å¦ˆã€‚</p></blockquote><h4 id=è§£å†³åŠæ³•å¹¶ä¸æ¨èå°†æ¸²æŸ“å™¨çš„logarithmicdepthbufferè®¾ç½®ä¸ºtrue>è§£å†³åŠæ³•(å¹¶ä¸æ¨è)ï¼šå°†æ¸²æŸ“å™¨çš„logarithmicDepthBufferè®¾ç½®ä¸ºtrue<a hidden class=anchor aria-hidden=true href=#è§£å†³åŠæ³•å¹¶ä¸æ¨èå°†æ¸²æŸ“å™¨çš„logarithmicdepthbufferè®¾ç½®ä¸ºtrue>#</a></h4><p><strong>logarighmicDepthBufferï¼šå¯¹æ•°æ·±åº¦ç¼“å­˜å™¨</strong></p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const renderer = new Three.WebGLRenderer({
</span></span><span style=display:flex><span>  canvas:xxxx,
</span></span><span style=display:flex><span>  logarithmicDepthBuffer:true
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><ol><li>é€šå¸¸ç”µè„‘æµè§ˆå™¨éƒ½å·²æ”¯æŒ logarithmicDepthBuffer å±æ€§ï¼Œä½†å¾ˆå¤šæ‰‹æœºç›®å‰è¿˜ä¸æ”¯æŒã€‚</li><li>logarithmicDepthBuffer ä¸º true åªæ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½å¤Ÿç¼“è§£é—®é¢˜ï¼Œä½†è‹¥ near è¶³å¤Ÿå°ã€far è¶³å¤Ÿå¤§æ—¶ï¼Œä¾ç„¶ä¼šå‡ºç° GPU è®¡ç®—ç²¾åº¦ä¸å¤Ÿï¼Œé€ æˆç”»é¢æ¸²æŸ“ç´Šä¹±ã€‚</li></ol><h4 id=è§£å†³åŠæ³•æ¨èåšæ³•ä¸è§£å†³>è§£å†³åŠæ³•(æ¨èåšæ³•)ï¼šä¸è§£å†³<a hidden class=anchor aria-hidden=true href=#è§£å†³åŠæ³•æ¨èåšæ³•ä¸è§£å†³>#</a></h4><p><strong>è¯·è®°å¾—ï¼šä½ æœ¬å°±ä¸åº”è¯¥æŠŠ near è®¾ç½®è¿‡å°ã€far è®¾ç½®è¿‡å¤§ï¼</strong></p><h4 id=near-å’Œ-far-æ­£ç¡®çš„è®¾å®šåŸåˆ™>near å’Œ far æ­£ç¡®çš„è®¾å®šåŸåˆ™<a hidden class=anchor aria-hidden=true href=#near-å’Œ-far-æ­£ç¡®çš„è®¾å®šåŸåˆ™>#</a></h4><p>å°½å¯èƒ½è®© near å’Œ far æ›´æ¥è¿‘é•œå¤´ä¸è¿œçš„ä½ç½®ï¼Œå½“ç„¶å‰ææ˜¯ä¸è®©ä»»ä½•ç‰©ä½“è¶…å‡ºæ¶ˆå¤±çš„èŒƒå›´å†…ã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œçš„ â€œæ›´æ¥è¿‘é•œå¤´ä¸è¿œçš„ä½ç½®â€ æ˜¯æŒ‡ â€œåˆé€‚ã€é€‚å½“çš„ä½ç½®â€ï¼Œå¹¶ä¸æ˜¯æŒ‡å°æ•°ç‚¹åç²¾ç¡®å¤šå°‘ä½ã€‚</p><p>åœ¨ä¿è¯ç²¾åº¦çš„å‰æä¸‹ï¼Œå°½å¯èƒ½è®¾ç½®åˆé€‚çš„ è¿‘æˆªé¢å’Œè¿œæˆªé¢ï¼Œè¿™æ ·è®© é•œå¤´ä¸ç‰©ä½“äº§ç”Ÿçš„è§†æ¤ â€œæ›´å°ã€æ›´æ¥è¿‘â€ï¼Œä»¥èŠ‚çœæ¸²æŸ“æ‰€éœ€è®¡ç®—é‡å’Œæ€§èƒ½ã€‚</p><p><strong>ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</strong></p><p>å‡è®¾ä½ éœ€è¦æ¸²æŸ“å‡ºä¸€ä¸ª è¶³çƒ çš„ç‰¹å†™ï¼Œé‚£ä¹ˆæŠŠè¶³çƒæ”¾ç½®åœ¨ä¸€ä¸ª æ¯”è¾ƒå°çš„å¹³å°æˆ–åœ°é¢å³å¯ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªåŸå¸‚ä¸€æ ·å¤§å°çš„åœºæ™¯ï¼Œå´åªæ¸²æŸ“å‡ºä¸€ä¸ª è¶³çƒçš„è¿‘è·ç¦»ç‰¹å†™ã€‚</p><blockquote><p>ä½†æ˜¯å‡è®¾ä½ çš„åœºæ™¯ç¡®ç¡®å®å®éœ€è¦éå¸¸å¤§ï¼Œæ­¤æ—¶å°±éœ€è¦å¤šå‚è€ƒç½‘ä¸Šå…¶ä»–äººæ˜¯å¦‚ä½•å¤„ç†ç±»ä¼¼åœºæ™¯çš„ã€‚<br>æˆ–è®¸åç»­æ–‡ç« ä¸­ä¹Ÿä¼šæœ‰è®²è§£ï¼Œæ­¤æ—¶æ­¤åˆ»ä½ åªéœ€çŸ¥é“ near å’Œ far è®¾ç½®åˆé€‚å³å¯ï¼Œæ²¡å¿…è¦è¿‡äºç²¾ç»†æˆ–å·¨å¤§ã€‚</p></blockquote><h2 id=é•œå¤´ç¤ºä¾‹1ä½¿ç”¨camerahelperæ¥è§‚å¯Ÿé•œå¤´>é•œå¤´ç¤ºä¾‹1ï¼šä½¿ç”¨CameraHelperæ¥è§‚å¯Ÿé•œå¤´<a hidden class=anchor aria-hidden=true href=#é•œå¤´ç¤ºä¾‹1ä½¿ç”¨camerahelperæ¥è§‚å¯Ÿé•œå¤´>#</a></h2><p>å…³äº é€è§†é•œå¤´ PerspectiveCamera æˆ‘ä»¬ä¹‹å‰ç¤ºä¾‹ä¸­å·²ç»ä½¿ç”¨å¤šæ¬¡ã€‚</p><p>æœ¬ç¤ºä¾‹ä¸»è¦æ¼”ç¤º é€šè¿‡ é•œå¤´è¾…åŠ©å¯¹è±¡(CameraHelper) æ¥è§‚å¯Ÿé•œå¤´ã€‚</p><h4 id=æ€è€ƒä¸€ä¸‹-1>æ€è€ƒä¸€ä¸‹<a hidden class=anchor aria-hidden=true href=#æ€è€ƒä¸€ä¸‹-1>#</a></h4><p>åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªé•œå¤´åªèƒ½çœ‹åˆ°åˆ«çš„ç‰©ä½“ä½†æ— æ³•çœ‹åˆ°è‡ªå·±ã€‚</p><p>å°±å¥½åƒæˆ‘ä»¬çš„çœ¼ç›å¯ä»¥çœ‹åˆ°è¿™ä¸ªä¸–ç•Œï¼Œä½†æ˜¯çœ¼ç›æœ¬èº«è‡ªå·±æ²¡æ³•çœ‹åˆ°è‡ªå·±(çœ¼ç›)ã€‚</p><blockquote><p>å½“ç„¶é™¤éå¯¹ç€é•œå­ï¼Œä¸è¿‡å¯¹ç€é•œå­çš„æœ¬è´¨ä¾ç„¶æ˜¯çœ¼ç›å»çœ‹åˆ«çš„ç‰©ä½“ã€‚</p></blockquote><p>æ›´åŠ ç›´ç™½ä¸€ç‚¹ï¼šå°±ç®—ä½ çœ¼ç›é•¿å¾—å†å¤§ï¼Œä½ ä¹Ÿåšä¸åˆ°å·¦çœ¼ç›´æ¥çœ‹åˆ°è‡ªå·±å³çœ¼ã€‚</p><blockquote><p>æˆ‘ä»¬äººè™½ç„¶æ˜¯ 2 ä¸ªçœ¼çƒï¼Œä½†æ˜¯åœ¨ Three.js çš„ç›¸å…³ä¸¾ä¾‹ä¸­ï¼Œæ˜¯å°† å·¦å³ä¸¤ä¸ªçœ¼ç›å½“æˆ æ˜¯ 1 ä¸ªé•œå¤´æ¥é˜è¿°çš„ã€‚</p></blockquote><h3 id=hellocameraç¤ºä¾‹ç›®æ ‡>HelloCameraç¤ºä¾‹ç›®æ ‡<a hidden class=anchor aria-hidden=true href=#hellocameraç¤ºä¾‹ç›®æ ‡>#</a></h3><ol><li>åˆ›å»ºä¸€ä¸ªåŒ…å«ç‰©ä½“çš„åœºæ™¯</li><li>åˆ›å»º 2 ä¸ªé•œå¤´ï¼Œé•œå¤´Aå’Œé•œå¤´B</li><li>å°†ç½‘é¡µç”»é¢ä¸€åˆ†ä¸ºäºŒ</li><li>å·¦ä¾§æ˜¾ç¤º é•œå¤´A æ‰€çœ‹åˆ°çš„åœºæ™¯</li><li>å³ä¾§ä½¿ç”¨ä½¿ç”¨ é•œå¤´B æ¥è§‚å¯Ÿ é•œå¤´A</li></ol><p><strong>è¡¥å……è¯´æ˜ï¼š</strong></p><ol><li>äº‹å®ä¸Šæ˜¯ é•œå¤´B è§‚å¯Ÿå¹¶æ˜¾ç¤º é•œå¤´A å¯¹åº”çš„è¾…åŠ©å¯¹è±¡ (CameraHelper)</li><li>ä¸ºäº†çœäº‹ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å‰æ–‡è®²è§£ç¯å…‰æ—¶ç¼–å†™çš„ create-scene.ts æ¥åˆ›å»ºåœºæ™¯</li></ol><h3 id=ä»£ç å®ç°æ€è·¯>ä»£ç å®ç°æ€è·¯<a hidden class=anchor aria-hidden=true href=#ä»£ç å®ç°æ€è·¯>#</a></h3><h4 id=å…³é”®ç‚¹-1åŒä¸€ä¸ªåœºæ™¯æ¸²æŸ“å‡º-2-ä¸ªä¸åŒçš„ç”»é¢>å…³é”®ç‚¹ 1ï¼šåŒä¸€ä¸ªåœºæ™¯æ¸²æŸ“å‡º 2 ä¸ªä¸åŒçš„ç”»é¢<a hidden class=anchor aria-hidden=true href=#å…³é”®ç‚¹-1åŒä¸€ä¸ªåœºæ™¯æ¸²æŸ“å‡º-2-ä¸ªä¸åŒçš„ç”»é¢>#</a></h4><p>**å®ç° 2 ä¸ªç”»é¢ï¼š**æ·»åŠ å·¦å³ 2 ä¸ªé•œå¤´ï¼Œæ¯ä¸ªé•œå¤´è®¾ç½®ä¸åŒï¼Œæœ€ç»ˆå‘ˆç°å‡ºçš„åœºæ™¯ä¸åŒ</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const leftCamera = new Three.PerspectiveCamera(45, 2, 5, 100)
</span></span><span style=display:flex><span>leftCamera.position.set(0, 10, 20)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const rightCamera = new Three.PerspectiveCamera(60, 2, 0.1, 200)
</span></span><span style=display:flex><span>rightCamera.position.set(40, 10, 30)
</span></span><span style=display:flex><span>rightCamera.lookAt(0, 5, 0)
</span></span></code></pre></div><p>**å®ç° 2 ä¸ªäº¤äº’ï¼š**æ·»åŠ  å·¦å³ 2 ä¸ª divã€2 ä¸ª OrbitControlsï¼Œè¦†ç›–äºcanvas ä¹‹ä¸Š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const leftControls = new OrbitControls(leftCamera, leftViewRef.current)
</span></span><span style=display:flex><span>leftControls.target.set(0, 5, 0)
</span></span><span style=display:flex><span>leftControls.update()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const rightControls = new OrbitControls(rightCamera, rightViewRef.current)
</span></span><span style=display:flex><span>rightControls.target.set(0, 5, 0)
</span></span><span style=display:flex><span>rightControls.update()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;div className=&#39;full-screen&#39;&gt;
</span></span><span style=display:flex><span>    &lt;div className=&#39;split&#39;&gt;
</span></span><span style=display:flex><span>        &lt;div ref={leftViewRef}&gt;&lt;/div&gt;
</span></span><span style=display:flex><span>        &lt;div ref={rightViewRef}&gt;&lt;/div&gt;
</span></span><span style=display:flex><span>    &lt;/div&gt;
</span></span><span style=display:flex><span>    &lt;canvas ref={canvasRef} /&gt;
</span></span><span style=display:flex><span>&lt;/div&gt;
</span></span></code></pre></div><p>**æ¸²æŸ“ 2 ä¸ªç”»é¢ï¼š**ä½¿ç”¨æ¸²æŸ“å™¨çš„ è£å‡ åŠŸèƒ½</p><p>æ¸²æŸ“å™¨è£å‡åŠŸèƒ½ï¼Œæ¶‰åŠåˆ°çš„æ–¹æ³•æœ‰ setScissor()ã€setScissorTarget()ã€setViewport() ã€‚</p><blockquote><p>æˆ‘ä»¬ä¹‹å‰ç¤ºä¾‹ä¸­ï¼Œä¸ºäº†é€‚åº”æµè§ˆå™¨çª—å£å¤§å°çš„æ”¹å˜ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿‡ æ¸²æŸ“å™¨çš„ setSize()</p></blockquote><p><strong>setScissor ( x : Integer, y : Integer, width : Integer, height : Integer ) : null</strong>
å°†å‰ªè£åŒºåŸŸè®¾ä¸º(x, y)åˆ°(x + width, y + height) Sets the scissor area from</p><p><strong>setScissorTest ( boolean : Boolean ) : null</strong>
å¯ç”¨æˆ–ç¦ç”¨å‰ªè£æ£€æµ‹. è‹¥å¯ç”¨ï¼Œåˆ™åªæœ‰åœ¨æ‰€å®šä¹‰çš„è£å‰ªåŒºåŸŸå†…çš„åƒç´ æ‰ä¼šå—ä¹‹åçš„æ¸²æŸ“å™¨å½±å“ã€‚</p><p><strong>setViewport ( x : Integer, y : Integer, width : Integer, height : Integer ) : null</strong>
å°†è§†å£å¤§å°è®¾ç½®ä¸º(x, y)åˆ° (x + width, y + height)</p><p><strong>è¯·é¢å¤–ç•™æ„åœ¨åé¢å®é™…ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰çš„ setScissorForElement() å‡½æ•°ã€‚</strong></p><blockquote><p>å¤šæ•²å‡ éï¼Œè®°ä½ setScissorForElement() å‡½æ•°ä¸­è·å¾—è£å‡åŒºåŸŸçš„ä»£ç å¥—è·¯</p></blockquote><h4 id=å…³é”®ç‚¹-2é•œå¤´è¾…åŠ©å¯¹è±¡>å…³é”®ç‚¹ 2ï¼šé•œå¤´è¾…åŠ©å¯¹è±¡<a hidden class=anchor aria-hidden=true href=#å…³é”®ç‚¹-2é•œå¤´è¾…åŠ©å¯¹è±¡>#</a></h4><p>é•œå¤´è¾…åŠ©å¯¹è±¡ä¸º Three.CameraHelperï¼Œä»–çš„ç”¨æ³•å¾ˆç®€å•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const helper = new THREE.CameraHelper( leftCamera )
</span></span><span style=display:flex><span>scene.add( helper )
</span></span></code></pre></div><h4 id=å…³é”®ç‚¹-3å¦‚ä½•æ¸²æŸ“>å…³é”®ç‚¹ 3ï¼šå¦‚ä½•æ¸²æŸ“<a hidden class=anchor aria-hidden=true href=#å…³é”®ç‚¹-3å¦‚ä½•æ¸²æŸ“>#</a></h4><p>åœ¨ä¹‹å‰æ‰€æœ‰çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæ¸²æŸ“ä»£ç éƒ½ä¸ºï¼š</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>renderer.render(scene, camera)
</span></span></code></pre></div><p>ä½†æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ˜¯åŒä¸€ä¸ª sceneï¼Œä½†æ˜¯ 2 ä¸ªä¸åŒçš„ cameraï¼Œå› æ­¤ä¸ä¹‹å¯¹åº”çš„æ¸²æŸ“ä»£ç ä¹Ÿè¦å‘ç”Ÿå˜åŒ–ã€‚</p><p>éœ€è¦ä¾æ¬¡åˆ†åˆ«æ¸²æŸ“å‡º å·¦ä¾§é•œå¤´è§†è§’ å’Œ å³ä¾§é•œå¤´è§†è§’ã€‚</p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>//leftCameraä¸€äº›æ›´æ–°æ“ä½œ
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>renderer.render(sceneRef.current, leftCamera)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>//rightCameraä¸€äº›æ›´æ–°æ“ä½œ
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>renderer.render(sceneRef.current, rightCamera)
</span></span></code></pre></div><h3 id=å…·ä½“çš„ä»£ç >å…·ä½“çš„ä»£ç <a hidden class=anchor aria-hidden=true href=#å…·ä½“çš„ä»£ç >#</a></h3><h4 id=create-scenets>create-scene.ts<a hidden class=anchor aria-hidden=true href=#create-scenets>#</a></h4><p>æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ä¹‹å‰ <strong>â€œ11 Three.jsåŸºç¡€ä¹‹ç¯å…‰.mdâ€</strong> ä¸­å·²å†™å¥½çš„ä»£ç ã€‚</p><h4 id=indexscss>index.scss<a hidden class=anchor aria-hidden=true href=#indexscss>#</a></h4><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>.full-screen,canvas {
</span></span><span style=display:flex><span>    display: block;
</span></span><span style=display:flex><span>    height: inherit;
</span></span><span style=display:flex><span>    width: inherit;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.split {
</span></span><span style=display:flex><span>    position: fixed;
</span></span><span style=display:flex><span>    display: flex;
</span></span><span style=display:flex><span>    width: inherit;
</span></span><span style=display:flex><span>    height: inherit;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.split div {
</span></span><span style=display:flex><span>    width: inherit;
</span></span><span style=display:flex><span>    height: inherit;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=indextsx>index.tsx<a hidden class=anchor aria-hidden=true href=#indextsx>#</a></h4><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>import { useRef, useEffect } from &#39;react&#39;
</span></span><span style=display:flex><span>import * as Three from &#39;three&#39;
</span></span><span style=display:flex><span>import createScene from &#39;@/components/hello-light/create-scene&#39;
</span></span><span style=display:flex><span>import { OrbitControls } from &#39;three/examples/jsm/controls/OrbitControls&#39;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>import &#39;./index.scss&#39;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const HelloCamera = () =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    const canvasRef = useRef&lt;HTMLCanvasElement&gt;(null)
</span></span><span style=display:flex><span>    const sceneRef = useRef&lt;Three.Scene | null&gt;(null)
</span></span><span style=display:flex><span>    const leftViewRef = useRef&lt;HTMLDivElement&gt;(null)
</span></span><span style=display:flex><span>    const rightViewRef = useRef&lt;HTMLDivElement&gt;(null)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    useEffect(() =&gt; {
</span></span><span style=display:flex><span>        if (canvasRef.current === null || leftViewRef.current === null || rightViewRef.current === null) {
</span></span><span style=display:flex><span>            return
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const renderer = new Three.WebGLRenderer({ canvas: canvasRef.current as HTMLCanvasElement })
</span></span><span style=display:flex><span>        renderer.setScissorTest(true)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const scene = createScene()
</span></span><span style=display:flex><span>        scene.background = new Three.Color(0x000000)
</span></span><span style=display:flex><span>        sceneRef.current = scene
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const light = new Three.DirectionalLight(0xFFFFFF, 1)
</span></span><span style=display:flex><span>        light.position.set(0, 10, 0)
</span></span><span style=display:flex><span>        light.target.position.set(5, 0, 0)
</span></span><span style=display:flex><span>        scene.add(light)
</span></span><span style=display:flex><span>        scene.add(light.target)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const leftCamera = new Three.PerspectiveCamera(45, 2, 5, 100)
</span></span><span style=display:flex><span>        leftCamera.position.set(0, 10, 20)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const helper = new Three.CameraHelper(leftCamera)
</span></span><span style=display:flex><span>        scene.add(helper)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const leftControls = new OrbitControls(leftCamera, leftViewRef.current)
</span></span><span style=display:flex><span>        leftControls.target.set(0, 5, 0)
</span></span><span style=display:flex><span>        leftControls.update()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const rightCamera = new Three.PerspectiveCamera(60, 2, 0.1, 200)
</span></span><span style=display:flex><span>        rightCamera.position.set(40, 10, 30) //ä¸ºäº†èƒ½å¤Ÿçœ‹æ¸…ã€çœ‹å…¨é•œå¤´ï¼Œæ‰€ä»¥å°†å³ä¾§é•œå¤´çš„ä½ç½®è®¾ç½®ç¨è¿œä¸€äº›
</span></span><span style=display:flex><span>        rightCamera.lookAt(0, 5, 0)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const rightControls = new OrbitControls(rightCamera, rightViewRef.current)
</span></span><span style=display:flex><span>        rightControls.target.set(0, 5, 0)
</span></span><span style=display:flex><span>        rightControls.update()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const setScissorForElement = (div: HTMLDivElement) =&gt; {
</span></span><span style=display:flex><span>            if (canvasRef.current === null) {
</span></span><span style=display:flex><span>                return
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            //è·å¾— canvas å’Œ div çš„çŸ©å½¢æ¡†å°ºå¯¸å’Œä½ç½®
</span></span><span style=display:flex><span>            const canvasRect = canvasRef.current.getBoundingClientRect()
</span></span><span style=display:flex><span>            const divRect = div.getBoundingClientRect()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            //è®¡ç®—å‡ºè£åˆ‡æ¡†çš„å°ºå¯¸å’Œä½ç½®
</span></span><span style=display:flex><span>            const right = Math.min(divRect.right, canvasRect.right) - canvasRect.left
</span></span><span style=display:flex><span>            const left = Math.max(0, divRect.left - canvasRect.left)
</span></span><span style=display:flex><span>            const bottom = Math.min(divRect.bottom, canvasRect.bottom) - canvasRect.top
</span></span><span style=display:flex><span>            const top = Math.max(0, divRect.top - canvasRect.top)
</span></span><span style=display:flex><span>            const width = Math.min(canvasRect.width, right - left)
</span></span><span style=display:flex><span>            const height = Math.min(canvasRect.height, bottom - top)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            //å°†å‰ªåˆ€è®¾ç½®ä¸ºä»…æ¸²æŸ“åˆ°ç”»å¸ƒçš„è¯¥éƒ¨åˆ†
</span></span><span style=display:flex><span>            const positiveYUpBottom = canvasRect.height - bottom
</span></span><span style=display:flex><span>            renderer.setScissor(left, positiveYUpBottom, width, height)
</span></span><span style=display:flex><span>            renderer.setViewport(left, positiveYUpBottom, width, height)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            //è¿”å›å¤–è§‚
</span></span><span style=display:flex><span>            return width / height
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const render = () =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            if (leftCamera === null || rightCamera === null || sceneRef.current === null) {
</span></span><span style=display:flex><span>                return
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            const sceneBackground = sceneRef.current.background as Three.Color
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            //æ¸²æŸ“ å·¦ä¾§ é•œå¤´
</span></span><span style=display:flex><span>            const leftAspect = setScissorForElement(leftViewRef.current as HTMLDivElement)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            leftCamera.aspect = leftAspect as number
</span></span><span style=display:flex><span>            leftCamera.updateProjectionMatrix()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            helper.update()
</span></span><span style=display:flex><span>            helper.visible = false
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            sceneBackground.set(0x000000)
</span></span><span style=display:flex><span>            renderer.render(sceneRef.current, leftCamera)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            //æ¸²æŸ“ å³ä¾§ ä¸ªé•œå¤´
</span></span><span style=display:flex><span>            const rightAspect = setScissorForElement(rightViewRef.current as HTMLDivElement)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            rightCamera.aspect = rightAspect as number
</span></span><span style=display:flex><span>            rightCamera.updateProjectionMatrix()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            helper.visible = true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            sceneBackground.set(0x000040)
</span></span><span style=display:flex><span>            renderer.render(sceneRef.current, rightCamera)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            window.requestAnimationFrame(render)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        window.requestAnimationFrame(render)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        const handleResize = () =&gt; {
</span></span><span style=display:flex><span>            if (canvasRef.current === null) {
</span></span><span style=display:flex><span>                return
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            const width = canvasRef.current.clientWidth
</span></span><span style=display:flex><span>            const height = canvasRef.current.clientHeight
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            renderer.setSize(width, height, false)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        handleResize()
</span></span><span style=display:flex><span>        window.addEventListener(&#39;resize&#39;, handleResize)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        return () =&gt; {
</span></span><span style=display:flex><span>            window.removeEventListener(&#39;resize&#39;, handleResize)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }, [canvasRef])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    return (
</span></span><span style=display:flex><span>        &lt;div className=&#39;full-screen&#39;&gt;
</span></span><span style=display:flex><span>            &lt;div className=&#39;split&#39;&gt;
</span></span><span style=display:flex><span>                &lt;div ref={leftViewRef}&gt;&lt;/div&gt;
</span></span><span style=display:flex><span>                &lt;div ref={rightViewRef}&gt;&lt;/div&gt;
</span></span><span style=display:flex><span>            &lt;/div&gt;
</span></span><span style=display:flex><span>            &lt;canvas ref={canvasRef} /&gt;
</span></span><span style=display:flex><span>        &lt;/div&gt;
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>export default HelloCamera
</span></span></code></pre></div><p>æ‰§è¡Œä»¥åï¼Œå°±ä¼šçœ‹åˆ°æµè§ˆå™¨ä¸­å·¦å³ 2 ä¸ªå¯äº¤äº’çš„ç”»é¢ã€‚å…¶ä¸­å³ä¾§ç”»é¢ä¸­åŒ…å«å·¦ä¾§ç¯å…‰è¾…åŠ©å¯¹è±¡ã€‚</p><h2 id=é•œå¤´ç¤ºä¾‹2orthographiccamera>é•œå¤´ç¤ºä¾‹2ï¼šOrthographicCamera<a hidden class=anchor aria-hidden=true href=#é•œå¤´ç¤ºä¾‹2orthographiccamera>#</a></h2><p>ç¬¬äºŒä¸ªæ¯”è¾ƒç»å¸¸ç”¨çš„é•œå¤´æ˜¯ OrthographicCamera(æ­£äº¤é•œå¤´)ã€‚</p><p>æ­£äº¤é•œå¤´ä¸é€è§†é•œå¤´æœ€å¤§çš„åŒºåˆ«ç‚¹åœ¨äºï¼š</p><ol><li><p>æ­£äº¤é•œå¤´çš„è§†æ¤ä½“ä¸æ˜¯ æ¤ä½“ï¼Œè€Œæ˜¯ç«‹æ–¹ä½“</p></li><li><p>æ­£äº¤é•œå¤´çœ‹åˆ°çš„éƒ½æ˜¯ä¸€ä¸ªâ€œé¢â€</p></li><li><p>å› æ­¤ï¼Œæ­£äº¤é•œå¤´æ²¡æœ‰ â€œé€è§†(è¿‘å¤§è¿œå°)â€è¿™ä¸ªæ¦‚å¿µ</p><blockquote><p>æˆ‘å¯¹äºä»¥ä¸Š 2 ç‚¹ç†è§£å¹¶ä¸æ·±ï¼Œå…ˆè®°ä½ä»¥åå†æ…¢æ…¢ç ”ç©¶</p></blockquote></li></ol><h4 id=orthographiccameraçš„ç”¨é€”>OrthographicCameraçš„ç”¨é€”<a hidden class=anchor aria-hidden=true href=#orthographiccameraçš„ç”¨é€”>#</a></h4><ol><li>ç”¨é€”1ï¼šä½œä¸º 2D ç”»å¸ƒ</li><li>ä½œä¸º 3D å»ºæ¨¡ç¨‹åº çš„ ä¸Šã€ä¸‹ã€å·¦ã€å³ã€å‰ã€å è§†å›¾ã€‚</li></ol><h4 id=orthographiccameraåŸºæœ¬ç”¨æ³•>OrthographicCameraåŸºæœ¬ç”¨æ³•<a hidden class=anchor aria-hidden=true href=#orthographiccameraåŸºæœ¬ç”¨æ³•>#</a></h4><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const camera = new Three.OrthographicCamera(-1, 1, 1, -1, 5, 50)
</span></span><span style=display:flex><span>camera.zoom = 0.2
</span></span><span style=display:flex><span>camera.position.set(0,10,20)
</span></span></code></pre></div><p>åˆå§‹åŒ–æ—¶ï¼Œæ„é€ å‡½æ•°å†…çš„å‚æ•°ä¾æ¬¡æ˜¯ï¼š</p><p>OrthographicCamera( left : Number, right : Number, top : Number, bottom : Number, near : Number, far : Number )</p><ol><li>leftï¼šè§†æ¤ä½“å·¦ä¾§é¢</li><li>rightï¼šè§†æ¤ä½“å³ä¾§é¢</li><li>topï¼šè§†æ¤ä½“é¡¶é¢</li><li>bottomï¼šè§†æ¤ä½“åº•é¢</li><li>nearï¼šè§†æ¤ä½“è¿‘ç«¯é¢</li><li>farï¼šè§†æ¤ä½“è¿œç«¯é¢</li></ol><p><strong>ä»å®é™…çš„è§’åº¦æ¥çœ‹ï¼Œä¸€å®šè¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</strong></p><ol><li>left çš„å€¼ä¸èƒ½å¤§äº rightï¼ŒåŒç† bottom çš„å€¼ä¸èƒ½å¤§äº topã€‚ å¦‚æœæ²¡æœ‰æŒ‰ç…§è¿™ä¸ªçº¦å®šï¼Œä¾‹å¦‚ bottom å¤§äº top ç›¸å½“äºé¢ å€’äº†ç›¸æœºã€‚</li><li>near è®¾ç½®è¶Šå°ï¼ŒæŠ•å½±çš„æ˜ åƒè¶Šå¤§</li><li>left ä¸ right ä¹‹é—´çš„è·ç¦»ã€top ä¸ bottom ä¹‹é—´çš„è·ç¦»çš„æ¯”ä¾‹ä¸€å®šè¦å’Œ canvas æ¯”ä¾‹ç›¸åŒï¼Œå¦åˆ™ä¼šå¯¼è‡´æŠ•å½±çš„ç‰©ä½“å½¢çŠ¶å˜å½¢</li></ol><h4 id=æ­£äº¤é•œå¤´ä¸é€è§†é•œå¤´çš„å‡ ç‚¹ä¸åŒåœ°æ–¹>æ­£äº¤é•œå¤´ä¸é€è§†é•œå¤´çš„å‡ ç‚¹ä¸åŒåœ°æ–¹<a hidden class=anchor aria-hidden=true href=#æ­£äº¤é•œå¤´ä¸é€è§†é•œå¤´çš„å‡ ç‚¹ä¸åŒåœ°æ–¹>#</a></h4><p><strong>æ¸²æŸ“æ—¶ï¼Œå¯¹åº”çš„è®¾ç½®ä¸åŒã€‚</strong></p><p>é€è§†é•œå¤´æ¸²æŸ“æ—¶ï¼Œéœ€è¦ä¿®æ”¹çš„æ˜¯ camera.aspect = newAspect</p><p>æ­£äº¤é•œå¤´æ¸²æŸ“æ—¶ï¼Œéœ€è¦ä¿®æ”¹çš„æ˜¯ camera.left = - new Aspectã€camera.right = new Aspect</p><h3 id=å‡è®¾æˆ‘ä»¬åœ¨-hellocamera-ç¤ºä¾‹ä¸­ä½¿ç”¨-orthographiccamera>å‡è®¾æˆ‘ä»¬åœ¨ HelloCamera ç¤ºä¾‹ä¸­ä½¿ç”¨ OrthographicCamera<a hidden class=anchor aria-hidden=true href=#å‡è®¾æˆ‘ä»¬åœ¨-hellocamera-ç¤ºä¾‹ä¸­ä½¿ç”¨-orthographiccamera>#</a></h3><p><strong>éœ€è¦ä¿®æ”¹çš„åœ°æ–¹ä¸ºï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#282828;background-color:#9d0006>- const leftCamera = new Three.PerspectiveCamera(45, 2, 5, 100)
</span></span></span><span style=display:flex><span><span style=color:#282828;background-color:#9d0006>- leftCamera.position.set(0, 10, 20)
</span></span></span><span style=display:flex><span><span style=color:#282828;background-color:#9d0006></span><span style=color:#282828;background-color:#79740e>+ const leftCamera = new Three.OrthographicCamera(-1, 1, 1, -1, 5, 50)
</span></span></span><span style=display:flex><span><span style=color:#282828;background-color:#79740e>+ leftCamera.zoom = 0.2
</span></span></span><span style=display:flex><span><span style=color:#282828;background-color:#79740e></span>  leftCamera.position.set(0,10,20)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  const leftAspect = setScissorForElement(leftViewRef.current as HTMLDivElement)
</span></span><span style=display:flex><span><span style=color:#282828;background-color:#9d0006>- leftCamera.aspect = leftAspect as number
</span></span></span><span style=display:flex><span><span style=color:#282828;background-color:#9d0006></span><span style=color:#282828;background-color:#79740e>+ leftCamera.left = -(leftAspect as number)
</span></span></span><span style=display:flex><span><span style=color:#282828;background-color:#79740e>+ leftCamera.right = leftAspect as number
</span></span></span><span style=display:flex><span><span style=color:#282828;background-color:#79740e></span>  leftCamera.updateProjectionMatrix()
</span></span></code></pre></div><p>å…¶ä»–ä»£ç æ— éœ€ä¿®æ”¹ï¼Œå‘å¸ƒè°ƒè¯•ï¼Œå³å¯çœ‹åˆ°æ­£äº¤é•œå¤´è¾…åŠ©å¯¹è±¡ï¼Œæ­¤æ—¶çš„è§†æ¤ä¸å†æ˜¯æ¤ä½“ï¼Œè€Œæ˜¯ä¸€ä¸ªç«‹æ–¹ä½“ã€‚</p><p>å…³äºå…¶ä»–é•œå¤´ï¼šArrayCameraã€CubeCameraã€StereoCamera æœ¬æ–‡ä¸å†è®²è§£ï¼Œä»¥åç”¨åˆ°çš„æ—¶å€™å†æ·±å…¥ç ”ç©¶ã€‚</p><p>å…·ä½“çš„ç”¨æ³•ï¼Œå¯æŸ¥é˜…ï¼š<a href=https://threejs.org/docs/index.html#api/zh/cameras/Camera>https://threejs.org/docs/index.html#api/zh/cameras/Camera</a></p><p>è‡³æ­¤ï¼Œå…³äºé•œå¤´çš„åŸºç¡€çŸ¥è¯†è®²è§£å®Œæ¯•ã€‚</p><blockquote><p>è™½ç„¶æœ¬æ–‡æ˜¯åœ¨è®²é•œå¤´ï¼Œä½†æœ¬æ–‡çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹å´æ˜¯åœ¨è®² æ¸²æŸ“å™¨çš„è£åˆ‡ åŠŸèƒ½ã€‚</p><p>ä¸€å®šè¦å¤šå¤šå¤ä¹ ï¼Œç†Ÿç»ƒæŒæ¡ æ¸²æŸ“å™¨çš„ setScissor()ã€setScissorTest()ã€setViewport() æ–¹æ³•ã€‚</p></blockquote><p>ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†è®²è§£ Shardown(é˜´å½±)</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://bablvsj.github.io/tags/three.js/>Three.js</a></li></ul><nav class=paginav><a class=prev href=https://bablvsj.github.io/posts/threejs/11-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%81%AF%E5%85%89/><span class=title>Â« Prev</span><br><span>11 Three.jsåŸºç¡€ä¹‹ç¯å…‰</span></a>
<a class=next href=https://bablvsj.github.io/posts/threejs/13-three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E9%98%B4%E5%BD%B1/><span class=title>Next Â»</span><br><span>13 Three.jsåŸºç¡€ä¹‹é˜´å½±</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bablvsj.github.io>Bablvsj's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div class=flex-c-d><a class=flex-d-c href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank><span>æœ¬ç«™ç”±</span><img width=60 src=/images/upyun.png>æä¾›CDNåŠ é€Ÿ/äº‘å­˜å‚¨æœåŠ¡</a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>