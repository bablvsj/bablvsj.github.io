<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>25 Three.jsè§£å†³æ–¹æ¡ˆä¹‹æ·»åŠ èƒŒæ™¯å’Œå¤©ç©ºç›’ | Bablvsj&#39;s Blog</title>
<meta name="keywords" content="Three.js">
<meta name="description" content="25 Three.jsè§£å†³æ–¹æ¡ˆä¹‹æ·»åŠ èƒŒæ™¯å’Œå¤©ç©ºç›’ - Bablvsj&#39;s Blog">
<meta name="author" content="">
<link rel="canonical" href="https://bablvsj.github.io/posts/threejs/25-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%92%8C%E5%A4%A9%E7%A9%BA%E7%9B%92/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5525cc669fcb4f094a55bfc3ebfc5a6e73445e090010c66ab49c2cad14735f57.css" integrity="sha256-VSXMZp/LTwlKVb/D6/xabnNEXgkAEMZqtJwsrRRzX1c=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://bablvsj.github.io/img/Q.gif">
<link rel="icon" type="image/png" sizes="16x16" href="https://bablvsj.github.io/img/Q.gif">
<link rel="icon" type="image/png" sizes="32x32" href="https://bablvsj.github.io/img/Q.gif">
<link rel="apple-touch-icon" href="https://bablvsj.github.io/Q.gif">
<link rel="mask-icon" href="https://bablvsj.github.io/Q.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="stylesheet" href="/css/syntax.css">


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="25 Three.jsè§£å†³æ–¹æ¡ˆä¹‹æ·»åŠ èƒŒæ™¯å’Œå¤©ç©ºç›’" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bablvsj.github.io/posts/threejs/25-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%92%8C%E5%A4%A9%E7%A9%BA%E7%9B%92/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-19T17:11:35+08:00" />
<meta property="article:modified_time" content="2023-12-19T17:11:35+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="25 Three.jsè§£å†³æ–¹æ¡ˆä¹‹æ·»åŠ èƒŒæ™¯å’Œå¤©ç©ºç›’"/>
<meta name="twitter:description" content=""/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "æ–‡ç« ",
      "item": "https://bablvsj.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "25 Three.jsè§£å†³æ–¹æ¡ˆä¹‹æ·»åŠ èƒŒæ™¯å’Œå¤©ç©ºç›’",
      "item": "https://bablvsj.github.io/posts/threejs/25-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%92%8C%E5%A4%A9%E7%A9%BA%E7%9B%92/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "25 Three.jsè§£å†³æ–¹æ¡ˆä¹‹æ·»åŠ èƒŒæ™¯å’Œå¤©ç©ºç›’",
  "name": "25 Three.jsè§£å†³æ–¹æ¡ˆä¹‹æ·»åŠ èƒŒæ™¯å’Œå¤©ç©ºç›’",
  "description": "",
  "keywords": [
    "Three.js"
  ],
  "articleBody": "åœ¨æˆ‘ä»¬ä¹‹å‰æ‰€æœ‰æ¼”ç¤ºçš„æ¡ˆä¾‹ä¸­ï¼Œåœºæ™¯ä¸­çš„èƒŒæ™¯å¾€å¾€ä½¿ç”¨é»˜è®¤çš„é»‘è‰²ï¼Œæˆ–è€…æ˜¯å…¶ä»–çº¯é¢œè‰²ã€‚\nä¸‹é¢æˆ‘ä»¬è®²è§£ä¸€ä¸‹ Three.Screen çš„èƒŒæ™¯è®¾ç½®æ–¹å¼ã€‚\nè®¾ç½®åœºæ™¯èƒŒæ™¯ åœºæ™¯(Three.Screen)æœ‰ä¸€ä¸ªå±æ€§ .backgroundã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®è¿™ä¸ªå±æ€§æ¥ç»™åœºæ™¯æ·»åŠ èƒŒæ™¯ã€‚\n.backgroundå±æ€§å€¼ç±»å‹\nåœºæ™¯èƒŒæ™¯å±æ€§å€¼ä¸€å…±æœ‰ 3 ç§ç±»å‹ï¼š\né»˜è®¤ä¸º null\n.background å±æ€§å€¼ä¸º nullï¼Œåœºæ™¯æ˜¾ç¤ºä¸ºé»‘è‰²\næŸé¢œè‰² Three.Color\nThree.Color å¯æ¥å— å­—ç¬¦ä¸²æˆ–æ•°å­—ç±»å‹çš„é¢œè‰²å€¼ï¼Œä¾‹å¦‚:\nnew Three.Color(â€™#333') new Three.Color(â€˜greenâ€™) new Three.Color(0x333333) æŸçº¹ç† Three.Texture\nè®¾ç½®èƒŒæ™¯è‰²ç¤ºä¾‹ä»£ç ï¼š\nconst scene = new Three.Scene() scene.background = new Three.Color(0x333333) è®¾ç½®èƒŒæ™¯çº¹ç†å›¾ç‰‡ç¤ºä¾‹ä»£ç ï¼š\nconst scene = new Three.Scene() const textureLoader = new Three.TextureLoader() scene.background = textureLoader.load(require('@/assets/imgs/blue_sky.jpg').default) æˆ–è€…æ˜¯\nconst textureLoader = new Three.TextureLoader() textureLoader.load(require('@/assets/imgs/blue_sky.jpg').default, (texture) =\u003e { scene.background = texture }) ä¸Šé¢è®¾ç½®åœºæ™¯çº¹ç†èƒŒæ™¯å›¾ï¼Œå®é™…è¿è¡Œåä½ ä¼šå‘ç°è™½ç„¶èƒŒæ™¯å›¾æ˜¾ç¤ºäº†ï¼Œä½†æ˜¯èƒŒæ™¯å›¾å´æœ‰å¯èƒ½æ˜¯å˜å½¢ç€çš„ã€‚\nè¿™æ˜¯ç”±äºèƒŒæ™¯å›¾ç‰‡æœ¬èº«å°±ä¸€ä¸ªå®½é«˜æ¯”ï¼Œè€Œç”»å¸ƒ(Canvas)æœ¬èº«ä¹Ÿæœ‰ä¸€ä¸ªå®½é«˜æ¯”ã€‚\nå®é™…ä¸Šæ˜¯æ¸²æŸ“å™¨æ¸²æŸ“å°ºå¯¸çš„å®½é«˜ï¼Œä¾‹å¦‚æ¯æ¬¡æµè§ˆå™¨çª—å£å°ºå¯¸å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šé‡æ–°è®¾ç½® æ¸²æŸ“å°ºå¯¸\nrenderer.setSize(width, height, false) åˆ¤æ–­é«˜å®½æ¯”ï¼Œä¸è®©èƒŒæ™¯å›¾å˜å½¢ä¸”å¯ä»¥é“ºæ»¡æ•´ä¸ªèƒŒæ™¯\nå‡è®¾æˆ‘ä»¬ä¸èƒ½æ¥å—èƒŒæ™¯å›¾å˜å½¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è®¡ç®—ä¸€ä¸‹ 2 è€…çš„å®½é«˜æ¯”ï¼Œç„¶åæ‰¾å‡ºåˆé€‚çš„æ¯”ä¾‹è¿›è¡Œä¿®æ”¹ã€‚\nè¿™ä¸ªä¸è®©èƒŒæ™¯å›¾å˜å½¢çš„è®¡ç®—è¿‡ç¨‹æ˜¯ï¼š\nè®¡ç®—å‡ºç”»å¸ƒå®½é«˜æ¯”ï¼Œä¾‹å¦‚ canvasAspect è®¡ç®—å‡ºèƒŒæ™¯å›¾å®½é«˜æ¯”ï¼Œä¾‹å¦‚ imgAspect ç„¶åè®¡ç®— imgAspect/canvasAspectï¼Œå¾—åˆ° æœ€ç»ˆèƒŒæ™¯å›¾åœ¨ä¸å˜å½¢çš„å‰æä¸‹çš„ç¼©æ”¾æ¯”ï¼Œä¾‹å¦‚ const resultAspect = imgAspect / canvasAspect ç„¶åä¾æ¬¡è®¾ç½®èƒŒæ™¯å›¾çº¹ç†çš„åç§»(offset.xã€offset.y)ï¼Œä»¥åŠåˆ¤æ–­æ˜¯å¦éœ€è¦é‡å¤å¹³é“ºèƒŒæ™¯å›¾(repeat.xã€repeat.y) ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nconst textureRef = useRef(null) ... const textureLoader = new Three.TextureLoader() textureLoader.load(require('@/assets/imgs/blue_sky.jpg').default, (texture) =\u003e { textureRef.current = texture scene.background = textureRef.current handleResize() //æ­¤å¤„æ˜¯å½“çº¹ç†å›¾ç‰‡åŠ è½½å®Œæˆåï¼Œéœ€è¦è°ƒç”¨æ‰§è¡Œä¸€ä¸‹ handleResize() }) ... const handleResize = () =\u003e { const canvasAspect = width / height //ç¬¬1æ­¥ï¼šè®¡ç®—å‡ºç”»å¸ƒå®½é«˜æ¯” if (textureRef.current !== null) { const bgTexture = textureRef.current const imgAspect = bgTexture.image.width / bgTexture.image.height //ç¬¬2æ­¥ï¼šè®¡ç®—å‡ºèƒŒæ™¯å›¾å®½é«˜æ¯” const resultAspect = imgAspect / canvasAspect //ç¬¬3æ­¥ï¼šè®¡ç®—å‡ºæœ€ç»ˆèƒŒæ™¯å›¾å®½ç¼©æ”¾å®½é«˜æ¯” //ç¬¬4æ­¥ï¼šè®¾ç½®èƒŒæ™¯å›¾çº¹ç†çš„åç§»å’Œé‡å¤ bgTexture.offset.x = resultAspect \u003e 1 ? (1 - 1 / resultAspect) / 2 : 0 bgTexture.repeat.x = resultAspect \u003e 1 ? 1 / resultAspect : 1 bgTexture.offset.y = resultAspect \u003e 1 ? 0 : (1 - resultAspect) / 2 bgTexture.repeat.y = resultAspect \u003e 1 ? 1 : resultAspect } } å®Œæ•´çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nimport { useRef, useEffect } from \"react\" import * as Three from 'three' import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\" import { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\" import './index.scss' const HelloSkybox = () =\u003e { const canvasRef = useRef(null) const textureRef = useRef(null) useEffect(() =\u003e { if (canvasRef.current === null) { return } const renderer = new Three.WebGLRenderer({ canvas: canvasRef.current }) const scene = new Three.Scene() const textureLoader = new Three.TextureLoader() textureLoader.load(require('@/assets/imgs/blue_sky.jpg').default, (texture) =\u003e { textureRef.current = texture scene.background = textureRef.current handleResize() }) scene.background = textureRef.current const camera = new Three.PerspectiveCamera(45, 2, 0.1, 100) camera.position.set(10, 0, 10) const light = new Three.HemisphereLight(0xFFFFFF, 0x333333, 1) scene.add(light) const loader = new GLTFLoader() loader.load(require('@/assets/model/hello.glb').default, (gltf) =\u003e { scene.add(gltf.scene) }) const control = new OrbitControls(camera, canvasRef.current) control.update() const render = () =\u003e { renderer.render(scene, camera) window.requestAnimationFrame(render) } window.requestAnimationFrame(render) const handleResize = () =\u003e { if (canvasRef.current === null) { return } const width = canvasRef.current.clientWidth const height = canvasRef.current.clientHeight const canvasAspect = width / height if (textureRef.current !== null) { const bgTexture = textureRef.current const imgAspect = bgTexture.image.width / bgTexture.image.height const resultAspect = imgAspect / canvasAspect bgTexture.offset.x = resultAspect \u003e 1 ? (1 - 1 / resultAspect) / 2 : 0 bgTexture.repeat.x = resultAspect \u003e 1 ? 1 / resultAspect : 1 bgTexture.offset.y = resultAspect \u003e 1 ? 0 : (1 - resultAspect) / 2 bgTexture.repeat.y = resultAspect \u003e 1 ? 1 : resultAspect } camera.aspect = canvasAspect camera.updateProjectionMatrix() renderer.setSize(width, height, false) } handleResize() window.addEventListener('resize', handleResize) return () =\u003e { window.removeEventListener('resize', handleResize) } }, []) return ( ) } export default HelloSkybox è¯·æ³¨æ„ï¼Œä¸Šé¢è®²è¿°çš„æ˜¯å°†èƒŒæ™¯å›¾ç‰‡åŠ è½½è¿› Three.js ä¸­ï¼Œå¹¶å½“åšçº¹ç†æ¥ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹çº¹ç†å„ç§å±æ€§æ¥ä¿®æ”¹å’Œæ§åˆ¶èƒŒæ™¯å›¾ã€‚\nä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ä»…ä»…æ˜¯å¯¹çº¹ç†çš„åç§»å’Œé‡å¤è¿›è¡Œäº†è®¾ç½®\nä½†æ˜¯ï¼Œå‡è®¾å°±ä»…ä»…ä¸ºäº†è¾¾åˆ°ä¸Šè¿°æ•ˆæœï¼Œå®é™…ä¸Šæˆ‘ä»¬æ ¹æœ¬ä¸ç”¨æè¿™ä¹ˆå¤æ‚ï¼Œç›´æ¥ç»™ç½‘é¡µä¸­ æ ‡ç­¾è®¾ç½®ä¸€ä¸ªèƒŒæ™¯å›¾ç‰‡å³å¯ã€‚\nç¬¬1æ­¥ï¼šæ·»åŠ æ¸²æŸ“å™¨å‚æ•° alpha:true\nconst renderer = new Three.WebGLRenderer({ canvas: canvasRef.current, alpha: true }) **ç¬¬2æ­¥ï¼šç»™ç”»å¸ƒæ ‡ç­¾()æ·»åŠ èƒŒæ™¯å›¾** ç¬¬1ç§æ·»åŠ æ–¹å¼ï¼šé€šè¿‡ css æ·»åŠ \n.full-screen { display: block; width: inherit; height: inherit; background: url(./imgs/blue_sky.jpg) no-repeat center center; background-size: cover; } è¯·æ³¨æ„ï¼šä¸Šé¢ .scss ä¸­æˆ‘ä»¬ç»™èƒŒæ™¯è®¾ç½®çš„å›¾ç‰‡è·¯å¾„ï¼Œå…¶å®æŒ‡å‘é¡¹ç›®çš„ public ç›®å½•\nç¬¬2ç§æ·»åŠ æ–¹å¼ï¼šé€šè¿‡ JS æ·»åŠ \nconst canvasStyle = { background: `url(${require('@/assets/imgs/blue_sky.jpg').default}) center center no-repeat`, backgroundSize: 'cover' } React åœ¨ç¼–è¯‘æ—¶ï¼Œä¼šè‡ªåŠ¨å°† style={canvasStyle} ä¸­çš„æ ·å¼è½¬åŒ–ä¸º CSS æ ·å¼\nè‡³æ­¤ï¼Œå…³äºå¦‚ä½•è®¾ç½®åœºæ™¯èƒŒæ™¯å›¾ç‰‡ï¼Œè®²è§£å®Œæ¯•ã€‚\næ¥ä¸‹æ¥è¦è®²è§£ä¸€ä¸ªå¸¸è§çš„ Three.js åº”ç”¨åœºæ™¯ï¼šSkyBox(å¤©ç©ºç›’)ã€‚\nå¤©ç©ºç›’(Skybox) å‡è®¾æˆ‘ä»¬èº«å¤„ä¸€ä¸ªç«‹æ–¹ä½“å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ç«‹æ–¹ä½“å†…éƒ¨ 6 ä¸ªé¢çš„èƒŒæ™¯è´´å›¾ã€‚\nè¿™ä¸å°±æ˜¯æˆ‘ä»¬èº«å¤„æŸä¸ªæˆ¿é—´å†…å—ï¼Ÿ\nè¿™ç±»åº”ç”¨åœºæ™¯ï¼Œé€šå¸¸è¢«ç§°å‘¼ä¸º Skyboxï¼Œä¹Ÿå°±æ˜¯ å¤©ç©ºç›’ã€‚\nè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ—¥å¸¸å¬åˆ°å¯¹æœ€å¤šçš„ Web 3D åº”ç”¨ï¼šVR çœ‹æˆ¿\nä¸Šé¢å¯¹äºå¤©ç©ºç›’çš„è§£é‡Šæ­£ç¡®å—ï¼Ÿ\nç­”ï¼šæ­£ç¡®ä½†ä¸ä¸¥è°¨ï¼\né€šå¸¸æˆ‘ä»¬æ‰€è¯´å¤©ç©ºç›’(Skybox) ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§å°±æ˜¯ï¼šåƒå¤©ç©ºä¸€æ ·å¤§çš„ç›’å­\nè¿›ä¸€æ­¥è§£é‡Šå°±æ˜¯ï¼šè¿™ä¸ªç›’å­ç©ºé—´åƒå¤©ç©ºä¸€æ ·æ— è¾¹æ— é™…ï¼Œæ°¸è¿œä¸åˆ°å¤´ã€‚\nè¯´ç›´ç™½ç‚¹ï¼Œå¤©ç©ºç›’å°±å¥½åƒæˆ‘ä»¬å¹³æ—¶çš„åœºæ™¯(Three.Scene)ï¼Œæ— è®ºç¼©å°åˆ°ä»€ä¹ˆé™åº¦ï¼Œè¿˜æ˜¯æ”¾å¤§åˆ°ä»€ä¹ˆé™åº¦ï¼Œæ°¸è¿œèµ°ä¸å‡ºåœºæ™¯ä¹‹å¤–ã€‚\nè€Œæœ¬æ–‡ä¸‹é¢æ‰€æœ‰çš„ç¤ºä¾‹ï¼Œå…¶å®éƒ½æ˜¯é’ˆå¯¹åœºæ™¯èƒŒæ™¯æ·»åŠ çº¹ç†è´´å›¾ï¼Œæ‰€ä»¥ä¸‹é¢ç¤ºä¾‹ä¸­çš„å¤©ç©ºç›’(skybox)ç©ºé—´ç­‰åŒäºåœºæ™¯æœ¬èº«ã€‚\nå¤©ç©ºç›’ä¸€å…±æœ‰ 2 ç§å½¢å¼çš„è´´å›¾èµ„æºï¼š\nå…¨æ™¯å›¾(hdri)ï¼Œåˆå å¤©ç©ºå›¾ ç«‹æ–¹ä½“è´´å›¾(cubemap) ç¬¬1ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•ï¼šå…¨æ™¯å›¾(hdri) å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬æœ€å®¹æ˜“æƒ³åˆ°çš„å®ç°æ–¹å¼ä¸ºï¼š\næˆ‘ä»¬æŠŠæ•´ä¸ª Three.Screen å½“åšç«‹æ–¹ä½“ï¼Œä¹Ÿå°±æ˜¯å°†æ•´ä¸ªåœºæ™¯å½“åšç«‹æ–¹ä½“\nå†æ¬¡é‡å¤ä¸€éï¼šæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨åœºæ™¯ä¸­åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“ï¼Œè€Œæ˜¯ç›´æ¥å°†æ•´ä¸ªåœºæ™¯å½“åšç«‹æ–¹ä½“\nå‡è®¾ä½ è¦ç»™åœºæ™¯ä¸­æŸä¸ªç«‹æ–¹ä½“è®¾ç½®ç±»ä¼¼çš„æ•ˆæœï¼Œé‚£ä¹ˆä½ è¦åšçš„äº‹æƒ…æ˜¯ï¼š\nåˆ›å»ºçº¹ç†ï¼Œä½¿ç”¨ç«‹æ–¹ä½“çº¹ç†åŠ è½½å™¨(Three.CubeTextureLoader)åŠ è½½å›¾ç‰‡èµ„æº\nåˆ›å»ºæè´¨ï¼Œé™¤äº†è®¾ç½®æè´¨çš„çº¹ç†ä¹‹å¤–ï¼Œè¿˜è¦è®¾ç½® .side å±æ€§ï¼Œå°†å€¼ä¸º Three.BackSideï¼Œä¾‹å¦‚\nnew MeshPhongMaterial({ map:xxxx, side: Three.BackSide }) æœ€ç»ˆåˆ›å»ºç«‹æ–¹ä½“ç½‘æ ¼(Three.Mesh)\nè¯·æ³¨æ„ï¼šç»å¤§å¤šæ•° VR çœ‹æˆ¿ï¼Œéƒ½æ˜¯å°†åœºæ™¯å½“åšç«‹æ–¹ä½“å³å¯ã€‚\næŒ‰ç…§æŒ‡å®šé¡ºåºï¼Œè·å–(åŠ è½½) 6 ä¸ªé¢çš„çº¹ç†è´´å›¾ï¼Œå¾—åˆ°çº¹ç†\nè¯·æ³¨æ„ï¼Œè¿™æ¬¡åŠ è½½æˆ‘ä»¬å¹¶ä¸ä½¿ç”¨ Three.TextureLoaderï¼Œè€Œæ˜¯é‡‡ç”¨ç«‹æ–¹ä½“ä¸“æœ‰çš„çº¹ç†åŠ è½½å™¨ Three.CubeTextureLoader\nå°†å¾—åˆ°çš„çº¹ç†ä½œä¸ºåœºæ™¯èƒŒæ™¯\nè®¾ç½®ç›¸æœºåæ ‡ z çš„å€¼ï¼Œç¡®ä¿æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç‰©ä½“ï¼Œä¾‹å¦‚\ncamera.position.set(0, 0, 10) ç„¶åæ­£å¸¸æ¸²æŸ“ï¼Œæˆ‘ä»¬å°±ä¼šæ„Ÿè§‰æ­¤åˆ»èº«åœ¨æˆ¿é—´ä¸­\nç¤ºä¾‹ä»£ç ï¼š\næˆ¿é—´å›¾ç‰‡ç´ æï¼š\næˆ‘ä»¬ä½¿ç”¨ç½‘ä¸Šæ‰¾åˆ°çš„æŸæˆ¿é—´ 6 ä¸ªé¢çš„çº¹ç†è´´å›¾\nhttps://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-x.jpg https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-x.jpg https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-y.jpg https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-y.jpg https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-z.jpg https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-z.jpg å®é™…ä»£ç ï¼š\nconst cubeTextureLoader = new Three.CubeTextureLoader() cubeTextureLoader.load([ 'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-x.jpg', 'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-x.jpg', 'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-y.jpg', 'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-y.jpg', 'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-z.jpg', 'https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-z.jpg' ], (texture) =\u003e { scene.background = texture }) é’ˆå¯¹è´´å›¾èµ„æºé¡ºåºçš„è¡¥å……è¯´æ˜ï¼š\nåœ¨ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŠ è½½ç«‹æ–¹ä½“ 6 é¢å›¾ç‰‡è´´å›¾èµ„æºçš„é¡ºåºæ˜¯å›ºå®šçš„ï¼Œä¾æ¬¡ä¸ºï¼š\npos-x.jpgã€neg-x.jpgã€pos-y.jpgã€neg-y.jpgã€pos-z.jpgã€neg-z.jpg\nâ€œposâ€ æ˜¯å•è¯ â€œpositiveâ€ çš„ç¼©å†™ï¼Œåœ¨ 3D åæ ‡ç³»ä¸­æ„æ€æ˜¯ æ­£\npositiveï¼šç§¯æçš„ã€æ­£å‘çš„ã€ä¹è§‚çš„\nâ€œnegâ€ æ˜¯å•è¯ â€œnegativeâ€ çš„ç¼©å†™ï¼Œåœ¨ 3D åæ ‡ç³»ä¸­æ„æ€æ˜¯ è´Ÿ\nnegativeï¼šæ¶ˆæçš„ã€è´Ÿé¢çš„\nå·¦æ‰‹åæ ‡ç³»ç»Ÿ VS å³æ‰‹åæ ‡ç³»ç»Ÿ æˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹ å³æ‰‹åæ ‡ç³»ç»Ÿï¼Œä½ å°±è‡ªç„¶æ˜ç™½ä»€ä¹ˆæ˜¯å·¦æ‰‹åæ ‡ç³»ç»Ÿäº†ã€‚\næˆ‘ä»¬çœ‹ä¸€ä¸‹ç™¾åº¦ç™¾ç§‘çš„ä»‹ç»ï¼š\nå³æ‰‹ç³»(right-hand system)æ˜¯åœ¨ç©ºé—´ä¸­è§„å®šç›´è§’åæ ‡ç³»çš„æ–¹æ³•ä¹‹ä¸€ã€‚æ­¤åæ ‡ç³»ä¸­xè½´ï¼Œyè½´å’Œzè½´çš„æ­£æ–¹å‘æ˜¯å¦‚ä¸‹è§„å®šçš„ï¼šæŠŠå³æ‰‹æ”¾åœ¨åŸç‚¹çš„ä½ç½®ï¼Œä½¿å¤§æ‹‡æŒ‡ï¼Œé£ŸæŒ‡å’Œä¸­æŒ‡äº’æˆç›´è§’ï¼ŒæŠŠå¤§æ‹‡æŒ‡æŒ‡å‘xè½´çš„æ­£æ–¹å‘ï¼Œé£ŸæŒ‡æŒ‡å‘yè½´çš„æ­£æ–¹å‘æ—¶ï¼Œä¸­æŒ‡æ‰€æŒ‡çš„æ–¹å‘å°±æ˜¯zè½´çš„æ­£æ–¹å‘ã€‚\nåŒæ ·çš„æ“ä½œä½ æ¢åšå·¦æ‰‹ï¼Œé‚£ä¹ˆå°±æ˜¯å·¦æ‰‹åæ ‡ç³»ç»Ÿã€‚\nå·¦æ‰‹åæ ‡ç³»ç»Ÿå’Œå³æ‰‹åæ ‡ç³»ç»Ÿåœ¨ Y è½´ã€Z è½´ æ–¹é¢æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯åœ¨ X è½´ä¸Šæ˜¯å½¼æ­¤ç›¸åçš„ã€‚\nå¯¹äºç«‹æ–¹ä½“è´´å›¾ï¼Œä½¿ç”¨çš„æ˜¯å·¦æ‰‹ç³»ç»Ÿï¼\nå› æ­¤ä¸Šé¢å›¾ç‰‡åç§°çš„å«ä¹‰ä¸ºï¼š\nåç§° å«ä¹‰ å¯¹åº”ç«‹æ–¹ä½“å†…éƒ¨çš„é¢æ¥è¯´ å¯¹äºç«™åœ¨ç«‹æ–¹ä½“å†…éƒ¨ä¸­é—´çš„äººæ¥è¯´ pos-x X è½´æ­£æ–¹å‘ å·¦é¢ è§†è§‰å·¦æ–¹ neg-x X è½´è´Ÿæ–¹å‘ å³é¢ è§†è§‰å³æ–¹ pos-y Y è½´æ­£æ–¹å‘ ä¸Šé¢ è§†è§‰ä¸Šæ–¹ neg-y Y è½´è´Ÿæ–¹å‘ ä¸‹é¢ è§†è§‰ä¸‹æ–¹ pos-z Z è½´æ­£æ–¹å‘ åé¢ è§†è§‰åæ–¹ neg-z Z è½´è´Ÿæ–¹å‘ å‰é¢ è§†è§‰å‰æ–¹ è¯·æ³¨æ„ï¼Œç«‹æ–¹ä½“çš„å‰é¢æˆ–åé¢å®Œå…¨æ˜¯ç”±è§‚å¯Ÿè€…æ‰€å¤„çš„ä½ç½®æ¥å†³å®šçš„ã€‚\nå¦‚æœä½ åœ¨ç«‹æ–¹ä½“å¤–é¢å»çœ‹ç«‹æ–¹ä½“ï¼Œé‚£ä¹ˆæ­£é¢çœ‹åˆ°çš„æ˜¯ç«‹æ–¹ä½“çš„æ­£é¢ï¼Œçœ‹ä¸åˆ°çš„æ˜¯ç«‹æ–¹ä½“çš„èƒŒé¢ã€‚\nä½†æ˜¯æˆ‘ä»¬ç°åœ¨åšçš„æ˜¯ç«™åœ¨ç«‹æ–¹ä½“å†…éƒ¨å»è§‚å¯Ÿç«‹æ–¹ä½“ï¼Œæ‰€ä»¥æ­¤åˆ» â€œç«‹æ–¹ä½“çš„æ­£é¢â€ å®é™…ä¸Šå¯¹äºæˆ‘ä»¬è§‚å¯Ÿè€…è€Œè¨€æ˜¯åœ¨æˆ‘ä»¬èº«åï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„è§†è§‰åæ–¹ã€‚\nå¯¹äºThree.jsæ¸²æŸ“ä½¿ç”¨çš„æ˜¯ å³æ‰‹åæ ‡ç³»ç»Ÿï¼\nä¸è¿‡ä½ ä¸ç”¨æ‹…å¿ƒå·¦å³æ–¹å‘ç›¸åè¿™ä¸ªäº‹æƒ…ï¼Œå› ä¸ºåœ¨ Three.js å†…éƒ¨åœ¨æ¸²æŸ“çš„æ—¶å€™ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å°†å·¦å³å¯¹è°ƒã€‚\né‡å¤ä¸€éï¼š\nä¸€èˆ¬ç«‹æ–¹ä½“æ¨¡å‹è´´å›¾ä½¿ç”¨å·¦æ‰‹åæ ‡ç³»ç»Ÿ Three.js æ•´ä½“ä½¿ç”¨å³æ‰‹åæ ‡ç³»ç»Ÿ ä½†åœ¨æ¸²æŸ“ç«‹æ–¹ä½“å†…éƒ¨è´´å›¾æ—¶ï¼ŒThree.js ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åšå¥½å·¦å³å…‘æ¢ å› æ­¤æˆ‘ä»¬åœ¨ä¼ é€’çº¹ç†è´´å›¾æ—¶ï¼Œè´´å›¾é¡ºåºä½¿ç”¨çš„æ˜¯å·¦æ‰‹åæ ‡ç³»ç»Ÿ ç³Ÿç³•ï¼Œæˆ‘ä¹Ÿæ˜¯ä»Šå¤©å­¦ä¹ åˆ°è¿™é‡Œæ‰å½»åº•æ˜ç™½åæ ‡ç³»ç»Ÿï¼Œæˆ‘å¯èƒ½åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­å¯¹äº ä¸Šä¸‹å·¦å³å‰å è®²è§£é”™äº†ï¼Œä½†æ˜¯æˆ‘æš‚æ—¶è®°ä¸æ¸…æ˜¯å“ªä¸€ç« èŠ‚ã€‚\nç¬¬2ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•ï¼šç«‹æ–¹ä½“è´´å›¾(cubemap) æˆ‘ä»¬ç¬¬1ç§å®ç°å¤©ç©ºç›’ï¼Œå®é™…ä¸Šä½¿ç”¨çš„æ˜¯ 6 ä¸ªé¢çš„å›¾ç‰‡èµ„æºç»„åˆæˆäº†ä¸€ä¸ª 3D ç©ºé—´ã€‚\næ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ ä½¿ç”¨ä¸€å¼  360Â° çƒå½¢ç›¸æœºæ‹æ‘„çš„ç…§ç‰‡ï¼Œæ¥å®ç° 3D ç©ºé—´ç«‹æ–¹ä½“ã€‚\né¦–å…ˆä½ ä»ç½‘ä¸Šæ‰¾åˆ°ä¸€å¼  360Â° çš„åœºæ™¯å›¾ç‰‡èµ„æºï¼š\nhttps://threejsfundamentals.org/threejs/resources/images/equirectangularmaps/tears_of_steel_bridge_2k.jpg\nè¯·æ³¨æ„ï¼Œè¿™ç±»å›¾ç‰‡å°ºå¯¸å®½é«˜æ¯”ä¾‹ä¸º 2:1ï¼Œç»å¸¸ç§°å‘¼è¿™ç±»å›¾ç‰‡ä¸º â€œå…¨æ™¯å›¾â€\nå®ç°æ€è·¯ï¼š\nä½¿ç”¨çº¹ç†åŠ è½½å™¨åŠ è½½è¯¥å›¾ç‰‡èµ„æº\nè¿™ç§ 2:1 çš„å›¾ç‰‡ï¼Œè¢«ç§°ä¸º â€œç­‰çŸ©å½¢å›¾åƒâ€\nå®ä¾‹åŒ–ä¸€ä¸ª Three.WebGLCubeRenderTargetï¼Œæ„é€ å‡½æ•°ä¸­çš„ size å±æ€§ä¸ºå›¾ç‰‡èµ„æºçš„é«˜\nWebGLCubeRenderTarget ç»§æ‰¿äº WebGLRenderTargetï¼Œå±äºç¦»å±æ¸²æŸ“çš„ä¸€ç§ç‰¹ä¾‹(ä¸“é—¨é’ˆå¯¹ç«‹æ–¹ä½“æ¨¡å‹)\nåœ¨ WebGLRenderTarget çš„æºç ä¸­å¯ä»¥çœ‹åˆ°è¿™å¥ä»£ç ï¼šsuper( size, size, options );\nWebGLRenderTarget æ„é€ å‡½æ•°éœ€è¦ä¼ é€’ width å’Œ heightï¼Œä½†æ˜¯ WebGLCubeRenderTarget æ„é€ å‡½æ•°åªéœ€ä¼ å…¥ 1 ä¸ª sizeï¼Œå› ä¸ºæ­£æ–¹ä½“ï¼Œæ‰€ä»¥å®½é«˜ä¸€æ ·ã€‚\nè°ƒç”¨è¯¥å®ä¾‹åŒ–å¯¹è±¡çš„ fromEquirectangularTexture() å‡½æ•°\nå°†ç­‰è·å›¾åƒ è½¬åŒ–ä¸º ç«‹æ–¹ä½“æ¨¡å‹è´´å›¾\nå¯ä»¥ç®€å•ç†è§£æˆï¼šå°±æ˜¯å°† 1 æ•´å¼ å›¾ç‰‡è½¬åŒ–ä¸º 6ä¸ªé¢çš„ç«‹æ–¹ä½“æ¨¡å‹è´´å›¾ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“\nå°†åœºæ™¯èƒŒæ™¯è®¾ç½®ä¸ºè¯¥å®ä¾‹å¯¹è±¡\nè¿™æ ·ç›¸å½“äºå°†åœºæ™¯èƒŒæ™¯å›¾çš„å€¼è®¾ç½®ä¸º WebGLCubeRenderTarget çš„æ¸²æŸ“ç»“æœ\nå…·ä½“ä»£ç ï¼š\nconst textureLoader = new Three.TextureLoader() textureLoader.load(require('@/assets/imgs/tears_of_steel_bridge.jpg').default, (texture) =\u003e { const crt = new Three.WebGLCubeRenderTarget(texture.image.height) crt.fromEquirectangularTexture(renderer,texture) scene.background = crt.texture } ) è¡¥å……è¯´æ˜ï¼šscene.background çš„ç±»å‹ä¸º WebGLBackground\nè¯·ç•™æ„ä¸Šè¿°ä»£ç ä¸­ scene.background = crt.textureï¼Œäº‹å®ä¸Šåœ¨ä»¥å‰çš„ä¸€äº›æ•™ç¨‹ä¸­å¯ä»¥å†™æˆ scene.background = crtï¼ŒWebGLBackground ä¼šåœ¨å†…éƒ¨è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœ background ç±»å‹ä¸º WebGLRenderTargetï¼Œåˆ™ä½¿ç”¨è¯¥å®ä¾‹çš„ .texture å±æ€§å€¼ã€‚\nä½†æ˜¯åœ¨æœ€æ–°ç‰ˆ r127 ä¸­å·²ç»åˆ é™¤äº†è¯¥åˆ¤æ–­ä»£ç ï¼Œæ‰€ä»¥ç°åœ¨å¿…é¡»å†™æˆ scene.background = crt.textureã€‚\nå°±è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å·²å‘å®˜ç½‘æ•™ç¨‹è¿›è¡Œäº†ä¿®æ”¹æäº¤ï¼šhttps://github.com/gfxfundamentals/threejsfundamentals/pull/205\nè¡¥å……è¯´æ˜ï¼šå…¨æ™¯å›¾(hdri) ä¸ ç«‹æ–¹ä½“è´´å›¾(cubemap) äº’è½¬ ç½‘ä¸Šæœ‰äººæä¾›äº† å…¨æ™¯å›¾ä¸ç«‹æ–¹ä½“æ¨¡å‹å›¾ ä¹‹é—´çš„è½¬åŒ–å·¥å…·åŒ…ï¼š\nåœ¨çº¿åœ°å€ï¼šhttps://matheowis.github.io/HDRI-to-CubeMap/\né¡¹ç›®æºç ï¼šhttps://github.com/aunyks/hdri-to-cubemap\nä½ ä»¥ä¸ºæœ¬æ–‡ç»“æŸäº†ï¼Ÿæ²¡æœ‰ï¼\næˆ‘ä»¬ä¸Šé¢ç¤ºä¾‹éƒ½æ˜¯ å¤©ç©ºç›’(skybox)ï¼Œé‚£å¦‚æœæ˜¯çœŸçš„ä¸€ä¸ªç«‹æ–¹ä½“å‘¢ï¼Ÿ\nå¤©ç©ºç›’ æ˜¯æ²¡æœ‰å°ºå¯¸ï¼Œç©ºé—´æ— é™å¤§çš„ï¼Œè€Œæ™®é€šç«‹æ–¹ä½“åˆ™æ˜¯æœ‰å°ºå¯¸çš„ã€‚\nä¸‹é¢ç¤ºä¾‹æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“ï¼Œç„¶åå¯¹ç«‹æ–¹ä½“å†…éƒ¨è¿›è¡Œè´´å›¾ï¼Œå¹¶æ¸²æŸ“å’Œè§‚å¯Ÿç«‹æ–¹ä½“ç›’å­å†…éƒ¨ã€‚\næ™®é€šç«‹æ–¹ä½“å†…éƒ¨è´´å›¾å’Œæ¸²æŸ“ ",
  "wordCount" : "4214",
  "inLanguage": "en",
  "datePublished": "2023-12-19T17:11:35+08:00",
  "dateModified": "2023-12-19T17:11:35+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://bablvsj.github.io/posts/threejs/25-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%92%8C%E5%A4%A9%E7%A9%BA%E7%9B%92/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Bablvsj's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://bablvsj.github.io/img/Q.gif"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://bablvsj.github.io" accesskey="h" title="Bablvsj&#39;s Blog (Alt + H)">Bablvsj&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://bablvsj.github.io/" title="ä¸»é¡µ">
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/archives/" title="æ—¶é—´è½´">
                    <span>æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/tags" title="æ ‡ç­¾">
                    <span>æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/about" title="å…³äº">
                    <span>å…³äº</span>
                </a>
            </li>
            <li>
                <a href="https://bablvsj.github.io/search" title="ğŸ” (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”</span>
                </a>
            </li>
        </ul>
    </nav>
</header>


<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      25 Three.jsè§£å†³æ–¹æ¡ˆä¹‹æ·»åŠ èƒŒæ™¯å’Œå¤©ç©ºç›’
    </h1>
    <div class="post-meta">
      
<div class="post-tags-meta">
    <a href="https://bablvsj.github.io/tags/three.js/">Three.js</a>
</div>

9 min&nbsp;Â·&nbsp;<span title='2023-12-19 17:11:35 +0800 CST'>2023/12/19</span>


      
    </div>
    
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        
        <div class="inner"><ul>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e5%9c%ba%e6%99%af%e8%83%8c%e6%99%af" aria-label="è®¾ç½®åœºæ™¯èƒŒæ™¯">è®¾ç½®åœºæ™¯èƒŒæ™¯</a></li>
                <li>
                    <a href="#%e5%a4%a9%e7%a9%ba%e7%9b%92skybox" aria-label="å¤©ç©ºç›’(Skybox)">å¤©ç©ºç›’(Skybox)</a><ul>
                        <ul>
                        
                <li>
                    <a href="#%e7%ac%ac1%e7%a7%8d%e5%ae%9e%e7%8e%b0%e5%a4%a9%e7%a9%ba%e7%9b%92%e7%9a%84%e6%96%b9%e6%b3%95%e5%85%a8%e6%99%af%e5%9b%behdri" aria-label="ç¬¬1ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•ï¼šå…¨æ™¯å›¾(hdri)">ç¬¬1ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•ï¼šå…¨æ™¯å›¾(hdri)</a></li></ul>
                    
                <li>
                    <a href="#%e5%b7%a6%e6%89%8b%e5%9d%90%e6%a0%87%e7%b3%bb%e7%bb%9f-vs-%e5%8f%b3%e6%89%8b%e5%9d%90%e6%a0%87%e7%b3%bb%e7%bb%9f" aria-label="å·¦æ‰‹åæ ‡ç³»ç»Ÿ VS å³æ‰‹åæ ‡ç³»ç»Ÿ">å·¦æ‰‹åæ ‡ç³»ç»Ÿ VS å³æ‰‹åæ ‡ç³»ç»Ÿ</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ac2%e7%a7%8d%e5%ae%9e%e7%8e%b0%e5%a4%a9%e7%a9%ba%e7%9b%92%e7%9a%84%e6%96%b9%e6%b3%95%e7%ab%8b%e6%96%b9%e4%bd%93%e8%b4%b4%e5%9b%becubemap" aria-label="ç¬¬2ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•ï¼šç«‹æ–¹ä½“è´´å›¾(cubemap)">ç¬¬2ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•ï¼šç«‹æ–¹ä½“è´´å›¾(cubemap)</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%a1%a5%e5%85%85%e8%af%b4%e6%98%8e%e5%85%a8%e6%99%af%e5%9b%behdri-%e4%b8%8e-%e7%ab%8b%e6%96%b9%e4%bd%93%e8%b4%b4%e5%9b%becubemap-%e4%ba%92%e8%bd%ac" aria-label="è¡¥å……è¯´æ˜ï¼šå…¨æ™¯å›¾(hdri) ä¸ ç«‹æ–¹ä½“è´´å›¾(cubemap) äº’è½¬">è¡¥å……è¯´æ˜ï¼šå…¨æ™¯å›¾(hdri) ä¸ ç«‹æ–¹ä½“è´´å›¾(cubemap) äº’è½¬</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%99%ae%e9%80%9a%e7%ab%8b%e6%96%b9%e4%bd%93%e5%86%85%e9%83%a8%e8%b4%b4%e5%9b%be%e5%92%8c%e6%b8%b2%e6%9f%93" aria-label="æ™®é€šç«‹æ–¹ä½“å†…éƒ¨è´´å›¾å’Œæ¸²æŸ“">æ™®é€šç«‹æ–¹ä½“å†…éƒ¨è´´å›¾å’Œæ¸²æŸ“</a>
                </li>
            </ul>
        </div>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><p>åœ¨æˆ‘ä»¬ä¹‹å‰æ‰€æœ‰æ¼”ç¤ºçš„æ¡ˆä¾‹ä¸­ï¼Œåœºæ™¯ä¸­çš„èƒŒæ™¯å¾€å¾€ä½¿ç”¨é»˜è®¤çš„é»‘è‰²ï¼Œæˆ–è€…æ˜¯å…¶ä»–çº¯é¢œè‰²ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬è®²è§£ä¸€ä¸‹ Three.Screen çš„èƒŒæ™¯è®¾ç½®æ–¹å¼ã€‚</p>
<br>
<h2 id="è®¾ç½®åœºæ™¯èƒŒæ™¯">è®¾ç½®åœºæ™¯èƒŒæ™¯<a hidden class="anchor" aria-hidden="true" href="#è®¾ç½®åœºæ™¯èƒŒæ™¯">#</a></h2>
<p>åœºæ™¯(Three.Screen)æœ‰ä¸€ä¸ªå±æ€§ .backgroundã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®è¿™ä¸ªå±æ€§æ¥ç»™åœºæ™¯æ·»åŠ èƒŒæ™¯ã€‚</p>
<br>
<p><strong>.backgroundå±æ€§å€¼ç±»å‹</strong></p>
<p>åœºæ™¯èƒŒæ™¯å±æ€§å€¼ä¸€å…±æœ‰ 3 ç§ç±»å‹ï¼š</p>
<ol>
<li>
<p>é»˜è®¤ä¸º null</p>
<blockquote>
<p>.background å±æ€§å€¼ä¸º nullï¼Œåœºæ™¯æ˜¾ç¤ºä¸ºé»‘è‰²</p>
</blockquote>
</li>
<li>
<p>æŸé¢œè‰² Three.Color</p>
<blockquote>
<p>Three.Color å¯æ¥å— å­—ç¬¦ä¸²æˆ–æ•°å­—ç±»å‹çš„é¢œè‰²å€¼ï¼Œä¾‹å¦‚:</p>
<ol>
<li>new Three.Color(&rsquo;#333')</li>
<li>new Three.Color(&lsquo;green&rsquo;)</li>
<li>new Three.Color(0x333333)</li>
</ol>
</blockquote>
</li>
<li>
<p>æŸçº¹ç† Three.Texture</p>
</li>
</ol>
<br>
<p><strong>è®¾ç½®èƒŒæ™¯è‰²ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>const scene = new Three.Scene()
</span></span><span style="display:flex;"><span>scene.background = new Three.Color(0x333333)
</span></span></code></pre></div><br>
<p><strong>è®¾ç½®èƒŒæ™¯çº¹ç†å›¾ç‰‡ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>const scene = new Three.Scene()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>const textureLoader = new Three.TextureLoader()
</span></span><span style="display:flex;"><span>scene.background = textureLoader.load(require(&#39;@/assets/imgs/blue_sky.jpg&#39;).default)
</span></span></code></pre></div><p>æˆ–è€…æ˜¯</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>const textureLoader = new Three.TextureLoader()
</span></span><span style="display:flex;"><span>textureLoader.load(require(&#39;@/assets/imgs/blue_sky.jpg&#39;).default, (texture) =&gt; {
</span></span><span style="display:flex;"><span>    scene.background = texture
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><br>
<p>ä¸Šé¢è®¾ç½®åœºæ™¯çº¹ç†èƒŒæ™¯å›¾ï¼Œå®é™…è¿è¡Œåä½ ä¼šå‘ç°è™½ç„¶èƒŒæ™¯å›¾æ˜¾ç¤ºäº†ï¼Œä½†æ˜¯èƒŒæ™¯å›¾å´æœ‰å¯èƒ½æ˜¯å˜å½¢ç€çš„ã€‚</p>
<p>è¿™æ˜¯ç”±äºèƒŒæ™¯å›¾ç‰‡æœ¬èº«å°±ä¸€ä¸ªå®½é«˜æ¯”ï¼Œè€Œç”»å¸ƒ(Canvas)æœ¬èº«ä¹Ÿæœ‰ä¸€ä¸ªå®½é«˜æ¯”ã€‚</p>
<blockquote>
<p>å®é™…ä¸Šæ˜¯æ¸²æŸ“å™¨æ¸²æŸ“å°ºå¯¸çš„å®½é«˜ï¼Œä¾‹å¦‚æ¯æ¬¡æµè§ˆå™¨çª—å£å°ºå¯¸å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šé‡æ–°è®¾ç½® æ¸²æŸ“å°ºå¯¸</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>renderer.setSize(width, height, false)
</span></span></code></pre></div></blockquote>
<br>
<p><strong>åˆ¤æ–­é«˜å®½æ¯”ï¼Œä¸è®©èƒŒæ™¯å›¾å˜å½¢ä¸”å¯ä»¥é“ºæ»¡æ•´ä¸ªèƒŒæ™¯</strong></p>
<p>å‡è®¾æˆ‘ä»¬ä¸èƒ½æ¥å—èƒŒæ™¯å›¾å˜å½¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è®¡ç®—ä¸€ä¸‹ 2 è€…çš„å®½é«˜æ¯”ï¼Œç„¶åæ‰¾å‡ºåˆé€‚çš„æ¯”ä¾‹è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>è¿™ä¸ªä¸è®©èƒŒæ™¯å›¾å˜å½¢çš„è®¡ç®—è¿‡ç¨‹æ˜¯ï¼š</p>
<ol>
<li>è®¡ç®—å‡ºç”»å¸ƒå®½é«˜æ¯”ï¼Œä¾‹å¦‚ canvasAspect</li>
<li>è®¡ç®—å‡ºèƒŒæ™¯å›¾å®½é«˜æ¯”ï¼Œä¾‹å¦‚ imgAspect</li>
<li>ç„¶åè®¡ç®— imgAspect/canvasAspectï¼Œå¾—åˆ° æœ€ç»ˆèƒŒæ™¯å›¾åœ¨ä¸å˜å½¢çš„å‰æä¸‹çš„ç¼©æ”¾æ¯”ï¼Œä¾‹å¦‚ const resultAspect = imgAspect / canvasAspect</li>
<li>ç„¶åä¾æ¬¡è®¾ç½®èƒŒæ™¯å›¾çº¹ç†çš„åç§»(offset.xã€offset.y)ï¼Œä»¥åŠåˆ¤æ–­æ˜¯å¦éœ€è¦é‡å¤å¹³é“ºèƒŒæ™¯å›¾(repeat.xã€repeat.y)</li>
</ol>
<br>
<p><strong>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>const textureRef = useRef&lt;Three.Texture | null&gt;(null)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>const textureLoader = new Three.TextureLoader()
</span></span><span style="display:flex;"><span>textureLoader.load(require(&#39;@/assets/imgs/blue_sky.jpg&#39;).default, (texture) =&gt; {
</span></span><span style="display:flex;"><span>    textureRef.current = texture
</span></span><span style="display:flex;"><span>    scene.background = textureRef.current
</span></span><span style="display:flex;"><span>    handleResize() //æ­¤å¤„æ˜¯å½“çº¹ç†å›¾ç‰‡åŠ è½½å®Œæˆåï¼Œéœ€è¦è°ƒç”¨æ‰§è¡Œä¸€ä¸‹ handleResize()
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>const handleResize = () =&gt; {
</span></span><span style="display:flex;"><span>    const canvasAspect = width / height  //ç¬¬1æ­¥ï¼šè®¡ç®—å‡ºç”»å¸ƒå®½é«˜æ¯”
</span></span><span style="display:flex;"><span>    if (textureRef.current !== null) {
</span></span><span style="display:flex;"><span>        const bgTexture = textureRef.current
</span></span><span style="display:flex;"><span>        const imgAspect = bgTexture.image.width / bgTexture.image.height  //ç¬¬2æ­¥ï¼šè®¡ç®—å‡ºèƒŒæ™¯å›¾å®½é«˜æ¯”
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        const resultAspect = imgAspect / canvasAspect  //ç¬¬3æ­¥ï¼šè®¡ç®—å‡ºæœ€ç»ˆèƒŒæ™¯å›¾å®½ç¼©æ”¾å®½é«˜æ¯”
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        //ç¬¬4æ­¥ï¼šè®¾ç½®èƒŒæ™¯å›¾çº¹ç†çš„åç§»å’Œé‡å¤
</span></span><span style="display:flex;"><span>        bgTexture.offset.x = resultAspect &gt; 1 ? (1 - 1 / resultAspect) / 2 : 0
</span></span><span style="display:flex;"><span>        bgTexture.repeat.x = resultAspect &gt; 1 ? 1 / resultAspect : 1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        bgTexture.offset.y = resultAspect &gt; 1 ? 0 : (1 - resultAspect) / 2
</span></span><span style="display:flex;"><span>        bgTexture.repeat.y = resultAspect &gt; 1 ? 1 : resultAspect
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><br>
<p><strong>å®Œæ•´çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>import { useRef, useEffect } from &#34;react&#34;
</span></span><span style="display:flex;"><span>import * as Three from &#39;three&#39;
</span></span><span style="display:flex;"><span>import { OrbitControls } from &#34;three/examples/jsm/controls/OrbitControls&#34;
</span></span><span style="display:flex;"><span>import { GLTFLoader } from &#34;three/examples/jsm/loaders/GLTFLoader&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>import &#39;./index.scss&#39;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>const HelloSkybox = () =&gt; {
</span></span><span style="display:flex;"><span>    const canvasRef = useRef&lt;HTMLCanvasElement | null&gt;(null)
</span></span><span style="display:flex;"><span>    const textureRef = useRef&lt;Three.Texture | null&gt;(null)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    useEffect(() =&gt; {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        if (canvasRef.current === null) { return }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        const renderer = new Three.WebGLRenderer({ canvas: canvasRef.current })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        const scene = new Three.Scene()
</span></span><span style="display:flex;"><span>        const textureLoader = new Three.TextureLoader()
</span></span><span style="display:flex;"><span>        textureLoader.load(require(&#39;@/assets/imgs/blue_sky.jpg&#39;).default, (texture) =&gt; {
</span></span><span style="display:flex;"><span>            textureRef.current = texture
</span></span><span style="display:flex;"><span>            scene.background = textureRef.current
</span></span><span style="display:flex;"><span>            handleResize()
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>        scene.background = textureRef.current
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        const camera = new Three.PerspectiveCamera(45, 2, 0.1, 100)
</span></span><span style="display:flex;"><span>        camera.position.set(10, 0, 10)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        const light = new Three.HemisphereLight(0xFFFFFF, 0x333333, 1)
</span></span><span style="display:flex;"><span>        scene.add(light)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        const loader = new GLTFLoader()
</span></span><span style="display:flex;"><span>        loader.load(require(&#39;@/assets/model/hello.glb&#39;).default, (gltf) =&gt; {
</span></span><span style="display:flex;"><span>            scene.add(gltf.scene)
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        const control = new OrbitControls(camera, canvasRef.current)
</span></span><span style="display:flex;"><span>        control.update()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        const render = () =&gt; {
</span></span><span style="display:flex;"><span>            renderer.render(scene, camera)
</span></span><span style="display:flex;"><span>            window.requestAnimationFrame(render)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        window.requestAnimationFrame(render)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        const handleResize = () =&gt; {
</span></span><span style="display:flex;"><span>            if (canvasRef.current === null) { return }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            const width = canvasRef.current.clientWidth
</span></span><span style="display:flex;"><span>            const height = canvasRef.current.clientHeight
</span></span><span style="display:flex;"><span>            const canvasAspect = width / height
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            if (textureRef.current !== null) {
</span></span><span style="display:flex;"><span>                const bgTexture = textureRef.current
</span></span><span style="display:flex;"><span>                const imgAspect = bgTexture.image.width / bgTexture.image.height
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                const resultAspect = imgAspect / canvasAspect
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                bgTexture.offset.x = resultAspect &gt; 1 ? (1 - 1 / resultAspect) / 2 : 0
</span></span><span style="display:flex;"><span>                bgTexture.repeat.x = resultAspect &gt; 1 ? 1 / resultAspect : 1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                bgTexture.offset.y = resultAspect &gt; 1 ? 0 : (1 - resultAspect) / 2
</span></span><span style="display:flex;"><span>                bgTexture.repeat.y = resultAspect &gt; 1 ? 1 : resultAspect
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            camera.aspect = canvasAspect
</span></span><span style="display:flex;"><span>            camera.updateProjectionMatrix()
</span></span><span style="display:flex;"><span>            renderer.setSize(width, height, false)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        handleResize()
</span></span><span style="display:flex;"><span>        window.addEventListener(&#39;resize&#39;, handleResize)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        return () =&gt; {
</span></span><span style="display:flex;"><span>            window.removeEventListener(&#39;resize&#39;, handleResize)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }, [])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    return (
</span></span><span style="display:flex;"><span>        &lt;canvas ref={canvasRef} className=&#39;full-screen&#39; /&gt;
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>export default HelloSkybox
</span></span></code></pre></div><br>
<p>è¯·æ³¨æ„ï¼Œä¸Šé¢è®²è¿°çš„æ˜¯å°†èƒŒæ™¯å›¾ç‰‡åŠ è½½è¿› Three.js ä¸­ï¼Œå¹¶å½“åšçº¹ç†æ¥ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹çº¹ç†å„ç§å±æ€§æ¥ä¿®æ”¹å’Œæ§åˆ¶èƒŒæ™¯å›¾ã€‚</p>
<blockquote>
<p>ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ä»…ä»…æ˜¯å¯¹çº¹ç†çš„åç§»å’Œé‡å¤è¿›è¡Œäº†è®¾ç½®</p>
</blockquote>
<p>ä½†æ˜¯ï¼Œå‡è®¾å°±ä»…ä»…ä¸ºäº†è¾¾åˆ°ä¸Šè¿°æ•ˆæœï¼Œå®é™…ä¸Šæˆ‘ä»¬æ ¹æœ¬ä¸ç”¨æè¿™ä¹ˆå¤æ‚ï¼Œç›´æ¥ç»™ç½‘é¡µä¸­ &lt;canvas&gt; æ ‡ç­¾è®¾ç½®ä¸€ä¸ªèƒŒæ™¯å›¾ç‰‡å³å¯ã€‚</p>
<br>
<p><strong>ç¬¬1æ­¥ï¼šæ·»åŠ æ¸²æŸ“å™¨å‚æ•° alpha:true</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>const renderer = new Three.WebGLRenderer({ canvas: canvasRef.current, alpha: true })
</span></span></code></pre></div><br>
**ç¬¬2æ­¥ï¼šç»™ç”»å¸ƒæ ‡ç­¾(<canvas\>)æ·»åŠ èƒŒæ™¯å›¾**
<p>ç¬¬1ç§æ·»åŠ æ–¹å¼ï¼šé€šè¿‡ css æ·»åŠ </p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>.full-screen {
</span></span><span style="display:flex;"><span>    display: block;
</span></span><span style="display:flex;"><span>    width: inherit;
</span></span><span style="display:flex;"><span>    height: inherit;
</span></span><span style="display:flex;"><span>    background: url(./imgs/blue_sky.jpg) no-repeat center center;
</span></span><span style="display:flex;"><span>    background-size: cover;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>è¯·æ³¨æ„ï¼šä¸Šé¢ .scss ä¸­æˆ‘ä»¬ç»™èƒŒæ™¯è®¾ç½®çš„å›¾ç‰‡è·¯å¾„ï¼Œå…¶å®æŒ‡å‘é¡¹ç›®çš„ public ç›®å½•</p>
</blockquote>
<br>
<p>ç¬¬2ç§æ·»åŠ æ–¹å¼ï¼šé€šè¿‡ JS æ·»åŠ </p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>const canvasStyle = {
</span></span><span style="display:flex;"><span>    background: `url(${require(&#39;@/assets/imgs/blue_sky.jpg&#39;).default}) center center no-repeat`,
</span></span><span style="display:flex;"><span>    backgroundSize: &#39;cover&#39;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>&lt;canvas ref={canvasRef} className=&#39;full-screen&#39; style={canvasStyle} /&gt;
</span></span></code></pre></div><blockquote>
<p>React åœ¨ç¼–è¯‘æ—¶ï¼Œä¼šè‡ªåŠ¨å°† <code>style={canvasStyle}</code> ä¸­çš„æ ·å¼è½¬åŒ–ä¸º CSS  æ ·å¼</p>
</blockquote>
<br>
<p>è‡³æ­¤ï¼Œå…³äºå¦‚ä½•è®¾ç½®åœºæ™¯èƒŒæ™¯å›¾ç‰‡ï¼Œè®²è§£å®Œæ¯•ã€‚</p>
<p>æ¥ä¸‹æ¥è¦è®²è§£ä¸€ä¸ªå¸¸è§çš„ Three.js åº”ç”¨åœºæ™¯ï¼šSkyBox(å¤©ç©ºç›’)ã€‚</p>
<br>
<h2 id="å¤©ç©ºç›’skybox">å¤©ç©ºç›’(Skybox)<a hidden class="anchor" aria-hidden="true" href="#å¤©ç©ºç›’skybox">#</a></h2>
<p>å‡è®¾æˆ‘ä»¬èº«å¤„ä¸€ä¸ªç«‹æ–¹ä½“å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ç«‹æ–¹ä½“å†…éƒ¨ 6 ä¸ªé¢çš„èƒŒæ™¯è´´å›¾ã€‚</p>
<blockquote>
<p>è¿™ä¸å°±æ˜¯æˆ‘ä»¬èº«å¤„æŸä¸ªæˆ¿é—´å†…å—ï¼Ÿ</p>
</blockquote>
<p>è¿™ç±»åº”ç”¨åœºæ™¯ï¼Œé€šå¸¸è¢«ç§°å‘¼ä¸º Skyboxï¼Œä¹Ÿå°±æ˜¯ å¤©ç©ºç›’ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ—¥å¸¸å¬åˆ°å¯¹æœ€å¤šçš„  Web 3D åº”ç”¨ï¼šVR çœ‹æˆ¿</p>
<br>
<p>ä¸Šé¢å¯¹äºå¤©ç©ºç›’çš„è§£é‡Šæ­£ç¡®å—ï¼Ÿ</p>
<p>ç­”ï¼šæ­£ç¡®ä½†ä¸ä¸¥è°¨ï¼</p>
<br>
<p>é€šå¸¸æˆ‘ä»¬æ‰€è¯´å¤©ç©ºç›’(Skybox) ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§å°±æ˜¯ï¼šåƒå¤©ç©ºä¸€æ ·å¤§çš„ç›’å­</p>
<p>è¿›ä¸€æ­¥è§£é‡Šå°±æ˜¯ï¼šè¿™ä¸ªç›’å­ç©ºé—´åƒå¤©ç©ºä¸€æ ·æ— è¾¹æ— é™…ï¼Œæ°¸è¿œä¸åˆ°å¤´ã€‚</p>
<blockquote>
<p>è¯´ç›´ç™½ç‚¹ï¼Œå¤©ç©ºç›’å°±å¥½åƒæˆ‘ä»¬å¹³æ—¶çš„åœºæ™¯(Three.Scene)ï¼Œæ— è®ºç¼©å°åˆ°ä»€ä¹ˆé™åº¦ï¼Œè¿˜æ˜¯æ”¾å¤§åˆ°ä»€ä¹ˆé™åº¦ï¼Œæ°¸è¿œèµ°ä¸å‡ºåœºæ™¯ä¹‹å¤–ã€‚</p>
</blockquote>
<p>è€Œæœ¬æ–‡ä¸‹é¢æ‰€æœ‰çš„ç¤ºä¾‹ï¼Œå…¶å®éƒ½æ˜¯é’ˆå¯¹åœºæ™¯èƒŒæ™¯æ·»åŠ çº¹ç†è´´å›¾ï¼Œæ‰€ä»¥ä¸‹é¢ç¤ºä¾‹ä¸­çš„å¤©ç©ºç›’(skybox)ç©ºé—´ç­‰åŒäºåœºæ™¯æœ¬èº«ã€‚</p>
<br>
<p><strong>å¤©ç©ºç›’ä¸€å…±æœ‰ 2 ç§å½¢å¼çš„è´´å›¾èµ„æºï¼š</strong></p>
<ol>
<li>å…¨æ™¯å›¾(hdri)ï¼Œåˆå å¤©ç©ºå›¾</li>
<li>ç«‹æ–¹ä½“è´´å›¾(cubemap)</li>
</ol>
<br>
<h4 id="ç¬¬1ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•å…¨æ™¯å›¾hdri">ç¬¬1ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•ï¼šå…¨æ™¯å›¾(hdri)<a hidden class="anchor" aria-hidden="true" href="#ç¬¬1ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•å…¨æ™¯å›¾hdri">#</a></h4>
<p>å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬æœ€å®¹æ˜“æƒ³åˆ°çš„å®ç°æ–¹å¼ä¸ºï¼š</p>
<ol>
<li>
<p>æˆ‘ä»¬æŠŠæ•´ä¸ª Three.Screen å½“åšç«‹æ–¹ä½“ï¼Œä¹Ÿå°±æ˜¯å°†æ•´ä¸ªåœºæ™¯å½“åšç«‹æ–¹ä½“</p>
<blockquote>
<p>å†æ¬¡é‡å¤ä¸€éï¼šæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨åœºæ™¯ä¸­åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“ï¼Œè€Œæ˜¯ç›´æ¥å°†æ•´ä¸ªåœºæ™¯å½“åšç«‹æ–¹ä½“</p>
<p>å‡è®¾ä½ è¦ç»™åœºæ™¯ä¸­æŸä¸ªç«‹æ–¹ä½“è®¾ç½®ç±»ä¼¼çš„æ•ˆæœï¼Œé‚£ä¹ˆä½ è¦åšçš„äº‹æƒ…æ˜¯ï¼š</p>
<ol>
<li>
<p>åˆ›å»ºçº¹ç†ï¼Œä½¿ç”¨ç«‹æ–¹ä½“çº¹ç†åŠ è½½å™¨(Three.CubeTextureLoader)åŠ è½½å›¾ç‰‡èµ„æº</p>
</li>
<li>
<p>åˆ›å»ºæè´¨ï¼Œé™¤äº†è®¾ç½®æè´¨çš„çº¹ç†ä¹‹å¤–ï¼Œè¿˜è¦è®¾ç½® .side å±æ€§ï¼Œå°†å€¼ä¸º Three.BackSideï¼Œä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>new MeshPhongMaterial({ map:xxxx, side: Three.BackSide })
</span></span></code></pre></div></li>
<li>
<p>æœ€ç»ˆåˆ›å»ºç«‹æ–¹ä½“ç½‘æ ¼(Three.Mesh)</p>
</li>
</ol>
</blockquote>
<blockquote>
<p>è¯·æ³¨æ„ï¼šç»å¤§å¤šæ•° VR çœ‹æˆ¿ï¼Œéƒ½æ˜¯å°†åœºæ™¯å½“åšç«‹æ–¹ä½“å³å¯ã€‚</p>
</blockquote>
</li>
<li>
<p>æŒ‰ç…§æŒ‡å®šé¡ºåºï¼Œè·å–(åŠ è½½) 6 ä¸ªé¢çš„çº¹ç†è´´å›¾ï¼Œå¾—åˆ°çº¹ç†</p>
<blockquote>
<p>è¯·æ³¨æ„ï¼Œè¿™æ¬¡åŠ è½½æˆ‘ä»¬å¹¶ä¸ä½¿ç”¨ Three.TextureLoaderï¼Œè€Œæ˜¯é‡‡ç”¨ç«‹æ–¹ä½“ä¸“æœ‰çš„çº¹ç†åŠ è½½å™¨ Three.CubeTextureLoader</p>
</blockquote>
</li>
<li>
<p>å°†å¾—åˆ°çš„çº¹ç†ä½œä¸ºåœºæ™¯èƒŒæ™¯</p>
</li>
<li>
<p>è®¾ç½®ç›¸æœºåæ ‡ z çš„å€¼ï¼Œç¡®ä¿æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç‰©ä½“ï¼Œä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>camera.position.set(0, 0, 10)
</span></span></code></pre></div></li>
<li>
<p>ç„¶åæ­£å¸¸æ¸²æŸ“ï¼Œæˆ‘ä»¬å°±ä¼šæ„Ÿè§‰æ­¤åˆ»èº«åœ¨æˆ¿é—´ä¸­</p>
</li>
</ol>
<br>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<p>æˆ¿é—´å›¾ç‰‡ç´ æï¼š</p>
<p>æˆ‘ä»¬ä½¿ç”¨ç½‘ä¸Šæ‰¾åˆ°çš„æŸæˆ¿é—´ 6 ä¸ªé¢çš„çº¹ç†è´´å›¾</p>
<ol>
<li><a href="https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-x.jpg">https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-x.jpg</a></li>
<li><a href="https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-x.jpg">https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-x.jpg</a></li>
<li><a href="https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-y.jpg">https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-y.jpg</a></li>
<li><a href="https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-y.jpg">https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-y.jpg</a></li>
<li><a href="https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-z.jpg">https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-z.jpg</a></li>
<li><a href="https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-z.jpg">https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-z.jpg</a></li>
</ol>
<br>
<p>å®é™…ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>const cubeTextureLoader = new Three.CubeTextureLoader()
</span></span><span style="display:flex;"><span>cubeTextureLoader.load([
</span></span><span style="display:flex;"><span>    &#39;https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-x.jpg&#39;,
</span></span><span style="display:flex;"><span>    &#39;https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-x.jpg&#39;,
</span></span><span style="display:flex;"><span>    &#39;https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-y.jpg&#39;,
</span></span><span style="display:flex;"><span>    &#39;https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-y.jpg&#39;,
</span></span><span style="display:flex;"><span>    &#39;https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/pos-z.jpg&#39;,
</span></span><span style="display:flex;"><span>    &#39;https://threejsfundamentals.org/threejs/resources/images/cubemaps/computer-history-museum/neg-z.jpg&#39;
</span></span><span style="display:flex;"><span>], (texture) =&gt; {
</span></span><span style="display:flex;"><span>    scene.background = texture
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><br>
<p><strong>é’ˆå¯¹è´´å›¾èµ„æºé¡ºåºçš„è¡¥å……è¯´æ˜ï¼š</strong></p>
<p>åœ¨ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŠ è½½ç«‹æ–¹ä½“ 6 é¢å›¾ç‰‡è´´å›¾èµ„æºçš„é¡ºåºæ˜¯å›ºå®šçš„ï¼Œä¾æ¬¡ä¸ºï¼š</p>
<p>pos-x.jpgã€neg-x.jpgã€pos-y.jpgã€neg-y.jpgã€pos-z.jpgã€neg-z.jpg</p>
<br>
<p><strong>&ldquo;pos&rdquo; æ˜¯å•è¯ &ldquo;positive&rdquo; çš„ç¼©å†™ï¼Œåœ¨ 3D åæ ‡ç³»ä¸­æ„æ€æ˜¯ æ­£</strong></p>
<blockquote>
<p>positiveï¼šç§¯æçš„ã€æ­£å‘çš„ã€ä¹è§‚çš„</p>
</blockquote>
<p><strong>&ldquo;neg&rdquo; æ˜¯å•è¯ &ldquo;negative&rdquo; çš„ç¼©å†™ï¼Œåœ¨ 3D åæ ‡ç³»ä¸­æ„æ€æ˜¯ è´Ÿ</strong></p>
<blockquote>
<p>negativeï¼šæ¶ˆæçš„ã€è´Ÿé¢çš„</p>
</blockquote>
<br>
<h3 id="å·¦æ‰‹åæ ‡ç³»ç»Ÿ-vs-å³æ‰‹åæ ‡ç³»ç»Ÿ">å·¦æ‰‹åæ ‡ç³»ç»Ÿ VS å³æ‰‹åæ ‡ç³»ç»Ÿ<a hidden class="anchor" aria-hidden="true" href="#å·¦æ‰‹åæ ‡ç³»ç»Ÿ-vs-å³æ‰‹åæ ‡ç³»ç»Ÿ">#</a></h3>
<p>æˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹ å³æ‰‹åæ ‡ç³»ç»Ÿï¼Œä½ å°±è‡ªç„¶æ˜ç™½ä»€ä¹ˆæ˜¯å·¦æ‰‹åæ ‡ç³»ç»Ÿäº†ã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹ç™¾åº¦ç™¾ç§‘çš„ä»‹ç»ï¼š</p>
<p>å³æ‰‹ç³»(right-hand system)æ˜¯åœ¨ç©ºé—´ä¸­è§„å®šç›´è§’åæ ‡ç³»çš„æ–¹æ³•ä¹‹ä¸€ã€‚æ­¤åæ ‡ç³»ä¸­xè½´ï¼Œyè½´å’Œzè½´çš„æ­£æ–¹å‘æ˜¯å¦‚ä¸‹è§„å®šçš„ï¼šæŠŠå³æ‰‹æ”¾åœ¨åŸç‚¹çš„ä½ç½®ï¼Œä½¿å¤§æ‹‡æŒ‡ï¼Œé£ŸæŒ‡å’Œä¸­æŒ‡äº’æˆç›´è§’ï¼ŒæŠŠå¤§æ‹‡æŒ‡æŒ‡å‘xè½´çš„æ­£æ–¹å‘ï¼Œé£ŸæŒ‡æŒ‡å‘yè½´çš„æ­£æ–¹å‘æ—¶ï¼Œä¸­æŒ‡æ‰€æŒ‡çš„æ–¹å‘å°±æ˜¯zè½´çš„æ­£æ–¹å‘ã€‚</p>
<br>
<p>åŒæ ·çš„æ“ä½œä½ æ¢åšå·¦æ‰‹ï¼Œé‚£ä¹ˆå°±æ˜¯å·¦æ‰‹åæ ‡ç³»ç»Ÿã€‚</p>
<p><strong>å·¦æ‰‹åæ ‡ç³»ç»Ÿå’Œå³æ‰‹åæ ‡ç³»ç»Ÿåœ¨ Y è½´ã€Z è½´ æ–¹é¢æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯åœ¨ X è½´ä¸Šæ˜¯å½¼æ­¤ç›¸åçš„ã€‚</strong></p>
<br>
<p><strong>å¯¹äºç«‹æ–¹ä½“è´´å›¾ï¼Œä½¿ç”¨çš„æ˜¯å·¦æ‰‹ç³»ç»Ÿï¼</strong></p>
<p>å› æ­¤ä¸Šé¢å›¾ç‰‡åç§°çš„å«ä¹‰ä¸ºï¼š</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>å«ä¹‰</th>
<th>å¯¹åº”ç«‹æ–¹ä½“å†…éƒ¨çš„é¢æ¥è¯´</th>
<th>å¯¹äºç«™åœ¨ç«‹æ–¹ä½“å†…éƒ¨ä¸­é—´çš„äººæ¥è¯´</th>
</tr>
</thead>
<tbody>
<tr>
<td>pos-x</td>
<td>X è½´æ­£æ–¹å‘</td>
<td>å·¦é¢</td>
<td>è§†è§‰å·¦æ–¹</td>
</tr>
<tr>
<td>neg-x</td>
<td>X è½´è´Ÿæ–¹å‘</td>
<td>å³é¢</td>
<td>è§†è§‰å³æ–¹</td>
</tr>
<tr>
<td>pos-y</td>
<td>Y è½´æ­£æ–¹å‘</td>
<td>ä¸Šé¢</td>
<td>è§†è§‰ä¸Šæ–¹</td>
</tr>
<tr>
<td>neg-y</td>
<td>Y è½´è´Ÿæ–¹å‘</td>
<td>ä¸‹é¢</td>
<td>è§†è§‰ä¸‹æ–¹</td>
</tr>
<tr>
<td>pos-z</td>
<td>Z è½´æ­£æ–¹å‘</td>
<td>åé¢</td>
<td>è§†è§‰åæ–¹</td>
</tr>
<tr>
<td>neg-z</td>
<td>Z è½´è´Ÿæ–¹å‘</td>
<td>å‰é¢</td>
<td>è§†è§‰å‰æ–¹</td>
</tr>
</tbody>
</table>
<blockquote>
<p>è¯·æ³¨æ„ï¼Œç«‹æ–¹ä½“çš„å‰é¢æˆ–åé¢å®Œå…¨æ˜¯ç”±è§‚å¯Ÿè€…æ‰€å¤„çš„ä½ç½®æ¥å†³å®šçš„ã€‚</p>
<p>å¦‚æœä½ åœ¨ç«‹æ–¹ä½“å¤–é¢å»çœ‹ç«‹æ–¹ä½“ï¼Œé‚£ä¹ˆæ­£é¢çœ‹åˆ°çš„æ˜¯ç«‹æ–¹ä½“çš„æ­£é¢ï¼Œçœ‹ä¸åˆ°çš„æ˜¯ç«‹æ–¹ä½“çš„èƒŒé¢ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬ç°åœ¨åšçš„æ˜¯ç«™åœ¨ç«‹æ–¹ä½“å†…éƒ¨å»è§‚å¯Ÿç«‹æ–¹ä½“ï¼Œæ‰€ä»¥æ­¤åˆ» â€œç«‹æ–¹ä½“çš„æ­£é¢â€ å®é™…ä¸Šå¯¹äºæˆ‘ä»¬è§‚å¯Ÿè€…è€Œè¨€æ˜¯åœ¨æˆ‘ä»¬èº«åï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„è§†è§‰åæ–¹ã€‚</p>
</blockquote>
<br>
<p><strong>å¯¹äºThree.jsæ¸²æŸ“ä½¿ç”¨çš„æ˜¯ å³æ‰‹åæ ‡ç³»ç»Ÿï¼</strong></p>
<p><strong>ä¸è¿‡ä½ ä¸ç”¨æ‹…å¿ƒå·¦å³æ–¹å‘ç›¸åè¿™ä¸ªäº‹æƒ…ï¼Œå› ä¸ºåœ¨ Three.js å†…éƒ¨åœ¨æ¸²æŸ“çš„æ—¶å€™ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å°†å·¦å³å¯¹è°ƒã€‚</strong></p>
<blockquote>
<p>é‡å¤ä¸€éï¼š</p>
<ol>
<li>ä¸€èˆ¬ç«‹æ–¹ä½“æ¨¡å‹è´´å›¾ä½¿ç”¨å·¦æ‰‹åæ ‡ç³»ç»Ÿ</li>
<li>Three.js æ•´ä½“ä½¿ç”¨å³æ‰‹åæ ‡ç³»ç»Ÿ</li>
<li>ä½†åœ¨æ¸²æŸ“ç«‹æ–¹ä½“å†…éƒ¨è´´å›¾æ—¶ï¼ŒThree.js ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åšå¥½å·¦å³å…‘æ¢</li>
<li>å› æ­¤æˆ‘ä»¬åœ¨ä¼ é€’çº¹ç†è´´å›¾æ—¶ï¼Œè´´å›¾é¡ºåºä½¿ç”¨çš„æ˜¯å·¦æ‰‹åæ ‡ç³»ç»Ÿ</li>
</ol>
</blockquote>
<br>
<blockquote>
<p>ç³Ÿç³•ï¼Œæˆ‘ä¹Ÿæ˜¯ä»Šå¤©å­¦ä¹ åˆ°è¿™é‡Œæ‰å½»åº•æ˜ç™½åæ ‡ç³»ç»Ÿï¼Œæˆ‘å¯èƒ½åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­å¯¹äº ä¸Šä¸‹å·¦å³å‰å è®²è§£é”™äº†ï¼Œä½†æ˜¯æˆ‘æš‚æ—¶è®°ä¸æ¸…æ˜¯å“ªä¸€ç« èŠ‚ã€‚</p>
</blockquote>
<br>
<h4 id="ç¬¬2ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•ç«‹æ–¹ä½“è´´å›¾cubemap">ç¬¬2ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•ï¼šç«‹æ–¹ä½“è´´å›¾(cubemap)<a hidden class="anchor" aria-hidden="true" href="#ç¬¬2ç§å®ç°å¤©ç©ºç›’çš„æ–¹æ³•ç«‹æ–¹ä½“è´´å›¾cubemap">#</a></h4>
<p>æˆ‘ä»¬ç¬¬1ç§å®ç°å¤©ç©ºç›’ï¼Œå®é™…ä¸Šä½¿ç”¨çš„æ˜¯ 6 ä¸ªé¢çš„å›¾ç‰‡èµ„æºç»„åˆæˆäº†ä¸€ä¸ª 3D ç©ºé—´ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ ä½¿ç”¨ä¸€å¼  360Â° çƒå½¢ç›¸æœºæ‹æ‘„çš„ç…§ç‰‡ï¼Œæ¥å®ç° 3D ç©ºé—´ç«‹æ–¹ä½“ã€‚</p>
<br>
<p>é¦–å…ˆä½ ä»ç½‘ä¸Šæ‰¾åˆ°ä¸€å¼  360Â° çš„åœºæ™¯å›¾ç‰‡èµ„æºï¼š</p>
<p><a href="https://threejsfundamentals.org/threejs/resources/images/equirectangularmaps/tears_of_steel_bridge_2k.jpg">https://threejsfundamentals.org/threejs/resources/images/equirectangularmaps/tears_of_steel_bridge_2k.jpg</a></p>
<blockquote>
<p>è¯·æ³¨æ„ï¼Œè¿™ç±»å›¾ç‰‡å°ºå¯¸å®½é«˜æ¯”ä¾‹ä¸º 2:1ï¼Œç»å¸¸ç§°å‘¼è¿™ç±»å›¾ç‰‡ä¸º â€œå…¨æ™¯å›¾â€</p>
</blockquote>
<br>
<p><strong>å®ç°æ€è·¯ï¼š</strong></p>
<ol>
<li>
<p>ä½¿ç”¨çº¹ç†åŠ è½½å™¨åŠ è½½è¯¥å›¾ç‰‡èµ„æº</p>
<blockquote>
<p>è¿™ç§ 2:1 çš„å›¾ç‰‡ï¼Œè¢«ç§°ä¸º â€œç­‰çŸ©å½¢å›¾åƒâ€</p>
</blockquote>
</li>
<li>
<p>å®ä¾‹åŒ–ä¸€ä¸ª Three.WebGLCubeRenderTargetï¼Œæ„é€ å‡½æ•°ä¸­çš„ size å±æ€§ä¸ºå›¾ç‰‡èµ„æºçš„é«˜</p>
<blockquote>
<p>WebGLCubeRenderTarget ç»§æ‰¿äº WebGLRenderTargetï¼Œå±äºç¦»å±æ¸²æŸ“çš„ä¸€ç§ç‰¹ä¾‹(ä¸“é—¨é’ˆå¯¹ç«‹æ–¹ä½“æ¨¡å‹)</p>
</blockquote>
<blockquote>
<p>åœ¨ WebGLRenderTarget çš„æºç ä¸­å¯ä»¥çœ‹åˆ°è¿™å¥ä»£ç ï¼šsuper( size, size, options );</p>
<p>WebGLRenderTarget æ„é€ å‡½æ•°éœ€è¦ä¼ é€’ width å’Œ heightï¼Œä½†æ˜¯ WebGLCubeRenderTarget æ„é€ å‡½æ•°åªéœ€ä¼ å…¥ 1 ä¸ª sizeï¼Œå› ä¸ºæ­£æ–¹ä½“ï¼Œæ‰€ä»¥å®½é«˜ä¸€æ ·ã€‚</p>
</blockquote>
</li>
<li>
<p>è°ƒç”¨è¯¥å®ä¾‹åŒ–å¯¹è±¡çš„ fromEquirectangularTexture() å‡½æ•°</p>
<blockquote>
<p>å°†ç­‰è·å›¾åƒ è½¬åŒ–ä¸º ç«‹æ–¹ä½“æ¨¡å‹è´´å›¾</p>
<blockquote>
<p>å¯ä»¥ç®€å•ç†è§£æˆï¼šå°±æ˜¯å°† 1 æ•´å¼ å›¾ç‰‡è½¬åŒ–ä¸º 6ä¸ªé¢çš„ç«‹æ–¹ä½“æ¨¡å‹è´´å›¾ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“</p>
</blockquote>
</blockquote>
</li>
<li>
<p>å°†åœºæ™¯èƒŒæ™¯è®¾ç½®ä¸ºè¯¥å®ä¾‹å¯¹è±¡</p>
<blockquote>
<p>è¿™æ ·ç›¸å½“äºå°†åœºæ™¯èƒŒæ™¯å›¾çš„å€¼è®¾ç½®ä¸º WebGLCubeRenderTarget  çš„æ¸²æŸ“ç»“æœ</p>
</blockquote>
</li>
</ol>
<br>
<p><strong>å…·ä½“ä»£ç ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#3c3836;background-color:#fbf1c7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>const textureLoader = new Three.TextureLoader()
</span></span><span style="display:flex;"><span>textureLoader.load(require(&#39;@/assets/imgs/tears_of_steel_bridge.jpg&#39;).default,
</span></span><span style="display:flex;"><span>    (texture) =&gt; {
</span></span><span style="display:flex;"><span>        const crt = new Three.WebGLCubeRenderTarget(texture.image.height)
</span></span><span style="display:flex;"><span>        crt.fromEquirectangularTexture(renderer,texture)
</span></span><span style="display:flex;"><span>        scene.background = crt.texture
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><blockquote>
<p>è¡¥å……è¯´æ˜ï¼šscene.background çš„ç±»å‹ä¸º WebGLBackground</p>
<p>è¯·ç•™æ„ä¸Šè¿°ä»£ç ä¸­ <code>scene.background = crt.texture</code>ï¼Œäº‹å®ä¸Šåœ¨ä»¥å‰çš„ä¸€äº›æ•™ç¨‹ä¸­å¯ä»¥å†™æˆ <code>scene.background = crt</code>ï¼ŒWebGLBackground ä¼šåœ¨å†…éƒ¨è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœ background ç±»å‹ä¸º WebGLRenderTargetï¼Œåˆ™ä½¿ç”¨è¯¥å®ä¾‹çš„ .texture å±æ€§å€¼ã€‚</p>
<p>ä½†æ˜¯åœ¨æœ€æ–°ç‰ˆ r127 ä¸­å·²ç»åˆ é™¤äº†è¯¥åˆ¤æ–­ä»£ç ï¼Œæ‰€ä»¥ç°åœ¨å¿…é¡»å†™æˆ <code>scene.background = crt.texture</code>ã€‚</p>
<p>å°±è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å·²å‘å®˜ç½‘æ•™ç¨‹è¿›è¡Œäº†ä¿®æ”¹æäº¤ï¼š<a href="https://github.com/gfxfundamentals/threejsfundamentals/pull/205">https://github.com/gfxfundamentals/threejsfundamentals/pull/205</a></p>
</blockquote>
<br>
<h3 id="è¡¥å……è¯´æ˜å…¨æ™¯å›¾hdri-ä¸-ç«‹æ–¹ä½“è´´å›¾cubemap-äº’è½¬">è¡¥å……è¯´æ˜ï¼šå…¨æ™¯å›¾(hdri) ä¸ ç«‹æ–¹ä½“è´´å›¾(cubemap) äº’è½¬<a hidden class="anchor" aria-hidden="true" href="#è¡¥å……è¯´æ˜å…¨æ™¯å›¾hdri-ä¸-ç«‹æ–¹ä½“è´´å›¾cubemap-äº’è½¬">#</a></h3>
<p>ç½‘ä¸Šæœ‰äººæä¾›äº† å…¨æ™¯å›¾ä¸ç«‹æ–¹ä½“æ¨¡å‹å›¾ ä¹‹é—´çš„è½¬åŒ–å·¥å…·åŒ…ï¼š</p>
<p>åœ¨çº¿åœ°å€ï¼š<a href="https://matheowis.github.io/HDRI-to-CubeMap/">https://matheowis.github.io/HDRI-to-CubeMap/</a></p>
<p>é¡¹ç›®æºç ï¼š<a href="https://github.com/aunyks/hdri-to-cubemap">https://github.com/aunyks/hdri-to-cubemap</a></p>
<br>
<p>ä½ ä»¥ä¸ºæœ¬æ–‡ç»“æŸäº†ï¼Ÿæ²¡æœ‰ï¼</p>
<p>æˆ‘ä»¬ä¸Šé¢ç¤ºä¾‹éƒ½æ˜¯ å¤©ç©ºç›’(skybox)ï¼Œé‚£å¦‚æœæ˜¯çœŸçš„ä¸€ä¸ªç«‹æ–¹ä½“å‘¢ï¼Ÿ</p>
<blockquote>
<p>å¤©ç©ºç›’ æ˜¯æ²¡æœ‰å°ºå¯¸ï¼Œç©ºé—´æ— é™å¤§çš„ï¼Œè€Œæ™®é€šç«‹æ–¹ä½“åˆ™æ˜¯æœ‰å°ºå¯¸çš„ã€‚</p>
</blockquote>
<p>ä¸‹é¢ç¤ºä¾‹æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“ï¼Œç„¶åå¯¹ç«‹æ–¹ä½“å†…éƒ¨è¿›è¡Œè´´å›¾ï¼Œå¹¶æ¸²æŸ“å’Œè§‚å¯Ÿç«‹æ–¹ä½“ç›’å­å†…éƒ¨ã€‚</p>
<br>
<h2 id="æ™®é€šç«‹æ–¹ä½“å†…éƒ¨è´´å›¾å’Œæ¸²æŸ“">æ™®é€šç«‹æ–¹ä½“å†…éƒ¨è´´å›¾å’Œæ¸²æŸ“<a hidden class="anchor" aria-hidden="true" href="#æ™®é€šç«‹æ–¹ä½“å†…éƒ¨è´´å›¾å’Œæ¸²æŸ“">#</a></h2>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://bablvsj.github.io/tags/three.js/">Three.js</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://bablvsj.github.io/posts/threejs/24-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E5%8A%A0%E8%BD%BD.gltf%E6%A8%A1%E5%9E%8B/">
    <span class="title">Â« Prev</span>
    <br>
    <span>24 Three.jsè§£å†³æ–¹æ¡ˆä¹‹åŠ è½½.gltfæ¨¡å‹</span>
  </a>
  <a class="next" href="https://bablvsj.github.io/posts/threejs/26-three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E9%80%8F%E6%98%8E%E5%BA%A6bug/">
    <span class="title">Next Â»</span>
    <br>
    <span>26 Three.jsè§£å†³æ–¹æ¡ˆä¹‹é€æ˜åº¦bug</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://bablvsj.github.io">Bablvsj&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
    <div class="flex-c-d">
        <a class="flex-d-c" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"
            target="_blank"> <span>æœ¬ç«™ç”±</span><img width="60" src="/images/upyun.png">æä¾›CDNåŠ é€Ÿ/äº‘å­˜å‚¨æœåŠ¡</a>
    </div>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script></body>

</html>
